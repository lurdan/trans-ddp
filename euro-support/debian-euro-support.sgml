<!DOCTYPE debiandoc PUBLIC "-//DebianDoc//DTD DebianDoc//EN">

<!-- TODO
Check www.gulic.org/doc/ (euro-howto)
Talk on chedit program? There is an article on Linux Journal april 2000
regarding its use to have the fonts euro-ready
-->

<debiandoc>
<book>
<titlepag>
<title>Debian Euro HOWTO</title>
<author>Javier Fernández-Sanguino Peña</author>
<version>0.2</version>
<copyright>(c) 2001 Javier Fernández-Sanguino Peña. This document
is distributed under the terms of the GNU Free Documentation
License, please see www.gnu.org for more information</copyright>
</titlepag>


<toc detail="sect">

<chapt>Introduction to this HOWTO

<sect>Why euro support?

<p>Starting January 1st 2002, all the countries in the euro-zone 
(most of Europe) will start to use the Euro as the 
common currency. Thus, all prices will be
shown in Euros and all monetary transactions will use the
(not so new) currency. Computers, of course, need to 
correctly represent the euro in order for users to make their 
own documents (invoices, spreadsheets or whatever)
using this currency, and read other's documents that use it.
As the <url id="http://europa.eu.in/euro/information_society"
name="European Comission guidelines"> state, operating
systems need to be ready to represent this character.

<sect>How is the euro symbol?
<p>The official (ISO-compliant) abbreviature for the euro is EUR
and can be used as representation for the currency.

<p>The euro symbol is an 'E' with two parallel horizontal lines
that go straight through it. It is inspired in the greek's epsilon 
letter, in honor of the birth of Europe civilization. Also, the
horizontal lines are said to represent the currency's
stability.

<sect>Standards
<p>The euro definition is part of some <url id="http://www.isoc.org"
name="ISO"> standards:
<list>
<item>The EUR currency code (numeric code 978) is a part of the 
ISO-4217 standard.
<item>For 8-bit systems, the ISO/IEC defines the new charset
8859-15 (also known as latin 9) where the euro symbol substitutes
the international currency symbol in the 164 position (hex A4)
<item>The <url id="http://www.unicode.org" name="Unicode">
 system uses a 16 bit symbol, the euro has been
assigned 8364 (hex 20AC) as part of ISO/IEC-10646-1
<item>The screen representation (font) for the euro is part of the
ISO/IEC-10036 standard. The glyph is the real representation (bit 
pattern) of the character. The euro is assigned the 8059 glyph.
<item>The World Wide Web Consortium uses &amp;EURO; as the representation
for the symbol in HTML 4.0
</list>

<!-- FIXME: check url -->
<p>The European Comission has published in its 
<url id="http://members.nbci.com/secaria/eukeyb.pdf" name="official
recommendations"> both short term and long term fixes for the euro character.
The short term solution is fixed by having keyboards input the euro character
through the AltGr+E combination
(AltGr is the 'Alt' key to the right of the spacebar), 
the long term solution considers using
a new key for the euro character. Most keyboard manufacturers have only 
implemented the short-term solution by including an euro representation under
the 'E' key. The operating system must take this input and convert it into
the euro symbol internally. However:

<list>
<item>The international US keyboard and the greek latin use AltGr+5 and
Ctrl+Alt+5 for euro representation.
<item>The greek keyboard uses AltGr+? for euro representation.
<item>The english and irish keyboards use the combinations AltGr+4 and
Ctrl+Alt+4
<item>The hungarian and polsih keyboards use the AltGr+U combination.
</list>

<p>In this document, however, most examples will assume that the euro symbol
will be generated by typing AltGr+E (the <tt>euro-test</tt> program
assumes this too).

<sect>Is Debian euro-ready?
<p>The Debian operating system can be properly configured to 
show the euro character, both in console and in the X windowing
system since the 2000 release Debian 2.2 (aka 'potato'). However,
many users have not properly configured that support since then,
and there are some caveats in configuration that have not been
completely fixed until Debian woody (future 3.0).

<sect>Why all this fuzz for just one character?
<p>The problem is that changing the character involve a change
in the font map used by the user. The font map is the list of
character representations used by the system. Currently, most
users in the euro-zone use the latin1 font map. The font map,
however, is limited. The euro character is introduced by
removing another character from the font map and calling this
replacement a new font map.
Latin9 (ISO-8859-15 or codepage 924 for IBM, usually shortened to latin0)
replaces Latin1 (ISO-8859-1), and Latin10 (ISO-8859-16) replaces Latin2 
(however Czech is not fully covered in Latin10 so it's not a full replacement,
and it does cover Romanian which Latin2 didn't).

<p>Latin9 differs from Latin1 in eight positions: A4, A6, A8, B4, B8,
BC, BD, BE where Euro, Scaron, scaron, Zcaron, zcaron,
OEligature, oeligature and Ydiaeresis, are defined.

<p>Of course, users already using UTF-8 fonts are not affected
by this problem since there is not limit on the number of characters
there. However, Unicode support is currently far for complete.
For more information read <url id="http://www.cs.usyd.edu.au/~matty"
name="Unicode in X-Windows">.

<sect>Why this document?

<p>I (Javier) have been thinking for a time on how to provide
automatic configuration of the euro issue on the lines of the
automatic stuff done by <tt>castellanizar</tt> in <package>user-es</package>.
After going through some information on the problem and reading
some threads in debian related mailing lists like
<url id="http://lists.debian.org/debian-i18n/2001/debian-i18n-200109/msg00018.html" name="debian-i18n">,
<url id="http://lists.debian.org/debian-devel/2001/debian-devel-200105/msg00696.html" name="debian-devel">
and
<url id="http://lists.debian.org/debian-user-spanish/2001/debian-user-spanish-200105/msg00488.html" name="debian-user-spanish">, I decided to
post a poll to test how euro support was amongst spanish-speakers
(<url id="http://lists.debian.org/debian-user-spanish/2001/debian-user-spanish-200110/msg01265.html" name="in debian-user-spanish">). The results
indicated that many people did not have properly configured there
systems even if Debian 2.2 (released more than a year ago) was ready
for the euro problem.
<p>This document is the first step towards writing an automated tool
to configure the user system for full euro support. Even if this could
be done when Debian users move to UTF-8 there is a need of a short term
solution before that move comes about.

<sect>Changelog

<p>List of changes done to this document.
<list>
<item>Changes in 0.3
<list>
<item>Added information regarding LaTeX provided by Juan Rafael Fernández
<item>Added more information and fixes contributed by Eduard Bloch.
</list>
<item>Changes in 0.2 
<list>
<item>added more information regarding euro standards
<item>added links to mailing list threads
<item>fixed some typos
</list>
</list>


<chapt>Automatic configuration 

<sect>The euro-support package
<p>The euro-support package is an attempt to provide appropiate
configuration to represent the euro character easily in the Debian
GNU/Linux operating system. This package provides this configuration
in two ways:

<list>
<item>Depending on the appropiate packages needed in order to have
euro support.
<item>Configuring the system upon installation in order to provide
euro support.
</list>

<p>NOTE: The second part is not yet built-in <package>euro-support</package>.

<sect>The euro-test program
<p>Together with <package>euro-support</package> there is a test
program provided in order for the user to see if the euro symbol
is properly represented in his system. This program has been
written in order to test if the system configuration is appropiate
and works both for the text console and the X graphic environment.
Although developed for the Debian GNU/Linux system it can be 
used in other GNU/Linux operating systems in order to test for the
euro support.
<p>The goal of the program is to determine if/why the user's system
provides the euro symbol. The information gathered could be used
to manually configure the system properly together with this document.

<chapt>Configuring euro support

<sect>Initial considerations
<p>Configuring euro support in a system involves two steps, which
should be pretty simple:

<list>
<item>have a font available that represents euros.
<item>provide a mechanism for the keyboard to send the euro character.
</list>

<p>The mechanism approved in the euro zone for the euro symbol generation
in keyboards, which is represented in modern keyboards it the 
AltGr+e combination for the euro currency and AltGr+c for the cent.

<p>The easy way to configure a console in a Debian system is to
install the <package>fonty</package> provided since Debian 2.2 and
tell it to use iso15 fonts. This fonts will include the euro character
and the package will configure properly the configuration files needed.
You will need, however, to configure the keyboard mappings (see below).


<sect>Configuring the Console

<p>Configuring the text console in order to have the euro symbol ready
is simple. The following will work in a Debian GNU/Linux system:
<example>
$ loadkeys euro.inc
$ consolechars -f lat0-16.psf
</example>

<p>However, this changes are lost after reboot. In order to make them
permanent, some changes need to be done to the configuration files
of Debian packages.

<sect1>Configuring the console keyboard

<p>Changing the key mappings involves changing the 
<file>/etc/console-tools/default.map.gz</file> or the
<file>/etc/kbd/default.map.gz</file>. Usually, this keymap is
changed by using <tt>keybconfig</tt>, since it is loaded before any filesystem
is mounted, you cannot change it directly (for example by adding 
<tt>include euro</tt> there) since it might not be able to load extensions 
(since they are located at <file>/usr/share/keymaps</file>). 
In order to have euro support,
if your keymap currently does not have one you will have to modify an
existing one. Here is an example on how to change the spanish keymap
to support euro characters (the kbdconfig will ask some questions,
only the answers are shown below):

<example>
$ cd /usr/share/keymaps/i386/qwerty
$ cp es.kmap.gz es-euro.kmap.gz
$ gzip -d es-euro.kmap.gz
$ echo "include \"euro\"" >>es-euro.kmap
$ echo "altgr keycode  46 = cent" >>es-euro.kmap
$ gzip es-euro.kmap
$ kbdconfig
-----ANSWERS:
n
i386
qwerty
es-euro
y
y
$ zgrep "keycode  18" /etc/console-tools/default.kmap.gz
keycode  18 = +e                +E                currency         Control_e
    Control_e        Meta_e           Meta_E           Meta_Control_e
</example>

<p>FIXME: A bug should be opened against console-data in order to include
this by default in all the euro-zone language maps.

<sect1>How the keyboard is loaded in Debian
<p>The <package>console-common</package> in Debian woody installs
<file>/etc/init.d/keymap.sh</file> which runs <tt>loadkeys</tt>
of console-tools (using <file>/etc/console-tools/default.map.gz</file>) or 
kbd (using <file>/etc/console/boottime.kmap.gz</file>. This file
has been generated using <tt>/usr/sbin/install-keymap</tt>.

<p>When a system boots up it runs
<file>/etc/rcS.d/S05keymap.sh</file>  (for kbd)
or <file>/etc/rcS.d/S05keymap-lct.sh</file>  (for console-tools)
which installs the appropiate keymap. Both scripts will make either
<file>/etc/init.d/keymap.sh</file> 
or <file>/etc/init.d/S05keymap-lct.sh</file> 
being called with the 'start' option.

<sect1>Configuring the console fonts
<p>In order to do this automatically when the system is started, the
superuser has to change some of the configuration files. If the system
is using the <package>console-tools</package> package, then the
<file>/etc/console-tools/config</file> file will be present. In order
to load the appropiate font 
you need to include the line:
<example>
SCREEN_FONT=lat0-16
APP_CHARSET_MAP=iso15
</example>

<p>If you are using the <package>kbd</package> package you will need
to edit the <file>/etc/kbd/config</file> adding, for example:
<example>
CONSOLE_FONT=lat0-16.psfu.gz
# CONSOLE_MAP=iso15
CONSOLE_MAP=8859-15_to_uni
</example>

<P>Of course, the <tt>lat0-16</tt> font is not the only one available,
sine the console-data package version 1999.08.29-11.1, there are quite
a number of latin9 (aka. latin0) fonts available at 
<file>/usr/share/consolefonts</file>. Some other people prefer the
<tt>lat0-sun16</tt> font, it's just a matter of taste.

<P>NOTE: If you are using the framebuffer device for console text,
read the note regarding console-tools configuration in the 
<file>/etc/console-tools/config</file> file. Basicly, the global
definition will only work for the first virtual terminal, you need
to explicitly state the font for the other terminals like this:

<example>
SCREEN_FONT_vc1=lat0-16
SCREEN_FONT_vc2=lat0-16
SCREEN_FONT_vc3=lat0-16
....
</example>


<sect>Configuring the X environment

<p>For the graphic environment to represent euros you need also to have:

<list>
<item>fonts which include the euro symbol
<item>proper configuration of the keyboard
</list>

<P>Xfree includes euro-ready fonts since version 3.3.3.1, like, for
example 7x13euro.bdf or 7x13euroB.bdf. However, the user might not
have them installed since ISO-8859-15 fonts are not part of the default 
(basic) Xfree installation

<sect1>Keyboard configuration

<p>The keyboard configuration here is easier that in console.
If you are using the Xkb extensions in the X server (the default since 
3.3.5) you can change it using the 
<tt>XkbLayout</tt> option in the <tt>InputDevice</tt> section  of the
X configuration file (which is <file>/etc/X11/XF86Config</file> 
for Xfree 3.3.6 and <file>/etc/X11/XF86Config-4</file> for Xfree 4.1)

<p>If you are using Debian woody (3.0), which includes XFree 4.1,
you only need to have it properly configured to a language in the euro zone,
then inputting the euro symbol should work correctly 
(if not please file a bug). If you
are using versions equal to, or  prior to Debian potato (2.2),
the language definition might not be properly defined. If an upgrade 
to a newer version of Xfree is not possible, there are several ways 
you can add support for the euro definition:
NOTE: the locales setting must be done before Xsession starts, 
so make sure that your configuration is loaded properly before 
executing <tt>startx</tt> (if you are using an XDM application such
as <tt>gdm</tt> you can choose the settings from it).

<list>
<item> by changing the xkb extensions included in the X server.
<item> by loading a new modmap (xmodmap)
</list>

<p>On Debian 2.2 you can change the Xkb extensions
(<file>/usr/X11R6/lib/X11/xkb/symbols</file>) to include currency support
with something along the lines of 
<example>
  key &lt;AD03&gt; {        [                 e,    E               ],
                      [        currency,      currency        ]       };
</example>

<p>Or, you can change your Xmodmap definition with:
<example>
$ echo "keycode 0x1A = e  E currency currency" | xmodmap -
</example>
If this works, it's a temporary fix, after restarting the server
this will get lost. In order to have this definition loaded on startup
you have to add the following definition to your 
<file>Xmodmap</file> by doing:
<example>
$ xmodmap -pke > ~/.xmodmap
</example>

<p>You can also use the  definitions available at the 
<file>/usr/share/xmodmap/</file>
directory (change the file appropiate to your language) if you are
not using Xkb extensions. Check that the line 
related to the <tt>keycode 26</tt> (E character)
looks like the following line:
<example>
keycode  26 = e E currency
</example>

<p>Debian 2.2 Xmodmap definitions of the languages in the euro zone contain
the euro character, so you can use the following 
<tt>xmodmap /usr/share/xmodmap/xmodmap.XX</tt> (XX is the language you
want to use).

<p>NOTE: Xmodmap is obsolete, please use the Xkb extensions. Future releases
of Xfree might not even support user's defined xmodmaps.

<sect1>Font configuration
<p>In order to represent the euro symbol in X you need to have 
appropiate fonts to represent the ISO-8859-15 encoding (if not using
UTF). You can see which fonts could be used for this by doing:
<example>
$ xlsfonts | grep iso8859-15$`
</example>

<p>In a default Debian installation, the only font that provides
this encoding is the fixed(misc) fonts, which might be proper
for an xterm but might not show up nice in many other applications.
However, Debian woody provides with the transcoded package fonts
(<package>xfonts-base-transcoded</package>,
<package>xfonts-75dpi-transcoded</package>, and
<package>xfonts-100dpi-transcoded</package>) which includes
other ISO-8859-15 fonts. This package might be a little bit too
heavy (around 15 Mb) for some installations, but if not do install
it (<tt>apt-get install 'xfonts.*transcoded'</tt>). If the
size of this pacakge is too much there is a hacked version of these
packages with all non-15 fonts removed (less than 3Mb in size)
it is provided at 
<url id="http://sites.inka.de/W1752/reduced-xfonts/"> but they
are not part of the standard Debian distribution.

<p>FIXME if users really need this the transcoded packages should
be broken in two.


<p>Please note that if you are using Debian 2.2 you cannot install
this packages without a system upgrade since they depend on Xfree 4.



<p>The following packages also provided ISO-8859-15 fonts:
xfonts-jmk, xfonts-arphic-bsmi00lp, xfonts-arphic-gbsn00lp,
xfonts-arphic-bkai00mp and xfonts-arphic-gkai00mp.

<p>The <package>xfonts-cyrillic</package> package provides also
(in the Xfree 3.3.6) also some ISO-8859-15 fonts. 
<p>FIXME: Verify this last statement (seems to due to the 
data sent to me from users of the euro-test program)

<p>NOTE: Be sure you do not have a default definition for another
font in your <file>.Xdefaults</file> file. For example with
<example>
*VT100.font: -misc-fixed-medium-r-semicondensed--13-120-75-75-c-60-iso8859-16
</example>

<p>If you cannot find any fonts you can use the ISO10646-1 fonts
which are a superset of the different ISO8859-X fonts and are 
also provided in Debian. 
Markus Kuhn provides a script called <tt>ucs2any.pl</tt> which states:

<example>
        This Perl script allows you to generate from an ISO10646-1 encoded
        BDF font other BDF fonts in any possible encoding. This way, you can
        derive from a single ISO10646-1 master font a whole set of 8-bit
        fonts in all ISO 8859 and various other encodings.
</example>

<p>There are Unicode fonts for X-windows available
at <url id="http://www.cl.cam.ac.uk/~mgk25/ucs-fonts.html">.
In ucs-fonts.tar.gz and ucs-fonts-75dpi100dpi.tar.gz there are Times,
Helvetica, Lucida, Utopia, New Century, Schoolbook, Courier... fonts that can 
be used. You can also use the <tt>yudit</tt> program to change these 
fonts.


<P>FIXME: Are there ucs packages in Debian?

<chapt>Euro support in applications

<p>FIXME: Text needed

<sect>Why talk about applications?
<p>Even if you have the euro symbol working correctly (you can input
it from the keyboard and see it on your screen) you still need to
see if your applications work properly. Most problems here arise
in graphic applications which might use their own fonts and might,
therefore, be unable to represent the euro symbol (even if you input
it correctly) because they do not have an internal representation for it.
<p>Hint: you could make your life easier if you run a font selector program
like <tt>gtkfontsel</tt> (<package>gtkfontsel</package> package) 
and you set the mask of visible fonts to ISO-8859-15.


<sect>Xterm
<p>You can change the Xterm default font by changing either the users'
.Xdefaults of the system-wide configuration at 
<file>/etc/X11/app-defaults/XTerm</file>
<example>
*font:     -misc-fixed-medium-r-normal-*-*-120-*-*-c-*-iso8859-15
</example>

<sect>GnomeTerm
<p>You can configure the Gnome terminal to use an euro-ready font
by changing the font in the Configuration->Preferences menu.

<sect>Eterm
<p>
Change the user configuration (<file>~/.Eterm/user.cfg</file>) with:
<example>
&lt;Eterm-0.9.1&gt;
begin attributes
    scrollbar_type motif
    scrollbar_width 10
    font default 2
    font proportional 0
    font 0 -b&amp;h-lucidatypewriter-medium-r-normal-*-*-80-*-*-m-*-iso8859-15
    font 1 -b&amp;h-lucidatypewriter-medium-r-normal-*-*-100-*-*-m-*-iso8859-15
    font 2 -b&amp;h-lucidatypewriter-medium-r-normal-*-*-120-*-*-m-*-iso8859-15
    font 3 -b&amp;h-lucidatypewriter-medium-r-normal-*-*-140-*-*-m-*-iso8859-15
    font 4 -b&amp;h-lucidatypewriter-medium-r-normal-*-*-180-*-*-m-*-iso8859-15
end attributes
</example>

<sect>gVim
<p><file>~/.vimrc</file>:
<example>
set guifont=-b&amp;h-lucidatypewriter-medium-r-normal-*-*-140-*-*-m-*-iso8859-15
set encoding=iso-8859-15
</example>

<sect>Emacs
<p>Just call emacs with an euro font with the -fn switch or configure it to always use a given font by editing <file>~/.Xresources</file>:
<example>
Emacs.default.attributeFont: -*-Lucidatypewriter-Medium-R-*-*-*-110-*-*-*-*-iso
8859-15
</example>


<sect>GNOME and Gtk+
<p>Gnome application do mostly support another charset without problems.
Depending on your local configuration, you probably would have to change the
default font. Please start (in Gnome) the Control Center and choose a font with
<tt>iso8859-15</tt> encoding. If you don't have gnomecc installed, you could
make this setting manually, creating an customised gtkrc file in your home
directory (<file>~/.gtkrc</file>)
Or somewhere in <file>/etc/gtkrc</file> for systemwide settings.
<example>
style "user-font"
{
  font="-monotype-arial-medium-r-normal-*-12-*-*-*-p-*-iso8859-15"
}
widget_class "*" style "user-font"
</example>



<sect>KDE
<p>FIXME: Text needed
<p>It seems that KDE 2 euro support is not yet working properly.
<p>More info at <url id="http://users.pandora.be/sim/euro/112/">

<sect>Apache
<p>You should modify your webserver settings if you want to present some
sites with a non-ISO8859-1 charset, unless you want your users to change their
charset manually each time. Following settings for Apache (eg. put into an
<tt>.htaccess</tt> file) tells the browsers the charset they have to use:
<example>
AddType        text/html;charset=ISO-8859-15   html
</example>
<p>You can use the euro character directly in the documents, this information
could be provided also in the HTML documents DTD. In any case you
can use, the HTML 4.0 euro representation and not configure Apache.


<sect>LaTeX
<p>There are several ways to introduce the euro character in LaTeX:
<list>
<item>With textcomp package and the \texteuro macro (TS1 fonts)
<item>With the marvosym package, using type1 fonts.
<item>With the eurosym package using metafont fonts.
</list>

<p>Thus, you can use the marvosym package that is included in 
<package>tetex-base</package>
(<file>/usr/share/texmf/tex/latex/misc/marvosym.sty</file>).
This package includes some symbols, including the euro symbol, in 
different fonts (Times, Helvetica and Courier). Of course, you do not need
to be able to input the euro character (or see it in X) since the
LaTeX files will be translated into postscript files (no font needed
for their viewing with <tt>xpdf</tt> or other postscript viewers).
The include it in your documents with
<example>
\EUR
</example>

<p>Debian woody has also the <package>tetex-eurosym</package> package
which allows the euro representation too.
<example>
\texteuro
</example>

<p>FIXME: What about the cent? Is it provided in tetex-eurosym?

<sect>Applications that do support the euro character
<p>FIXME: Text needed
<list>
<item>Staroffice 5.0: it seems to use it own fonts, so you cannot use
the locally installed fonts, however it seems the 'Conga' font does 
include the euro-character.
<item>Konqueror.
<item>Kword, includes a document in the demos directory called
<file>eurosign.kwd</file> which can be used to determine if fonts
are properly installed.
</list>

<sect>Applications that do not support the euro character
<p>The following applications (and version) have been reported
<em>not</em> to work with the euro character:
<list>
<item>LyX 1.1.6fix2
<item>Xfig 3.2.3
<item>GnuPG, supports only ISO-8859-1, ISO-8859-2, koi8-r and utf-8
(see the --charset option in <manref section="1" name="gpg">)
</list>

<p>FIXME More content needed.

<chapt>Localisation issues
<p>Programs use the localistation environment in order to know both
the language and the charset being used. Currently there is no separation, 
unless you are using UTF-8
from locale and representation. Environment locales use both the 
language for example:
<example>
es_ES.ISO-8859-1
en_US.utf
....
</example>

<P>Locale definitions are stored in Debian at <file>/etc/locale.alias</file>
for the libc library and 
<file>/usr/X11R6/lib/X11/locale/locale.alias</file>. In order to indicate
which charset you are using you need to sent your LANG environment
variable (by changing, for example, <file>/etc/enviroment</file> or
<file>/etc/profile</file>.

<p>However, there is a problem due to the different representation of locales
in Xfree (Xlib) and glibc (one uses ISO8859 and the other ISO-8859, note the
dast). Thus,
setting the locale to XX_XX.ISO-8859-15 in <file>/etc/environment</file>
is doomed to cause problems in the X environment (might not be recognised
or generate errors in applications).
<p>Since Debian woody, the XX_XX@euro alias is provided in the
<file>/usr/X11R6/lib/X11/locale/locale.alias</file>
and in the <file>/etc/locale.alias</file>, users that wish to setup
their locale environment should use this abbreviation instead of the
previous XX_XX@ISO-...

<p>In order for this to work, however, the administrator has to 
edit the <file>/etc/locale.alias</file>
insert the locales definitions there and run <tt>locale-gen</tt>. 
The easiest way to make this modifications is to
call <tt>dpkg-reconfigure -plow locales</tt>.
Choose your locale in the version with an @euro appended.

<p>If your locales are already defined there but appended with 
a '#' sign, uncomment (remove that sign) the lines needed
for the users' locale. Mainly the XX_XX.ISO-8859-15 lines and the
XX_XX@euro lines and run <tt>locale-gen</tt>. This should create
<file>/usr/lib/locale/es_ES@euro</file>.

<p>This is not needed
in Debian 2.2 since the locales are not commented but, in any case,
Debian 2.2 <package>locales</package> (version 2.1.3-13) does not
provide the euro definition. If an upgrade to woody locale is not
possible (this upgrade will most probably change the libc version),
you will need to make the changes manually.

<p>In Debian 2.2, users need to change as indicated above.
Supposing an spanish environment (es_ES locale), the change
for <file>/etc/locale.alias</file> is:
<example>
es_ES@euro	es_ES.ISO-8859-15
</example>

and for <file>/etc/locale.alias</file> is :
<example>
es_ES@euro	es_ES.ISO8859-15
</example>

<p>You do not need to prepared the X environment to work since 
there should be a definition of the iso8859-15 definition at
<file>/usr/X11R6/lib/X11/locale</file>. If you have not configured
locale properly X might warn about this (before running a program), 
please check
your <file>~/.xsession-errors</file> since this might be happening
without the user noticing in modern desktop enviroments (all errors
are directed there and not to the screen).
<example>
Warning: locale not supported by Xlib, locale set to C
</example>


<p>You can see your current environment running <tt>locale</tt>,
and your current map character using <tt>locale charmap</tt>. 
In order to change your locale edit <file>/etc/environment</file> or
<file>/etc/profile</file> and add (the example is for spanish, 
change as needed):
<example>
export LANG=es_ES@euro
export LC_ALL=es_ES@euro
</example>

<p>Please not that the LANG and LC_ALL definitions should be similar
(or even better the same). Otherwise libraries might warn against
incompatible locale. You will see warnings if, for example, you set:
<example>
export LANG=spanish
export LC_ALL=es_ES@euro
</example>
<p>since spanish is aliases to es_ES.ISO-8859-1 and es_ES@euro is
alises to es_ES.ISO-8859-15

<p>You can check all the available locales by running <tt>locale -a</tt>

<p>For programs that give too many warnings much because of 
localisation/representation issueswith stuff similar to 
<example>
Gdk-WARNING **: locale not supported by C library
</example>
or
<example>
Warning: locale not supported by C library, locale unchanged
</example>
use <tt>LANG=XX_XX.ISO-8859-1 program&</tt> 
to run them and avoid the errors/warnings.
In any case, check that you have properly set your locale and, if so,
file a bug against the offending package.


<chapt>Frequently Asked Questions

<sect>I see a strange character instead of the euro
<p>If you are seeing a character that seems to be a circle with four 
lines streching out of it (the international symbol for currency) 
and not the euro symbol then the font you are using
does not properly represent euros but your keyboard is sending
it properly. Please check your environment/applications in order to
see that you are using ISO-8859-15 fonts and not ISO-8859-1.

<sect>The euro character gets lost when switching from X to console
<p>FIX: Run (as superuser) <tt>/etc/init.d/console-screen reload</tt>
(if the <package>console-tools</package> is installed), or run
<tt>setfont -u</tt> (if the <package>kbd</package> is installed.
<p>REASON: There are fonts with an unicode map in the .psf file
and others that do not include it. If these last ones are used the
Linux kernel unicode map resets and when you return from an X 
virtual terminal the map is garbled. The 
Keyboard and Console HOWTO (available at 
<file>/usr/share/doc/HOWTO/en-txt/Keyboard-and-Console-HOWTO.txt.gz</file>
if you have the <package>doc-linux</package> package) elaborates
a little bit on this.

<sect>How do I see if my keyboard is properly configured?
<p>(Console terminal) You should see 'currency' when doing: 
<example>
$ dumpkeys  |grep -i currency
</example>
<p>(X graphic environment) You should see 'currency' when doing: 
<example>
$ xmodmap -pke | grep -i currency
</example>

<sect>How do I see if I can represent euros properly?

<p>If using ISO-8859-15:
<example>
$ printf "\xa4\n"
</example>
<p>If using UTF-8:
<example>
$ printf "\xe2\x82\xac\n"
</example>

<p>Of course, you can also see if the characters euro
and cent are represented correctly by taking a look at a document
that includes them. <package>euro-support</package>
includes a representation of these in 
<file>/usr/share/doc/euro-support/examples/characters</file>, just
<tt>cat</tt> the file and see if they get printed to the screen
correctly.


<sect>I'm using framebuffer, can I represent euros on console?
<p>Yes you can, (from the 
<url id="http://www.linuxdoc.org/HOWTO/Framebuffer-HOWTO.html#toc15" name="FrameBuffer-HOWTO">)
you just need to use the kbd package version 0.99 or later.

<sect>Which is the longterm solution for this issue?
<p>Move towards UTF-8 encoding and separation of localisation
and representation (no more XX_XX.ISO-8859-X).

<chapt>References
<p>The following are useful documents that complement this one:
<list>
<item><url id="http://www.linuxdoc.org/HOWTO/mini/Euro-Char-Support/index.html
" name="Euro-mini-HOWTO">.
<item><url id="http://www.debian.org/doc/ddp" name="Introduction to I18n">
by Tomohiro KUBOTA, which introduces basic concepts of internationalization
and is centered on displaying and inputting characters with different
encodings (ASCII, ISO-8859, multybyte characters...)
<item><url id="http://melkor.dnp.fmph.uniba.sk/~garabik/debian-utf8/HOWTO" name="UTF-8 in Debian">
<!-- This document should be checked and merged with the previous one, and
included in the DDP  (jfs) -->
<item><url id="http://www.rano.org/mutt.html" name="Unicode Mutt">

<item> <url id="http://www.cs.usyd.edu.au/~matty" name="Unicode in X-Windows">.
</list>

<p>Some other references:
<list>
<item><url id="http://europa.eu.in/euro/information_society"
name="European Comission guidelines">.
<item><url id="http://europa.eu.int/ISPO/y2keuro/doc/eufeechg.pdf" name="The Euro transition">
</list>

<chapt>Acknowledgements

<sect>Thanks to some people
<p>The following people have contributed (knowingly or not) to
the information contained in this HOWTO:

<list>
<item>Juan Rafael Fernández, who wrote a first draft of an euro-howto
in spanish.
<item>Hue-Bond, who answered himself some FAQs in the debian-user-spanish mailing list.
<item>Jose Carlos Garcia Sogo, who showed up some very good insights on May 9th on the debian-users-spanish mailing list regarding this issue.
<item>Ionel Mugurel who did an extensive explanation on the euro issues 
on 14th September 2000 on the debian-i18n mailing list.
<item>Eduard Bloch, the writer of the <url id="http://channel.debian.de/faq/DebianDE-18.html" name="DE-Debian-HOWTO">.
</list>

</book>
</debiandoc>
