<!-- CVS revision of original english document "1.7" -->

<chapt id="sec-tools">Outils de sécurité dans Debian

<p>FIXME: Besoin de plus de contenu

<p>
Debian fournit aussi un certain nombre d'outils de sécurité qui peuvent faire de 
votre Debian une machine dont le but serait de réaliser des tests de sécurité.
Ce but inclut la protection des systèmes d'information au travers de pare-feu
(soit au niveau des paquets, soit au niveau des application), de détection
d'intrusion (basé sur le réseau et sur l'hôte), évaluation des vulnérabilités,
antivirus, réseau privé, etc.

<p>Depuis Debian 3.0 (<em>woody</em>), la distribution propose des logiciels de
chiffrage intégrés dans la distribution principale (<em>main</em>). OpenSSH et
GNU Privacy Guard sont inclus dans l'installation par défaut et le chiffrage
fort est maintenant présent dans les navigateurs web, les serveurs webs, les
bases de données, etc. Une intégration plus poussée du chiffrage est prévue pour
des versions ultérieures. Ces logiciels, à cause de restrictions d'export au
États-Unis, n'étaient pas distribuées avec la distribution principale, mais
inclus seulement dans les sites non-US.

<sect id="vuln-asses">Outils d'évaluation des vulnérabilités à distances

<p>Les outils fournis dans Debian pour effectuer une évaluation des 
vulnérabilités à distance sont&nbsp;:
<footnote>
Certains d'entre eux sont fournis en installant le paquet <package>harden-remoteaudit</package>.
</footnote>
<list>
<item>nessus
<item>raccess
<item>nikto (en remplacement de whisker )
<item>bass (non libre)
<item>satan (non libre)
<!-- currently uploaded but not included
<item>saint (non libre)
<item>sara (non libre)
-->
</list>

<p>De loin, l'outil le plus complet et mis à jour est <package>nessus</package>
qui est composé d'un client (<package>nessus</package>) utilisé tel un GUI  
et un serveur (<package>nessusd</package>) qui lance les attaques programmées.
Nessus inclut des vulnérabilités à distance pour un grand nombre de systèmes 
incluant les appareils réseaux, les serveurs ftp, les serveurs www, etc. Les 
dernières versions sont capables même de parcourir un site web et d'essayer de 
découvrir les pages interactives qui sont susceptibles d'être attaquées. Il 
existe également des clients Java et Win32 (non inclus dans Debian) qui peuvent 
être utilisés pour contacter le serveur de gestion.

<p>Notez que si vous utilisez <em>Woody</em>, les paquets Nessus sont vraiment
obsolètes (voir le bogue <url id="http://bugs.debian.org/183524"
name="#183524">). Il n'est pas difficile de rétroporter les paquets disponibles
dans <em>unstable</em> pour <em>Woody</em>, mais si vous trouvez que c'est
difficile à faire, vous pouvez vouloir considérer l'utilisation de paquets
rétroportés fournis par l'un des coresponsables et disponibles à <url
id="http://people.debian.org/~jfs/nessus/"> (ces versions peuvent ne pas être
aussi à jour que les versions disponibles dans <em>unstable</em>).

<p><package>Whisker</package> est un scanner pour évaluer les vulnérabilités 
de serveur web uniquement et qui inclut aussi des tactiques anti-IDS (la plupart 
ne sont plus des <em>anti-IDS</em>). C'est un des meilleurs scanners pour 
cgi disponible, étant capable de détecter des serveurs web et de lancer un 
assortiment d'attaques contre lui. La base de donnée utilisée pour scanner 
peut être facilement modifiée pour fournir de nouvelles informations.

<p><package>Bass</package> (Bulk Auditing Security Scanner) 
et <package>Satan</package> (Security Auditing Tool for Analyzing Networks)
doivent plus être pensés comme des programmes «&nbsp;preuve de concept&nbsp;» que 
comme des outils à utiliser pour réaliser un audit. 
Ils sont anciens et ne sont pas tenus à jour.
Cependant, SATAN a été le premier outil à fournir des tests de vulnérabilités 
de manière simple (GUI) et Bass est toujours un outil de vérification très performant.

<sect>Outils pour parcourir le réseau

<p>
Debian fournit quelques outils pour parcourir des hôtes distants (toutefois 
en n'examinant pas les vulnérabilités). Ces outils sont, dans certains cas,
utilisés tels des scanners de vulnérabilités. Ceci est le premier type d'«&nbsp;attaque&nbsp;»
lancé contre des hôtes distants afin de tenter de déterminer les services 
disponibles. À l'heure actuelle, Debian fournit&nbsp;:

<list>
<item>nmap
<item>xprobe
<item>queso
<item>knocker
<item>isic
<item>icmpush
<item>nbtscan (pour audits NetBIOS)
<item>fragrouter
<item>strobe (du paquet <package>netdiag</package>)
<item>hping2 (<em>Note&nbsp;:</em> plus à jour)
</list>

<!--
Etter cap n'est pas inclus car c'est un outil d'espionnage et non une sonde à distance
-->

<p>
Tandis que <package>queso</package> et <package>xprobe</package> fournissent 
uniquement la détection des systèmes d'exploitations (en utilisant les empreintes
TCP/IP), <package>nmap</package> et <package>knocker</package> font les deux, la 
détection du système d'exploitation et la détection de ports ouverts sur les hôtes 
distants. D'un autre côté, <package>hping2</package> et <package>icmpush</package> peuvent être utilisés pour des techniques d'attaques distantes ICMP.

<p>
Créé spécifiquement pour les réseaux Netbios, <package>nbtscan</package>
peut être utilisé pour scanner des réseaux IP et retrouver des informations 
sur les noms de serveurs ayant le SMB d'activé, ceci incluant&nbsp;: les noms 
d'utilisateurs, les noms des réseaux, les adresses MAC, ...

<p>D'un autre côté, <package>fragrouter</package> peut être utilisé pour tester
des systèmes de détection d'intrusion réseau et voir si le NIDS peut être éludé
par des attaques par fragmentation (de paquets).

<p>FIXME: Vérifier <url id="http://bugs.debian.org/153117" name="Bug
#153117"> (ITP fragrouter) pour voir s'il est inclus.


<p>FIXME: ajouter des informations basés sur
<url id="http://www.giac.org/practical/gcux/Stephanie_Thomas_GCUX.pdf"
name="Debian Linux Laptop for Road Warriors"> qui décrit comment utiliser Debian
et un ordinateur portable pour parcourir les réseaux sans fils (803.1). (Le lien
n'est plus là).

<sect>Audits internes

<p>
De nos jours, seul l'outil <package>tiger</package> utilisé dans Debian peut
être utilisé pour effectuer un audit interne (également appelé boîte blanche 
(white box)) d'hôtes de façon à déterminer si le système de fichiers est 
installé correctement, quels processus sont à l'écoute sur l'hôte, etc...

<sect>Contrôle du code source
<p>
Debian fournit trois paquets qui peuvent être utilisés pour contrôler le code 
source de programmes C/C++ et trouver les erreurs de programmation qui 
peuvent mener à de potentielles fautes de sécurité&nbsp;:
<list>
<item>flawfinder
<item>rats
<item>splint
</list>

<sect id="vpn">Réseaux Privés Virtuels 

<p>Un réseau privé virtuel (VPN) est un groupe de deux ou plusieurs ordinateurs,
habituellement connecté à un réseau privé avec un accès réseau public limité,
qui communiquent de façon sécurisée par un réseau public. Les VPN peuvent
connecter un seul ordinateur à un réseau privé (client-serveur) ou un réseau
local (LAN) distant à un réseau privé (serveur-serveur). Les VPN incluent
souvent l'utilisation de chiffrage, une authentification forte des utilisateurs
ou hôtes distants et des méthodes pour cacher la topologie du réseau privé.

<p>Debian fournit un nombre assez important de paquets pour mettre en place 
des réseaux privés virtuels chiffrés&nbsp;:

<list>

<item><package>vtun</package>
<item><package>tunnelv</package>
<item><package>cipe</package>
<item><package>vpnd</package>
<item><package>tinc</package>
<item><package>secvpn</package>
<item><package>pptp</package>
<item><package>freeswan</package>, qui est maintenant obsolète et remplacé par
<item><package>openswan</package> (<url id="http://www.openswan.org/">)

</list>

<P>FIXME: Mettre à jour cette information car elle a été écrite en pensant à
FreeSWAN. Vérifier le bogue #237764 et le Message-Id: 
&lt;200412101215.04040.rmayr@debian.org&gt;.

<p>Le paquet OpenSWAN est probablement le meilleur choix dans l'ensemble étant donné
qu'il promet d'être fonctionnel avec tout matériel supportant le protocole de
sécurité d'IP, IPsec (RFC 2411). Mais, les autres paquets peuvent vous aider à
obtenir un tunnel sécurisé rapidement. Le protocole de tunnel point à point
(PPTP) est le protocole propriétaire Microsoft pour les VPN. Il est supporté
sous Linux mais il est connu pour avoir de sérieux problèmes de sécurité.

<p>Pour plus d'informations lire le <url
id="http://www.linuxdoc.org/HOWTO/VPN-Masquerade-HOWTO.html"name="VPN-Masquerade
HOWTO"> (couvre IPsec et PPTP), le <url
id="http://www.linuxdoc.org/HOWTO/VPN-HOWTO.html"name="VPN HOWTO">
(couvre PPP à travers SSH), le <url
id="http://www.linuxdoc.org/HOWTO/mini/Cipe+Masq.html" name="Cipe
mini-HOWTO"> et le <url
id="http://www.linuxdoc.org/HOWTO/mini/ppp-ssh/index.html"name="PPP
and SSH mini-HOWTO">.

<p>Cela vaut également le coup de vérifier
<url id="http://yavipin.sourceforge.net/" name="Yavipin">, mais aucun paquet
Debian GNU ne semble être encore disponible.

<sect1>Le tunnel point à point

<p>Si vous désirez fournir un serveur de tunnel pour un environnement mixte (à
la fois pour les systèmes d'exploitations Microsoft et les clients Linux) et
qu'IPsec n'est pas une option (car il n'est fourni que pour Windows 2000 et
Windows XP), vous pouvez utilliser <em>PoPToP</em> (serveur de tunnel point à point),
fourni dans le paquet <package>pptpd</package>.

<p>Si vous voulez utiliser l'authentification et le chiffrage de Microsoft avec
le serveur fourni dans le paquet <package>ppp</package>, veuillez noter la
remarque suivante de la FAQ&nbsp;:

<example>
Il est seulement nécessaire d'utiliser PPP 2.3.8 si vous voulez une
athentification et un chiffrage compatible Microsoft MSCHAPv2/MPPE. La raison à
cela est que le correctif MSCHAPv2/MPPE actuellement fourni (19990813) est
relatif à PPP 2.3.8. Si vous n'avez pas besoin de l'authentification ou du
chiffrage compatible Microsoft, tout source PPP 2.3.x fera l'affaire.
</example>

<p>Vous devez cependant appliquer le correctif noyau fourni par le paquet
<package>kernel-patch-mppe</package> qui fournit le module pp_mppe pour pppd.

<p>Prenez également en compte que le chiffrage dans pptp vous force à stocker les
mots de passe utilisateur en clair et que le protocole MS-CHAPv2 contient des
<url id="http://mopo.informatik.uni-freiburg.de/pptp_mschapv2/"
name="failles de sécurité connues">.


<sect>Infrastructure de clé public (PKI)

<p>L'infrastructure de clé public (PKI) est une architecture de sécurité
introduite pour fournir un niveau de confiance amélioré lors de l'échange
d'informations sur des réseaux non sécurisés. Elle utilise le concept de clés
publics et privés de chiffrage pour vérifier l'identité de l'expéditeur
(signature) et pour garantir la confidentialité (chiffrage).

<p>Lorsque vous vous intéressez aux PKI, vous vous trouvez confronté à une grande variété d'outils&nbsp;:

<list>
<item>Une autorité de certificat (CA) qui peut vous fournir des certificats extérieurs et 
travailler sous une hiérarchie donnée

<item>Un répertoire pour conserver les certificats publics des utilisateurs 

<item>Une base de données (?) pour maintenir les listes des certificats révoqués (CRL)

<item>Des périphériques interopérant avec le CA pour éditer
des cartes à puce/jetons USB/n'importe quoi d'autre pour stocker les certificats
en sécurité

<item>Les applications prévues pour fonctionner avec des certificats de
confiance peuvent utiliser des certificats distribués par
des CA pour engager une communication chiffrée et vérifier les certificats
délivrés contre un CRL (pour l'authentification et les solutions de signature
complète unique)

<item>Une autorité estampillée pour les documents signés numériquement

<item>Une console de gestion permettant une gestion correcte de tout cela
(génération de certificat, contrôle de liste de révocation, etc...)

</list>

<p>Debian GNU/Linux contient des paquets logiciels pour vous aider à résoudre
ces problèmes de PKI. Cela inclut <prgn>Openssl</prgn> (pour la génération
de certificats), <prgn>OpenLDAP</prgn> (comme répertoire pour maintenir les certificats), <prgn>gnupg</prgn>
et <prgn>openswan</prgn> (avec le support standard X.509). Cependant, le système
d'exploitation ne fournit pas (comme dans la version Woody, Debian 3.0)
d'autorité de délivrance de certificat librement disponible comme pyCA, <url
id="http://www.openca.org" name="OpenCA"> ou les exemples CA d'OpenSSL. 
Pour plus d'information, reportez-vous au <url
id="http://ospkme ibook.sourceforge.net/" name="livre Open PKI">.

<sect>Infrastructure SSL

<p>Debian fournit quelques certificats SSL avec la distribution pour qu'ils
puissent être installés localement. Ils sont disponibles dans le paquet
<package>ca-certificates</package>. Ce paquet fournit un dépôt central des
certificats qui ont été soumis à Debian et approuvé (c.-à-d. vérifiés) par le
responsable du paquet, cela est utile pour toutes les applications OpenSSL qui
vérifient des connexion SSL.

<p>FIXME: lire debian-devel pour voir s'il y a quelque chose à ajouter à cela.

<sect>Outils antivirus 

<p>
Il n'y a pas beaucoup d'outils antivirus dans Debian GNU/Linux, probablement 
car les utilisateurs de GNU/Linux ne sont pas réellement submergés par 
les virus. Le modèle de sécurité UN*X fait une distinction entre les processus
privilégiés (root) et les processus appartenant aux utilisateurs, c'est pourquoi
un exécutable «&nbsp;hostile&nbsp;» reçu ou créé par un utilisateur et ensuite
exécuté par celui-ci ne peut pas «&nbsp;infecter&nbsp;» ou manipuler de tout
autre manière le système entier. Il y a eu, toutefois, des vers et virus pour GNU/Linux même 
s'il n'y pas (encore) eu de virus qui se soient étendus sur les 
distributions Debian. Dans tous les cas, les administrateurs peuvent 
vouloir mettre en place des passerelles antivirus pour se protéger contre les
virus affectant d'autres systèmes plus vulnérables dans leur réseau.

<p>Debian GNU/Linux fournit à l'heure actuelle les outils suivants pour mettre 
en place des environnements antivirus&nbsp;:
<list>

<item><url id="http://clamav.elektrapro.com/" name="Clam Antivirus">,
est fourni dans Debian <em>Sarge</em> (future version&nbsp;3.1). Des paquets
sont fournis à la fois pour le scanneur de virus (<package>clamav</package>),
pour le démon de scan (<package>clamav-daemon</package>) et pour les fichiers de
données nécessaires au scanneur. Comme conserver un antivirus à jour est
critique pour qu'il fonctionne correctement, il y a deux moyens différents pour
récupérer ces données&nbsp;: <package>clamav-freshclam</package> fournit un
moyen de mettre à jour la base de données automatiquement par l'Internet et
<package>clamav-data</package> qui fournit les fichiers de données directement.
<footnote>Si vous utilisez ce dernier paquet et que vous utilisez une Debian
officielle, la base de données ne sera pas mise à jour avec les mises à jour de
sécurité. Vous devrez soit utiliser <prgn>clamav-getfiles</prgn> du paquet
<package>clamav-freshclam</package> pour générer de nouveaux
<package>clamav-data</package> ou mettre à jour à partir de l'emplacement des
responsables&nbsp;:
<example>
  deb http://people.debian.org/~zugschlus/clamav-data/ /
  deb-src http://people.debian.org/~zugschlus/clamav-data/ /
</example>
</footnote>

<item><package>mailscanner</package> un scanneur de virus pour passerelle de
courriels et un détecteur de pourriels. Utilisant <package>sendmail</package> ou
<package>exim</package> comme sa base, il peut utiliser plus de 17&nbsp;moteurs
de scan de virus différents (y compris <package>clamav</package>)

<item><package>libfile-scan-perl</package> qui fournit File::Scan,
une extension Perl pour scanner des fichiers à la recherche de virus. Ce module
peut être utilisé pour créer un scanneur de virus indépendant de la plate-forme.

<item><url id="http://www.sourceforge.net/projects/amavis"
name="Amavis Next Generation">, fourni dans le paquet
<package>amavis-ng</package> et disponible dans <em>Sarge</em>, est un scanneur
de virus de courriel qui s'intègre avec différents serveurs de courriers (Exim,
Sendmail, Postfix ou Qmail) et gère plus de quinz moteurs de scan de virus (y
compris clamav, File::Scan et openantivirus).

<item><url id="http://packages.debian.org/sanitizer" name="sanitizer">, un outil
qui utilise le paquet <package>procmail</package>, qui peut filtrer les
attachements de courrier, bloquer les attachements selon leurs noms de fichier
et plus.

<item><url id="http://packages.debian.org/amavis-postfix" name="amavis-postfix">, un
script qui fournit une interface depuis un MTA vers un ou plusieurs scanners commerciaux de 
virus (ce paquet est seulement construit pour le MTA <prgn>postfix</prgn>).

<item><package>exiscan</package>, un scanneur de virus de courriel écrit en Perl
qui fonctionne avec Exim.

<item><package>sanitizer</package>, un scanneur pour courriel qui peut supprimer
des attachements potentiellement dangereux.

<item><package>blackhole-qmail</package>, un filtre de pourriel pour Qmail avec
prise en charge intégrée pour Clamav.

</list>

<p>Certains démons de passerelle proposent déjà des extensions d'outils pour
construire des environnements antivirus comprenant
<package>exim4-daemon-heavy</package> (la version <em>lourde</em> du MTA Exim),
<package>frox</package> (un serveur mandataire FTP de cache transparent),
<package>messagewall</package> (un démon mandataire SMTP) et
<package>pop3vscan</package> (un mandataire POP3 transparent).

<p>As you can see, Debian does not currently provide antivirus
scanning software in the main official distribution (3.0 at the time
of this writing) but it does provide multiple interfaces to build
gateway antivirus. The <package>Clamav</package> scanner 
will be provided in the next official release.

<p>
Comme vous pouvez le voir, Debian ne fournit pas à l'heure actuelle de logiciel 
de scan antivirus dans la distribution officielle principale (3.0 au moment de
cette écriture), mais il fournit des interfaces multiples pour construire des
antivirus de passerelle. Le scanneur <package>Clamav</package> sera fourni dans
la prochaine version officielle.

<p>D'autres projets de logiciels libres d'antivirus qui pourraient être inclus
dans une future version de Debian GNU/Linux&nbsp;:

<list>

<item><url id="http://sourceforge.net/projects/openantivirus/" name="Open
Antivirus"> (voir 
<url
id="http://bugs.debian.org/150698" name="Bug #150698 (ITP oav-scannerdaemon"> 
et <url id="http://bugs.debian.org/150695" name="Bug #150695 (ITP oav-update">).
-->

</list>

<p><!-- FIXME: Je ne trouve pas ce paquet dans Debian, peut-être oav-update le
 remplace-t-il ? -->Il y a également un paquet <package>virussignatures</package>
package, qui fournit des signatures pour tous les paquets, ce paquet fournit un
script qui télécharge les dernières signatures de virus depuis <url
id="http://www.openantivirus.org/latest.php">.

<p>FIXME: Vérifier si scannerdaemon est le même que le démon scanner antivirus
open (lire les ITPs).

<p>
Cependant, Debian ne fournira <em>jamais</em> des logiciels antivirus commerciaux tels que&nbsp;:
Panda Antivirus,
<!--
<url id="http://www.pandasoftware.com/com/linux/linux.asp" name="Panda Antivirus">,
<url id="http://www.nai.com/naicommon/buy-try/try/products-evals.asp" name="NAI Netshield (uvscan)">,
-->
NAI Netshield,
<url id="http://www.sophos.com/" name="Sophos Sweep">,
<url id="http://www.antivirus.com" name="TrendMicro Interscan"> ou
<url id="http://www.ravantivirus.com" name="RAV">.
Pour plus d'infos, voir la <url id="http://www.computer-networking.de/~link/security/av-linux_e.txt"
name="mini-FAQ logiciels antivirus pour Linux">. Cela ne veut pas dire que ces
logiciels ne peuvent pas être installés correctement sur un système Debian.

<p>Pour plus d'informations sur la façon de mettre en place un système de
détection des virus, veuillez lire l'article de Dave Jones <url
id="http://www.linuxjournal.com/article.php?sid=4882" name="Construire un
	    système de détection des virus des courriels pour votre réseau">.

<sect id="gpg-agent">Agent GPG

<p>Il est très courant de nos jours de signer numériquement (et parfois de
chiffrer) des courriels. Vous pouvez, par exemple, trouver que de nombreuses
personnes participant sur des listes de diffusion signent leur courriel de la
liste. Les signatures de clé public sont actuellement le seul moyen de vérifier
qu'un courriel a été envoyé par l'expéditeur et non par une autre personne.

<p>Debian GNU/Linux fournit un certain nombre de clients de messagerie avec des
fonctionnalité de signature de courriels intégrés qui interagissent soit avec
<package>gnupg</package> ou avec <package>pgp</package>&nbsp;:

<list>
<item><package>evolution</package>,
<item><package>mutt</package>,
<item><package>kmail</package>,
<item><package>mozilla</package> ou Thunderbird (fourni dans le paquet
<package>mozilla-thunderbird</package>) si le greffon <url
id="http://enigmail.mozdev.org/" name="Enigmail"> est installé, lequel
est fourni par <package>mozilla-enigmail</package> et par
<package>mozilla-thunderbird-enigmail</package>.

<item><package>sylpheed</package>. Selon la façon dont évolue la version stable
de ce paquet, vous pouvez avoir besoin d'utilise la <em>version dernier
cri</em>, <package>sylpheed-claws</package>.

<item><package>gnus</package>, qui, lorsqu'il est installé avec le paquet
<package>mailcrypt</package>, est une interface <prgn>emacs</prgn>
à <prgn>gnupg</prgn>.

<item><package>kuvert</package>, qui fournit cette fonctionnalité indépendamment
de votre client de messagerie choisi en interagissant avec l'agent de transport
de courrier (MTA).

</list>

<p>Les serveurs de clé vous permettent de télécharger des clés publiques publiées
pour pouvoir vérifier des signatures. Un tel serveur est <url
id="http://wwwkeys.pgp.net">. <package>gnupg</package> peut récupérer
automatiquement des clés publics qui ne sont pas déjà dans votre porte-clés
(keyring) public. Par exemple, pour configurer <prgn>gnupg</prgn> pour utiliser
le serveur de clés ci-dessus, éditez le fichier <file>~/.gnupg/options</file> et
ajoutez la ligne suivante&nbsp;:

<footnote>
Pour plus d'exemples sur la façon de configurer <prgn>gnupg</prgn>, consultez
<file>/usr/share/doc/mutt/examples/gpg.rc</file>.
</footnote>
<example>
keyserver wwwkeys.pgp.net
</example>

<p>La plupart des serveurs de clés sont liés afin que, quand votre clé publique
est ajoutée à un serveur, l'addition soit propagée à tous les autres serveurs de
clés publiques. Il existe également un paquet Debian GNU/Linux
<package>debian-keyring</package> fournissant les clés publiques des
développeurs Debian. Les portes-clés <prgn>gnupg</prgn> sont installés dans
<file>/usr/share/keyrings/</file>.

<p>Pour plus d'informations&nbsp;:

<list>

<item><url ID="http://www.gnupg.org/faq.html" name="GnuPG FAQ">.

<item><url ID="http://www.gnupg.org/gph/en/manual.html" name="GnuPG
Handbook">.

<item><url
ID="http://www.dewinter.com/gnupg_howto/english/GPGMiniHowto.html"
name="GnuPG Mini Howto (English)">.

<item><url ID="http://www.uk.pgp.net/pgpnet/pgp-faq/"
name="comp.security.pgp FAQ">.

<item><url ID="http://www.cryptnet.net/fdp/crypto/gpg-party.html"
name="Keysigning Party HOWTO">.

</list>
