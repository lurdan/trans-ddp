<!doctype debiandoc system>

<!--
# TODO list:
# - There was a 'useful software section' why was it removed? jfs
# - Shorten overlong lines - there are lots of sections (by jfs?) where
#   lines are routinely longer than 80 characters. Actually it makes sense
#   to author SGML with much shorter lines, because it makes editing simpler
#   (while the internal line length of the SGML source is obviously not
#   visible in any way to the end user).
#   (occur (make-string 80 ?.))   ;  C-x C-e here
# - Remove gratuitous trailing whitespace; M-x occur " +$"
# - Consider changing order of subsections so as to match the order in
#   the checklist appendix
-->

<book>

<titlepag>
<!-- Title information -->
<title>Manual de Seguridad de Debian
<author>
<name>Javier Fernández-Sanguino Peña</name>
<email>jfs@computer.org</email>
</author>
<version>2.4 (revisión de traducción 3)
<date> Tue, 30 Apr 2002 15:41:13 +0200

<abstract>
Este documento describe el proceso de asegurar y fortalecer la 
instalación original de Debian. Cubre algunas de las tareas más
comunes al configurar un ambiente de red seguro usando Debian GNU/Linux 
y también muestra información adicional acerca de las herramientas de 
seguridad disponibles, así como el trabajo desarrollado por
el equipo de seguridad de Debian.
</abstract>

<copyright> 
<copyrightsummary>Copyright &copy;  2002 Javier Fernández-Sanguino Peña
<p>Copyright &copy;  2001  Alexander Reelsen, Javier Fernández-Sanguino Peña
<p>Copyright &copy;  2000  Alexander Reelsen

<p>Traducción inicial al español realizada bajo la coordinación de Igor
Tamara, actualmente en estado de revisión por Jaime Robles y Javier
Fernández-Sanguino. <em>NOTA:</em> esta traducción aún no ha sido revisada por
completo y puede tener aún muchos fallos ortográficos y de traducción. Si
encuentra alguno, no dude en enviarlo al autor del documento. 

<p>Este documento se distribuye bajo los términos de la Licencia de
Documentación libre GNU. Se distribuye con el deseo de que sea útil,
pero sin NINGUNA GARANTÍA.  </copyright>

</titlepag>

<!-- Table of contents -->
<toc>

<!-- Begin the document -->


<chapt>Introducción

<p>Una de las cosas más dificiles sobre los documentos de seguridad es
que cada caso es único. Dos cosas a las que se debe prestar atención
son la amenaza del entorno y las necesidades de seguridad, tanto de
cada parte individual como del servidor o de la red. Por ejemplo, las
necesidades de seguridad de un usuario local son completamente
diferentes a las de la red de un banco. Mientras que un usuario local
necesita defenderse contra el cracker <em>script-kiddie</em>, un banco
tiene que preocuparse de ataques dirigidos. Además, el banco tiene que
proteger los datos de sus clientes con precisión milimétrica. En
resumen, todo usuario debe considerar el equilibrio entre utilización
y seguridad/paranoia.

<p>Observe que este manual solamente trata de asuntos relacionados con
el software. Ni el mejor software del mundo podría protegerlo si
alguien tuviera acceso físico a la máquina. Usted puede colocarla bajo
su mesa o puede ponerla en un búnker con un ejército que la
protega. Sin embargo, un ordenador de escritorio puede ser muchísimo
más seguro (desde el punto de vista del software) que un sistema
protegido físicamente si el primero de ellos se configura de la manera
apropiada y el segundo está lleno de agujeros de
seguridad. Lógicamente, usted debe considerar ambos casos.

<p>Este documento da una apreciación global de lo que
usted puede hacer para incrementar la seguridad de su sistema Debian
GNU/Linux. Si usted ha leido otros documentos con respecto a
la seguridad en Linux, encontrará que describen problemas comunes, los cuales
pueden solaparse con este documento. Sin embargo este documento no intenta
ser la única fuente de información que usted debería usar, sólo intenta
adaptar esa misma información para su aplicación sobre un sistema Debian 
GNU/Linux. La forma de trabajar de distintas distribuciones es diferente 
(el ejemplo habitual es la forma de arrancar y para los demonios del sistema); 
aquí usted encontrará material apropiado para los procedimientos y herramientas
utilizadas por Debian.</p> 

<p>Si vd. tiene algún comentario o sugerencia, por favor escriba un
correo a <url name="Javier Fernández-Sanguino"
id="mailto:jfs@computer.org"> (dirección alternativa jfs@debian.org) y
lo incorporará dentro de este manual.

<p>Igualmente, si detecta alguna errata en la traducción de este
manual, contacte con él.

<sect>Obtención del manual

<p>Usted puede leer u obtener la última versión del manual de
seguridad de Debian del <url name="Proyecto de documentación de
Debian"
id="http://www.debian.org/doc/manuals/securing-debian-howto/">. También
puede obtener las fuentes de la versión de cvs a través del <url
name="Servidor CVS"
id="http://cvs.debian.org/ddp/manuals.sgml/securing-howto/?cvsroot=debian-doc">.

<p>En el servidor del proyecto de documentación de Debian no podrá leer 
el documento en otros formatos (como PDF o txt).  Sin embargo puede obtener
o instalar el paquete <url id="http://packages.debian.org/harden-doc"
name="harden-doc"> el cual proporciona este mismo documento en
formatos HTML, texto y PDF. Tenga en cuenta que este paquete
puede no estar actualizado a la última versión disponible en Internet
(¡pero siempre puede utilizar el paquete fuente para compilarse una 
nueva versión!).

<!-- 
<p>
Previous (out of date) versions of this HOWTO can be found here:

<list>
<item><url name="Text-only"
id="http://joker.rhwd.de/doc/Securing-Debian-HOWTO/Securing-Debian-HOWTO.txt">
<item><url name="HTML"
id="http://joker.rhwd.de/doc/Securing-Debian-HOWTO/Securing-Debian-HOWTO.html">
<item><url name="HTML, tarred and gzipped"
id="http://joker.rhwd.de/doc/Securing-Debian-HOWTO/Securing-Debian-HOWTO.tar.gz">
<item><url name="SGML"
id="http://joker.rhwd.de/doc/Securing-Debian-HOWTO/Securing-Debian-HOWTO.sgml">
</list>
-->
<!-- TODO: remove these stale links rather than leave references to -->
<!-- the old versions hanging around? era -->


<sect>Notas/Retroalimentación/Organización

<p>Ahora, la parte oficial. Tanto Alexander Reelsen como Javier
Fernandez-Sanguino escribieron la mayoría de párrafos de este manual,
pero en opinión de ambos éste no debería ser el caso. Ambos han crecido y 
vivido con el software libre, es algo que usan a diario y supongo que usted
también. Por eso animamos a todo el mundo a enviar todo tipo de 
retroalimentación, añadidos o cualquier otra sugerencia que usted pueda tener.


<p>Si desea mantener una cierta sección o mejor un párrafo, escriba a
quien mantiene el documento y será bien recibido.  Especialmente si
encuentra una sección marcada como ARREGLAME, lo que significa que los
autores no tienen el tiempo para hacerlo o el conocimiento total
necesario sobre el tema, escríbales un correo inmediatamente.

<p>Por el tema de este manual está claro que es muy importante mantenerlo
actualizado y usted puede hacer su parte. Por favor, contribuya.

<sect>Conocimiento previo

<p>La instalación de Debian GNU/Linux no es muy difícil y usted mismo
debe haber sido capaz de instalarlo. Si tiene algún conocimiento sobre
Linux u otro Unix y está familiarizado con la seguridad básica, le
será más fácil entender este manual, dado que este documento no puede
explicar cada pequeño detalle o característica (de lo contrario
hubiera sido un libro en lugar de un manual). Si usted no está tan
familiarizado, probablemente debería mirar <ref id="references"> para
saber como encontrar información más detallada.


<sect>Lo que falta escribir (ARREGLAME/PORHACER)
<p>
<list>

<item>Escribir sobre herramientas de monitorización remota
(para comprobar la disponibilidad del sistema) como «monit», 
una herramienta para monitorizar los demonios.
Consultar la página: <url
id="http://linux.oreillynet.com/pub/a/linux/2002/05/09/sysadminguide.html">.

<item>Considerar si escribir una sección sobre como construir aplicaciones
de red basadas en Debian (con información como el sistema básico
<package>equivs</package> y FAI).

<item>Buscar en <url id="http://rr.sans.org/linux/hardening.php">
información relevante que no ha sido tenida en cuenta.

<item>Añadir información sobre como configurar un portátil con herramientas
de seguridad en Debian:
<url id="http://rr.sans.org/linux/debian_laptop.php">.

<item>Añadir información de como se configura un cortafuegos usando Debian
GNU/Linux. La sección con respecto al cortafuegos actualmente está
orientada hacia un solo sistema (no protegiendo otros...).

<item>Añadir información sobre como configurar un cortafuegos proxy con 
Debian GNU/Linux, estipulando qué paquetes específicos proporcionan
servicios proxy (como <package>xfwp</package>,
<package>xproxy</package>, <package>ftp-proxy</package>,
<package>redir</package>, <package>smtpd</package>,
<package>nntp-cache</package>, <package>dnrd</package>,
<package>jftpgw</package>, <package>oops</package>, <package>pnsd</package>,
<package>perdition</package>, <package>transproxy</package>,
<package>tsocks</package>). Debería dirigirse al manual para cualquier
otro tipo de información. Además observe que zorp no está aún disponible
como un paquete Debian, pero <em>es</em> un cortafuegos proxy (los
desarrolladores oficiales proporcionan paquetes Debian).

<item>Información sobre la configuración de servicio con file-rc.

<item>Revisar todos los enlaces y URLs y arreglar/eliminar los que ya
no están disponibles.

<item>Añadir información sobre sustitutos disponibles (en Debian)
para servidores comunes que son útiles para el funcionamiento
limitado. Ejemplos:

	<list>
	<item>¿lpr local cups (paquete)?

	<item>lpr remoto con lpr

	<item>bind con dnrd/maradns

	<item>apache con dhttpd/thttpd/wn (¿tux?)

	<item>exim/sendmail con ssmtpd/smtpd/postfix

	<item>squid con tinyproxy

	<item>ftpd con oftpd/vsftp

	<item>...

	</list>


<item>Más información referente a parches del núcleo relacionados con la
seguridad en Debian, incluyendo los mostrados anteriormente y
hablando específicamente de como habilitar estos parches en un sistema
Debian GNU/Linux.

<list>

<item>Linux Intrusion Detection (<package>lids-2.2.19</package>)

<item>Linux Trustees (en el paquete <package>trustees</package>)

<item><url name="NSA Enhanced Linux"
id="http://www.coker.com.au/selinux/">

<item><url name="kernel-patch-2.2.18-openwall"
id="http://packages.debian.org/kernel-patch-2.2.18-openwall">

<item><package>kernel-patch-2.2.19-harden</package>

<item>Linux capabilities (en el paquete <package>lcap</package>)

<item><package>kernel-patch-freeswan, kernel-patch-int</package>

</list>

<item>Detalles sobre como parar servicios innecesarios de red (al margen de
<prgn>inetd</prgn>). Estos se encuentran parcialmente en el procedimiento de
bastionado, aunque podrían ampliarse un poco más.

<item>Información con respecto a rotación de contraseñas, relacionado
estrechamente con la política de seguridad.

<item>Política de seguridad, y sobre la educación de los usuarios sobre 
la política.

<item>¿Más sobre tcpwrappers y wrappers en general?.

<item><file>hosts.equiv</file> y otros agujeros de seguridad.

<item>Temas relacionados con servidores de ficheros tales como Samba y NFS.

<item>suidmanager/dpkg-statoverrides.

<item>lpr y lprng.

<item>Elimininar cosas de IP en GNOME.

<item>Hablar sobre pam_chroot (consultar <url
id="http://http://lists.debian.org/debian-security/2002/debian-security-200205/msg00011.html">)
y su utilidad para limitar a los usuarios. Introducir información
relacionada con <url
id="http://online.securityfocus.com/infocus/1575">.
<package>Pdmenu</package>, por ejemplo, está disponible en Debian
(mientras que flash no lo está).

<item>Hablar sobre enjaular servicios (chroot). Información adicional
en <url
id="http://www.linuxfocus.org/English/January2002/aritcle225.shtml">,
<url id="http://www.networkdweebs.com/chroot.html"> y <url
id="http://www.linuxsecurity.com/feature_stories/feature_story-99.html">.

<item>Hablar sobre los programas para hacer jaulas
 (chroot). <package>Compartment</package> y
<package>chrootuid</package> están en la cola de entrada. Además,
algunos otros (makejail, jailer) podrían ser introducidos en el futuro.

<item>Añadir información suministrada por Karl Hegbloom con respecto a
enjaular BIND 9. Consultar <url
id="http://people.pdxlinux.org/~karlheg/Secure_Bind9_uHOWTO/Secure_Bind_9_uHOWTO.xhtml">.

<item>Añadir información suministrada por Pedro Zornenon con respecto
a enjaular BIND 8 aunque únicamente para la versión potato
:(. Consultar <url
id="http://people.debian.org/~pzn/howto/chroot-bind.sh.txt"> (includo
todo el título).

<item>Más información con respecto a los programas de análisis de
bitácoras (ie. logcheck y logcolorise).

</list>

<sect id="changelog">Listado de cambios/Historia
 <p>
<sect1>Versión 2.4
<p>Cambios por Javier Fernández-Sanguino Peña.
<list>
<item>Reescrita la parte de la sección BIOS.
</list>

<sect1>Versión 2.3
<p>Cambios por Javier Fernández-Sanguino Peña.
<list>

<item>La mayoría de los archivos se encuentran marcados con la etiqueta file.

<item>Fallo de ortografía observado por Edi Stojicevi.

<item>La sección de herramientas de auditoría remota se ha modificado ligeramente.

<item>Se añadieron algunas piezas de PORHACER.

<item>Se añadió más información con respecto a impresoras y los archivos de
configuración de cups (tomado de un hilo en debian-security).

<item>Se añadió un parche suministrado por Jesus Climent relacionado
con el acceso de usuarios válidos del sistema en  Proftpd cuando se ha
configurado como servidor anónimo.

<item>Pequeños cambios sobre divisiones de esquemas para el caso
especial de servidores de correo.

<item>Se añadió Hacking Linux Exposed para la sección de los libros.

<item>Error en directorio notificado por Eduardo Pérez Ureta.

<item>Error ortográfico /etc/ssh en la checklist notificado por Edi Stojicevi.
</list>

<sect1>Versión 2.3
<p>Cambios por Javier Fernández-Sanguino Peña.

<list>
<item>Cambio de ubicación del fichero de configuración de dpkg.

<item>Alexander eliminado de la información de contacto.

<item>Se añadieron direcciones de correo alternativas.

<item>Se arregló la dirección de correo de Alexander  (aún entre comentarios).

<item>Se arregló la ubicación de la llave publicada de la distribución
(gracias a Pedro Zorzenon por señalarlo).

</list>
<sect1>Versión 2.2
<p>Cambios por Javier Fernández-Sanguino Peña.
<list>
<item>Se arreglaron errores ortográficos gracias a Jamin W. Collins.

<item>Se añadió una referencia a la página de manual de apt-extracttemplate 
(documenta la configuración APT::ExtracTemplate).

<item>Se añadió la sección sobre SSH restringido. Información basada en los
correos enviados por Mark Janssen, Christian G. Warden y Emmanuel
Lacour en la lista de correo debian-security.

<item>Se añadió información sobre programas antivirus.

<item>Se añadió un FAQ: las bitácoras de <em>su</em> debido al cron que se
ejecuta como root.

</list>
<sect1>Versión 2.1
<p>Cambios por Javier Fernández-Sanguino Peña.
<list>

<item>Se eliminó el ARREGLAME de lshell gracias a Oohara Yuuma.

<item>Se agregó un paquete para sXid y se eliminaron comentarios
desde que éste se encuentra disponible.

<item>Se corrigieron algunos fallos ortográficos descubiertos por Oohara Yuuma.

<item>ACID está ahora disponible en  Debian (en el paquete acidlab).
 Gracias a Oohara Yuuma por notificarlo.

<item>Se arreglaron los URLs de seguridad de Linux (gracias a Dave Wreski
por comentarlo).

</list>
<sect1>Versión 2.0

<p>Cambios por Javier Fernández-Sanguino Peña. Quise cambiar la
versión 2.0 cuando todos los ARREGLAMEs estaban cambiados, pero los
eliminé de los números 1.9X :(

<list> 

<item>Se convirtió el HOWTO a un manual (ahora puedo
decir apropiadamente LEJM).

<item>Se añadió más información con respecto a los tcpwrappers y a
Debian (ahora muchos servicios están compilados con soporte para
ellos, así que ya no es problema de <prgn>inetd</prgn>).

<item>Se aclaró la información sobre como deshabilitar el
servicio rpc para hacerlo más consistente (la información rpc
hacía referencia a update-rc.d).

<item>Se añadieron pequeñas notas sobre lprng.

<item>Se agregó alguna información sobre servidores comprometidos
(aún muy rústico).

<item>Se corrigieron fallos ortográficos detectados por Mark Bucciarelli.

<item>Se añadieron algunos pasos en la recuperación de password para
proteger los casos en que el administrador tiene paranoid-mode=on.

<item>Se añadió información para colocar paranoid-mode=on cuando el
login está en la consola.

<item>Nuevo párrafo para introducir las configuraciones de servicios.

<item>Se reorganizó la sección <em>Después de la instalación</em>.
 Además ésta se descompone en varios temas más, facilitando la lectura.

<item>Se escribió información sobre como montar un cortafuegos con el
montaje estándar de Debian 3.0 (paquete iptables).

<item>Un pequeño párrafo explicando por qué la instalación estando
conectado a Internet no es buena idea y cómo evitar esto usando las
herramientas Debian.

<item>Un pequeño párrafo referenciando a un trabajo publicado en el IEEE
sobre como aplicar a tiempo parches de seguridad.

<item>Un apéndice sobre como montar una máquina snort Debian basada en
lo que Vladimir envió a la lista de seguridad de debian-security
(3 de septiembre de 2001).

<item>Información sobre como logcheck se monta en Debian y como
puede ser usado en el sistema HIDS.

<item>Información sobre la contabilidad del usuario y los beneficios
de los análisis.

<item>Se incluyó la configuración apt.conf para leer únicamente /usr
copiado del correo de Olaf Meeuwissen a la lista de correos debian-security.


<item>Nueva sección en VPN con algunas indicaciones y paquetes disponibles
en Debian (se necesita contenido de como establecer VPNs y problemas
específicos de Debian), basado en los envíos de Jaroslaw Tabor y Samuli
Suonpaa a la lista debian-security.

<item>Una corta nota con respecto a algún programa que automáticamente
construye jaulas para el cambio de directorio raíz.

<item>Nuevo artículo FAQ con respecto a identd basado en una discusión
en la lista de correo debian-security (febrero 2002, empezado por
Johannes Weiss).

<item>Nuevo artículo FAQ con respecto al inetd basada en una discusión
en la lista de correo debian-security (febrero 2002).

<item>Se introdujo una nota en rcconf en la sección "deshabilitar servicios".

<item>Varió el enfoque con respecto a LKM, gracias a Philipe Gaspar.

<item>Se añadieron enlaces a documentos del CERT y
fuentes de información de Couterpane.
</list>

<sect1>Versión 1.99
<p>Cambios por Javier Fernández-Sanguino Peña.
<list>

<item>Se añadió un nuevo FAQ con respecto al tiempo de arreglo de
vulnerabilidades de seguridad.

<item>Secciones FAQ reorganizadas.

<item>Se comenzó a escribir la sección con respecto al firewalling en
Debian GNU/Linux (podría ser ampliado un poco).

<item>Eliminados errores ortográficos detectados por Matt Kraai.
<item>Cambiada la información de DNS.

<item>Se agregó información sobre whisker y nbtscan para la sección de
auditoría.

<item>Se modificó algún URL erróneo.
</list>

<sect1>Versión 1.98
<p>Cambios por Javier Fernández-Sanguino Peña.

<list>

<item>Se añadió una nueva sección con respecto a la auditoría usando
Debian GNU/Linux.

<item>Se añadió información con respecto al demonio finger tomada
de la lista de correo de seguridad.

</list>

<sect1>Versión 1.97
<p>Cambios por Javier Fernández-Sanguino Peña.

<list>

<item>Se cambió el enlace a Linux Trustees.

<item>Se corrigieron fallos ortográficos (parches de Oohara Yuuma y
Pedro Zorzenon).

</list>

<sect1>Versión 1.96
<p>Cambios por Javier Fernández-Sanguino Peña.
<list>

<item>Se reorganizó el servicio de instalación y se añadieron
y eliminaron algunas notas.

<item>Se añadieron algunas notas con respecto al uso de sistemas de
comprobación de integridad como herramientas de detección de intrusos.

<item>Se añadió un capítulo con respecto firmas de paquetes.

</list>

<sect1>Versión 1.95
<p>Cambios por Javier Fernández-Sanguino Peña.
<list>

<item>Se añadieron notas con respecto a la seguridad de Squid enviadas por
Philipe Gaspar.

<item>Cambios de enlaces sobre rookits gracias a Philipe Gaspar.

</list>

<sect1>Versión 1.94
<p>Cambios por Javier Fernández-Sanguino Peña.
<list>

<item>Se añadieron algunas notas con respecto a Apache y Lpr/lpng.

<item>Se añadió alguna información con respecto a noexec y particiones
de acceso aleatorio.

<item>Reescritura de como puede el usuario ayudar en los asuntos de
seguridad Debian (FAQ).

</list>

<sect1>Versión 1.93
<p>Cambios por Javier Fernández-Sanguino Peña.
<list>

<item>Se arregló el sitio donde se encuentra el programa de correo.

<item>Se añadieron algunos nuevos elementos a las FAQ.
</list>

<sect1>Versión 1.92
<p>Cambios por Javier Fernández-Sanguino Peña.
<list>

<item>Añadió una pequeña sección de como se maneja la seguridad en Debian.

<item>Clarificación sobre las contraseñas MD5 (gracias a `rocky').

<item>Añadida un poco más de información con respecto a harden-X
de Stephen Egmond.

<item>Añadió algunos artículos nuevos al FAQ.

</list>

<sect1>Versión 1.91
<p>Cambios por Javier Fernández-Sanguino Peña.
<list>

<item>Añadida un poco de información forense enviada por Yotam Rubin.

<item>Añadió información de como construir una red trampa con Debian
GNU/Linux.

<item>Añadidas unas cosas a hacer más.

<item>Corrección de más errores ortográficos (gracias a Yotam).

</list>

<sect1>Versión 1.9
<p>Cambios por Javier Fernández-Sanguino Peña.
<list>

<item>Se añadió un parche para arreglar errores de ortografía y un
poco de nueva información  (contribuido por Yotam Rubin).

<item>Se añadieron referencias a otra documentación en línea (y no en
línea) tanto en una única sección (vea <ref id="references">) como dentro de 
algunas secciones.

<item>Añadida alguna información sobre como configurar opciones de
bind para restringir el acceso al servidor de DNS.

<item>Agregada información de como bastionar un sistema de Debian
automáticamente (con respecto al paquete harden y bastille).

<item>Eliminados algunos PORHACER hechos y añadidos otros nuevos.

</list>

<sect1>Versión  1.8
<p>Cambios por Javier Fernández-Sanguino Peña.
<list>

<item>Se añadió la lista de usuario/grupo  por defecto proporcionada
por Joey Hess (enviada a la lista de correo debian-security).

<item>Se añadió información sobre los rootkits LKM (<ref id="LKM">)
 contribuida por Philipe Gaspar.

<item>Se agregó información sobre Proftp contribuida por Emmanuel
Lacour.

<item>Se recuperó el apéndice checklist de Era Eriksson.

<item>Se añadieron algunos artículos nuevos al PORHACER y se arreglaron otros.

<item>Se incluyeron manualmente los parches de Era dado que no se
habían incluido en la versión anterior.

</list>

<sect1>Versión 1.7
<p>Cambios por Era Eriksson.
<list>
<item>Se arreglaron errores ortográficos y se cambiaron algunas palabras.  
</list>

<p>Cambios por Javier Fernández-Sanguino Peña.
<list>

<item>Cambios menores de las etiquetas para seguir removiendo las tt,
y sustituirlas por las etiquetas de prgn/package.

 </list>

<sect1>Versión 1.6 
<p>Cambios por Javier Fernández-Sanguino Peña.
<list>

<item>Se añadió el enlace al documento como se publicó en el DDP
(debería reemplazar el original en el futuro cercano).

<item>Comenzó un mini-FAQ (debería extenderse) con algunas preguntas
recuperadas de mi buzón.

<item>Se añadió información general a considerar cuando se está bastionando.

<item>Se añadió un párrafo con respecto al envío de correo local (entrante).
<item>Se añadieron enlaces de información.
<item>Se añadió información con respecto al servicio de impresión.
<item>Se añadió una lista de chequeo de bastionado.
<item> Se reorganizó información de NIS y RPC.

<item>Se añadieron algunas notas tomadas mientras está leyendo este
documento en mi nuevo visor :)

<item>Se arreglaron algunas líneas mal formateadas.
<item>Se corrigieron algunos errores ortográficos.  
<item>Se añadieron ideas Geniales/Paranoícas contribuidas por Gaby Schilders.
</list>
<sect1>Versión 1.5 

<p>Cambios por Josip Rodin y Javier Fernández-Sanguino Peña.

<list>

<item>Se añadieron párrafos relacionados con bind y algunos ARREGLAMEs.

 <!-- Removed
this because I found no evidence for it in the diffs. // era Rewrote
style in order to make it more formal.  -->
</list>
<sect1>Versión  1.4
    <p>
    <list>
    <item>Se revisaron algunos setuid pequeños.
    <item>Cambios menores.
    <item>Se averiguó como usar <tt>sgml2txt -f</tt> para la versión txt.
    </item>
    </list>
<sect1>Versión 1.3
    <p>
    <list>
    <item>Se añadió una actualización de seguridad después del párrafo de la instalación.
    <item>Se añadió un párrafo del proftpd. 
    <item>En ésta ocasión se escribió algo sobre XDM, disculpas por el anterior.
    </list>
<sect1>Versión  1.2
    <p>
    <list>
    <item>Muchas correcciones de gramática por James Treacy, nuevo párrafo de XDM.    
    </list>
<sect1>Versión 1.1
    <p>
    <list>
    <item>Errores ortográficos, cambios varios.
    </list>
<sect1>Versión 1.0
    <p>
    <list>
    <item>Versión inicial.
    </list>

<!-- Revisión de jfs terminó aquí Wed, 19 Feb 2003 01:00:27 +0100 -->

<sect>Créditos y agradecimientos
<p>
<list>
<item>Alexander Reelsen escribió el documento original. 

<item>Javier Fernández-Sanguino añadió aún más información al documento
original.

<item>Robert van der Meulen aportó los párrafos de quota y muchas buenas
ideas.

<item>Ethan Benson corrigió los párrafos de PAM y sugirió buenas ideas.

<item>Dariusz Puchalak hizo contribuciones a muchos capítulos.

<item>Gaby Schilders contribuyó a una buena idea de Genio/Paranoia.

<item>Era Eriksson resolvió problemas de idioma en muchos lugares y
contribuyó al apéndice de la lista de comprobaciones.

<item>Philipe Gaspar escribió la información de LKM.

<item>Yotam Rubin contribuyó a los ajustes de muchos fallos ortográficos
así como a la información con respecto a las versiones de bind y las
contraseñas md5.

<item>Todas las personas que hicieron sugerencias que, eventualmente,
se incluyeron aquí (consulte <ref id="changelog">).

<item>(de Alexander) A todas las personas que me animaron a escribir, este
COMO (El cual posteriormente se convirtió en el manual) .

<item>La totalidad del proyecto Debian.
</list>

<!-
 Revisión de jfs terminó aquí Wed, 07 May 2003 04:40:02 +0200 
 Bueno, en realidad incluí gran parte de lo que Thomas Bliesener 
 me envío el 24 de abril de 2003 (las modificaciones al texto de Igor,
 no las nuevas partes traducidas, lo siento).
 Más abajo está sustituido de forma global lo siguiente
 FIXME por ARREGLAME
 adicionar por añadir
 and por y 
 remover por eliminar
 daemon por demonio.
 Aún hay que mirar muchas más cosas... incluyendo acentos (faltan
 muchos) y cosas similares. Además parece que faltan
 muchos tags que estaban en el documento original :-(
-->
 

<chapt>Antes de empezar


<sect>¿Para qué quiere usted este sistema?

<p>Asegurar Debian no se diferencia mucho de asegurar otro sistema;
para hacer esto apropiadamente primero usted debe decidir lo que
pretende hacer con éste. Luego tenga en cuenta que las siguientes
tareas necesitan ser tomadas con cuidado si usted quiere un sistema de
seguridad verdadero.

<p>Usted encontrará que este manual está escrito de abajo hacia
arriba, lo cual significa que usted leerá alguna información sobre 
tareas para hacer antes, durante y después de que la instalación de su
sistema Debian esté hecha. Algunas tareas pueden ser pensadas así, tales
como: 
<list>

<item>Decidir cuáles servicios usted necesita, y limitar su sistema
para ellos. Esto incluye desactivación/desinstalación de servicios
innecesarios, y la adición de filtros como cortafuegos, o
tcpwrappers.
<item>Limitar usuarios y permisos en su sistema.
<item>Asegurar los servicios ofrecidos, de tal forma que, en caso
de un servicio comprometido, el impacto a su sistema sea minimizado.
<item>Usar las herramientas apropiadas para garantizar que el uso
desautorizado se detecte, de tal manera que usted pueda tomar las
medidas oportunas.
</list>

<sect id="references">Estar enterado de los problemas de seguridad generales

<p>El siguiente manual (por lo general) no entra en detalles del por qué
algunos asuntos son considerados riesgos de seguridad. Sin embargo,
usted debería tener una mayor información en lo que se refiere a UNIX
en general y (en particular) a la seguridad de Linux. Tome algo de
tiempo para leer acerca de la seguridad en documentos relacionados
para poder tomar decisiones cuando usted se encuentre con diferentes
opciones. Debian GNU/Linux está basado en el núcleo de Linux, por lo que la
mayor parte de la información referente a Linux, así como de otras
distribuciones y en general la seguridad en UNIX también es aplicable
aquí (incluso sí las herramientas usadas, o los programas
disponibles, difieren). 
<p>Algunos documentos útiles incluyen:
<list>

<item> El <url name="Linux Security HOWTO"
id="http://www.linuxdoc.org/HOWTO/Security-HOWTO.html"> (también
disponible en <url
id="http://www.linuxsecurity.com/docs/LDP/Security-HOWTO.html"
name="LinuxSecurity">) es una de las mejores referencias en lo que se
refiere a la seguridad de Linux en general.

<item> El <url name="Security Quick-Start HOWTO for Linux"
id="http://www.linuxsecurity.com/docs/LDP/Security-Quickstart-HOWTO/">
es también un buen punto de arranque para usuarios novatos (para
ambos, Linux y la seguridad).

<item> El <url id="http://seifried.org/lasg/" name="Linux Security
Administrator's Guide"> (proporcionado en Debian a través del paquete
<package>lasg</package>) es una guía completa que conecta todos los
asuntos relacionados con la seguridad en Linux, desde la seguridad del
núcleo hasta VPNs. Esto es algo obsoleto (sin actualizar desde 1999) y
ha sido reemplazado por la base del conocimiento de la Seguridad de
Linux (actualmente no está disponible en línea, pero usualmente está
en http://www.securityportal.com/Lksb/) (sin embargo en este
momento no está ahí). Esta documentación también es proporcionada en Debian
a través del paquete <package>lksb</package>. 

<item>En <url name="Securing and Optimizing Linux: RedHat Edition"
id="http://www.linuxdoc.org/links/p_books.html#securing_linux"> usted
puede encontrar un documento similar a este manual pero relacionado con
RedHat. Algunos de los asuntos no son específicos de la distribución y
también se aplican a Debian.

<item>IntersectAlliance ha publicado un documento que puede ser usado
como una carta de referencia sobre como fortalecer los servidores de
Linux. Esto está disponible en <url
id="http://www.intersectalliance.com/projects/index.html">.

<item>Para administradores de red, una buena referencia para
construir una red segura es el <url name="Securing your Domain HOWTO"
id="http://www.linuxsecurity.com/docs/LDP/Securing-Domain-HOWTO/">.


<item>Si quiere evaluar los programas que usted va a usar (o quiere
reforzar uno de los nuevos) debería leer el <url name="Secure Programs
HOWTO"
id="http://www.linuxdoc.org/HOWTO/Secure-Programs-HOWTO.html">.

<!-- ARREGLAME: check URLs --> 

<item>Si usted está considerando instalar las capacidades de
cortafuegos, usted debe leer el <url name="Firewall HOWTO"
id="http://www.linuxdoc.org/HOWTO/Firewall-HOWTO.html"> y el 
<url name="IPCHAINS HOWTO"
id="http://www.linuxdoc.org/HOWTO/IPCHAINS-HOWTO.html">.

<item> Finalmente, una buena carta para tener acceso es la 
<url name="Linux Security RefenceCard"
 id="http://www.linuxsecurity.com/docs/QuickRefCard.pdf">.

</list>
<p>De todos modos, usted puede adquirir más información con respecto a
los servicios aquí explicados (NFS, NIS, SMB) en muchos de los HOWTOs
del <url name="Linuxdoc Project" id="http://www.linuxdoc.org/">.
Algunos de estos documentos hablan sobre la parte de seguridad de un
servicio dado, por lo que asegúrese de echarles un vistazo.

<p>Los documentos HOWTO del proyecto de Documentación están
disponibles en Debian GNU/Linux por medio de la instalación del
<package>doc-linux-text</package> (versión texto) o
<package>doc-linux-html</package> (versión html). Después de la
instalación estos documentos estarían disponibles en
<file>/usr/share/doc/HOWTO/en-txt</file> y en los directorios
<file>/usr/share/doc/HOWTO/en-html</file>, respectivamente.

<p>Otros libros de Linux recomendados:

<list>

<item>Seguridad Máxima de Linux: Una guía de Hacker para proteger su
servidor Linux y la red. Anónimo. Libro de
bolsillo - 829 páginas. Publicación Sams. ISBN: 0672313413. Julio 1999.

 

<item> Seguridad Linux por John S. Flowers. Nuevos viajeros: ISBN:
0735700354. Marzo 1999. 
<item><url id="http://www.linux.org/books/ISBN_0072127732.html"
name="Hacking Linux Exposed"> por Bryan Hatch. McGraw Hill educación
superior. ISBN: 0072127732. Abril 2001.


</list>

<p>Otros libros (también relacionados con los temas generales de UNIX
y la seguridad, y no exclusivamente con Linux): <list>

<item><url id="http://www.ora.com/catalog/puis/noframes.html"
name="Practical Unix and Internet Security (2nd Edition)"> Garfinkel,
Simpson y Spafford, Gene. O'Reilly Asociados. ISBN 0-56592-148-8.
1004pp. 1996. 

<item> Firewalls y la Seguridad de Internet. Cheswick, William R. y
Bellovin, Steven M. Addison Wesley. ISBN 0-201-63357-4. 320pp.
</list>

<p>Algunos sitios Web útiles para mantenerse al tanto con respecto a la 
seguridad:<list>

<item><url name="Security Focus" id="http://www.securityfocus.com"> el
servidor que contiene la base de datos y las listas de vulnerabilidad
de Bugtraq. Proporciona información general de seguridad, noticias y
reportes.	

<item> <url name="Linux Security" id="http://www.linuxsecurity.com/">.
Información referente a la seguridad de Linux en general
(herramientas, noticias...). La más útil es la página <url name="main
documentation"
id="http://www.linuxsecurity.com/resources/documentation-1.html">.

<item> <url name="Linux firewall and security site" id="
http://www.linux-firewall-tools.com/linux/">. Con información general
con respecto a los cortafuegos en Linux y las herramientas para
controlarlos y administrarlos.	
	

</list>

<sect>¿Cómo maneja Debian la seguridad?
<p>Al dar un vistazo general sobre la seguridad en Debian GNU/Linux
usted debería tomar nota de los diferentes temas que Debian usa para
proveer un sistema de seguridad en conjunto: <list>

<item>Los problemas de Debian siempre son manejados abiertamente,
inclusive los relacionados con la seguridad. Como dice en <url
name="Debian Social Contract"
id="http://www.debian.org/social_contract">: <em> Nosotros no
encubriremos los problemas,
mantendremos el reporte de la base de datos abierto para el público
todo el tiempo. Los reportes que los usuarios envíen en línea se
colocarán inmediatamente para que sean visibles por otros.</em> Los
temas de seguridad son discutidos abiertamente en la lista de correo
debian-security. Los avisos de seguridad de Debian son enviados a
listas de correo públicas (a las dos, internas y externas) y son
colocadas en el servidor público.


<item>Debian sigue los asuntos de seguridad atentamente. El equipo de
seguridad vigila muchas fuentes de seguridad relacionadas, siendo la
más importante <url name="Bugtraq"
id="http://www.securityfocus.com/cgi-bin/vulns.pl">, a la búsqueda
de paquetes con problemas de seguridad que puedan estar
incluídos en Debian.

<item>Las actualizaciones de seguridad son la principal prioridad.
Cuando surge un problema de seguridad en un paquete Debian, la
actualización de seguridad es preparada tan rápido como es posible y
distribuída para nuestras publicaciones estables e inestables,
incluyendo todas las arquitecturas.


<item>La información referente a la seguridad es centralizada en un
solo punto: <url id="http://security.debian.org/">.

<item>Debian siempre está tratando de mejorar en conjunto la seguridad
de la distribución empezando nuevos proyectos, como los mecanismos de
verificación automática de firmado de paquetes.

<item>Debian trata de proveer una cantidad útil de herramientas
relacionadas con la seguridad para la administración y monitorización del
sistema. Los desarrolladores tratan de relacionar estrechamente estas
herramientas con la distribución para hacerlas mejores y así
reforzar las políticas locales de seguridad. Las herramientas
incluyen: controladores de integridad, herramientas de auditoría,
herramientas de firewall, herramientas para detectar intrusiones, etc. 

<item>Los mantenedores del programa están enterados de los temas de
seguridad. Esto conduce a muchos servicios "seguros por defecto" en
la instalación, que puede imponer ciertos límites, algunas veces, para
su uso normal. Sin embargo, Debian trata de balancear los asuntos de
seguridad y la facilidad de administración, por ejemplo, los sistemas no son
instalados desactivados, como en las distribuciones de la
familia BSD. De cualquier modo, algunos asuntos especiales de
seguridad, como programas setuid, forman parte de <url
id="http://www.debian.org/doc/debian-policy/" name="Debian Policy">.

</list>

<p>Este mismo documento trata de hacerse valer, tanto como la
mejor de las distribuciones seguras, publicando información de seguridad
específica de Debian la cual complementa otros documentos de información
de seguridad relacionados con las herramientas usadas por Debian o por
el sistema operativo en sí mismo (ver <ref id="references">).


<chapt>Antes y durante la instalación

<sect>Escoger una contraseña BIOS
<p> Antes de instalar algún sistema operativo en su computador,
establezca una contraseña BIOS. Después de la instalación (una vez se
haya posibilitado la entrada desde el disco duro) regrese a la BIOS y
cambie la secuencia de arranque del sistema para impedir el
arranque desde el disco flexible, el CD-ROM y otros dispositivos desde los
que no se debería arrancar. De otro modo un cracker solo necesitaría
acceso físico y un disco de arranque para tener acceso a la totalidad
de su sistema. 

<p> Inhabilitar El ingreso al programa sin una contraseña es mejor.
Este puede ser muy efectivo si usted está administrando un servidor,
porque éste no es reiniciado muy frecuentemente. El inconveniente para
esta táctica es que el ingreso requiere intervención humana la cual
puede causar problemas si la máquina no es de fácil acceso. 

<sect>Escoger inteligentemente un esquema de partición
<p> Un esquema de partición inteligente depende de cómo sea usada la
máquina. Una buena regla para torpes es ser completamente tolerante con
sus particiones y prestar atención a los siguientes factores: <list>

<item>Cualquier jerarquía de directorios en la cual un usuario tiene
permiso de escritura, así como <file>/home</file> y
<file>/tmp</file>, debería estar en una partición separada. Esto reduce
el riesgo de un DoS por parte de un usuario, al llenar su punto de
montaje de "/" y tornar el sistema inservible. (Nota: esto no es
estrictamente cierto, dado que siempre hay algún espacio reservado
para el administrador, el cual un usuario normal no puede llenar). 

<item>Cualquier partición que pueda variar, p.e. <file>/var</file>
(especialmente <file>/var/log</file>) también debería estar en una
partición separada. En un sistema Debian, usted debe crear /var un
poco más grande de lo normal, debido a que los paquetes descargados (el
apt cache) son guardados en <file>/var/cache/apt/archives</file>. Esto
es mucho más importante para los servidores del correo
(<file>/var/mail</file> y/o <file>/var/spool/mail</file>) ya que los
usuarios remotos pueden llenar la cola del correo 
(intencionada o no intencionadamente). 

<item>Cualquier partición donde usted quiera instalar un software
fuera de la distribución debe estar en una partición separada. De
acuerdo con la jerarquía estándar de archivos, serían
<file>/opt</file> o <file>/usr/local</file>. Si estos directorios están en
particiones separadas, no serán borrados si usted tiene que
reinstalar Debian.

<item>Desde el punto de vista de seguridad, tiene sentido intentar
mover los datos estáticos a su propia partición y luego montar la
partición en modo sólo lectura. Mejor aún, ponga los
datos en un medio de sólo lectura. Ver más detalles a continuación.
</list>

<sect>No se conecte a Internet hasta que este listo

<p>El sistema que usted va a instalar no debe ser conectado inmediatamente a
Internet durante la instalación. Esto puede sonar
estúpido pero usualmente se hace. Ya que el sistema instalará y
activará servicios inmediatamente, si el sistema es conectado a
Internet y los servicios no están correctamente configurados, usted
está abierto a sufrir un ataque.

<p>También verifique si algún servicio tiene nuevas vulnerabilidades
de seguridad no arregladas en los paquetes que usted está utilizando para
la instalación. Normalmente esto es cierto si usted está instalando
desde un medio antiguo (como CD-ROMs) . En este caso, ¡puede estar
comprometido antes de que la instalación se haya terminado!.

<p>Como la instalación y las actualizaciones de Debian pueden ser
realizadas desde Internet, usted debe pensar que es una buena idea usar esta
característica en la instalación. Si el sistema va a ser conectado
directamente a Internet (y sin estar protegido por un cortafuegos o
NAT), es mejor instalar sin conexión a Internet, utilizando un
espejo local de paquetes tanto para los fuentes de los paquetes de Debian como
para las actualizaciones de seguridad. Usted puede configurar los
espejos de paquetes usando otro sistema conectado a Internet con
herramientas específicas de Debian (si es un sistema Debian)
como <package>apt-move</package> o <package>apt-proxy</package>, u
otras herramientas comunes para espejos que provean los archivos para
el sistema instalado.

<sect>Colocar una contraseña de root (Administrador de Linux)
<p> Colocar una buena contraseña a root es el más básico requerimiento
para tener un sistema seguro. 

<sect>Activar contraseñas shadow y md5
<p>
Al final de la instalación se le preguntará si las contraseñas 
shadow deben ser habilitadas. Responda con un SI a esta pregunta,
y así las contraseñas se mantendrán en el archivo
<file>/etc/shadow</file>. Solo el usuario root y el grupo shadow
tienen acceso de lectura a este archivo, así que los usuarios no estarán
autorizados a realizar una copia de este archivo con el objeto de ejecutar
un decodificador de contraseñas. Usted puede cambiar entre las contraseñas
shadow  y las contraseñas normales en cualquier momento utilizando
<tt>shadowconfig</tt>. Además, durante la instalación se le preguntará si
quiere usar las contraseñas con una función MD5 aplicada.
Esto es generalmente una muy buena idea, ya que permite unas
contraseñas más extensas y una mejor encriptación.

<p>Lea más acerca de las contraseñas shadow en 
<url
name="Shadow Password"
id="http://www.linuxdoc.org/HOWTO/Shadow-Password-HOWTO.html">
(<file>/usr/share/doc/HOWTO/en-txt/Shadow-Password.txt.gz</file>).


<sect>Ejecute el mínimo número de servicios requeridos 

<p>Los servicios son programas tales como los servidores de ftp y los
servidores web. Ya que ellos deben estar <em>escuchando</em>
las conexiones entrantes que requieren el servicio,
computadores externos podrán conectarse con usted. Los servicios son
algunas veces vulnerables (i.e. puede estar comprometido bajo un
ataque dado) y por lo tanto son un riesgo de seguridad. 
<p>Usted no debería instalar servicios innecesarios para su máquina. Todo 
nuevo servicio instalado, quizás sin evidencia (o
evidentemente), puede crear fallas de seguridad en su computador.

<p>Como es bien sabido, cuando usted instala un 
servicio dado, el comportamiento erróneo es activarlo. En una instalación 
por defecto de Debian, sin servicios instalados, la huella de los servicios 
recorridos es lenta y es aun más lento cuando se habla acerca de los servicios 
ofrecidos en la red. La huella en Debian 2.1 no era tan difícil como la 2.2 
(algunos servicios inetd fueron permitidos por descuido) y en el Debian 2.2 el 
Rpc PORTMAPPER se permite para la instalación. Rpc es instalado por descuido 
porque este es necesitado por muchos servicios, por ejemplo NFS, para
recorrer en un sistema dado. Esto puede ser removido fácilmente, sin
embargo, vea <ref id="disableserv"> para saber como desactivarlo.

<p>Cuando usted instale un nuevo servicio relacionado con la red
(demonio) en su sistema Debian GNU/ Linux, éste puede ser habilitado de
dos formas: a través del superdemonio de inetd (i.e una línea será
añadida a <file>/etc/inetd.conf</file>) o a través de un programa
automático que se ratifica a si mismo con el conector de unidades del
sistema. Los programas automáticos son controlados a través de los
archivos <file>/etc/init.d</file> , los cuales son llamados al momento
de entrar a través del mecanismo SysV (o una alternativa mas) por usar
conexiones del sistema en <file>/etc/rc?.d/*</file> (para mas
información sobre como hacer la lectura
<file>/usr/share/doc/sysvinit/README.runlevels.gz</file>).

<p>Si usted aun desea tener algunos servicios para usarlos de vez en
cuando, use los comandos de update, e.g. 'update-inetd' y
'update-rc.d' para eliminarlos del proceso de inicio.

<sect1 id="disableserv">Deshabilitar los demonios

<p>Incapacitar un demonio (o servicio) es muy sencillo. Hay diferentes métodos: 
<list>

<item>Eliminar las conexiones de <file>/etc/rc${runlevel}.d/</file> o
renombrar las conexiones (así que ellos no empezarán con 'S')
<item>Mover el archivo de escritura (<file>/etc/init.d/_service_name_</file>)
a otro nombre (por ejemplo <file>/etc/init.d/OFF._service_name_</file>)

<item>Eliminar la marca de ejecución del
archivo <file>/etc/init.d/_service_name_</file>.

<item>Editar el fichero <file>/etc/init.d/_service_name_</file> para
que éste se pare nada más ejecutarse.

</list>

<p>Usted puede eliminar estas conexiones de
<file>/etc/rc${runlevel}.d/</file> manualmente o usando
<tt>update-rc.d</tt> (ver <manref section="8" name="update-rc.d">).
Por ejemplo, Usted puede inhabilitar un servicio de ejecución en los
niveles haciendo:
<example>
update-rc.d stop XX 2 3 4 5 .
</example>



<p>Por favor note que, si usted no <em>está</em> usando
<package>file-rc</package>, <tt>update-rc.d -f _service_ remove</tt>
no trabajara adecuadamente, ya que <em>todas</em> las conexiones son
removidas, cuando se realice la reinstalación o crezca el paquete,
estas conexiones estarán regeneradas (probablemente no como usted
quería). Si usted piensa que esto no es intuitivo probablemente usted
estaría en lo cierto (vea <url id="http://bugs.debian.org/67095"
name="Bug 67095">. Del manual de paginas:

<example>
Si algunos archivos /etc/rcrunlevel.d/[sk]??nombre ya existen entonces
update-rc.d no hace nada. Esto ocurre porque el sistema administrador
puede reorganizar las conexiones, permitiendo que ellos dejen la
ultima conexión que queda, sin tener su configuración sobrescrita.
</example>

<p>Si usted esá usando <package>file-rc</package> toda la información
relativa a los servicios de entrada está manejada por un archivo de
configuración común y es mantenido aun sí los paquetes son removidos
del sistema.

<p>Usted puede usar el TUI (Texto Interfaces del Usuario)
proporcionado por <package>rcconf</package> para hacer todos estos
cambios fácilmente (<prgn>rcconf</prgn> trabaja de dos formas por
file-rc y el sistema normal V runlevels).

<p>Otros métodos (no recomendables) de servicios inhabilitados son:
<tt>chmod 644 /etc/init.d/_demonio_</tt> (pero éste provocará un mensaje 
de error cuando usted entre al sistema) o modificar la escritura de
<file>/etc/init.d/_demonio_</file> (añadiendo una línea con
<prgn>exit 0</prgn> al comienzo o comentando la parte
<tt>start-stop-daemon</tt>).  Ya que los archivos
init.d son archivos de configuración, éstos no serán sobrescritos al
actualizar programas.

<p>Desafortunadamente, a diferencia de otros sistema operativos (UNIX),
los servicios en Debian no pueden ser desactivados al modificar los
archivos en <file>/etc/default/_servicename_</file>.

<p>ARREGLAME: Proporcionar mas información sobre el manejo de demonios usando 
file-rc.

<sect1 id="inetd">Deshabilitar los servicios inetd
<p>
Usted debe parar todos los servicios innecesarios en su sistema, como
echo, chargen, discard, daytime, time, talk, ntalk y r-services
(rsh, rlogin y rcp) los cuales son considerados ALTAMENTE inseguros
(en cambio use ssh). Después de inhabilitarlos, usted debe revisar si
realmente necesita el demonio inetd. Mucha gente prefiere usar
los demonios en lugar de servicios de llamada via inetd. En los
ataques de Denial of service existen posibilidades en contra de inedt, las
cuales pueden incrementar la carga de la máquina tremendamente. Si
usted aun quiere ejecutar algún tipo de servicio inedt, utilize un
demonio de inet más configurable como xinetd o rlinetd.

<p> Usted puede inhabilitar directamente los servicios por la edición de
<file>/etc/inetd.conf</file>, pero Debian proporciona una mejor
alternativa para hacer esto:<tt>update-inetd</tt> (el cual comenta los
servicios de una forma que este pude fácilmente ser reactivado de
nuevo). Usted podría eliminar el demonio telnet ejecutando 
estos comandos para cambiar el archivo de configuración y  reiniciar
el demonio (en este caso el servicio telnet es inhabilitado): 

<example>
/usr/sbin/update-inetd --disable telnet
</example>
<!-- # /etc/init.d/inetd restart Not needed since the manpage says update-inetd
sends a SIGHUP, commented out as suggested by Dariusz Puchalak -->

<p>Si usted quiere tener servicios escuchando, pero no quiere que
escuchen todas las direcciones IP de su host, usted
podría usar una característica no documentada de inetd.<!-- ARREGLAME
write the information sent by Alexander to the debian-security mailing
list -->. O usar un demonio inetd alterno como <prgn>xinetd</prgn>.

<sect>Lea las listas de correo de seguridad de Debian

<p>Nunca es malo dar un vistazo en cualquier lista de correo de los
anuncios de seguridad de Debian, donde son anunciados avisos y
correcciones para promocionar paquetes por el equipo de Debian, o en
debian-security@lists.debian.org, donde usted puede participar en
discusiones acerca de cosas relacionadas a la Seguridad de Debian.

<p>Para recibir alertas importantes de la seguridad de update.
Envíe un e-mail a <url
name="debian-security-announce-request@lists.debian.org"
id="mailto:debian-security-announce-request@lists.debian.org">con la
palabra 'suscribir' en la línea "subject". Usted también puede
suscribirse a esta lista e-mail moderada en la pagina Web
<url name="http://www.debian.org/MailingLists/subscribe"
id="http://www.debian.org/MailingLists/subscribe">

<p>Estas listas de correo tienen un muy bajo volumen, y al
suscribirse a esta usted será inmediatamente alertado de los asuntos
de seguridad de la distribución Debian. Esto le permite
rápidamente cargar nuevos paquetes con correcciones en la
seguridad, lo cual es muy importante en el mantenimiento de un sistema
seguro. (Vea<ref id="update"> para mas detalles sobre como hacer
esto.) 



<chapt>Después de la instalación

<sect>Colocar una contraseña a lilo o grub
<p>
Es muy fácil entrar a una shell con el usuario root y cambiar las
contraseñas simplemente tecleando 
"&lt;name-of-your-bootimage&gt; init=/bin/sh". Luego de
cambiar las contraseñas y reingresar al sistema, la persona ha
tiene acceso ilimitado (como root) y puede hacer cualquier cosa que el/ella
quiera en el sistema. Después de este procedimiento, usted no tendrá
acceso a su sistema, porque usted no conoce la contraseña de root.
<p> Asegúrese que esto no pueda suceder, usted debería colocar una
contraseña para el cargador de linux. Usted puede escoger entre
una contraseña global y una contraseña para una imagen.

<p>
Para LILO usted necesita editar el archivo
<file>/etc/lilo.conf</file> y agregar una contraseña y restringirlo
como en el siguiente ejemplo:

<example>
image=/boot/2.2.14-vmlinuz
 label=Linux
 read-only
 password=hackme
 restricted
</example>

<p> Cuando haya terminado, ejecute LILO. Omitir la línea <tt>restricted</tt>
produce que LILO siempre pida una contraseña, aun si no se le pasan
parámetros a LILO.Los permisos defectuosos de <file>/etc/lilo.conf</file> para 
que el gran root lea yescriba, y se habilite el acceso de solo lectura para el 
grupolilo.conf's de root. 

<p> Si usted usa GRUB en lugar de LILO, edite
<file>/boot/grub/menu.lst</file> y agregue las siguientes dos líneas
al inicio (sustituyendo, por supuesto 'hackme' con la contraseña
deseada). Esto previene a los usuarios de editar los ítems de
entrada. 'timeout3' especifica tres segundos antes del
arranque del sistema por defecto.

<example>
timeout 3
password hackme
</example>

Para asegurar mas la integridad de la contraseña, usted
podría guardarla una forma encriptada. La utilidad de
grub-d5-crypt es que genera una contraseña la cual es compatible con el
algorítmo (md5) de encripción de grub. Para
especificar en GRUB que el formato de la contraseña md5 será usado,
use la siguiente instrucción:

<example>
timeout 3
password --md5 $1$bw0ez$tljnxxKLfMzmnDVaQWgjP0
</example>

El parámetro --md5 fue agregado para instruir a grub a realizar el
proceso de autenticación. La contraseña
proporcionada es la versión encriptada en md5 de "hackme". Usar el método de
encripción md5 es preferible a su contraparte en solo texto. Mas información 
acera de la contraseña GRUB puede ser encontrada en el paquete de grub-doc.

<sect>Eliminar el prompt de root del núcleo

<p>Los núcleos de Linux 2.4 proporcionan una forma para tener acceso a
la línea de comandos del administrador que será presentada justo
después de cargar el sistema de archivos cramfs. Un mensaje aparecerá
para permitir al administrador entrar en una línea de comandos con
permisos de root, esta línea de comandos puede ser usada manualmente
para cargar módulos cuando la autodetección falla. Este
comportamiento es el predeterminado para initrd's linuxrc. El
siguiente mensaje aparecerá:

<example>
Press ENTER to obtain a shell (waits 5 seconds)
</example>

<p>Para eliminar este comportamiento usted necesita cambiar 
<file>/etc/mkinitrd/mkinitrd.conf</file> y colocar:
<example>
# DELAY The number of seconds the linuxrc script should wait to
# allow the user to interrupt it before the system is brought up
DELAY=0
</example>
<p>Luego regenera su imagen del disco RAM. Usted puede hacer esto por ejemplo 
con:<example>º
# cd /boot
# mkinitrd -o initrd.img-2.4.18-k7 /lib/modules/2.4.18-k7
</example>
<p>O hacer (preferir):
<example>
# dpkg-reconfigure kernel-image-2.4.x-yz
</example>
<p>Note que DEBIAN 3.0 WOODY permite a los usuarios instalar 2.4 kernels 
(seleccionando<em>flavors</em>), <em>sin embargo</em> el defecto de 
kernel es de 2.2 (salvo para algunos artífices, para los cuales Kernel 2.2 no 
estaba en la entrada). Si usted considera esto un BUG considere el 
<url id="http://bugs.debian.org/145244" name="Bug 145244"> antes de enviar este.
<sect>Deshabilitar el arranque desde diskette
<p>
El MBR defectuoso en Debian antes de la versión 2.2 no actúa como un registro 
dominante en la entrada y deja abierto un método para quebrar fácilmente el 
sistema:<list>
<item>Presione shift al momento de entrar, y de inmediato un MBR aparece.
<item>Luego presione F, y su sistema entrará desde un disquete. Esto puede 
ser usado para tener un acceso de ROOT al sistema. 
</list>

<p>Este comportamiento puede ser cambiado totalmente por:

<example>
lilo -b /dev/hda
</example>

<p>Ahora LILO es puesto dentro del MBR. Este también puede ser
archivado agregando "boot=/dev/hda" para lilo.conf. Hay otra solución
la cual inhabilita rápidamente el MBR, completamente:

<example>
install-mbr -i n /dev/hda
</example>

<p>De otra forma, esta "puerta trasera" desde la cual mucha gente no
está enterada, puede salvar su pellejo si usted esta en aprietos con
su instalación por cualquier razón.
<p>ARREGLAMEcheck whether this really is true as of 2.2 or was it 2.1? INFO: 
Thebootdisks as of Debian 2.2 do NOT install the mbr, but only LILO

<sect>Restricción del acceso a la consola

<p>Algunas políticas de seguridad quieren forzar a los administradores
para registrarse en el sistema a través de la consola con su
usuario/contraseña y luego llegar a ser un superusuario
(con<prgn>su</prgn> o <prgn>sudo</prgn>). Esta política es
implementada en Debian al editar el archivo
<file>/etc/login.defs</file> o <file>/etc/securetty</file> cuando se
usa PAM. En: <list>

<item><file>login.defs</file>, edite el la variable CONSOLE , que
define un archivo o lista de terminales sobre las cuales la entrada de
root es permitida.
<item><file>securetty</file> agregando/removiendo las terminales desde
las cuales el acceso a root es permitido. </list>

<p>Cuando use PAM se hacen otros cambios para el proceso de registro,
los cuales pueden incluir restricciones para usuarios y grupos a
tiempos dados, puede ser configurado en <file>/etc/pam.d/login</file>.
Una interesante característica que puede ser incapacitada es la
posibilidad de registrar con contraseñas sin efecto (nulas). Esta
característica puede ser limitada removiendo el <em>nullok</em> de la
linea:


<example>
auth required pam_unix.so nullok
</example>


<sect>Montando particiones de manera correcta
<p>
cuando se monta una partición ext2, usted tiene varias opciones
adicionales para aplicar a el llamado montaje o a
<file>/etc/fstab</file>.
Por ejemplo, este fstab entra por la partición <file>/tmp</file>:
/dev/hda 7 /tmp ext2 defaults .nosuid.noexec.nodev 0 2
 
<example>
/dev/hda7 /tmp ext2 defaults,nosuid,noexec,nodev 0 2
</example>

<p> usted ve la diferencia a las secciones de opciones . La opción
<tt>nosuid</tt> ignora los bits setuid y setgid completamente ,
mientras que <tt>noexec</tt> prohibe la ejecución de programas
en ese punto de montaje, y
<tt>nodev</tt>, ignora los dispositivos.Esto suena grandioso , pero
esto

<list>
<item>únicamente se aplica a archivos del sistema ext2
<item>puede ser evitado fácilmente
</list>

<p>La opción <tt>noexec</tt> previene los binarios de ejecutarse directamente, 
pero se engaña fácilmente: 
<example>
alex@joker:/tmp# mount | grep tmp
/dev/hda7 on /tmp type ext2 (rw,noexec,nosuid,nodev)
alex@joker:/tmp# ./date
bash: ./date: Permission denied
alex@joker:/tmp# /lib/ld-linux.so.2 ./date
Sun Dec 3 17:49:23 CET 2000
</example>

<p> Sin embargo, muchos "script kiddies" cuentan con "xploits" que
intentan crear y ejecutar los archivos en <file>/tmp</file>.Si ellos
no tienen una pista, ellos entrarán en esta trampa. En otros términos,
un usuario no puede engañarse en ejecutar un binario troyanizado en
<file>/tmp</file> e.g. por ejemplo cuando él agrega a propósito
<file>/tmp</file>dentro de su PATH.

<p>También se previene de algún programa que podría depender en que
<file>/tmp</file> sea ejecutable. Más notablemente,
Debconf tiene (¿tenía?) algunos problemas que consideran esto, para más
información vea Bug <url id="http://bugs.debian.org/116448"
name="116448">.

<p> Lo siguiente es un ejemplo más completo. Una nota, sin embargo:
<file>/var</file> podrían ponerse en noexec, pero algún software como
Smartlist contiene sus programas en / var. El mismo aplicado a la
opción nosuid. 

<example>
/dev/sda6 /usr ext2 defaults,ro,nodev 0 2
/dev/sda12 /usr/share ext2 defaults,ro,nodev,nosuid 0 
2/dev/sda7 /var ext2 defaults,nodev,usrquota,grpquota 
 0 2/dev/sda8 /tmp ext2 
defaults,nodev,nosuid,noexec,usrquota,grpquota 0 2/dev/sda9 
/var/tmp ext2 defaults,nodev,nosuid,noexec,usrquota,grpquota 0 
 2/dev/sda10 /var/log ext2 defaults,nodev,nosuid,noexec 0 
 2/dev/sda11 /var/account ext2 defaults,nodev,nosuid,noexec 0 
 2/dev/sda13 /home ext2 
rw,nosuid,nodev,exec,auto,nouser,async,usrquota,grpquota 0 
2/dev/fd0 /mnt/fd0 ext2 defaults,users,nodev,nosuid,noexec 
0 0/dev/fd0 /mnt/floppy vfat 
defaults,users,nodev.nosuid,noexec 0 0/dev/hda /mnt/cdrom 
iso9660 ro,users,nodev.nosuid,noexec 0 0</example><sect1>Serie 
/tmp noexec
<p>Tenga cuidado si esta poniendo <file>/tmp</file>y usted quiere
instalar el nuevo software, desde que alguno podría usarlo para la
instalación. Apt es uno de esos programas (vea <url
id="http://bugs.debian.org/116448">) si no configuró propiamente
<tt>APT::ExtractTemplates::TempDir</tt> (vea <manref
name="apt-extracttemplates" section="1">). Usted puede poner esta
variable en <file>/etc/apt/apt.conf</file> a otro directorio con
privilegios exec que no sea <file>/tmp</file>

<p>Con respecto al noexec, por favor sea consciente que no podría ofrecerle 
tanta seguridad.Considere esto: 
<example>
$ cp /bin/date /tmp
$ /tmp/date
(does not execute due to noexec)
$/lib/ld-linux.so.2 /tmp/date
(works since date is not executed directly)
</example>

<sect1>Serie /usr leer-únicamente
<p> Si usted pusiera <file>/usr</file> leer - únicamente usted no
podrá instalar los nuevos paquetes en su Debian GNU / sistema Linux.
Usted tendrá, primero que remontar leer -escribir, instale los
paquetes y entonces remóntelo leer-únicamente. La última versión apt
(en Debian 3.0´woody´) puede configurarse para ejecutar las órdenes
antes y después de instalar los paquetes, para que usted pueda
propiamente querer configurarlo. 

<p>Hacer esto modifica <file>/etc/apt/apt.conf</file> y agrega:
<example>
 DPkg
 {
 Pre-Invoke { "mount /usr -o remount,rw" };
 Post-Invoke { "mount /usr -o remount,ro" };
 };
</example>

<p>Note que el Post-invoke puede fallar con un "/usr busy" error en el
mensaje. Esto pasa principalmente cuando usted está usando los
archivos durante la actualización en que se puso al día. Incomodando
pero no realmente una cantidad grande. Sólo hacerlo seguro que ésto
ya no se use y ejecute Post - Invoke manualmente. 
 
<sect id="update">Ejecute una actualización de seguridad 

<p>En cuanto generalmente se revelen los nuevos bugs de seguridad en
los paquetes, mantenedoras de debian y autores upstream generalmente
dentro de días o incluso en horas. Después de que el bug es fijo, un
nuevo paquete se proporciona en <url
name="http://security.debian.org"
id="http://security.debian.org">.Ponga la línea siguiente en sus
fuentes. la lista y usted conseguirá la seguridad que se pone al día
automáticamente, siempre que usted ponga al día su sistema. 
<example>
deb http://security.debian.org/debian-security stable/updates main contrib 
non-free</example>

<p>
La mayoría de las personas que no viven en un país que prohibe la 
importación o usa la criptografía fuerte,
debe agregar esta línea también: 
<example>
deb http://security.debian.org/debian-non-US stable/non-US main contrib non-free
</example>

<p>Si le gusta, usted puede agregar las líneas del deb-src también a apt. 
Vea <manref name="apt" section="8"> para detalles extensos.

<p>Usted debe dirigir la seguridad frecuentemente que se pone al día,
la inmensa mayoría de resultado de explotaciones de vulnerabilidades
conocidas que no se han remendado a tiempo, cuando un nombre de <url
id="http://www.cs.umd.edu/~waa/vulnerability.html"> name="papel por
Bill Arbaugh"> (presentó en el 2001 Simposio de IEEE en Seguridad y
Retiro) explica.

<p>ARREGLAME:Añade info cómo la firma de paquetes que se hace para que esto 
pueda hacerse automáticamente a través de un trabajo del cron (engaña 
grandemente :DNS). 
<sect>Acceso de acuerdo a las necesidades del usuario

<sect1> Uso de la autenticacion: PAM

<p>PAM (modulos de autenticación de enchufes ) permiten a los
administradores de sistema elegir como usar la aplicaciones
autenticadas . Note que PAM puede hacer nada a menos que una
aplicación es compilada con soporte para PAM . La mayor parte de las
aplicaciones que son enviadas con Debian 2.2 tienen este soporte
construido . Ademas , Debian no tiene soporte PAM antes del 2.2.
Cada aplicación con soporte PAM provee un archivo de configuración
en <file>/etc/pam.d/</file> el cual puede ser usado para modificar
este comportamiento. La siguiente descripción está lejos para
completarla, para mas información usted podria querer leer la guia de
el sistema administrador Linux -PAM <url
id="http://www.kernel.org/pub/linux/libs/pam/Linux-PAM-html/pam.html">
(en la principal distribución ubicada de PAM <url
id="http://www.kernel.org/pub/linux/libs/pam/">)

<p>PAM le ofrece a usted la posibilidad a ir por varios pasos de
autenticación una vez, sin el uso de conocimientos .Usted puede
autenticar de nuevo una base de datos Berkeley y de nuevo el archivo
de password normal y el uso únicamente de registros en si
correctamente autenticos en ambos. Usted puede limitar a muchos con
PAM , así como usted puede abrir sus puertas del sistema muy
extensamente. Así que tenga cuidado. Una línea de la típica
configuración tiene un campo de mando como su segundo elemento. 

<!-- Second in mine (old Debian v2.0 though), check this! (ARREGLAME)
(era) --> Generalmente debe ponerse a " requisito", el cual devuelve
un fracaso del login si hay una falta en el módulo. <!-- Lots of
fields in mine are "required", please elaborate? (ARREGLAME) (era) -->

<p>La primera cosa que me gusta hacer, es agregar soporte MD5 a las
aplicaciones de PAM, desde que esto ayuda, protege contra los
cracks (passwords del diccionario que puede ser más largo usando MD5).
Lo siguiente debe agregarse dos líneas a todos los archivos en
<file>/etc/pam.d/</file> ese acceso de concesión a la máquina, como
<tt>login</tt> and <tt>ssh</tt>.

<example>
# Be sure to install libpam-cracklib first or you will not be able to log in
password required pam_cracklib.so retry=3 minlen=12 difok=3
password required pam_unix.so use_authtok nullok md5
</example>
 

<p>¿Así, qué hace esta maravilla? Las primeras cargas de la línea en
el cracklib módulo de PAM que proporciona la contraseña
strenght-checking (fuerza-verificando) las sugerencias para una nueva
contraseña con una longitud mínima de 12 carácteres, una diferencia de
por lo menos 3 carácteres de la contraseña vieja, y permite 3
reintentos. La segunda línea introduce el módulo de la autenticación
normal con las contraseñas de MD5 y permite una cera de contraseña de
longitud. El director use_authtok es necesario para entregar la
contraseña del módulo anterior. 

<p>Para asegurarse que el root (administrador de Linux) del usuario
sólo puede anotarse en el sistema de los términos locales, la línea
siguiente debe habilitarse en <file>/etc/pam.d/login</file>:

<example>
auth requisite pam_securetty.so
</example>

<p>Entonces usted debe agregar los términos que el root del usuario
puede anotar en el sistema en <file>/etc/security/access.conf</file>.
Último pero no menor a la línea siguiente debe ser los anabled si
usted quiere preparar los límites del usuario. 

<!-- ARREGLAME: This is pam.d/login you're talking about, still? Elaborate? era -->
<example>
session required pam_limits.so
</example>

<p>Esto restringe los recursos del sistema que se permiten a los
usuarios (vea en la siguiente pagina <ref id="user-limits">. Por
ejemplo, usted podría restringir el número de logins coexistente (de
un grupo dado de usuarios, o sistema-ancho) usted puede tener, el
número de procesos, el tamaño de memoria...... 

<p>Ahora revise <file>/etc/pam.d/passwd</file> y cambie la primera
línea. Usted debe agregar el "md5" de la opción para usar las
contraseñas de MD5, cambie el lenght mínimo de contraseñas de 4 a 6 (o
más) y ponga un legth máximo, si usted desea. La línea resultante
mirará algo como: 

<example>
password required pam_unix.so nullok obscure min=6 max=11 md5
</example>

<p>Si usted quiere proteger su (un comando), para que sólo algunas
personas puedan usarlo para volverse a root en su sistema, usted
necesita agregar uno nuevo para agregar un nuevo "wheel" de grupo a
su sistema (ésa es la manera más limpia, desde que ningún archivo
tiene tal un permiso de grupo todavía). Agregue el root y los otros
usuarios que deberian ser capaces de ejecutar <tt>su</tt> a el
usuario de root a este grupo. Entonces agregue la línea siguiente a
<file>/etc/pam.d/su</file>:

<example>
auth requisite pam_wheel.so group=wheel debug
</example>

<p>Esto asegura que sólo personas de el grupo wheel pueden usar
<prgn>su</prgn> para volverse root. Otros usuarios no seran capaces de
volverse root. De hecho ellos conseguirán un mensaje negado si ellos
intentan volverse volverse root. 

<p>Si usted quiere que sólo ciertos usuarios autentiquen a un servicio
de PAM, esto es bastante fácil de lograr usando los archivos dónde los
usuarios que son permitidos al login (o no) se guarden. Sólo imagine
que usted quiere permitirle el login de ´ref´to al usuario vía ssh.
Así que usted lo pone en <file>/etc/sshusers-allowed</file> y le
escribe lo siguiente en <file>/etc/pam.d/ssh</file>:

<example>
auth required pam_listfile.so item=user sense=allow 
file=/etc/sshusers-allowed onerr=fail</example>

<p>Por último, pero no menos importante, cree
<file>/etc/pam.d/other</file> y coloque las líneas siguientes: 

<example>
auth required pam_securetty.so
auth required pam_unix_auth.so
auth required pam_warn.so
auth required pam_deny.so
account required pam_unix_acct.so
account required pam_warn.so
account required pam_deny.so
password required pam_unix_passwd.so
password required pam_warn.so
password required pam_deny.so
session required pam_unix_session.so
session required pam_warn.so
session required pam_deny.so
</example>

<p>Estas líneas mantendrán una buena configuración predefinida en
todas las aplicaciones que apoyan PAM (se niega el acceso por el valor
predeterminado).


<sect1 id="user-limits"> Los límites de el archivo.conf 

<p> Usted realmente debe hacer una mirada seria en este archivo. Aquí
usted puede definir los límites de recurso del usuario. Si usted usa
PAM, el archivo <file>/etc/limits.conf</file> se ignora y usted debe
usar en cambio <file>/etc/security/limits.conf</file>.

<p>ARREGLAME: Adquirir unos buenos limites.conf concluidos aquí. 

<sect1>Editar /etc/login.defs
<p>
El próximo paso es revisar la configuración básica y acción en el login del 
usuario.
<example>
FAIL_DELAY 10
</example>

Esta variable debe ponerse a un valor más alto, para hacerlo más
difícil usar el término para anotar usando la fuerza bruta. Si una
contraseña mala se teclea en, el posible asaltador (o el usuario
normal!) tiene que esperar por 10 segundos para conseguir un nuevo
login que incite realmente el tiempo que se consume cuando usted
prueba las contraseñas.Preste atención al hecho que esta escena es
inútil si se usa el programa de otra manera que el getty, como el
mingetty por ejemplo. 

<example>
FAILLOG_ENAB yes
</example>

Si usted habilita esta variable, se anotarán los logins fallados. Es
importante guardar huella de ellos para coger a alguien que pruebe un
ataque de fuerza bruta.

<example>
LOG_UNKFAIL_ENAB yes
</example>

Si usted pusiera la variable "FAILLOG_ENAB" asi, entonces usted
también deberia poner esta variable a sí. Esto grabará el usernames
desconocido si los login fallaron. Si usted hace esto, asegúrese de
que los logs tienen por ejemplo permisiones (640 por ejemplo, con una
escena de grupo apropiada como el adm), porque los usuarios entran en
su contraseña a menudo accidentalmente como el username y usted no
quiere otro para verlo.

<example>
SYSLOG_SU_ENAB yes
</example>

<p>Este uno habilita el logging de la pueba <tt>su</tt> a syslog.
Bastante importante en serias maquinas pero note que esto puede crear
el retiro de los resultados a medida que esten bien. 

<example>
SYSLOG_SG_ENAB yes
</example>

<p>Igual que SYSLOG_SU_ENAB pero lo aplica al programa <prgn>sg</prgn>.

<example>
MD5_CRYPT_ENAB yes
</example>

<p>Como lo expuesto anteriormente, MD5 suma grandemente las
contraseñas que reducen el problema de ataques del diccionario, desde
que usted puede usar las contraseñas más largas. Si usted está usando
slink, lea los documentos sobre MD5 antes de habilitar esta opción.Por
otra parte esto esta fijo en PAM. 

<example>
PASS_MAX_LEN 50
</example>

<p>Si se activan las contraseñas de MD5 en su configuración PAM,
Entonces esta variable debería ser ajustada al mismo valor que se uso
allí.

<!--
# TODO list:
# - There was a 'useful software section' why was it removed? jfs
# - Shorten overlong lines - there are lots of sections (by jfs?)
# where lines are routinely longer than 80 characters. Actually it
# ma<!doctype debiandoc system -->

<!--
# TODO list:
# - There was a 'useful software section' why was it removed? jfs
# - Shorten overlong lines - there are lots of sections (by jfs?) where
# lines are routinely longer than 80 characters. Actually it maicios.
-->
<sect1>Usar su

<p> Si usted realmente necesita que los usuarios se vuelvan el super
usuario en su sistema,e.g. por instalar los paquetes o agregar
usuarios, usted puede usar el comando <prgn>su</prgn> para cambiar su
identidad. Usted debe intentar evitar cualquier login como root del
usuario y en cambio usar <prgn>su</prgn>. Realmente, la mejor
solución es quitar su y cambiar a <prgn>sudo</prgn>, como él tiene más
rasgos que <prgn>su</prgn>. Sin embargo,<prgn>su</prgn> es más común
como se usa en muchos otro Unixes.


<sect1>Usar sudo

<p> <prgn>sudo</prgn> le permite al usuario ejecutar los comandos
definidos bajo la identidad de otro usuario, así como root. Si el
usuario agrega a <file>/etc/sudoers</file> y se autentica
correctamente, él es capaz de avanzar comandos en que se ha definido
<file>/etc/sudoers</file>. Las Violaciones, como las contraseñas
incorrectas o intentos de ejecutar un programa usted no tienen permiso
para ser anotado y mandado por correo a root.

<sect1 id="user-restrict">Restringiendo usuarios 

<p>A veces usted podría pensar que necesita tener los usuarios creados
en su sistema local para proporcionar un servicio (pop3 manda por
correo el servicio o ftp). Antes de hacer eso, primero recuerde que
la aplicación de PAM en Debian GNU/Linux le permite validar a los
usuarios con una variedad ancha de el servicio de directorio externo
(el radio, el ldap, etc.) con tal de que por el ,el libpam sea
empacado. 

<p>Si los usuarios necesitan ser creados y el sistema puede ser
remotamente de acceso tome en cuenta que los usuarios sean capaces al
login al sistema. Usted puede arreglar esto dando a los usuarios una
nula (<file>/dev/null</file>) interfaz de comandos (él necesitaría ser
listada en <file>/etc/shells</file>). Si usted quiere permítales a los
usuarios acceder a el sistema pero limitar sus movimientos, usted
puede usar el <file>/bin/rbash</file>, equivalente a agregar la
opción <tt>-r</tt> en bash (<em>RESTICTED SHELL</em> ver <manref
name="bash" section="1">). Por favor note que incluso con la interfaz
de comandos restringido, un usuario que entra en acceso a un programa
interactivo (eso podría permitirle la ejecución de un subshell) podría
poder desviar los límites de el shell.

<p>Debian no es proporcionado actualmente (pero puede serlo en el
futuro) el módulo del <file>pam_chroot</file>. Una alternativa a este
chroot es el servicio que proporciona el logging remoto (ssh,
telnet). 

<p>Si usted desea restringirlo <em>when</em> los usuarios pueden
acceder a el sistema que usted quiere tener personalizado
<file>/etc/security/access.conf</file> para sus necesidades. 

<sect2>Restringiendo ssh para los usuarios 

<p>Los sshd de Debian no le permitirán restringir el movimiento del
usuario a través del servidor desde que le falte la función de Chroot
que el anuncio (sshd2) el programa tiene (uso de 'ChrootGroups' o
'ChrootUsers', vea <manref name="sshd2_config" section="5">). Sin
embargo,hay un parche disponible eso le permitirá hacer esto, el
parche, puede recuperarse del informe <url
id="http://bugs.debian.org/139047" name="Bug report 139047"> o <url
id="http://www.cag.lcs.mit.edu/~raoul/"> (y podría aplicarse en el
paquete de OpenSSH en el futuro). Emanuel Lacour tiene los paquetes
del ssh con este rasgo a <url
id="http://debian.home-dn.net/woody/ssh/">, yendo a través de el paso
de la recopilación se recomienda, sin embargo. Una descripción de
todos los pasos necesitados puede encontrarse en <url
id="http://mail.incredimail.com/howto/openssh/"> (casi todos son
aplicables a Debian aun cuando habla sobre RedHat 7.2). Después de
aplicar el parche simplemente usted modifica lo que necesita el
<file>/etc/passwd</file> cambiando el camino de la casa de los
usuarios (con la especial ficha <tt>/./</tt>):

<example>
joeuser:x:1099:1099:Joe Random User:/home/joe/./:/bin/bash
</example>


<p>Esto restringirá <em>both</em> accesos de el interfaz de comandos
remoto así como la copia remota a través del canal ssh.

<p>Asegúrese para tener todos los binarios necesitados y bibliotecas
en el el camino del chrooted para los usuarios. Estos archivos deben
poseer por root evitar ser manoseados por el usuario (para terminar
el chrooted encarcelado). Una muestra podría incluir:

<example>
./bin:
total 660
drwxr-xr-x 2 root root 4096 Mar 18 13:36 .
drwxr-xr-x 8 guest guest 4096 Mar 15 16:53 ..
-r-xr-xr-x 1 root root 531160 Feb 6 22:36 bash
-r-xr-xr-x 1 root root 43916 Nov 29 13:19 ls
-r-xr-xr-x 1 root root 16684 Nov 29 13:19 mkdir
-rwxr-xr-x 1 root root 23960 Mar 18 13:36 more
-r-xr-xr-x 1 root root 9916 Jul 26 2001 pwd
-r-xr-xr-x 1 root root 24780 Nov 29 13:19 rm
lrwxrwxrwx 1 root root 4 Mar 30 16:29 sh -> bash

./etc:
total 24
drwxr-xr-x 2 root root 4096 Mar 15 16:13 .
drwxr-xr-x 8 guest guest 4096 Mar 15 16:53 ..
-rw-r--r-- 1 root root 54 Mar 15 13:23 group
-rw-r--r-- 1 root root 428 Mar 15 15:56 hosts
-rw-r--r-- 1 root root 44 Mar 15 15:53 passwd
-rw-r--r-- 1 root root 52 Mar 15 13:23 shells

./lib:
total 1848
drwxr-xr-x 2 root root 4096 Mar 18 13:37 .
drwxr-xr-x 8 guest guest 4096 Mar 15 16:53 ..
-rwxr-xr-x 1 root root 92511 Mar 15 12:49 ld-linux.so.2
-rwxr-xr-x 1 root root 1170812 Mar 15 12:49 libc.so.6
-rw-r--r-- 1 root root 20900 Mar 15 13:01 libcrypt.so.1
-rw-r--r-- 1 root root 9436 Mar 15 12:49 libdl.so.2
-rw-r--r-- 1 root root 248132 Mar 15 12:48 libncurses.so.5
-rw-r--r-- 1 root root 71332 Mar 15 13:00 libnsl.so.1
-rw-r--r-- 1 root root 34144 Mar 15 16:10
libnss_files.so.2
-rw-r--r-- 1 root root 29420 Mar 15 12:57 libpam.so.0
-rw-r--r-- 1 root root 105498 Mar 15 12:51 libpthread.so.0
-rw-r--r-- 1 root root 25596 Mar 15 12:51 librt.so.1
-rw-r--r-- 1 root root 7760 Mar 15 12:59 libutil.so.1
-rw-r--r-- 1 root root 24328 Mar 15 12:57 libwrap.so.0

./usr:
total 16
drwxr-xr-x 4 root root 4096 Mar 15 13:00 .
drwxr-xr-x 8 guest guest 4096 Mar 15 16:53 ..
drwxr-xr-x 2 root root 4096 Mar 15 15:55 bin
drwxr-xr-x 2 root root 4096 Mar 15 15:37 lib

./usr/bin:
total 340
drwxr-xr-x 2 root root 4096 Mar 15 15:55 .
drwxr-xr-x 4 root root 4096 Mar 15 13:00 ..
-rwxr-xr-x 1 root root 10332 Mar 15 15:55 env
-rwxr-xr-x 1 root root 13052 Mar 15 13:13 id
-r-xr-xr-x 1 root root 25432 Mar 15 12:40 scp
-rwxr-xr-x 1 root root 43768 Mar 15 15:15 sftp
-r-sr-xr-x 1 root root 218456 Mar 15 12:40 ssh
-rwxr-xr-x 1 root root 9692 Mar 15 13:17 tty

./usr/lib:
total 852
drwxr-xr-x 2 root root 4096 Mar 15 15:37 .
drwxr-xr-x 4 root root 4096 Mar 15 13:00 ..
-rw-r--r-- 1 root root 771088 Mar 15 13:01
libcrypto.so.0.9.6
-rw-r--r-- 1 root root 54548 Mar 15 13:00 libz.so.1
-rwxr-xr-x 1 root root 23096 Mar 15 15:37 sftp-server
</example>


<sect1>Manual de auditoría del usuario 

<p>Si usted es paranoico usted podría querer agregar a los usuarios
una definición <file>.profile</file> que pone el ambiente en cierto
modo tal que ellos no pueden retirar las capacidades de la auditoría
de la interfaz de comandos (los comandos son descargas a
<tt>$HISTFILE</tt>. El <file>.profile</file> podría ponerse como
sigue: 

<example>
HISTFILE=/home/_user_/.bash_history
HISTSIZE=100000000000000000
HISTFILESIZE=10000000000000000
set -o HISTFILE
set -o HISTSIZE
set -o HISTFILESIZE
export HISTFILE HISTSIZE HISTFILESIZE
</example>

<p>Note: el - o atribuye colocar una variable leer-únicamente en bash. 

<p> Para trabajar esto el usuario no pueden modificar el
<file>.profile</file> o <file>.bash_history</file> pero debe poder
primero leer uno y escribe uno en el segundo. Usted puede hacer esto
fácilmente cambiando éstos archivos y el directorio dónde ellos
residen para ser poseídos por otro usuario (root), y da escritura a los
permisos del grupo de usuarios a la historia del archivo. Otra opción
está terminando el uso del programa <prgn>chattr</prgn>. 
 
<p> Si usted es completamente paranoico y quiere intervenir en el
comando de cada usuario,usted podría tomar bash a el código de la
fuente, revise este y haga envío a todos de que el usuario tecleó en
otro archivo. O tiene <package>ttysnoop</package> constantemente algun
nuevo monitor ttys y dump en el rendimiento en un archivo. Otro
programa útil es <url name="Snoopy"
id="http://sourceforge.net/project/?group_id=2091"> el cual es un
programa usuario-transparente que engancha como en una
bibliotecaproporcionando una envoltura alrededor del execve llamadas
(), cualquier comando ejecuta el estar anotado a syslogd usando la
facilidad del <tt>authpriv</tt> facility (usualmente storead a
<file>/var/log/auth.log</file>. <!-- ARREGLAME: Debian package for
snoopy??? --> 

<p> Note que usted no puede usar el comando <prgn>script</prgn> por
esto desde que este no funcionará como una interfaz de comandos (aun
si usted agrega esto a <file>/etc/shells</file>.

<sect1> Completa auditoría del usuario 

<p> El ejemplo anterior es una manera simple de configurar el usuario
interviniendo el cual no podría ser útil para los sistemas complejos.
Si éste es su caso, usted necesita mirar a <package>acct</package>, la
contabilidad de utilidades. Éstos anotarán todos los comandos corridos
por usuarios o procesos en el sistema, al gasto de espacio del disco.


<p> Al activar la contabilidad, toda la información sobre los procesos
y el usuario se guarda bajo <file>/var/account/</file>, más
específicamente en el <file>pacct</file>. El paquete de contabilidad
incluye algunas herramientas (<prgn>sa</prgn> y <prgn>ac</prgn>) para
analizar estos datos. 

<sect1> Repasando los perfiles del usuario 

<p> Si usted quiere normalmente <em>see</em> a los usuarios qué están
haciendo, cuando esten ellos conectándos usted pueden usar la base de
datos de <file>wtmp</file> que incluye toda la información del login.
Este archivo puede procesarse con varias utilidades, entre ellos
<prgn>sac</prgn> el cual puede hacer un profile en cada usuario que
muestra en que estructura de tiempo ellos normalmente anotan adelante
en el sistema. 

<p> En caso de que usted tiene la contabilidad activada, usted también
puede usar las herramientas con tal de que por esto en el comando
determine cuando los usuarios acceden a el sistema y qué ellos
ejecuten. 

<sect>Proporcionando acceso seguro a los usuarios
<sect1>Limitando lo que los usuarios pueden ver/hacer
<sect2 id="limit-user-perm">Limitando el acceso a la información de otros usuarios

<sect> Usando tcpwrappers 

<p> Las envolturas de TCP se desarrollaron cuando no había ningún
filtro del paquete real disponible y el control de acceso fue
necesitado. Las envolturas de TCP permiten permitir o negar un
servicio para un organizador o un dominio y defina un valor permitido
o niegue la regla. Si usted quiere que más informaciones de una
mirada a <manref name="hosts_access" section="5">.

<p> Muchos servicios instalados en Debian son cualquiera de estos dos:


<list>
<item> lanzó a través del servicio del tcpwrapper (<file>tcpd</file>)
<item> compiló con el soporte libwrapper incorporado. </list>

<p> En la primera mano, de servicios son configurados en
<file>/etc/inetd.conf</file>, esto incluye telnet,ftp,netbios,swat and
finger (usted verá que el archivo de la configuración se ejecute
primero <prgn>/usr/sbin/tcpd</prgn>. Por otro lado, aun cuando un
servicio no se lanza por el superdemonio del <prgn>inetd</prgn> ,en
cualquier caso,sujetó las reglas de envolturas de tcp compilando su
soporte en él. Los servicios compilados con las envolturas del tcp en
Debian incluyen ssh,portmap, in.talk, rpc.statd, rpc.mountd,gdm,oaf
(el demonio activador de GNOME), Nessus y muchos otros. 

<p> Tenga en cuenta esto cuando el <prgn>tcpchk</prgn> está avanzando.
Usted puede agregar servicios en que se unen a la biblioteca de la envoltura de 
los archivos <file>host.deny</file> y <file>hosts.allow</file> pero 
los <prgn>tcpchk</prgn> advertirá que este no puede encontrar 
esos servicios desde que parece para ellos en <file>/etc/inetd.conf</file>
(el manpage no es totalmente exacto aquí). 

<p> Ahora, aquí viene un truco pequeño, y probablemente la intrusión
más pequeña del sistema de descubrimiento disponible. En general,
usted debe tener una política decente del cortafuego como una primera
línea, y envolturas del tcp como la segunda línea de defensa. Un
truco pequeño es poner un comando SPAWN <footnote>beware of the case
here since <em>spawn</em> will not work</footnote>en /etc/hosts.deny
que envía correos a root siempre que hay un servicio negado en las
envolturas de los gatillos: 

<example>
ALL: ALL: SPAWN ( \
 echo -e "\n\
 TCP Wrappers\: Connection refused\n\
 By\: $(uname -n)\n\
 Process\: %d (pid %p)\n\
 User\: %u\n\
 Host\: %c\n\
 Date\: $(date)\n\
" | /usr/bin/mail -s "Connection to %d blocked" root) &
</example>

<p><em> Beware </em>(tenga cuidado): El ejemplo anterior impreso puede
fácilmente ser DoSed por estar haciendo las muchas conexiones en un
período corto de tiempo. Muchos correos electrónicos significan mucho
del archivo I/O para enviar únicamente unos correos. 

<!--
# Could this example be more interesting? 
# It also relates to the next section (jfs)
#
# era: cf hosts_access(5) manual page,
# and why are you not using logger(1) here? (ARREGLAME?)
#
#&lt;example&gt;
#ALL: ALL: SPAWN ( \
# /usr/local/sbin/send_syslog %u %c %d )
#&lt;example&gt;

# With send_syslog as:
##!/usr/bin/perl -w
#
#use Sys::Syslog qw(:DEFAULT setlogsock);
#
#$user=shift(@ARGV) || 'unkown';
#$host=shift(@ARGV) || 'unkown';
#$service=shift(@ARGV) || 'unkown';
#setlogsock('unix');
#openlog("alert",'', 'user');
#syslog('warning', 'Connection from %s at %s to %s blocked.', ($user, $host, 
$service) );#closelog();
#
#exit 0;
-->

<sect id="log-alerts"> La importancia de logs y alarmas 

<p>Cómo las bitácoras y alarmas son tratadas es un problema importante
en un sistema seguro. Es fácil ver que, aun cuando el sistema está
perfectamente configurado y, supuestamente, 99% asegurado. Si el 1%
sucede, y no hay seguridad midiendo en tales situaciones, primero,
descubra esto y, segundo, las alarmas del aumento, el sistema no está
en absoluto seguro. 

<p> Debian GNU/Linux proporciona algunas herramientas para hacer el
análisis de bitácoras, la mayoría, notablemente el
<package>logcheck</package>. Sin embargo, allí se está considerando
mucho análisis del log que no puede cubrirse totalmente aquí, un
recurso bueno para la información es <url name="Couterpane's Log
Analysis Resources"
id="http://www.counterpane.com/log-analysis.html">.


<sect1>Configurando el sitio donde las alertas son enviadas

<p>Debian viene con una configuración de syslog estándard dentro
de (etc/syslog.conf)que anota mensajes para apropiar archivos
dependiendo de la facilidad del sistema. Usted debería familiarizarse
con ésto, debe mirar el archivo <file>syslog.conf</file> o sino la
documentación. Si usted pretende mantener un sistema seguro usted
podrá estar precavido de a dónde se mandan los mensajes de registro de
manera que no pasen inadvertidos. 

<p>Por ejemplo, enviar mensajes a la consola es una configuración
interesante ya que es útil para muchos sistemas de nivel de
producción. Pero para muchos sistemas también es importante añadir una
nueva máquina que podría servir como servidor de registro (i.e. esto
recibe los registros desde todos los otros sistemas). <p>El correo de
Root también deberia ser considerado, muchos controles de seguridad
como <package>snort</package>) envían alarmas al buzón de Root. Este
buzón normalmente apunta al primer usuario que se creó en el sistema
(compruebe <file>/etc/aliases</file>). Tenga cuidado de enviar correo
de root a cualquier lugar donde pueda ser leído (ya sea local ó
remotamente) 

<p>Hay otros informes y alianzas en su sistema. En un pequeño sistema,
ésto probablemente lo más simple para asegurarse de que todas las
alianzas apunten hacia la cuenta de root, y que el correo para root
este dispuesto para el sistema de buzón personal del administrador.

<p>ARREGLAME: it would be interesting to tell how a Debian system can
send/receive SNMP traps related to security problems (jfs). Check:
<package>snmptraglogd</package>, <package>snmp</package> and
<package>snmpd</package>.


<sect1>Usar un servidor de registro

<p>Un servidor de regiastro es un servidor que recoge remotamente
datos syslog de la red. Si una de sus máquinas es craqueada, el
intruso no puede cubrir sus huellas, a menos de que también altere el
servidor de registro. Así el servidor de registro deberá ser
especialmente seguro. Convertir una máquina en servidor de registro es
simple. Simplemente lance syslogd con 'syslogd -r' y nace un nuevo
servidor de registro. Seguidamente, congifure las otras máquinas para
que envíen datos al servidor de registro, Para hacer ésto
permanentemente en Debian edite <file>/etc/init.d/sysklogd</file> y
cambie la línea:

<example>
SYSLOGD=""
</example>
to 
<example>
SYSLOGD="-r"
</example>

Luego, configure las otras máquinas al enviar los datos al servidor de
registro. Agrege una entrada como la siguiente
<file>/etc/syslog.conf</file>:

<example>
facility.level @your_loghost
</example>

Mire la documentación para saber que usar en lugar de <em>facility</em>
y <em>level</em> (ellos no deben ser introducirse de forma literal
como se hace aquí).  Si usted quiere registrar todo remotamente, escriba:

<example>
*.* @your_loghost
</example>

dentro de su syslog.conf. Registrar tanto remota como localmente es la
mejor solución (el atacante creerá haber cubierto sus pasos
después de eliminar los archivos locales de registro). Para información
adicional consulte el manual de paginas <manref name="syslog"
section="3">, <manref name="syslogd" section="8"> y <manref
name="syslog.conf" section="5">.


<sect1>Permisos para el archivo de registro

<p>No sólo es importante decidir como son usadas las alertas, sino
también quienes tiene acceso a éstas, i.e. puede leer o modificar los
archivos de registro (si no se está usando un servidor remoto de
registros). Las alertas de seguridad que el atacante pueda cambiar o
inhabilitar no son de mucho valor en el momento de la invasión.

<!-- It should be explained why after installation this is not
 already done, jfs -->

<p> Algunos permisos para el achivo de registro no son perfectos
despúes de la instalación. Primero <file>/var/log/lastlog</file> y
<file>/var/log/faillog</file>no necesitan tener un permiso de lectura
para un usuario normal. En el archivo lastlog usted puede ver quien
entró recientemente y en faillog usted mira un resumen de las entradas
fallidas. El autor recomienda cambiar permisos a 660.Haga una breve
revisión en sus archivos de registro y decida muy cuidadosamente
cuales logfile deben tener permiso de lectura y escritura para un
usuario con UID distinto a 0 y un grupo aparte de 'adm' o 'root'.

<p> Quiero enfatizar que los permisos del archivo de registro apache
son realmente malos debido al hecho de que el usuario apache tiene los
registros del archivo apache. Si un ususario obtiene un interfaz de
comandos con una puerta trasera de apache, ellos pueden eliminar
fácilmente los archivos de registro.

<!--
# This is quite personal, IMHO, since this is due to the fact that
# root priviledges are dropped on startup. I prefer an attacker to
# erase a service's logfiles than to erase all of my system's logs.
# Anyhow, this can be improved by changing user permissions after
# rotation
-->


<sect id="chroot">Uso del cambio de directorio raíz

<p><prgn>chroot</prgn> es una de las posibilidades más poderosas para
restringir un demonio, un ususario u otro servicio. Sólo imagine una
cárcel alrededor de su objetivo, del cual no puede escapar
(normalmente, hay sin embargo muchas condiciones que permiten un
escape fuera de su cárcel). Si usted no confía en un usuario, puede
crear un cambio en el ambiente. Ésto puede usar un pequeño espacio
adicional de disco, puesto que se necesita copiar todos los
ejecutables necesarios, así como las biblioteca dentro de la cárcel.
Aún si el usuario hace algo malicioso, el alcance de un daño es
limitado al aseguramiento. 

<p>Un buen ejemplo de este caso,es,si usted no autentica en contra de
<file>/etc/passwd</file>puede usar LDAP o MySQL. Así que su demonio
ftp únicamente necesita un binario y quizá un poco de biblioteca. Un
cambio de directorio raíz seria un excelente seguro del mejoramiento
de condiciones externas; si una nueva vulneración es conocida para
este demonio ftp, entonces solamente el atacante puede vulnerar el UID
del usuario de demonio ftp y nada más. 

<p>Por supuesto, muchos otros demonio también podrán beneficiarse
desde este modo de arranque.

<p>Sin embargo, esté prevenido que el seguro <prgn>chroot</prgn> puede
estar dañado si el usuario entra en éste es el superusuario. Así que
usted necesita que el servicio corra como un usuario no privilegiado.
Límitando su ambien usted está límitando la palabra leíbles que el
servicio de archivos ejecutables puede acceder, así, usted límita las
posibilidades de una subida del privilegio por el uso de
vulnerabilidades de seguridad de los sistemas locales. Incluso en
ésta situación usted no puede estar copmpletamente seguro de que no
hay ninguna manera para que un atacante hábil se escape de algún modo
del aseguramiento. Usando solamente un servidor de programa, el cual
tiene una reputación de medida de aseguramiento que es buena. Incluso
la cavidad minusiosa de archivos manuales puede ser abierta por un
atacante hábil interrumpiendo el sistema por dentro. Despues de todo,
<prgn>chroot</prgn> no fue diseñado como una herramienta de
comprobación.

<!-- ARREGLAME: this information should be checked when woody gets
released -->

<p>Como una nota adicional, Demonios omite BIND (Internet nombra el
servicio) esto no viene con un cambio de directorio raíz, de hecho
demonios no viene con un cambio de directorio raíz. Éste debe cambiar
en el woody (3.0) release.

<p>También hay algún software (no actualmente en Demonios pero el
cual podría estar disponible en el futuro) que puede ayudar al arreglo
del ambiente del cambio de directorio raíz. Por ejemplo,
<prgn>makejail</prgn> puede crear y poner al día un aseguramiento del
cambio de directorio raíz con la canfiguración de pequeños archivos.
También intenta suponer e instalar dentro del aseguramiento todos los
archivos requeridos por demonios. Más información en <url
id="http://www.floc.net/makejail/"> <prgn>Jailer</prgn>. Es una
herramienta similar la cual puede ser cobrada desde <url
id="http://www.balabit.hu/downloads/jailer/">.

<sect1>Configuarción Kernel 

<sect1 id="kernel-conf">Características de la red configurando kernel 
<p>ARREGLAME: Content missing

<p>Muchas características de kernel pueden ser modificadas ya que
actualmente se repiten algunas cosas dentro del sistema del arhivo
<file>/proc</file> o usando el sistema ctl. Pra ingresar a <tt>sysctl
-A</tt> puede mirar que debe configurar y que otras opciones hay.
Solamente en algunas cosas usted necesita editar algunas cosas aquí,
pero usted puede aumentar la seguridad que es un buen camino.

 
<!-- ARREGLAME: Should the prefix on all of these be /proc/sys/? era -->

<example>
net/ipv4/icmp_echo_ignore_broadcasts = 1
</example>

Este es un 'emulador de windows' porque éste funciona como windows
para que emita el sonido si uno de estos es establecido para 1. <!--
Which means what exactly? Simply that it ignores broadcasts? ARREGLAME -->
De otro modo, ésto no hace nada.

<example>
net/ipv4/icmp_echo_ignore_all = 0
</example>

<p>Si usted no quiere bloquear ICMP sobre su cortafuego, permira ésto.
<!--
Does this mean, if you want to block ICMP but not in your firewall? ARREGLAME
-->

<example>
net/ipv4/tcp_syncookies = 1
</example>

<p>Ésta opción es una espada de doble filo. Por otra parte su sistema
está protegido contra la inundación de syn; por otra parte viola las
normas definidas (RFCs). Esta opción es totalmente muda, como cuando
usted inunda otro lado que está iniudado, así que el otro lado también
está ocopado. Si usted quiere cambiar está opción usted también puede
cambiar ésto dentro de <tt>/etc/network/options</tt> para colocar
<tt>syncookies=yes</tt>.

<example>
/proc/sys/net/ipv4/conf/all/log_martians = 1
</example>

<p>Los paquetes con direcciones imposibles (debido a las rutas
incorectas) sobre el registro que obtuvo su red.

<p> Este es un ejemplo del ajuste en otro material útil. Usted debería
añadir ésta información dentro de la escritura de
<file>/etc/network/interface-secure</file> (el nombre dado como un
ejemplo) y es llamado desde <file>/etc/network/interfaces</file> como
éste:

<example>
auto eth0
iface eth0 inet static
 address xxx.xxx.xxx.xxx
 netmask 255.255.255.xxx
 broadcast xxx.xxx.xxx.xxx
 gateway xxx.xxx.xxx.xxx
 pre-up /etc/network/interface-secure

</example>

<example>
# Script-name: /etc/network/interface-secure
# Modifies some default behaviour in order to secure against 
# some TCP/IP spoofing & attacks
#
# Contributed by Dariusz Puchalak 
#
echo 1 > /proc/sys/net/ipv4/icmp_echo_ignore_broadcasts 
 # broadcast echo protection enabled
echo 0 > /proc/sys/net/ipv4/ip_forward # ip forwarding disabled
echo 1 > /proc/sys/net/ipv4/tcp_syncookies # TCP syn cookie protection enabled
echo 1 >/proc/sys/net/ipv4/conf/all/log_martians 
 # Log packets with impossible 
addresses # but be careful with this on heavy loaded web 
serversecho 1 > /proc/sys/net/ipv4/ip_always_defrag 
 # defragging protection always 
enabledecho 1 > /proc/sys/net/ipv4/icmp_ignore_bogus_error_responses 
 # bad error message protection 
enabled
# now ip spoofing protection
for f in /proc/sys/net/ipv4/conf/*/rp_filter; do
 echo 1 > $f
done

# and finally some more things:
# Disable ICMP Redirect Acceptance
for f in /proc/sys/net/ipv4/conf/*/accept_redirects; do
 echo 0 > $f
done

for f in /proc/sys/net/ipv4/conf/*/send_redirects; do
 echo 0 > $f
done

# Disable Source Routed Packets
for f in /proc/sys/net/ipv4/conf/*/accept_source_route; do
 echo 0 > $f
done

# Log Spoofed Packets, Source Routed Packets, Redirect Packets
for f in /proc/sys/net/ipv4/conf/*/log_martians; do
 echo 1 > $f
done
</example>

<sect1 id="kernel-fw">Configuarción de las características de los cortafuegos

<p>Para tener la capacidad del cortafuego, para proteger el sistema
local u otros <em>detrás</em> de este, el kernel necesita estar
compidalo con las capacidades del cortefuego. El Debian normal 2.2
kernel (también 2.2) susmistra el paquete de filtro del cortafuego
<prgn>ipchains</prgn>, el kernel normal de Debian 3.0 (kernel 2.4)
suministra el <em>poderoso</em> paquete de filtros de cortafuegos
<prgn>iptables</prgn> (filtro de la red). Las distribucines más viejas
de Debian necesitan el parche apropiado del kernel (Debian 2.1 usa el
kernel 2.0.34).

<p>En todo caso, es bastante fácil usar un kernel diferente al
suministrado por Debian. Usted puede encontrar paquetes de kernel
pre-compilados que puede instalar fácilmente en el sistemas de Debian.
Usted tambiém puede obtener las fuentes del kernel usando
<package>kernel-source-X</package> y armar paquetes de kernel
personalizados con <package>make-kpkg</package>.

<p>Configurando los cortafuegos en Debian se discute más a fondo en <ref
id="firewall-setup">.

<sect id="kernel-patch"> Añadiendo parches al kernel 

ARREGLAME: More content

<p>Debian GNU/Linux suministra algunos de los parches para el kernel
de Linux que aumentan su aseguramiento. Estos incluyen: <list>

<item> Detección de Intrusos en Linux (dentro del paquete 
<package>lids-2.2.19</package>)
<item>Capacidades de Linux (dentro del paquete <package>lcap</package>)

<item>Confianza en Linux (dentro del paquete <package>trustees</package>)

<item> Linux Aumentando con NSA (dentro del paquete
<package>selinux</package> también disponible desde <url
id="http://www.coker.com.au/selinux/" name="the developer's
website">)

<item><url name="kernel-patch-2.2.18-openwall"
id="http://packages.debian.org/kernel-patch-2.2.18-openwall">

<item><package>kernel-patch-2.2.19-harden</package>

<item>Capacidades de Linux (dentro del paquete <package>lcap</package>

<item>soporte IPSEC en el kernel (dentro del paquete
<package>kernel-patch-freeswan</package>)

<item><package>kernel-patch-int</package>

</list>


<sect>Transferencia segura de archivos

<p> Copiar los archivos de una manera segura desde un computador a
otros puede ser logrados usando 'scp' que está incluido en el paquete
ssh. Esto funciona como rcp pero es completamente encriptado, así los
tipos malos ni siquiera pueden averiguar QUE copia usted.

<sect>Límites y control de los sistemas de archivos

<sect1>Uso de Quotas

<p>Tener una buena política de quotas es importante, esto abstiene a
los usuarios de llenar el disco duro. <p> Usted puede usar dos
sistemas diferentes de quotas: quota de usuario y quota de grupo. Como
usted provablemente dedujo, la quota del usuario límita la cantidad de
espacio del que un usuario puede disponer, la quota del grupo hace lo
equivalente para los grupos. Tenga en cuenta ésto cuando esté
organizando el tamaño de quotas.

<p>Hay algunos puntos importantes para considerar acerca de la
configuración del sistema de quotas:

<list>
<item>Mantener las quotas suficientemente pequeñas, para que los
usuarios no ocupen el espacio de su disco.
<item>Mantener las quotas lo suficientemente grandes, para que los
usuarios no se quejen o su quota de correo les impida aceptar un
correo por un periodo de tiempo largo.
<item>Use las quotas para todas las áreas en las que los usuarios
puedan escribir, en <file>/home</file> como también en
<file>/tmp</file>.
</list>

<p>Cada partición/directorio al que los usuarios tienen acceso
completo de escritura deberían permitir el uso de quotas. Encuentre
esas divisiones y directorios y calcule un tamaño de quota trabajable,
que combine el uso y la seguridad.

<p>Ahora que usted quiere usar quotas. Primero que todo usted necesita
revisar que habilito el uso de quotas en el kernel. Si no, usted
necesitará recompilarla. <!-- ARREGLAME: how to check for quota support?
What to tweak when recompiling? --> Después de ésto dése cuenta que
el paquete 'quota' esté instalado. Si no está usted necesitará este.

<p> Habilitar la quota para los respectivos sistemas de archivos es
tan fácil como modificar la configuración <tt>inicial</tt> ajustándola
a <tt>defaults,usrquota</tt> en su archivo <file>/etc/fstab</file> .
Si usted necesita un quota para grupos, sustituya <tt>usrquota</tt>
por <tt>grpquota</tt>. Puede usar ambos. Luego cree unos archivos
quota.user y quota.group vacios en la raíz de los sistemas de
archivos en los que usted quiera usar quotas (Ej. con <tt>touch
/home/quota.user /home/quota.group</tt> para el sistema de archivos
<file>/home</file>).

<p> Reinicie la quota haciendo <tt>/etc/init.d/quota
stop;/etc/init.d/quota start</tt>. Ahora la quota debería estar
ejecuténdose, y los tamaños de las quoatas pueden establecerse.

<p> Modificar quotas para un usuario específico (digamos 'ref')
puede hacerse con <tt>edquota -u ref</tt>. Los grupos de quotas se
pueden modificar con <tt>edquota -g &lt;group&gt;</tt>. Después
establezca el límite suave y duro para las quotas y/o quotas de
i-nodos cuando sea necesario.

<p> Para más información acerca de las quotas, lea el manual de
páginas sobre las quotas, y el
mini-howto (<file>/usr/share/doc/HOWTO/en-html/mini/Quota.html</file>).

<p>Usted puede o no gustar de <package>lshell</package>, el cual viola
el FHS. También debe tener un cuenta que pam_limits. puede suministrar
la misma funcionalidad que <package>lshell</package> el cual es
huérfano actualmente. <url id="http://bugs.debian.org/93894"
name="orphaned"> <!-- Duplicated section "Logfile permissions" removed
(era) --> <!-- Duplicated section "Setting up setuid check" removed
(era) -->

<sect1>chattr/lsattr

<p> Estos dos comandos son muy útiles, pero solo funcionan con el
sistema de archivos ext2. Con 'lsattr' puede listar los atributos de
un campo, y con 'chattr' puede cambiarlos. Note que los atributos no
son l amisma cosa que los permisos. Hay muchos atributos, pero
solamente menciono los más importantes para incrementar la seguridad.
Hay dos flags los cuales solamente los puede establecer el
superusuario.

<p> En primer lugar está flag 'a'. Si se establece un archivo, este
archivo puede ser abierto solamente para añadir. Este atributo es útil
para algunos archivos en <file>/var/log/</file>,aunque se podría
considerar que fuesen quitados algunas veces debido a la rotación de
scripts de registro.

<p> La segunda flag es 'i', en corto immutable. Si se establece un
archivo, no puede ser modificado ni borrado o renombrado y no se
creará ningún link hacia él. Si no quiere que los usuarios miren en
sus archivos la configuración puede establecer este flag y quitar el
permiso de lectura. Más aun, ésto puede darle un poco más de seguridad
contra los atacantes, porque el cracker puede confundirse al no ser
capaz de borrar un un archivo. De todos modos, nunca debería asumir
que el cracker es ciego. Despeés de toso ha entrado en su sistema.

<p>Note que lsattr y chattr estan disponibles solamente en los
sistemas de archivos ext2.

<sect1 id="check-integ">Integridad de su sistema de archivos

<p>¿Está usted seguro de que el <file>/bin/login</file> en su disco
duro es todavía el binario que instaló allí hace unos meses? ¿Qué
pasaría si es una versión hackeada, que guarda la contraseña
introducida en un archivo oculto o la envía por un correo claro pro
todoel internet?

<p> El único método para tener alguna protección es comprobar sus
archivos cada día/hora/mes (yo prefiero cada día) comparando la vieja
md5sum y la actual. Dos archivos no pueden tener la misma md5sum, de
modo que anda sobre seguro aquí, excepto alquien que hackeó el
algoroitmo para crear md5sums un la máquina. Esto es bueno,
extremadamente difícil y muy improbable. Realmente usted debería
considerar que auditar sus binarios es muy importante, ya que es un
modo fácil para reconocer los cambios en sus binarios. Las
herramientas que comúnmente se uaan para ésto son
<package>sXid</package>, <package>AIDE</package> (Ambientación
Avanzada de Detección de Intrusos), <package>TripWire</package> (no es
libre; la nueva versió será GPL), <package>integrit</package> y
<package>samhain</package>.

<p>Instalando <tt>debsums</tt> ayudará a revisar la integración de los
archivos del sistema para comparar el md5sums de todos los archivos en
contra de md5sums usado en el paquete del archivo Debian. Tenga
cuidado con algunos archivos porque pueden ser fácilmente cambiados.

<p>Además puede reemplazar <package>locate</package> por
<package>slocate</package>. slocate es una versión mejorada para la
seguridad de local de GNU. Cuando usa slocate el usuario solomante ve
los archivos a los que el tiene acceso y puede excluir cualquier
archivo o directorio del sistema.


<sect1>Configuración de revisión de setuid 

<p> Debian sumunistra un trabajo cron que diariamente corre en
<file>/etc/cron.daily/standard</file>. Este trabajo cron ejecutará el
script <prgn>/usr/sbin/checksecurity</prgn> que almacenará la
información de estos cambios.

<!-- ARREGLAME: What is the defaul for this in cron package? jfs -->

<p>Para que este chequeo sea hecho usted debe colocar
<tt>CHECKSECURITY_DISABLE="FALSE"</tt> dentro de
<file>/etc/checksecurity.conf</file>. Note, que este es el
predeterminado, a menos de que usted haya cambiado algo, esta opción
será colocada como "FALSE".

<p>El comportamiento por defecto no manda la información al
superusuario, pero en cambio guarda diariamente copias de los cambios
dentro de <file>/var/log/setuid.changes</file>. Usted debe colocar el
CHECKSECURITY_EMAIL (dentro de <file>/etc/checksecurity.conf</file>)
a 'root'. Mire <manref name="checksecurity" section="8"> para mas
información de configuración.

<sect>Otras recomendaciones
<sect1>No use software que dependa de svgalib

<p> SVGAlib es muy bueno para los amantes de la consola como yo, pero
durante mucho tiempo se ha comprobado que esto ha sido muy inseguro.
Han sido liberadas fallas en contra de <prgn>zgv</prgn> y era sencillo
convertirse en root. Intente evitar el uso de programas que usen
SVGAlib siempre que sea posible. 

<!-- ARREGLAME: move this to policy section if there ever is one? -->

<chapt id="sec-services">Asegurando los servicios que se ejecutan en su
sistema

<p>Los servicios que corren en su sistema pueden ser asegurados de dos
maneras:

<list>

<item>Haciéndolos accequibles dentro de los puntos (interfaces) en los
que tienen que estar.

<item>Configurándolos de una manera apropiada para que puedan ser
debidamente usados por los usuarios legítimos de una manera
autorizada.

</list>

<p>Restringir los servicios de modo que solamente puedan ser accedidos
desde un lugar dado puede ser hecho restringiendo el acceso al nivel
del kernel (i.e. cortafuego), configúrelos sólo para escuchar en un
interfaz dada (algunos servicios no pueden suministrar ésta
característica) o usando otros métodos, por ejemplo el parche linux
vserver (para 2.4.16) puede ser usado para forzar procesos de forma
que usen solo una interfaz.

<p>En cuanto a los servicios usados desde <prgn>inetd</prgn> (telnet,
ftp, finger, pop3...) cabe notar que inetd no puede ser configurado de
forma que los servicios solo escuchen en una interfaz dada. Sin
embargo, su sustito el metademonio <prgn>xinetd</prgn> incluye un
<tt>bind</tt> justamente para ste problema. Vea <manref
name="xinetd.conf" section="5">.


<example>
service nntp
{
 socket_type = stream
 protocol = tcp
 wait = no
 user = news
 group = news
 server = /usr/bin/env
 server_args = POSTING_OK=1 PATH=/usr/sbin/:/usr/bin:/sbin/:/bin
+/usr/sbin/snntpd logger -p news.info
 bind = 127.0.0.1
} 
</example>

<p>Laa siguientes secciones detallan como cada servicio determinado
puede ser configurado debidamente dependiendo de los usos que se
quieran dar.

<sect>Asegurando ssh

<p> Si aún está usando telnet en vez de ssh, debe detener la lectura
de este manual y cambiar esto. Ssh debería ser usado para todas las
entradas remotas en vez de telnet. En una época donde es fácil husmear
el tráfico de internet y obtener contraseñas en texto plano, debe usar
sólo protocólos que usen criptografía. De una vez, ejecute un
<tt>apt-get install ssh</tt> en su sistema. 

<p>Anime a todos los usuarios de su sistema para usar ssh en vez de
telnet, o mejor aún, desinstale telnet/telnetd. Además, debe evitar
las entradas al sistema usando ssh como root y use métodos
alternativos en vez de root, como <tt>su</tt> o <tt>sudo</tt>.
Finalmente, el archivo <file>sshd_config</file>, dentro de
<file>/etc/ssh</file>, debe ser modificado para aumentar la seguridad
así:

<list>
<item><tt>ListenAddress 192.168.0.1</tt>

<p>Haga que ssh escuche solo la interfaz dada, sólo en un caso de que
haya más de uno (y no necesite un ssh disponible sobre éste) o que en
un futuro agrege una nueva tarjeta de red (y no necesite una
conexión desde ssh en ésta).

<item><tt>PermitRootLogin No</tt>

<p>Intente no permitir al Root entrar tanto como sea posible. Si
alguien quiere volverse root por vía ssh, dos logins serán necesarios
y la contraseña root no puede ser obtenida a fuerza bruta por vía
SSH.

<item><tt>Listen 666</tt>

<p>Cambie el puerto de escucha de tal manera que el intruso no pueda
estar completamente seguro de si está corriendo un demonio de
sshd. (Note que esto es seguridad por oscuridad).

<item><tt>PermitEmptyPasswords no</tt>

<p>Las contraseñas en blanco convierten en broma la seguridad del sistema.

<item><tt>AllowUsers alex ref</tt>

<p>Permita que solamente ciertos ususarios tengan acceso vía ssh a
esta máquina.

<item><tt>AllowGroups wheel admin</tt>

<p>Permita que solamente los miembros de ciertos grupos tengan acceso
vía a ssh a esta máquina. AllowGroups y AllowUsers tienen directivas
equivalentes para denegar el acceso a una máquina. Predeciblemente se
llaman "DenyUsers" y "DenyGroups".

<item><tt>PasswordAuthentication yes</tt>

<p>Queda completamente a su elección lo que usted quiera hacer. Es más
seguro permitir el acceso a la máquina solamente a usuarios con llaves
ssh en el archivo ~/.ssh/authorized_keys. Si es lo que quiere déle el
valor "no". <!-- ARREGLAME: what does this mean? Is it "more secure" to
set this to "no"? (era) --> <!-- jfs, IMHO yes since you place the key
of the incoming host in your server and the authentication is done
against the key -->

</list>

<p>Como nota final, dese cuenta que estas directivas son de los
archivos de la configuración de OpenSSH. Ahora mismo hay tres demonios
SSH usadados habitualmente, ssh1, ssh2, y el OpenSSH de la gente de
OpenBSD. Ssh1 fue el primer domonio ssh diaponible y aún es el más
comunmente usado (hay rumores de que existe incluso un porte a
windows). Ssh2 tiene muchas ventajas sobre ssh1, pero se distribuye
con una licencia mixta de código abierto-cerrado. OpenSSH es un
demonio completamente libre que soporta tanto ssh1 como ssh2. La
versión instalada en Debian cuando se escoge el paquete 'ssh' es
OpenSSH.

<p>Usted puede leer más información acerca de la configuración de SSH
con PAM en el <url
id="http://lists.debian.org/debian-security/2001/debian-security-200111/msg00395
.html"name="security mailing list archives">.

<sect>Asegurando Squid

<p> Squid es uno de los servicios más populares de proxy/cache,y hay
alunos problemas de seguridad que deben tenerse en cuenta. Por defecto
Squid impide todas las solicitudes de los ususarios. Usted debe
configurar Squid para permitir el acceso a los ususarios, servidores o
redes confiables o redes definidas en una Lista de Control de Acceso
en <file>/etc/squid.conf</file>, mire la guía del usuario de Squid en
<url name="Squid User's Guide"
id="http://squid-docs.sourceforge.net/latest/html/book1.htm"> para más
información acerca de la definición de las reglas ACL. 

<p>Además, si no configuró debidamente, algúien puede enviar correo a
través de Squid, puesto que el diseño de los protocolos HTTP y SMTP es
semejante. El archivo de configuración Squid niega por defecto el
acceso al puerto 25. Si desea permitir las conexiones del puerto 25
adiciónelo a la lista Safe_ports. Sin embargo, esto <em>NO</em> is
recomendado. 

<p>Ajustar y configurar debidamente el proxy/cache es solamente una
parte para mantener su sitio seguro. Otra tarea necesaria es analizar
los registros de Squid asegurándose que todas las cosas que están
trabajando, deben hacerlo como se espera. Hay algunos paquetes en
Debian GNU/Linux que pueden ayudar al administrador a hacer esto. Los
siguientes paquetes estan disponibles en woody (Debian 3.0):

<list>

<item><package>calamaris</package> - Analizar de las bitácoras de los
proxy Squid y Oops.
<item><package>modlogan</package> - Analizador modular de bitácoras.
<item><package>sarg</package> - Generador de Reportes de Análisis de Squid.
</list>

<p>ARREGLAME: Add more information about security on Squid Accelerator Mode

<sect>Asegurando FTP

<p> Si realmente tiene que usar FTP (sin enmascararlo con sslwrap o
dentro de un tunel ssl o ssh), debería hacer cambio del directorio
raíz de FTP hacia el directorio de los usuarios ftp, de modo que que
el usuario sea incapaz de mirar cualquier otra cosa que su propio
derectorio. De otra manera ellos pueden atravesar su sistema de
archivos tal como si tuvieran una línea de comandos. Usted puede
añadir la siguiente línea en su <file>proftpd.conf</file> en la
sección global para habilitar esta característica del cambio de
directorio raíz: feature:

<example>
DefaultRoot ~
</example>

<p>Reinicie proftpd con <tt>/etc/init.d/proftpd restart</tt> y revise
si puede escapar desde su directorio raíz ahora.

<P>Para impedir los ataques de Proftp DoS use ../../.., y adicione la
siguiente línea en <file>/etc/proftpd.conf</file>:

<tt>DenyFilter \*.*/</tt>

<p>No olvide que FTP envía login y contraseñas de autenticación en el
texto plano (esto no es un problema si usted está proporcionando un
servicio público anónimo) y hay buenas alternativas en Debian para
ésto. Por elemplo, <prgn>sftp</prgn> (sumistrado por
<package>ssh</package>). También hay implementaciones libres de SSH
para otros sistemas operativos, por ejemplo: <url
id="http://www.chiark.greenend.org.uk/~sgtatham/putty/" name="putty">
y <url id="http://www.cygwin.com" name="cygwin">.

<!-- contributed by Jesus Climent --> <p>Sin, embargo, si aún mantiene
el servidor de FTP mientras los usuarios acceden a SSH podría
encontrar un problema típico. Usuarios que acceden a los servidores
Anónimos de FTP dentro de un sistema asegurado con SSH es el camino
intentar entrar en el <em>servidor FTP</em>. Mientras el acceso se
niegue, la contraseña nunca se enviará por la red en texto plano. Para
evitar esto, el desarrollador de ProFTPd, TJ Saunders, creó un parche
que impide a los usuarios anónimos del servidor FTP intentar
contraseñas con cuentas SSH válidas. Más información y parches
disponibles en: <url id="http://www.castaglia.org/proftpd/#Patches"
name="ProFTPD Patches">.

<sect>Asegurando el acceso al sistema X Window
<p> Hoy en día, más y más empresas usan las terminales X cuando
necesitan un servicio para muchas estaciones de trabajo, ésto puede
ser peligroso porque necesita permitir que un servidor de archivos se
conecte con los clientes (el servicio X, desde el punto de vista X. X
intercambia la definición de cliente y servidor) Si sigue la (muy
mala) sugerencia de muchos documentos, tecleé <tt>xhost +</tt> en su
máquina. Esto permite conenctar con su sistema a cualquier cliente X.
Para tener una seguridad ligeramente mejor, puede usar el comando
<tt>xhost +hostname</tt> en vez de la anterior para permitir un acceso
desde servidores específicos.

<p> Una solucón mucho más segura es usar ssh como túnel de X y
encriptar la sesión completa. Ésto se hace automáticamente cuando se
hace ssh a otra máquina. Esto puede habilitarse en el archivo
<file>/etc/ssh/ssh_config</file> colocando <tt>X11Forwarding</tt> a
<tt>yes</tt>. Cuando use SSH, usted de suspender completamente el
acceso basado de xhost. <!-- ARREGLAME: check. The text said "has to be
disabled" [sic] -->

<p> Para mayor seguridad, si no necesita acceso a X desde otras
máquinas, dehabilite el enlace con el puerto tcp 6000 tecleando
simplemente:

<tt>startx -- -nolisten tcp</tt>

<p>Este es el comportamiento original en XFree 4.0 (el servidor X
suministrado en Debian 3.0). Si está usando XFree 3.3.6 (i.e. tiene un
Debian 2.2 instalado) puede editar
<file>/etc/X11/xinit/xserverrcc</file> para que tenga unas líneas como
las siguientes:

<example>
#!/bin/sh
exec /usr/bin/X11/X -dpi 100 -nolisten tcp
</example>


<p>Si usted está usando XDM digite <file>/etc/X11/xdm/Xservers</file> :
<tt>:0 local /usr/bin/X11/X vt7 -dpi 100 -nolisten tcp</tt>

<p>Lea mas sobre la seguridad X Window en
<url
name="XWindow-User-HOWTO"
id="http://www.linuxdoc.org/HOWTO/XWindow-User-HOWTO.html">
(<file>/usr/share/doc/HOWTO/en-txt/XWindow-User-HOWTO.txt.gz</file>).


<p> ARREGLAME: Add info on thread of debian-security on how to change
config files of XFree 3.3.6 to do this.

<sect1>Revisar su administrador visual
<p> Si usted solamente quiere tener un administrador visual instalado
para el uso local (teniendo un bonito login grafico), asegurarse que
el material seguro XDMCP (control de protocolo de administrador visual
X) este inhabilitado. En XDM usted puede hacer esto con la siguiente
linea. <tt>/etc/X11/xdm/xdm-config</tt>:

<example>
DisplayManager.requestPort: 0
</example>

<p>Normalmente, todos los administradores visuales estan configurados
para no iniciar los servicios de XDMCP por defecto en Debian.


<sect>Seguridad en el acceso de impresión (El asunto de lpd y lprng)

<p>Imagine, que usted llega al trabajo, y la impresora está botando
interminables cantidades de papel porque alguien está negando el
servicio de linea de su demonio de impresión. ¿No es terrible?

<!-- Info based on Dale Southard's post to debian-security april 11th
2002--> <p>En cualquier arquitectura de impresión Unix, tiene que
haber la forma de enviar los datos de los clientes a los servidores de
impresión. En el <prgn>lpr</prgn> y<prgn>lp</prgn> tradicional, el
comando del cliente es copiado o se hace un enlace simbólico de los
datos en el directorio de cola (por lo cual usualmente estos programas
son SUID o SGID).

<p>Para evitar algunos asuntos usted debe mantener seguros, los
servidores de impresión. Esto significa que usted necesita configurar
su servicio de impresión para que solo se permita la conexión del
conjunto de servidores confiables. Para hacer esto es necesario,
añadir los servidores a los que se les va a permitir imprimir en
<file>/etc/hosts.lpd</file>.

<p>Sin embargo, incluso si usted hace esto, el demonio
<prgn>lpr</prgn> acepta las conexiones entrantes en el puerto 515 de
cualquier interfaz. Deberia considerar hacer una regla de cortafuegos
para las conexiones de red/servidor a las cuales no se permite la
impresión (el demonio<prgn>lpr</prgn> no puede ser limitado a escuchar
únicamente a una dirección IP dada). 

<!-- ARREGLAME
<p>Of course, you could also take the lpr/lprng sources
and change them so that the connect function is only done to "127.0.0.1".
apt-get source lpr
and patch the bind (finet) call
-->

<p><prgn>Lprng</prgn> se prefiere en lugar de <prgn>lpr</prgn> porque
este puede ser configurado para hacer el control de acceso a IP,
ademas se puede especificar cual interfaz va a emplear (aunque sea
un poco extraño).

<!-- ARREGLAME: ask Craig Small about his post in debian-private 19th
october 2001 -->

<p>Si está usando el servicio de impresión de su sistema, pero solo
localmente, no querrá compartir este servicio en la red. Puede
considerar el uso de otros sistemas de impresión, como el servicio
proporcionado en <package>cups</package> <url name="PDQ"
id="http://pdq.sourceforge.net/"> el cual se basa en el permiso de un
usuario del dispositivo<file>/dev/lp0</file>

<p>En <package>cups</package>, los datos de impresión se transfieren
al servidor vía el protocolo http. Esto significa que el programa del
cliente no necesita ningún privilegio especial, solamente requiere que
el servidor esté escuchando sobre un puerto cualquiera. <p>Sin
embargo, si usted quiere usar <prgn>cups</prgn>, pero solo localmente
usted puede configurar esto para escuchar a la interfaz loopback
cambiando <file>/etc/cups/cupsd.conf</file>:

<example>
Listen 127.0.0.1:631
</example>

<P>Hay muchas otras opciones de seguridad, como por ejemplo permitir o
negar redes y servidores en este archivo de configuración. Sin embargo
si no los necesita, debería limitar posibilidad de escuchar el puerto.
<prgn>Cups</prgn> también ofrece documentación a través del puerto
HTTP, si no quiere revelar información potencialmente útil para
agresores externos (estando abierto el puerto), también agregue:

<example>
&lt;Location /&gt;
 Order Deny,Allow
 Deny From All
 Allow From 127.0.0.1
&lt;/Location&gt;
</example>

<p>Este archivo de configuración puede ser modificado para añadir
muchas caracteristicas incluyendo certficados SSL/TLS y criptografía.
Los manuales estan disponibles en http://localhost:631/ or at
cups.org. 

<P>ARREGLAME: Add more content (the article on <url name="Amateur Fortress
Building" id="http://www.rootprompt.org"> provides some very
interesting views). 

<p>ARREGLAME: Check if PDG is available in Debian, and if so,suggest this
as the preferred printing system.

<p>ARREGLAME: Check if Farmer/Wietse has a replacement for printer daemon
and if it's available in Debian.

<sect>Asegurar el demonio de correo

<p>Si su servidor no es un sistema de correo, usted realmente no
necesita tener un demonio de correo escuchando conexiones entrantes,
pero usted podría querer envío de correo local, por ejemplo para
recibir el correo del usuario Root desde cualquier sistema de alerta
que usted tenga en algún lugar.

<p>Para hacer esto en un sistema Debian, tendrá que eliminar el demonio
smtp desde inetd:
<example>
$ update-inetd --disable smtp
</example>
<p>y configurar el demonio de correo solo para escuchar en la
interfaz loopback. En exim (el MTA por defecto) usted puede hacer
esto añadiendo la siguiente línea editando:
<file>/etc/exim.conf</file>
y añadiendo la siguiente linea:

<example>
local_interfaces = "127.0.0.1"
</example>

<p>Reinicie ambos demonios (inetd y exim) y estarán escuchando en el
socket 127.0.0.1:25 solamente. Sea cuidadoso, y primero desconecte
inetd, de lo contrario, exim no iniciara ya que el demonio inetd está
manejando las conexiones entrantes.

<p>Para usar postfix edite <file>/etc/postfix/main.conf</file>:

<example>
inet_interfaces = localhost
</example>


<p>Si usted solo quiere un correo local, este metodo es mejor que usar
la cubierta tcp-wrapping al demonio de correo o añadir las reglas
del cortafuego para limitar el acceso de cualquier persona a este. Sin
embargo, si necesita que escuche en otras interfaces, debería
considerar lanzarlo desde inetd y añadir un tcp-wraping de forma
que las conexiones sean revisadas contra
<file>/etc/hosts.allow</file> y <file>/etc/hosts.deny</file> también
será advertido cuando un acceso no autorizado está atentando en contra
de su demonio de correo, usted debe instaurar un registrador apropiado
para cualquiera de los metodos mencionados anteriormente.


<sect>Recibiendo Correo de forma segura

<p> Leer/recibir correo es el protocolo más común de texto plano. Si
usted usa POP3 o IMAP para obtener su correo, la contraseña es enviada
en texto plano a través de la red, de modo que casi cualquiera podría
leer su correo a partir de ahora. En lugar de esto, use SSL (Capa
segura de Sockets) para recibir su correo. La otra alternativa es ssh,
si tiene una cuenta shell en la máquina que actua como el servidor POP
o IMAP. Este es un ejemplo básico <file>fetchmailrc</file> para
demostrar esto:

<example>
poll my-imap-mailserver.org via "localhost"
 with proto IMAP port 1236
 user "ref" there with password "hackme" is alex here warnings 3600
 folders
 .Mail/debian
 preconnect 'ssh -f -P -C -L 1236:my-imap-mailserver.org:143 -l ref
 my-imap-mailserver.org sleep 15 &lt;/dev/null &gt; /dev/null'
</example>

La preconexión es la línea más importante. Este lanza una sesión ssh
y crea el tunel necesario, el cual automaticamente envía las
conexiones para tener acceso a localhost puerto 1236 al servidor de
correo IMAP, pero codificado. Otra posibilidad seria, usar el
<tt>fetchmail</tt> con la caracteristica ssl.

<p>Si usted quiere suministrar un servicio de correo codificado como
POP e IMAP,<tt>apt-get install stunnel</tt> e inicie sus demonios de
esta es la forma:

<example>
stunnel -p /etc/ssl/certs/stunnel.pem -d pop3s -l /usr/sbin/popd
</example>


<p> Este comando encapsula al demonio proveido (-l) en el puerto (-d)
y usa el certificado ssl especificado (-p).


<sect id="sec-bind"> Asegurando BIND

<p>Hay diferentes consideraciones que puede implementar para asegurar
el demonio de servidor de nombres, las cuales son similares a las
mismas que cuando se asegura cualquier servicio dado:

<list>

<item>Configurar el demonio por si solo apropiadamente para que este
no pueda ser afectado desde afuera. Esto abarca limitar las posibles
dudas de los clientes: zona transferida y consultas recursivas.

<item>Limitar el acceso del demonio al servidor mismo, de modo que si
este es usado para entrar, el daño en el sistema esté limitado. Esto
incluye correr el demonio como un usuario no privilegiado y cambiarle
el directorio raiz. 

</list>

<p>Deberia restringir alguna de la información que es dada por el
servidor DNS para clientes externos para que no pueda ser usado para
acceder a información valiosa de su organización que usted no quiere
dar. Esto incluye añadir las siguientes opciones:
<em>allow-transfer</em>, <em>allow-query</em>,
<em>allow-recursive</em> y <em>version</em>.Puede limitar en una
sección global (para que se aplica a todas las zonas presentes) o
sobre una base por zona. Esta información esta documentada en el
paquete <package>bind-doc</package>, lea más sobre esto en
<file>/usr/share/doc/bind/html/index.html</file> una vez el paquete
este instalado.

<p>Imagine que su servidor está conectado a Internet y a su red
interna (su IP interno es 192.168.1.2)(un servicio de multi domicilio
basico). Usted no quiere dar ningun servicio para Internet y solo
quiere permitir el lookups DNS desde su servidor interno. Usted podria
restringir esto para incluirlo en: <file>/etc/bind/named.conf</file>:

<example>
options {
	 allow-query { 192.168.1/24; } ;
	 allow-transfer { none; } ; 
	 allow-recursive { 192.168.1/24; } ;
	 listen-on { 192.168.1.2; } ;
	 forward { only; } ;
	 forwarders { A.B.C.D; } ;
};
</example>

<p>La opción<em>listen-on</em>hace el bind DNS solo para la interfaz
que tiene la dirección interna, pero si esta interfaz es la misma
como la interfaz que se conecta a Internet (por ejemplo, si usted
está usando NAT), las dudas seran solamente aceptadas si llegan desde
su servidor interno. Si el sistema tiene multiples interfaces y el
<em>listen-on</em> no está presente, solamente los usuarios internos
podrian pregutar, ya que el puerto seria accesible para los atacantes
exteriores, ellos podrian tratar de arrojarlo al servidor DNS (o
explotar el amortiguador desbordandose agresivamente). Usted aun
podría leer esto en 127.0.0.1 si usted no está dando el servicio DNS
por ningun otro sistema que el de usted mismo. </p>

<p> El registro version.bind en la clase caos contiene la versión del
proceso bind que se está ejecutando. Esta información es
frecuentemente usada por dispositivos automaticos e individuos
maliciosos que desean determinar si el bind de uno es vulnerable a un
ataque específico. Para proporcionar falsa o negativa información en
el registro de la version.bind, uno limita la probabilidad que un
servidor pueda ser atacado basandonos en la versión publicitaria.Para
suministrar su proia versión, utilice la <em>version</em> dirigida de
la siguiente manera:

<example>
options {
	... various options here ...
	version "Not available.";
};
</example>

<p>Cambiar el registro de la version.bind que no proporciona una
protección actual en contra de los ataques, pero este debería ser
considerado un salva guardia útil. Con respecto a limitar los
privilegios de BIND, usted debe darse cuenta que si un usuario del
non-root recorre Bind, Bind no podra detectar las nuevas interfaces
automaticamente. Como por ejemplo si usted pone en un portatil una
tarjeta PCMCIA. Cambie el archivo README Debian en el directorio
nombrado (<file>/usr/share/doc/bind/README.Debian</file>)para mas
información acerca de este uso. Recientemente han habido muchos
problemas de seguridad en lo que concierne a BIND, y por esto es
necesario cambiar el usuario util cuando sea posible.
 
<p> Para correr BIND bajo un usuario diferente, primero cree un
usuario separado y un grupo para esto (no es buena idea
usar,<em>not</em> nobody o nogroup para todo sevicio que no corra como
raiz). En este ejemplo, el usuario y el grupo <tt>named</tt>serán
usados. Usted puede hacer esto entrando a:

<example>
addgroup named
adduser --system --ingroup named named
</example>

<p>Ahora edite <tt>/etc/init.d/bind</tt> con su editor favorito y
cambie la linea comenzando con:

<example>
start-stop-daemon --start
</example>

a

<example>
start-stop-daemon --start --quiet --exec /usr/sbin/named -- -g named -u named
</example>

<p> Todo lo que usted necesita hacer ahora es reiniciar
Bind'/etc/init.d/bind, y luego cambiar su syslog por dos entradas como
estas:

<p>
<example>
Sep 4 15:11:08 nexus named[13439]: group = named
Sep 4 15:11:08 nexus named[13439]: user = named
</example>

<p>Gwow! su nombre ahora no corre como raíz. Para archivar la máxima
seguridad de Bind, ahora contruya su aseguramiento del cambio de
directorio raiz (ver<ref id="chroot">)alrededor de su demonio. Hay una
forma fácil para hacer esto: la opción <tt>-t</tt> (ver el manual de
pagina <manref name="named" section="8">). Esto le permitirá por si
mismo un cambio de directorio raiz Bind, dentro del directorio dado,
sin que usted necesite instlar un aseguramiento en el cambio de
directorio raiz y sin preocuparse por la dinamica de librerias. Los
únicos archivos que necesitan estar en ese cambio de aseguramiento de
directorio son:

<example>
dev/null
etc/bind/ - should hold named.conf and all the server zones
sbin/named-xfer - if you do name transfers
var/run/named/ - should hold the pid and the name server cache (if
 any) this directory needs to be writable by named
 user
var/log/named - if you setup logging to a file, needs to be writable
 for the named user
dev/log - syslogd should be listening here if named is configure to
 log through it
</example>


<p>Para que su denmonio BIND trabeje apropiedamente, este necesita
permiso en los archivos nombrados. Ésta es una tarea fácil ya que los
archivos de configuarción estan siempre en <tt>/etc/named/</tt>. Tenga
en cuenta que esto solamente necesita acceso de lectura para los
archivos de la zona, a menos que este sea un secundario o un servidor
llamado cache. Si este es su caso usted tendra que dar permiso de
lecto-escritura a las zonas necesarias (asi como la zona transferida
desde los tarbajos del servidor primario). 

<p>Si usted quiere leer mas información sobre porque BIND no corre
como el usuario non-root sobre los sistemas Debian, por favor revise
el sistema Bug Tracking relacionado a BIND, específicamente <url
name="Bug #50013: bind should not run as root"
id="http://bugs.debian.org/50013">.

<p>Usted, también puede encontrar mas información con respecto al
cambio de raiz de BIND. 

<url name="Chroot-BIND-HOWTO"
id="http://www.linuxdoc.org/HOWTO/Chroot-BIND-HOWTO.html"> (analizar
Bind 9) y <url name="Chroot-BIND8-HOWTO"
id="http://www.linuxdoc.org/HOWTO/Chroot-BIND8-HOWTO.html"> (analizar
Bind8). Estos mismos documentos deberian estar disponibles a traves de
la instalación de <package>doc-linux-text</package> (versión de texto)
o <package>doc-linux-html</package> (versión html).

<p>Si usted está instaurando un aseguarmiento del cambio de directorio
raiz completo (i.e no solo <tt>-t</tt>)para BIND 8.2.3 en Debian
(potato), asegurese de tener los siguientes archivos en:

<example>
dev/log - syslogd should be listening here
dev/null
etc/bind/named.conf 
etc/localtime
etc/group - with only a single line: "named:x:GID:"
etc/ld.so.cache - generated with ldconfig 
lib/ld-2.1.3.so
lib/libc-2.1.3.so
lib/ld-linux.so.2 - symlinked to ld-2.1.3.so 
lib/libc.so.6 - symlinked to libc-2.1.3.so
sbin/ldconfig - may be deleted after setting up the chroot
sbin/named-xfer - if you do name transfers
var/run/
</example>


<p>ARREGLAME, merge info from
<url id="http://www.cryptio.net/~ferlatte/config/"> (Debian-specific)
and 
<url id="http://www.psionic.com/papers/whitep01.html">.

<sect>Asegurando Apache

<p>ARREGLAME. Add content.

<p>Usted puede limitar el acceso a el servidor Apache si si usted
quiere usar esto solo internamente (para objetivos de prueba, para
tener acceso al archivo<package>doc-central</package> etc..) y si no
quiere que extraños tengan esto. Para hacer esto use el
<tt>Listen</tt> o <tt>BindAddress</tt> dirigidos en
<file>/etc/apache/http.conf</file>.

<p>Usando Listen:
<example>
Listen 127.0.0.1:80
</example>
<p>Usando BindAddress:
<example>
BindAddress 127.0.0.1
</example>

<p>Luego reinicie Apache con <tt>/etc/init.d/apache restart</tt> y
vera que esto es de solo Audición en la interfaz
<file>loopback</file>.

<p>De todos modos, que usted no este usando todo lo funcionamiento
suministrado por Apache, usted podria querer dar un vistazo a otro
servicio de la web proporcionados en Debian como
<package>dhttpd</package>.

<p>La <url name="Apache Documentation"
id="http://httpd.apache.org/docs/misc/security_tips.html"> proporciona
información relacxionada con las medidas de seguridad que deben ser
tomadas en el servidor web del Apache (esta misma información está
suministrada en Debian por el paquete<package>apache-doc</package>).

<sect>Asegurando finger

<p>Si usted quiere recorrer el servicio de finger, primero preguntese
si usted necesita realizar esto. Si lo hace, usted mismo descubrira
que Debian proporciona muchos demonios finger (Puest fuera de
<prgn>apt-cache search fingerd</prgn>): 
<list>
<item>cfingerd - Demonio finger configurable
<item>efingerd - Es otro demonio finger para unix capaz de una 
fina-sintonización de su rendimiento.<item>ffingerd - Un demonio seguro.
<item>fingerd - Remoto servidor de la información del usuario
<item>BSD- Demonio finger con soporte qmail.
</list>
<p><package>ffingerd</package> es el demonio finger recomendado para
si usted va ausar esto para un servicio publico. De todos modos usted
se fortalece, cuando establece este a traves de inetd, xinetd o
tcpserver para: limitar el numero de procesos que estaran corriendo al
mismo tiempo, limitar el acceso para el demonio finger a partir de un
numero dado por los servidores (usando el wrappers tcp) y teniendo
esto solamente por audición para la interfaz en la que usted necesita
estar.

<sect>Cambio general de directorio raíz y paranoia suid

<p>Es probablemente favorable decir que la complejidad de BIND es la
razón por la cual este ha sido revelado a muchos atacantes en los años
recientes (ver seguridad Bind en la pagina 52). (ver <ref
id="sec-bind">)

<p>Otros programas con caracteristicas complejas y una larga base del
usuario instalado incluyen Sendmail y algunos demonios (e.g. WUftpd).
(Evidentemente un programa sin caracteristicas y sin satisfacer que
pueden ser muy inseguros, e ineficacez).

<p>De cualquier modo, usted recorre cualquiera de estos, considere los
dispositivos similares para ellos -revocando los privilegios de root,
corriendo en un aseguramiento del cambio de directorio raiz-
reemplazandolos con una equivalencia mas segura.

<sect>Texto claro general con el password paranoia
<p> Usted deberia tratar de evitar cualquier servicio de red el cual
envia y recibe contraseñas en un texto claro sobre una red como
FTP/Telnet/NIS/RPC. El autor recomienda para todos el uso de ssh en
cambio de telnet y ftp.

<p>Mantenga en mente que migrar de telenet a ssh pero usando otros
protocolos de texto claro no aumentan su seguridad de NINGUNA forma!
lo mejor seria eliminar ftp, telnet, pop, imap, http y suplantarlos
con sus respectivos servicios codificados. Usted debe considerar
moverse desde otros servicios hasta sus versiones SSL, ftp-ssl,
telnet-ssl, pop-ssl, https...

<p>Muchos de estas indicaciones numeradas en la parte superior se
aplican a documentos en todo el sistema Unix (Usted los encontrara si
lee cualquier otro hardening-related relacionado con lo que tiene que
ver con Linux y otros Unix).

<sect>Incapacitar NIS 

<p>Es posible que usted no tenga que usar NIS, en el servicio de
información de la red, porque este permite que la contraseña actue.
Este puede ser demasiado inseguro si su organización está rota.

<p>Si usted necesita que la contraseña actue entre maquinas, usted
deberia considerar usar otras alternativas. Por ejemplo usted puede
colocar un servidor LDAP y configurar PAM en su sistema para contactar
el servidor LDAP para la autenticación del usuario. Usted puede
encontrar una detallada organización en el <url name="LDAP-HOWTO"
id="http://www.linuxdoc.org/HOWTO/LDAP-HOWTO.html">
(<file>/usr/share/doc/HOWTO/en-txt/LDAP-HOWTO.txt.gz</file>).

<p>Lea mas sobre la seguridad en 
<url
name="NIS-HOWTO" id="http://www.linuxdoc.org/HOWTO/NIS-HOWTO.html">
(<file>/usr/share/doc/HOWTO/en-txt/NIS-HOWTO.txt.gz</file>).


<p>ARREGLAME (jfs): Add info on how to setup this in Debian

<sect id="rpc">Desactivar los servicios RPC

<p>Usted deberia desactivar donde quiera que sea posible. <!-- ARREGLAME:
explain when RPC is necessary. --> Muchas fallas seguras de este
sevicio son conocidas y pueden ser fácilmente exploradas. Por otra
parte los servicios NFS son totalmente importantes en algunas redes,
de esta manera usted encontrara un balance de seguridad y utilidad en
su red. El DDoS (distribución negativa del servicio)ataca el uso de
RPC que son explotados para entrar en el sistema y actuar tanto como
el llamado agente/manipulador. Lea mas sobre la seguridad NFS en <url
name="NFS-HOWTO" id="http://www.linuxdoc.org/HOWTO/NFS-HOWTO.html">
(<file>/usr/share/doc/HOWTO/en-txt/NFS-HOWTO.txt.gz</file>).

<p>Inhabilitar el paquete <package>portmap</package> es super
sencillo. Hay diferentes mátodos. Uno de los más sencillos en un
sistema Debian 3.0 es hacer un desinstalamiento del paquete
<package>portmap</package>. Si usted está usando otra versión, tendrá
que desactivar el servicio como se ve en <ref id="disableserv">, esto
es debido a el programa que forma parte del paquete
<package>net-base</package> (el cual no puede ser desinstalado sin que
el sistema se haya destruido).

<p>Esto en realidad elimina toda conexión con el sistema relacionado a
el <package>portmap</package> en <tt>/etc/rc${runlevel}.d/</tt>,lo
cual es algo que usted también hacerlo manualmente. Otra posibilidad
es <tt>chmod 644/etc/init.d/portmap</tt>, pero que da un mensaje de
de error o cuando se entra a el sistema. Usted también puede deshacer
<tt>start-stop-daemon</tt> en la parte
<file>/etc/init.d/portmap</file> que es la cubierta del escrito.

<sect id="firewall-setup">Añadir capacidades al cortafuegos

<p>El Sistema operativo Debian GNU/Linux que tiene capacidades
built-in proporcionadas por Linux kernel. Esto significa que si usted
instala un sistema potato (descargar Debain 2.2) (el Kernel defectuoso
es 2.2) usted tendra el corta-fuegos <prgn>ipchains</prgn> disponible
en el Kernel el cual seguramente estara instalado (debido a su
prioriedad). Si usted instala instala un sistema woody (Descargar
Debian 3.0) (el Kernel defectuoso es 2.4) usted tendra el corta fuegos
<package>ipchains</package> disponible. <prgn>iptables</prgn>.
<p>Algunos usuarios podrian colocar reglas a el corta-fuegos como
fuente para este escrito. Sin embargo revise que programas o
caracteristicas del corta fuegos usted debe usar ya que ellos pueden
explorar otros archivos y cambiar las definiciones que usted agrego en
el inicio. Por ejemplo, <package>firewalk</package>, para uno, usara
otro archivo de configuración para colocar el corta fuegos.

<sect1>Reglas Iptables 

<p>Si usted está usando Debian 3.0, usted notara que el paquete
<package>iptables</package> lo tiene instalado. Este es el soporte
para el 2.4.4+ de la implementación de un filtro de la red de Kernel.
Ya que solo despues de la instalación el sistema no puede conocer
ninguna regla corta-fuegos (reglas del corta-fuegos son también
sistemas específicos) usted debe habilitar
<package>iptables</package>.

<p>Para hacerlo como se debe, es de la siguiente manera:

<list>

<item>edite <file>/etc/default/iptables</file> de tal manera que la
variable. <tt>enable_iptables_initd</tt> este colocada para
<em>true</em>

<item>Cree un estructura del corta fuegos usando Iptibles, usted puede
usar la linea de comando (ver <manref name="iptables" section="8">) o
algunas herramientas proporcionadas por el paquete corta fuegos
Debian (ver<ref id="firewall-pack">). Debe crear una estructura de
reglas del corta fuegos para ser usada cuando el cortafuego esté
<em>activo</em> y otra cuando el corta fuegos esté <em>inactivo</em>
(estas pueden ser reglas vacías).

<item>Salvar las reglas que usted creo usando
<tt>/etc/init.d/iptablessave_active</tt> y <tt>/etc/init.d/iptables
save_active</tt> para recorrer estos escritos con las reglas corta
fuegos que usted quiera capacitar.

</list>

<p>Una vez esté hecha la estructura del corta fuegos, ésta es
almacenada en el directorio <file>/var/lib/iptables/</file> y será
ejecutada cuando el sistema arranque (o cuando reinicie el script con
los argumentios <em>start</em> y <em>stop</em>). Por favor tenga en
cuenta que la configuración inicial de Debian carga el código del
corta fuegos en los niveles del multiusos (2-5),muy pronto (10). Es
detenido en el nivel monousuario (1), cámbielo si no es la política
local.

<p>Prevenga que algunos de los paquetes se encuentran fuera de la
linea pueden intrducir escritos del corta fuegos para ser recorrido,
esto afectara indudablemente a la estructura comun y a usted entoces
tendra un efecto indeseado. Consulte la documentación del paquete de
documentación y use algunas de estas organizaciones.

<p>Si usted no tiene un indicio sobre como colocar sus reglas al corta
fuegos consulte el <em>Paquete Filtrador HOWTO</em> proporcionado por
<package>iptables</package> al leer fuera de la linea en
<file>/usr/share/doc/iptables/html/</file>

<sect1>El sistema local corta fuegos

<p>Usted puede usar las reglas de corta fuegos cono una forma para
asegurar el acceso en un sistema local, invluso para limitaer la
salida de comunicación hecha por este. Las reglas corta fuegos pueden
ser usadas también para protejer procesos que <em>no</em> pueden ser
configurados apropiadamente ni proveer servicios para algunas redes,
direcciones, IP, etc...

<p>Sin embargo, este paso se presentara despues en el manual,
basicamente porque es <em>mucho</em> mejor para no depender únicamente
de la capacidad del corta fuegos para protejer un sistema dado. La
seguridad en un sistema no puede ser hecho de cubiertas, el corta
fuegos deberia ser el ultimo en incluirse, una vez todos los servicios
hayan sido fortalecidos. Usted puede fácilmente imaginar un plan en el
cual el sistema está protegido solamente por un corta fuegos
incorporadoy un administrador blissfully que remueve las reglas del
corta fuegos por cualquiera que sea la razón (problemas con la
instalación, molestias, errores humanos...), este sistema abierto
ampliamnete para un ataque.


<sect1>Usar otros corta fuegos para proteger otros sistemas

<p>Un corta fuegos de Debian también puede ser instalado para
proteger, con reglas de filtración, el acceso a los sistemas
<em>detras de este</em>, limitando sus exposición en Internet. 

<p>Usted aun puede colocar un buzon Debian GNU/Linux como un camino
hacia el corta fuegos, i.e. un filtrador de corta fuegos completamente
transparente a la red puede hacer falta en la dirección IP pudiendo
ser atacado directamente.

<p>Si usted no sabe mucho acerca del corta fuegos, lea el Cortar
fuegos-howto que pueden ser encontrados en el
<package>doc-linux-text</package> (otros formatos del documento
también disponibles). Vea <ref id="references"> para mas apuntes.

<sect1 id="firewall-pack">Paquetes del Corta Fuegos

<p>Hay un software completo que pueden ser usados para colocar reglas
de corta fuegos en un sistema Debian 

<list>
<item><package>fwbuilder</package>
<item><package>mason</package>, el cual puede proponer reglas de corta
fuegos basadas en el trafico de la red a su sistema "sees".
<item><package>bastille</package> (En medio de los fuertes pasos que
pueden hacer nuevas versiones de bastille, es la posibilidad de
añadir reglas del corta fuegos del sistema para ser ejecutado en el
sistema.)
<item><package>ferm</package>
<item><package>fwctl</package>
<item><package>easyfw</package>
<item><package>firewall-easy</package>
<item><package>ipac-ng</package>
<item><package>gfcc</package>
<item><package>knetfilter</package>
<item><package>firestarter</package>
</list>

<p>Los ultimos paquetes: gfcc son administradores GUIS usados o bien en
GNOME (los primeros dos) o en KDE (el último), están orientados a
usuarios (i.e. para usuarios caseros) ya que los otros paquetes en la
lista, están más orientados para administradores.

<p>ARREGLAME: Add more info regarding this packages

<p>ARREGLAME: Check Information on Debian firewalling and what/how does it
change from other distributions. 

<p>ARREGLAME: Where should the custom firewalling code be enabled (common
FAQ in debian-firewall?)


<chapt>Fortalecimiento automático de sistemas Debian 

<p>Luego de haber leido toda la información en los capítulos
anteriores usted puede estar pensando "tengo que hacer muchas cosas
para fortalecer mi sistema, ¿no podrian ser automatizadas estas
cosas?". La respuesta es si, pero tenga cuidado con las herramientas
automatizadas. Algunas personas creen, que una herramienta de
fortalecimiento no elimina la necesidad de una buena administración.
Asi que no se sorprenda al pensar que usted puede automatizar todo el
proceso y solucionar todos los problemas relacionados. La seguridad es
un proceso constante en el cual el administrador debe participar y no
puede alejarse y dejar hacer todo a las herramientas dado que ninguna
herramienta sencilla lo puede afrontar: con toda la seguridad posible
de las políticas de implementaciones, todos los ataques y todos los
entornos.

<p>A partir de Woody (Debian 3.0) existen dos paquetes específicos que
son utiles para la seguridad del fortalecimiento. El
<package>fortalecimiento</package> tomara un enfoque basado en las
dependencias del paquete para rápidamente instalar paquetes valiosos
de seguridad y removerá aquellos uqe tengan defectos, la configuración
de paquetes debe estar hecha por el administrador. La
<package>bastilla</package> que implementa unas políticas de seguridad
proporcionadas por el sistema local basado en la cofiguración previa
hecha por el administrador (la elaboración de la configuración puede
ser un proceso guiado, hecho por preguntas sencillas de si y no). 

<sect>Fortalecer (harden)

<p>El <package>paquete</package> harden trata de hacer más fácil la
instalación y administración de hosts que necesitan buena seguridad.
Este paquete debería ser utilizado por gente que quiere una ayuda
rápida para aumentar la seguridad del sistema. Para hacer esto el
paquete se contradice con otros que poseen defectos conocidos
incluyendo (pero ilimitadamente): defectos de seguridad conocidos (así
como el buffer se desborda), uso de claves de texto plano, falta de
control de acceso, etc. Además, este instala automáticamente algunas
herramientas que deberían realzar la seguridad de cierta manera:
herramientas de detección de intrusión, herramientas de análisis de
seguridad, etc. Harden instala los siguientes<em>paquetes</em>
virtuales (en otras palabras, únicamente no satisface dependencias en
otros):

<list>

<item><package>harden-tools</package>: herramientas para realizar el
sistema de seguridad (revisores deintegridad, detección de intrusión,
los parches del kernel ...)

<item><package>harden-doc</package>: proporciona este mismo manual y
otra documentación de seguridad relacionada con paquetes.

<item><package>harden-environment</package>: Ayuda a configurar un
entorno fortalecido (normalmente vacio).

<item><package>harden-servers</package>: remueve a los servidores
insegurosporalguna razón.

<item><package>harden-clients</package>: removes clients considered
insecure for some reason.

<item><package>harden-remoteflaws</package>: removes packages with
known security holes that could be used by a remote attacker to
compromise the system (uses versioned <em>Conflicts:</em>).

<item><package>harden-localflaws</package>: removes packages with
known security holes that could be used by a local attacker to
compromise the system (uses versioned <em>Conflicts:</em>).

<item><package>harden-remoteaudit</package>: tools to remotely audit a
system.

</list>

<p>Tenga cuidado porque si usted tiene un software que necesite (y
usted no desea desinstalarlo por ninguna razón) y este se contradice
con alguno de los otros paquetes antedichos, usted no podrá usar
totalmente el <package>harden</package>(fortalecimiento). Los
paquetes "harden" no ejecutan ninguna acción (directamente). Sin
embargo, ellos poseen un paquete de conflictos intencionales con
paquetes inseguros conocidos. De esta forma, el sistema de embalaje de
Debian no aprobará estos paquetes. Por ejemplo, cuando usted trata de
instalar un demonio telnet con <package>harden-servers</package> apt
mostrará:

<example>
# apt-get instalar telnetd
Los siguientes paquetes serán REMOVIDOS:
harden-servers
Los siguientes paquetes nuevos srán instalados:
telnetd
Desea continuar (y/n)
</example>

<p>Esto podría causar algunas preocupaciones en la cabeza del
administrador, quien debería reconsiderar sus acciones.


<sect>Bastilla Linux

<p><url name="Bastille Linux" id="http://www.bastille-linux.org"> es
una herramienta automática de fortalecimiento, originalmente orientada
en torno a las distribuciones de Red Hat y Mandrake Linux. Sin
embargo, el paquete <package>bastille</package> proporcionado en
Debian (desde woody) es arreglado para brindar la mima fucionalidad
para el sistema GNU/ Linux. <p>Bastille puede ser utilizado con
diferentes Frontends (todos son documentados en su propio manual de
páginas en el paquete Debian) los cuales capacitan al administrador
para: 

<list>

<item>Responder las preguntas paso por paso considerando la seguridad
deseada de su sistema (usando <manref name="InteractiveBastille"
section="8">)

<item>Usar un entorno por defecto para seguridad (en medio de tres:
Lax, Moderar o Paranoia) en una seguridad dada (servidor o estación de
trabajo) y dejar decidir a la Bastilla cual política de seguridad
implementar (usando <manref name="BastilleChooser" section="8">)

<item>Tomar un archivo predefinido de configuración (podría ser
proporcionado por Bastilla o hecho por el administrador) e implementar
una política de seguridad (usando <manref name="AutomatedBastille"
section="8">)

</list>

<chapt>Firma de paquete en Debian

<p>Este capítulo también podría ser titulado "como categotizar/
actualizar con seguridad a sus sitema Debian GNU/Linux" y este merece
su propio capítulo básicamente porque no será acorde a algún otro
capítulo.

<p>A partir de hoy (diciembre 2001) Debian no proporciona paquetes
firmados en cuanto a la distribución de y la publicación de woody (3.0)
no integrará este artículo. Existe una solución para paquetes firmados
que, según se espera, serán proporcionados en la próxima publicación.

<sect> El esquema propuesto para revisiones de firma de paquete

<p>El esquema corriente (no implementado)para firma de paquete usando
apt es:

<list>

<item> el archivo de publicación incluye el md5sum de Paquetes.gz (este
contiene el md5sums de paquetes) y será firmado. La firma es algo que
pertenece a una fuente de confianza.

<item>Este archivo de publicación firmado se baja por 'apt-get update'
y almacenado en todo el HD con paquetes.gz.

<item>Cuando un paquete va a ser instalado, primero se baja, luego el
md5sum es generado.

<item>El archivo de publicación firmado es revisado (firma correcta) y
este se extrae del md5sum para el archivo Paquetes.gz, el número de
comprobación de Paquetes.gz es generado y (si es correcto) el md5sum
del paquete que se bajó es extraido de este.

<item>Si el md5sum del paquete que se bajó es el mismo que el del
archivo Paquetes.gz, el paquete será instalado o de lo contrario el
administrador será alertado y el paquete será dejado en cache (asi el
administrador puede decidir si se instala o no). Si el paquete no está
en los Paquetes.gz y el administrador ha configurado el sistema para
instalar únicamente los paquetes revisados, éste tampoco será
instalado. </list>

<p>Adicional a esto, la cadena de Sums MD5 <prgn>apt</prgn> es capaz
de verificar si un paquete se origina desde una publicación
específica. Este es menos flexible que firmar paquete por paquete,
pero puede ser combinado con este esquema también (véase más abajo).

<p>La firma de un paquete ha sido discutida en Debian de vez en
cuando, para mayor información usted puede leer:
http://www.debian.org/News/weekly/2001/8/ y
http://www.debian.org/News/weekly/2001/11/. <url
id="http://www.debian.org/News/weekly/2001/8/">y<url
id="http://www.debian.org/News/weekly/2000/11/">.

<sect> Alternativa firmar esquema por paquete

<p>El esquema adicional de firmar cada uno y todos los paquetes,
permite que estos sean revisados cuando no son tan referenciados por
un archivo de Paquetes existentes, además, los paquetes
tercera-persona donde nunca existieron Paquetes para que estos
también puedan ser usados en Debian, sin embargo, no serán un esquema
por defecto.


<p>Este esquema de firma de paquetes puede ser implementado utilizando
<package>debsig-verify</package>y <package>debsigs</package>. Estos
dos paquetes pueden firmar y verificar firmas implantadas en el
deb-itself. Debian ya tiene la capacidad de hacer esto ahora, pero el
implementar esta política y las herramientas no será iniciado hasta
después de la publicación de Woody (así como no retrasa su ciclo de
publicación).

<p>NOTA: Normalmente <file> /etc/dpkg/dpkg.cfg</file> se desmonta con
"no-debsig" como por defecto.

<sect> Revisar publicaciones de paquete

<p>En caso que usted desee implementar seguridad adicional, revise que
pueda usar el script inferior, proporcionado por Anthony Thown. Este
script puede hacer nuevas revisiones de seguridad automáticamente,
para permitir al usuario, estar seguro que el software que él/ella
está bajando une el software de distribución de Debian. Esto abstiene
a los ralizadores de Debian de producir daños en el sistema de alguien
sin la responsabilidad proporcionada cargando el archivo principal, o
espejos reflejando algo casi, pero no del todo parecido a Debian, o
espejos proporcionando copias atrasadas inestables con problemas de
seguridad conocidos. <p>Esta muestra de código renombrada como
<prgn>apt-release-check</prgn>, debería ser usada de la siguiente
manera:

<example>
# apt-get update
# apt-release-check
(...resultados...)
# apt-get dist-upgrade
</example>

<p>Primero usted necesita:

<list>

<item>pulsar las teclas de archivo software que suele firmar archivos
de Publicaciones, <url
id="http://ftp-master.debian.org/ziyi_key_2002.asc"> y las adiciona a
<file>~/.gnupg/trustedkeys.gpg</file> (lo ucal es lo que
<prgn>gpgv</prgn> se usa por defecto)

<item>remover algunas <file>/etc/apt/sources.list</file> líneas que no
utilizanla estructura normal de distribuciones, o cambie el script de
modo que este trabaje con ellas.

<item>estar preparado para ignorar que las actualizaciones de
seguridad Debian no hayan firmado archivos de publicaciones, y que los
archivos de Fuente no tengan la suma de comprobaciones en el archivo
de Publicación (aun).

<item>prepárese para verificar que las fuentes apropiadas son firmadas
con las llaves propicias.

</list>

<example>
#!/bin/bash
# This script is copyright (c) 2001, Anthony Towns
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version.
# 
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
# GNU General Public License for more details.

rm -rf /tmp/apt-release-check
mkdir /tmp/apt-release-check || exit 1
cd /tmp/apt-release-check

>OK
>MISSING
>NOCHECK
>BAD

arch=`dpkg --print-installation-architecture`

am_root () {
 [ `id -u` -eq 0 ]
}

get_md5sumsize () {
 cat "$1" | awk '/^MD5Sum:/,/^SHA1:/' | 
 MYARG="$2" perl -ne '@f = split /\s+/; if ($f[3] eq $ENV{"MYARG"}) { 
print "$f[1] $f[2]\n"; exit(0); }'}
checkit () {
 local FILE="$1"
 local LOOKUP="$2"

 Y="`get_md5sumsize Release "$LOOKUP"`"
 Y="`echo "$Y" | sed 's/^ *//;s/ */ /g'`"

 if [ ! -e "/var/lib/apt/lists/$FILE" ]; then
 if [ "$Y" = "" ]; then
 # No file, but not needed anyway
 echo "OK"
 return
 fi
 echo "$FILE" >>MISSING
 echo "MISSING $Y"
 return
 fi
 if [ "$Y" = "" ]; then
 echo "$FILE" >>NOCHECK
 echo "NOCHECK"
 return
 fi
 X="`md5sum < /var/lib/apt/lists/$FILE` `wc -c < 
/var/lib/apt/lists/$FILE`" X="`echo "$X" | sed 's/^ *//;s/ */ /g'`"
 if [ "$X" != "$Y" ]; then
 echo "$FILE" >>BAD
 echo "BAD"
 return
 fi
 echo "$FILE" >>OK
 echo "OK"
}

echo
echo "Checking sources in /etc/apt/sources.list:"
echo "~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"
echo
(echo "You should take care to ensure that the distributions you're downloading"
echo "are the ones you think you are downloading, and that they are as up to"
echo "date as you would expect (testing and unstable should be no more than"
echo "two or three days out of date, stable-updates no more than a few weeks"
echo "or a month)."
) | fmt
echo

cat /etc/apt/sources.list | 
 sed 's/^ *//' | grep '^[^#]' |
 while read ty url dist comps; do
 if [ "${url%%:*}" = "http" -o "${url%%:*}" = "ftp" ]; then
 baseurl="${url#*://}"
 else
 continue
 fi
 echo "Source: ${ty} ${url} ${dist} ${comps}"
 
 rm -f Release Release.gpg
 wget -q -O Release "${url}/dists/${dist}/Release"

 if ! grep -q '^' Release; then
 echo " * NO TOP-LEVEL Release FILE"
 else
 origline=`sed -n 's/^Origin: *//p' Release | head -1`
 lablline=`sed -n 's/^Label: *//p' Release | head -1`
 suitline=`sed -n 's/^Suite: *//p' Release | head -1`
 codeline=`sed -n 's/^Codename: *//p' Release | head -1`
 dateline=`grep "^Date:" Release | head -1`
 dscrline=`grep "^Description:" Release | head -1`
 echo " o Origin: $origline/$lablline"
 echo " o Suite: $suitline/$codeline"
 echo " o $dateline"
 echo " o $dscrline"

 if [ "${dist%%/*}" != "$suitline" -a "${dist%%/*}" != 
"$codeline" ]; then echo " * WARNING: asked for $dist, 
got $suitline/$codeline" fi

 wget -q -O Release.gpg "${url}/dists/${dist}/Release.gpg"
 sigline="`gpgv --status-fd 3 Release.gpg Release 3>&1 >/dev/null 
2>&1 | sed -n "s/^\[GNUPG:\] GOODSIG [0-9A-Fa-f]* //p"`" if [ 
"$sigline" ]; then echo " o Signed by: $sigline"
 else
 echo " * NO VALID SIGNATURE"
 >Release
 fi
 fi
 okaycomps=""
 for comp in $comps; do
 if [ "$ty" = "deb" ]; then
 X=$(checkit "`echo 
"${baseurl}/dists/${dist}/${comp}/binary-${arch}/Release" | sed 's,//*,_,g'`" 
"${comp}/binary-${arch}/Release") Y=$(checkit "`echo 
"${baseurl}/dists/${dist}/${comp}/binary-${arch}/Packages" | sed 's,//*,_,g'`" 
"${comp}/binary-${arch}/Packages") if [ "$X $Y" = "OK OK" 
]; then okaycomps="$okaycomps $comp" 
 else echo " * PROBLEMS WITH $comp ($X, 
$Y)" fi elif [ "$ty" = "deb-src" ]; then
 X=$(checkit "`echo 
"${baseurl}/dists/${dist}/${comp}/source/Release" | sed 's,//*,_,g'`" 
"${comp}/source/Release") Y=$(checkit "`echo 
"${baseurl}/dists/${dist}/${comp}/source/Sources" | sed 's,//*,_,g'`" 
"${comp}/source/Sources") if [ "$X $Y" = "OK OK" ]; then 
 okaycomps="$okaycomps $comp" 
 else echo " * PROBLEMS WITH component $comp 
($X, $Y)" fi fi
 done
 [ "$okaycomps" = "" ] || echo " o Okay:$okaycomps"
 echo
 done

echo "Results"
echo "~~~~~~~"
echo

allokay=true

cd /tmp/apt-release-check
diff <(cat BAD MISSING NOCHECK OK | sort) <(cd /var/lib/apt/lists && find . 
-type f -maxdepth 1 | sed 's,^\./,,g' | grep '_' | sort) | sed -n 's/^> //p' 
>UNVALIDATEDcd /tmp/apt-release-check
if grep -q ^ UNVALIDATED; then
 allokay=false
 (echo "The following files in /var/lib/apt/lists have not been validated."
 echo "This could turn out to be a harmless indication that this script"
 echo "is buggy or out of date, or it could let trojaned packages get onto"
 echo "your system."
 ) | fmt
 echo
 sed 's/^/ /' < UNVALIDATED
 echo
fi

if grep -q ^ BAD; then
 allokay=false
 (echo "The contents of the following files in /var/lib/apt/lists does not"
 echo "match what was expected. This may mean these sources are out of date,"
 echo "that the archive is having problems, or that someone is actively"
 echo "using your mirror to distribute trojans."
 if am_root; then 
 echo "The files have been renamed to have the extension .FAILED and"
 echo "will be ignored by apt."
 cat BAD | while read a; do
 mv /var/lib/apt/lists/$a /var/lib/apt/lists/${a}.FAILED
 done
 fi) | fmt
 echo
 sed 's/^/ /' < BAD
 echo
fi

if grep -q ^ MISSING; then
 allokay=false
 (echo "The following files from /var/lib/apt/lists were missing. This"
 echo "may cause you to miss out on updates to some vulnerable packages."
 ) | fmt
 echo
 sed 's/^/ /' < MISSING
 echo
fi

if grep -q ^ NOCHECK; then
 allokay=false
 (echo "The contents of the following files in /var/lib/apt/lists could not"
 echo "be validated due to the lack of a signed Release file, or the lack"
 echo "of an appropriate entry in a signed Release file. This probably"
 echo "means that the maintainers of these sources are slack, but may mean"
 echo "these sources are being actively used to distribute trojans."
 if am_root; then 
 echo "The files have been renamed to have the extension .FAILED and"
 echo "will be ignored by apt."
 cat NOCHECK | while read a; do
 mv /var/lib/apt/lists/$a /var/lib/apt/lists/${a}.FAILED
 done
 fi) | fmt
 echo
 sed 's/^/ /' < NOCHECK
 echo
fi

if $allokay; then
 echo 'Everything seems okay!'
 echo
fi

rm -rf /tmp/apt-release-check
</example>

<chapt id="sec-tools">Herramientas de seguridad en Debian

<p>ARREGLAME: Se necesita más contenido.

<p>Además Debian suministra un numero de herramientas de seguridad que
pueden hacer en un equipo con Debian instalado adecuadamente para los
propositos de analisis de seguridad. Algunos de ellos son
suministrados cuando se instala el paquete
<package>harden-remoteaudit</package> 


<sect>Evaluación de herramientas de vulnerabilidad remota 

<p>Las herramientas suministradas por Debian para ejecutar la
evaluación de vulnerabilidad remota son: 

<list>
<item>nessus
<item>raccess
<item>whisker 
<item>nikto (reemplazo de whisker)
<item>bass (no libre)
<item>satan (no libre)
<!-- currently uploaded but not included
<item>saint (no libre)
-->
</list>

<p>La herramienta más completa y actualizada es
<package>nessus</package>la cual está compuesta de un cliente
(<package>nessus</package>) usado como un GUI y un servidor
(<package>nessusd</package>)los cuales lanzan los ataques programados.
Nessus incluye vulnerabilidades remotas para varios sistemas,
incluyendo dispositivos de red, servidores ftp, servidores www, etc.
Las últimas liberaciones son igual de capaces de analizar un sitio web
y tratar de descubrir páginas interactivas diponibles y que podrían
ser atacadas. También hay clientes Java y Win32 (no incluido en
Debian) los cuales pueden ser usados para contactar el administrador

<p> <package>Whisker</package> es un scaner de evaluación de
vulnerabilidad orientada a la web incluyendo tácticas anti-IDS (la
mayoria de ellas no son mas <em>anti-IDS</em>).Este es uno de los
mejores cgi-scanners disponibles,son capaces de detectar servidores
de www y lanzar únicamente un conjunto de ataques dados en contra de
este. La base de datos usada para revisar, puede ser modificada
fácilmente para suministrar nueva información.

<p><package>Bass</package> (Bulk Auditing Security Scanner)
<footnote>N.T. : Revisor en masa de Auditoría de seguridad</footnote>
y <package>Satan</package> (Security Auditing Tool for Analysing
Networks)<footnote>N.T.:herramientas de seguridad de auditoría para
analisis de redes</footnote> deben ser pensados más como programas de
"conceptos de prueba" que como herramientas que serán usadas mientras
se ejecutan las auditorías. Ambos son absolutamente antiguos y no se
mantienen hasta la fecha. Sin embargo,SATAN fue la primera herramienta
para el suministro de una evaluación de vulnerabilidad que una simple
herramienta (GUI) y Bass se mantiene como una herramienta de
evaluación de alto desempeño. 

<sect>Herramientas de revisión de redes
<p>Debian suministra algunas herramientas usadas para revisiones de
servidores remotos (pero sin evaluación de vulnerabilidad). Estas
herramientas son, en algunos casos, usadas por revisores de evaluación
de vulnerabilidades como el primer tipo de ataque que corre en contra
de los servidores remotos que intentan determinar los servidores
remotos disponibles. Actualmente Debian suministra:

<list>
<item>nmap
<item>xprobe
<item>queso
<item>knocker
<item>hping2
<item>isic
<item>icmpush
<item>nbtscan
</list>

<p>Mientras <package>queso</package>y <package>xprobe</package>
suministran únicamente detección remota de sistemas operativos.(usando
revisión de huellas TCP/IP ) <package>nmap</package> y
<package>knocker</package> pueden detectar el sistema operativo de
detención y pueden revisar puertos de servidores remotos. De otro lado
<package>hping2</package> y <package>icmpush</package> pueden ser
usados para técnicas remotas de ataque ICMP.

<p>Diseñado específicamente para redes Netbios,
<package>nbtscan</package> puede ser usados para revisar redes IP y
para traer informacióne de nombres desde los servidores de SMB,
incluyendo nombres de usuario, nombres de red, direcciones MAC... 

<sect>Auditorías internas 

<p>Actualmente, solamente la herramienta <package>tiger</package> es
usada en Debian para ejecutar auditorias internas (también llamadas
white box) del servidor para determinar si el sistema de archivos son
montados apropiadamente, cuyos procesos están escuchando en el
servidor, etc.

<sect>Auditoría de códigos fuente

<p>Debian suministra dos paquetes que pueden ser usados para auditar
programas escritos en C/C++ y encuentran errores de programación que
pueden conducir a fallas potenciales de seguridad.
 
<list>
<item>flawfinder
<item>rats
</list>

<sect>Redes privadas virtuales 

<p>ARREGLAME:Contenido necesario

<p>Debian suministra bastantes paquetes para montar redes 
virtuales privadas encriptadas:

<list>

<item><package>vtun</package>
<item><package>tunnelv</package>
<item><package>cipe</package>
<item><package>vpnd</package>
<item><package>tinc</package>
<item><package>secvpn</package>
<item><package>pptp</package>
<item><package>freeswan</package>

</list>

<p>IPsec (i.e. FreeSWAN)es probablemente la mejor opción dado que
esta promete interoperar con más que cualquiera otra que use IPsec,
pero estos otros paquetes pueden ayudarlo a tener un tunel seguro en
un momento de prisa. PPTP es un protocolo de Microsoft para VPN. Este
es soportado bajo Linux, pero se conoce que tiene serios problemas de
seguridad. 

<p>para más información dirígase a <url
id="http://www.linuxdoc.org/HOWTO/VPN-Masquerade-HOWTO.html"name="VPN-Masquerade
HOWTO"> (cubre IPsec y PPTP) <url
id="http://www.linuxdoc.org/HOWTO/VPN-HOWTO.html"name="VPN HOWTO">
(cubre PPP sobre SSH), y <url
id="http://www.linuxdoc.org/HOWTO/mini/Cipe+Masq.html" name="Cipe
mini-HOWTO">, <url
id="http://www.linuxdoc.org/HOWTO/mini/ppp-ssh/index.html"name="PPP
and SSH mini-HOWTO">.


<sect>Public Key Infraestructure (PKI). Infraestructura de claves
públicas

<p>Cuando se considera un PKI usted está confrontandolo con una amplia
variedad de herramientas:

<list>

<item>Un Autoridad de certificados que puede distribuir certificados y
puede trabajar bajo una jerarquia dada.

<item>Un directorio para apoyar los certificados de los usuarios
públicos.

<item>Una base de datos (?) para mantener listas de certificados
revocados.

<item>Dispositivos que pueden operar con CA para mantener
smartcards/usb tokens/o lo que sea para almacenar certificados
seguramente.

<item>Aplicaciones que tienen en cuenta los certificados dados que
pueden certificarse por un CA para llevar a cabo una comunicación
encriptada y revisar certificados dados contra CRL (para la
autenticación y soluciones de firma completa sencilla).

<item>Un reloj fechador que autoriza firmar los documentos
digitalmente.

<item>Una consola de administración desde el cual todos pueden ser
usados apropiadamente (certificado de generación, lista de control de
revocación, etc.).

</list>

<p>Usted puede usar algunos de los programas disponibles en Debian
GNU/Linux que cubre algunas de sus herramientas, este incluye open SSL
(para generación de certificados) Open LDAP (como un directorio para
apoyar los certificados) soporte gnupg y freeswan (con x.509). Sin
embargo, el sistema operativo no suministra (hasta la versión woody
3.0)cualquiera de los certificados libremente disponibles tales como
pyCA, Open CA, <url id="http://www.openca.org" name="OpenCA"> o los
ejemplos de CA de OpenSSL. Para más información lea <url
id="http://ospkibook.sourceforge.net/" name="Open PKI book">.

<sect>Herramientas antivirus

<p>No hay muchas herramientas de antivirus en Debian, probablemente
por que los usuarios de GNU/Linux no son regularmente plagados por los
virus. Este ha tenido, sin embargo, gusanos y virus para GNU/Linux
incluso si no ha habido (aún esperanzadoramente) algún virus que se
haya podido extender ampliamente sobre cualquier distribución de
Debian. En cualquier caso, los administradores deben buscar abrir una
salida de antivirus o protejerse contra ellos.

<p>Debian actualmente suministra las siguientes herramientas para la
construcción de ambientes de antivirus:

<list>

<item><url id="http://packages.debian.org/sanitizer"
name="sanitizer">, una herramienta que puede ser usada para filtrar
emails desde procmail y eliminar virus.

<item><url id="http://packages.debian.org/amavis-postfix"
name="amavis-postfix">,un script que suministra una interfaz desde el
agente de transporte de correo hacia uno o más revisores de virus
(este paquete lo suministra la versión postfix).

</list>

<p>Como usted puede ver, Debian no sumninistra actualmente ningún
programa de antivirus por si mismo. Hay, sin embargo, proyectos libres
de antivirus los cuales (en el futuro) podrían ser incluidos en
Debian<url id="http://sourceforge.net/projects/openantivirus/"
name="openantivirus"> (pocas oportunidades para este dado que está
basado completamente en Java). Debian nunca suministrará software de
antivirus comerciales como: <url
id="http://sourceforge.net/projects/jvirus/" name="jvirus"> <url
id="http://www.pandasoftware.com/com/linux/linux.asp" name="Panda
Antivirus">, <url
id="http://www.nai.com/naicommon/buy-try/try/products-evals.asp"
name="NAI Netshield (uvscan)">, <url id="http://www.sophos.com/"
name="Sophos Sweep">, <url id="http://www.antivirus.com/products/"
name="TrendMicro Interscan">, <url id="http://www.ravantivirus.com"
name="RAV">.... para mas enlaces vea <url
id="http://www.computer-networking.de/~link/security/av-linux_e.txt"
name="Linux antivirus software mini-FAQ">.

<p>Para más información sobre como montar un sistema detector de virus
lea el artículo de Dave Jones construyendo un sistema detector de
virus en su correo para su red. <url
id="http://www.linuxjournal.com/article.php?sid=4882" name="Building
an E-mail Virus Detection System for Your Network">

<chapt>Antes del compromiso

<sect id="intrusion-detect">Montar el descubrimiento de intrusión

<p>Debian incluye algunas herramientas para detectar intrusiones, las
cuales usted quisiera configurar para montar la defensa de su sistema
local (si es verdaderamente paranoico o si su sistema es realmente
crítico) o para defender otros sistemas en la misma red.

<p>Siempre debe darse cuenta que para mejorar realmente el sistema de
seguridad con la introducción de algunas de estas herramientas, usted
necesitara tener un mecanismo de alerta+respuesta, pero no use el
descubrimiento de intrusión si usted no va a alertar a nadie (i.e. no
malgaste su tiempo configurando cosas que mas tarde no usara).

<p>La maryoría de herramientas de descubrimiento de intrusión sera
también registrada bajo syslog o enviará mensajes hacia el usuario
root. (muchos de ellos pueden ser configurados para enviar correo a
otros usuarios) con respecto al particualar ataque que ha sido
detectado. Un administrador tiene que configurarlos apropiadamente,
para que los falsos-positivos no envíen alertas y a las alertas
también se tengan en cuenta apropiadamente. Las alertas pueden
indicar un ataque en curso y puede no ser útil, por ejemplo, que un
dia mas tarde, después del ataque exitoso este sea descubierto. Para
estar seguro que una política es apropiada sobre la dirección de
alertas y para que los mecanismos técnicos se puedan implementar y
estén en su sitio.

<p>Una interesante fuente de información es <url
id="http://www.cert.org/tech_tips/intruder_detection_checklist.html"
name="CERT's Intrusion Detection Checklist">

<sect1>Detección de intrusos basadas en Red

<p><package>snort</package> es un flexible paquete de sniffer o logger
el cual detecta ataques usando un ataque de asignatura. Este detecta
una variedad de ataques y examinaciones, tales como buffer overflows,
stealth pot scans, ataques CGI, examinaciones SMB y más. Snort tiene
la capacidad de alertar en tiempo real. Esta es una herramienta la
cual debe ser instalada sobre toda ruta para mantener un ojo sobre su
red. Ya instalado <tt>apt-get install snort</tt>,siga las preguntas
y obseve su registro.

<p>Snort en Debian está habilitado con muchos chequeos de seguridad
los cuales usted debe solicitar, sin embargo, usted debe personalizar
el montaje para tomarlo dentro de las consideraciones de servicios
particulares en donde usted avanza sobre su sistema. Usted también
tiene que solicitarlo para recuperar los chequeos adicionales y asi
especificar estos servicios.

<p>Usted también puede usar ambos <prgn>snort</prgn> para establecer
detención de red para un rango de servidor en su red como también
detecta ataques de red sobre su propio servidor.

<p>Hay otras herramientas que pueden ser usadas para detectar ataques
de red (aunque mas simples). <package>Portsentry</package> es otro
interesante paquete que puede sugerir su aislamiento cuando una
examinación es hecha hacia su site. Otras herramientas como
<package>ippl</package> <package>iplogger</package> también detectaran
ataques de IP (TCP Y ICMP), igual que si ellos no suministraran
técnicas avanzadas para la detención de ataques de red. (como lo hace
snort).

<p>Usted puede evaluar cualquiera de estas herramientas con el
programa <prgn>idswakeup</prgn>, un generador falso-positivo que
alerta los NIDSs con plenitud de considerar ataques comunes
disponibles en Debian.

<sect1>Servidores basados en la detención 

<p><package>Tiger</package> es una vieja herramienta de intrusión de
detención la cual ha sido soportada por Debian desde la distribución
de woody. Tiger suministra la forma de revisar asuntos comunes
relatados para los rompimientos de seguridad, passwords, problemas en
archivos del sistema, procesos de comunicación ... La versión de Debian
incluye nueva seguridad específica para Debian: MDSsums da suministros
binarios y también revisa los ya instalados y los paquetes
vulnerables. La falta de instalación hace que <prgn>tiger</prgn>
avance cada día y génere un reporte el cual es enviadao hacia el super
usuario. Los reportes generados pueden darse a través de la
información de un cuidadoso compromiso del sistema.

<p>Hay también un número de registros de auditorias de herramientas,
en el site, como logcheck. Estas herramientas pueden ser absolutamente
usables si se garantiza propiamente para alertar al administrador
sobre eventos inusuales en el sistema de archivos locales.

<package>logcheck</package>. pude ser enteramente garantizado, pude
enviar mensajes desde eventos recuperados y desde los registros que
son meritorios de atención. El abandono de instalación incluye
perfiles para eventos ignorados y violaciones políticas para tres
diferentes montajes (estación de trabajo, servidor y paranoia). Los
paquetes de Debian incluyen un archivo de configuración
<file>/etc/logcheck/logcheck.conf</file>, dirigido por el programa,
que define al usuario y que también revisa sus envios. También
suministra una forma de paquete que provee servicios para implementar
nuevas políticas en los directorios: 

<file>/etc/logcheck/hacking.d/_packagename_</file>,
<file>/etc/logcheck/violations.d/_packagename_</file>,
<file>/etc/logcheck/violations.ignore.d/_packagename_</file>,
<file>/etc/logcheck/ignore.d.paranoid/_packagename_</file>,
<file>/etc/logcheck/ignore.d.server/_packagename_</file>, and
<file>/etc/logcheck/ignore.d.workstation/_packagename_</file>. Sin embargo, no 
muchos paquetes lo hacen actualmente. Si usted tiene una política que puede ser 
útil para otros usuarios , por favor envielo como un pequeño reporte para los 
paquetes apropiados, mire mas información en 
<file>/usr/share/doc/logcheck/README.Debian</file><p>también algunos de los 
chequeadores de archivo de sistemaintegrados (mire en <ref id="check-integ">) 
puede ser absolutamenetutil para montar la detención de anomalias en un medio 
asegurado. Unaintrusión efectiva, muy seguramente, modificara los archivos en el
sistema de archivos locales en orden para salvar las políticas de
seguridad local. Instala troyanos, crea usuarios...Este evento puede
ser detectado con ellos.

<sect id="kernel-patches">Parches útiles del núcleo

<p>ARREGLAME: Las secciones necesitan como cubrir los parches específicos
que pueden ser instalados en Debian usando el paquete del
kernel-2.x.x-patch-XXX. </p>

<p>Hay algunos parches de núcleos, las cuales incrementan
significativamente los sistemas de seguridad. Aqui hay algunos de
ellos: <p>

<list>

<item>OpenWall patch de Solar Designer. Ésta es una serie útil de
restricciones de parches, como enlaces, FIFOs in <file>/tmp</file>,
restringidos <file>/proc</file>,un archivo manejado por descriptor
especial, sin el área de un grupo de usarios y otros mas.
homepage:<url name="http://www.openwall.com/linux/"
id="http://www.openwall.com/linux/">

<item><em>LIDS &mdash; Intrusión de detención del sistema Linux por
Huagang Xie &amp; Philippe Biondi</em>. Este parche hace que el
proceso duro de creación de Linux sea mas fácil. Usted puede
restringir todos los procesos, dar lo adecuado para escrbir o leer
archivos, o remover, por fallas, y para tener la habilidad de leer
archivos. Además usted también puede capacitarlos para procesos
certeros. Aunque este permenece en la fase beta, este es casi uno de
los sistemas de administrador paranoico. The Homepage: <url
name="http://www.lids.org" id="http://www.lids.org">

<item><em>POSIX Control a acceso de listas. Access Control Lists
(ACLs) para Linux</em> este parche se suma al control de acceso de
listas, un avanzado metodo para restringir accso de listas, hacia el
núcleo de Linux Homepage: <url name="http://acl.bestbits.at/"
id="http://acl.bestbits.at/">

<item><em>Consejo de administrador en linux</em>. Este parche se suma
al decente avance de permisos del sitema para su núcleo de Linux.
Todos los objetos son surtidos en la memoria del núcleo. Homepage: <url
name="http://trustees.sourceforge.net/"
id="http://trustees.sourceforge.net/">

<item><em>Parches internacionales del núcleo</em>. Ésta es una cripta
orientada a los parches del núcleo. Ademas usted tiene que prestar
atención a sus leyes locales con respecto al uso de la criptografia.
Basicamente se suma la posibilidad de usar sistemas de archivos
encriptados. Homepage: <url name="http://www.kerneli.org"
id="http://www.kerneli.org">

<item><em>SubDomain</em>. Es una extención del núcleo para crear mas
seguridad y fácilidades para montar chroot en su medio. Usted puede
especificar los archivos necesarios para el servicio manual de
chrooted y para no compilar los servicios estaticamente. Homepage:
<url name="http://www.immunix.org/subdomain.html"
id="http://www.immunix.org/subdomain.html">

<item><em>UserIPAcct</em>. Este no es realmente un parche de seguridad
relatado, pero le permite crear cuotas para el tráfico sobre su
servidor por usuario. Y usted puede traer estadisticas acerca del
tráfico del usuario. Homepage: <url
id="http://ramses.smeyers.be/useripacct">.

<item><em>FreeS/WAN</em>. Si usted quiere usar IPSec con Linux usted
necesita este parche. Usted puede crear VPNs con esta facilidad, igual
para las máquinas de windows, como IPSsec el cual es un estandard
común. Homepage: <url id="http://www.freeswan.org">

</list>

<sect>Evitando rootkits
<p>

<sect1 id="LKM">LKM - Loadable Kernel Modules (módulos cargables en el núcleo)

<p>LKM (Loadable Kernel Modules) son archivos que contienen
dinamicamente modulos caragables del núcleo. Ellos son
dinámicamente cargables en el núcleo para avanzar en tareas asignadas.
SobreGNU/Linux son usadas para expandir la funcionalidad del núcleo.
se pueden tomar grandes ventajas usando LKMs, como habiamos dicho,
ellospueden ser dinamicamente cargables sin la recopilación del
núcleo total, puede ser usado para especificar dispositivos de drivers
(o archivos del sistema) y otros drives de hardware como tarjetas
de sonido, tarjetas de red. Pero algunos crackers deben usar LKMs
para rootkits (knark y adore) para instalar puertas traseras en los
sistemas de GNU/Linux.

<p>LKM rootkits pueden esconder procesos, archivos, directorio y las
mismas conexiones sin modificar el origen de códigos binarios.
Porejemplo, <prgn>ps</prgn> puede tomar procesos de información
desde<file>/proc</file>, un malicioso LKM puede derrocar el núcleo
paraesconder el proceso especifico desde procfs, pero no siempre una
buenacopia de binarios <prgn>ps</prgn> deben alistar todos los
procesos correctos de información.

<sect1>Detector de rootkits.

<p>El trabajo detector puede ser simple y doloroso, o difícil y
agotador, depende de la medida que escoja. Hay dos medidas de defensa
con respecto a la seguridad LKM, la proactiva y reactiva.

<sect2>Defensa proactiva.

<p>La ventaja de esta defensa es que previene algunos daños lkm
rootkit del sistema. La defensa proactiva mas usada es "obteniendo el
primero", este está caragando un diseño LKM para proteger los daños
de un sistema ocasionados por un diseño malicioso. Hay otra medida
para eliminar las capacidades en el núcleo, haciendo el sistema mas
seguro. Por ejemplo, usted remueve la capacidad para detener la carga
y la descarga del módulo del núcleo.

<p>Sobre el sistema de Debian usted puede encontrar algunos paquetes
los cuales son una herramienta proactiva mas segura.

<list>

<item> <package>kernel-patch-2.4-lsm</package> - LSM son los modulos
de seguridad de la estructura Linux.

<item> <package>lcap</package> - Remueve las capacidades en el núcleo,
haciendo del sistema mas seguro.

</list>

<p>Si usted realmente no necesita muchas caracteristicas del núcleo
sobre su GNU/Linux usted tiene que solicitar modulos de soporte
caragables incapacitados durante la configuración del núcleo. Este
previene LKM rootkits, pero usted no debe usar las caracteristicas del
modulo del núcleo sobre su GNU/Linux. Fijese que indiscapacitando los
modulos caragables usted puede sobrecargar el núcleo, en ocasiones no
es necesario.

<p>Para indiscapacitar los modulos de soporte cargables, solo valla a
CONFIG_MODULES=n on <file>.config</file>.

<sect2>Defensa Reactiva.

<p>La ventaja de la defensa reactiva es que tiene una sobrecarga en
los recursos del sistema. Este trabaja comparando el sistema de
llamadas tabulando con una copia limpia conocida en el archivo de un
diskette. La mas obvia desventaja es llamada para el único
administrador cuando el sistema no ha sido comprometido.

<p>El detector de rootkits en Debian puede ser consumado con
<package>chkrootkit</package>. Este programa revisa signos de rootkits
sobre el sistema local y si el objetivo del computador es infectado
con un rootkit.

<p>Usted también puede usar <url name="SKAT"
id="http://s0ftpj.org/en/site.html">. SKAT revisa el area de memoria
del núcleo a (<file>/dev/kmem</file>) para información acerca del
objetivo del servidor, esta información incluye la instalación de
modulos cargables del núcleo.

<P>ARREGLAME: información adicional sobre como compilar el soporte del
nrúucleo w/o lkm.


<sect>Ideas geniales/paranóicas &mdash; qué debe hacer


<p> Ésta es probablemente la más inestable y divertida sección, ya que
espero que algunas de de los "duh. ideas locas del sonido" puedan ser
realizadas. Siguiendo aqui usted debera encontrar algunas ideas
&mdash;esto depende del punto de vista en donde usted observe si ellos
son genios, paranóicos, locos o si pueden dar una garantía &mdash;
para incrementar su seguridad rápidamente usted no deberá venir y
sacarlo ileso. 


<list>

<item>Jugando alrededor con PAM. Como se dijo en el articulo phrack
56 PAM , lo agradable con PAM es que "usted está limitado únicamente
por lo que pueda pensar" es verdad, imagine la raíz del inicio de
sesión únicamente posible con revisión de impresión o eyescan o
cryptocard (porque yo aqui hago una conjunción OR y no AND). 

<item>Iniciación de sesión fascista. Yo diria que que todo lo que
nosotros hemos hablado acerca de login es "un sueve inicio de sesión".
si usted quiere ejecutar una sesión real, tome una impresora con papel
fanfold y registre todo lo complicado para imprimir sobre el.Los
sonidos divertidos, son confiables y no pueden ser removidos.

<item>Distribución de CD. Esta idea es muy fácil de realizar y ofrece
muy buena seguridad. Crear una distribución de un endurecido Debian,
con propias reglas de barrera, hace imagenes ISO de este y surgen
sobre un CD. lo hace iniciable. Ésta es una lectura única de
distribución con cerca de 600 MB para servicios, y es imposible para
introductores y asi poder empezar a leer/escribir el acceso sobre el
sistema. Solo asegurese siempre de los datos los cuales deben
escribirse sobre "wires". De todas formas, el introductor no puede
cambiar las reglas de barreara, distribuyendo entrdas o iniciar
propios demonios. (el tiene la capacidad, ya que reinicia y tiene que
manejar su sitema de nuevo para cambiarlos) 

<item>El Switch de capacidad del modulo apagado. Cuando desconecta el
uso de modulos del núcleo en un tiempo compilado del núcleo, muchos
núcleo se basan en puertas traseras imposibles para poder
implementarlas, ya que muchos de ellos estan basados en la instalación
de modulos modificados del núcleo.

<item>Entrando a través del cable serial (contribuido por Gaby
Schilders). Dado que que los servidores aun tienen puertos en serie,
imagínese tener una máquina de registro de bitácoras desconectada de
su red en la mitad con un puerto serial multiplexor (antiquisimo o
algo similar). Ahora todos sus servidores registrando a sus puertos
seriales. Con sólo escritura. la máquina de registo únicamente acepta
texto plano como entrada sobre sus puertos seriales y únicamente
escribe en un archivo de registro. Enganche un cd/dvd writer. Cuando
el registro del archivo está cerca de 600&nbsp;MB lo copia al cd-rom.
Ahora si pudieran hacer quemadoras con auto-cambiadores ... No copia
tan dura como la impreosra, pero que puede manejar largos volúmenes y
los cd no toman mucho espacio de almacenamiento. 

<item>Haga que todo sea inmutable (tomado desde Tips-HOWTO, escrito
por Jim Dennis). Despues de que usted instale y configure su sitema
dirigase a través de <file>/bin</file>, <file>/sbin/</file>,
<file>/usr/bin</file>, <file>/usr/sbin</file> y <file>/usr/lib</file>
(y un poco de otros inusuales sospechosos) y hagalo en uso liberal de
<prgn>chattr +i command</prgn>. también se suma en la raiz de archivos
del núcleo. Ahora <prgn>mkdir /etc/.dist/</prgn> copia todo desde
<file>/etc/</file> de la parte interior (Lo hago en dos pasos usando
<file>/tmp/etcdist.tar</file> para evitar la recurrencia) dentro del
directoro (opcionalmente usted puede crear
<file>/etc/.dist.tar.gz</file>) y marquelo como inmutable. 


<p>La razón para todo es limitar el daño que usted pueda ocasionar
cuando se registyra como root. Usted no podra sobreescribir archivos
con un desviado operador de redirecciones, usted no podra hacer del
sitema algo inusual con un desviado espacio dentro de un comando
<prgn>rm -fr</prgn> (usted puede permancer haciendo lo suficiente con
los daños de sus datos &mdash: pero sus libs y bins estaran seguros).

<p>Ésta también emplea una variedad de seguridad y rechazo de
servicios de cualquier imposible explosión o algo de mayor dificultad
(ya que muchos de ellos confian en sobre copiar archivos a través de
las acciones de algun programa SUIDque <em>no suministra
arbitrariamente una interfase de comandos</em>)

<p>El único inconveniente de este es cuando se construye y se hace su
<prgn>make install</prgn> sobre varias clases de sistemas binarios.
Sobre la otra mano también previene la instalación desde los archivos
sobre escritos. Cuando usted olvida leer el Makefile y chattr -i los
archivos que pueden ser sobre escritos fallan con el make (y los
directorios para los cuales usted necesita para añadir archivos),
usted solo use el comando chattr y regrese. Usted también puede tener
la oportuinidad de mover sus viejos bins, libs o lo que sea dentro de
un old/directory o puede renombrar, marcar o lo que sea.

<p>Note que esto lo previene de hacer una actualización de los
paquetes de su sistema. Dado que los archivos que ellos suministran no
pueden ser sobre escritos, y usted debe tener un mecanismo para
desactivar la bandera de inmutable sobre todos los binarios antes de
un <prgn>apt-get update</prgn>.

</list>


<sect1>Construyendo un equipo trampa
 
<p>ARREGLAME. Mas contenido específico necesario para Debian

<p>Si usted desea (y también puede implementarlo y dedicarle tiempo)
usted puede mintar todo un equipo trampa (del inglés, <em>honeypot</em>
<footnote>N.T. es un equipo fácil de
acceso el cual permite al acceso de crackers</footnote>)
usando un sistema de Debian GNU/Linux. Usted tiene todas las 
herramientas necesarias en orden para
montar toda la red trampa (N.T. del inglés <em>honeynet</em>, el
<em>honeypot</em> es sólo el servidor falso):
el cortafuegos, los detectores de intrusión y el servidor falso.
Sea cuidadoso. Sin embargo, tiene que estar bien seguro de
que sea alertado a tiempo (vea "la importancia del registro y las
alertas" en la pagina 36 <ref id="log-alerts">), usted debe tomar la
medida apropiada y terminar el compromiso tan pronto como haya visto
suficiente. Los siguientes paquetes le pueden ser de utilidad:

<list>

<item>la tecnología del cortafuegos usted la debera necesitar
(suministrado por Linux Kernel).

<item><package>syslog-ng</package> para enviar el registro desde el
honeypot hacia una máquina de servidor remota.

<item><package>snort</package> para montar la captura de todo la
llegada del trafico de red para honeypot y para detectar ataques.


<item><package>osh</package> el cual puede ser usado para montar una
restricción de comandos de interfase con el inicio de sesión (mire el
bajo Lnce Spitzener).

<item>Claro que si, todos los servidores para su falso servidor
honeypot usted se los puede imaginar (pero no haga duro el
<em>not</em> honeypot)).

<item>y también los falsos servicios, suministrados por
<package>dtk</package> si usted necesita usar el honeypot también como
un servicio de detección de intrusión.

<item>Chequeadores integrales (vea <ref id="check-integ">) y los
toolkit de Coroners y (<package>tct</package>) para hacer una
auditoria de post ataque.

</list>

<p>Usted puede leer más acerca de la construcción de honeypots en el
excelente artículo de Lanze Spitzner para construir un honeypot<url
id="http://www.net-security.org/text/articles/spitzner/honeypot.shtml"name="To
Build a Honeypot"> (desde las serie conocidad de su enemigo), o la
construcción de su propio honeypot de David Raikow <url
id="http://www.zdnetindia.com/techzone/resources/security/stories/7601.htm
"name="Building your own honeypot">. también el proyecto de honeynet
<url id="http://project.honeynet.org/" name="Honeynet Project"> es
dedicado para la construcción de honeypots y auditorias de ataques
hechos para ellos, ésta es una información valios sobre como montar un
honeypot y resultados de auditoría de un ataque (mire el concurso).


<chapt>Después del compromiso


<sect>Conducta general

<p>Si usted se encuentra presente fisicamente cuando un ataque está
sucediendo si al hacer lo siguiente, no afecta las transacciones de
negocios, simplemente desconecte el NIC hasta que pueda descifrar lo
que el intruso quiere hacer y asegure el computador,inhabilitando la
capa uno de la red, es la única vía verdadera de mantener al atacante
alejado del equipo comprometido (consejo prudente de Phillip
Hofmeister).

<p>Si realmente usted quiere arreglar el compromiso rápidamente, usted
deberá eliminar el servidor comprometido de su red y reinstalar el
sistema operativo desde el comienzo. Esto no debería tener ningún
efecto si usted no sabe como el intruso se volvió root. En este caso,
debe chequear todo: firewall/file integrity/loghost logfiles y así
sucesivamente. Para más información sobre que hacer y seguir una
intrusión, observe <url name="Sans'Incident Handling Guide"
id="http://www.sans.org/y2k/DDoS.htm"> o <url
id="http://www.cert.org/tech_tips/root_compromise.html" name="pasos
del CERT para recuperarse de un compromiso en sistema UNIX o NT">.

<sect>Haciendo copias de seguridad del sistema

<p>Recuerde que si usted está seguro de que el sistema ha sido
comprometido, no puede confiarse del software o de alguna otra
información que esté en ese momento. Las aplicaciones podrían haber
sido troyanizadas, y módulos del kernel estar instalados, etc. 

<p>Lo mejor es sacar una copia completa de seguridad (usando
<prgn>dd</prgn>) después de haberlo cargado desde un medio seguro. Los
discos compactos de Debian GNU/Linux pueden ser usados correctamente
por éste dado que ellos suministran a una interfaz de comandos en la
consola 2 cuando la instalación haya iniciado (presione Alt 2 y luego
Enter). La interfaz de comando puede ser usada para sacar una copia de
seguridad a un lugar diferente (a lo mejor un servidor de archivos en
red vía NFS/FTP ...) para hacer un análisis mientras el sistema está
fuera de línea (o siendo reinstalado).

<p>Si usted está seguro que solamente hay un módulo del kernel
troyano, usted puede intentar lanzar la imagen del kernel desde el
disco compacto en <em>modo</em> rescue. Asegúrese de iniciar en
<em>modo</em> single o si no, de modo que otros procesos troyanos no
correrán después del kernel. 

<sect>Análisis forense

<p>Si usted desea recopilar mas información, el
<package>tct</package> (El juego de herramientas del instructor de Dan
Farmer y Wietse Venema) contiene paquetes de utilidad que ejecuta un
"post mortem" de un sistema. El <package>tct</package> permite al
usuario recopilar información acerca de archivos borrados,
procesadores en funcionamiento y más. Observe la documentación
incluída para más información.

<p>Los análisis forense siempre se deben hacer en la copia de
seguridad de datos, <em>nunca</em> en los mismos datos, ya que estos
podrían ser falsificados a través de este análisis (y perderse).

<p>ARREGLAME. De este párrafo se espera que suministre mas información
acerca de la legalidad en el sistema Debian en un futuro venidero.

<p>ARREGLAME: hablar sobre como va a hacer un debsums en un sisema estable
con el disco compacto md5sums, con la recuperación de un sistema de
archivo restaurado en una distribución separada.

<chapt>Preguntas Frecuentes

<p>
Este capítulo introduce algunas de las preguntas más comunes de la lista de seguridad de
Debian. Debería leerlas antes de preguntar o la gente posiblemente le diga RTFM (N.T. Read The Fucking Manual - Lea el P*to Manual).
 

<sect>La seguridad en el sistema operativo Debian

<sect1>¿Es más seguro Debian que X?
<p>Un sistema es sólo tan seguro como su administrador es capaz de hacerlo.
La instalación predeterminada de Debian de servicios trata de ser
<em>segura</em>,
pero puede no ser tan paranoica como la de otros sistemas operativos que
instalan todos los servicios <em>deshabilitados de manera
predeterminada</em>. En cualquier caso, el administrador del sistema
necesita adaptar la seguridad del sistema a su política de seguridad local.

Para ver una recopilación de datos acerca de vulnerabilidades de seguridad
de muchos sistemas operativos mire en <url
id="http://securityfocus.com/vulns/stats.shtml">. ¿Le son útiles estos datos?
El servidor lista varios factores a considerar cuando se interpretan los
datos y avisa de que los datos no pueden usarse para comparar las
vulnerabilidades de un sistema operativo frente a otro.<footnote>Por
ejemplo, teniendo en cuenta los datos de Securityfocus, puede parecer que
Windows NT es más seguro que Linux, lo que es una afirmación cuestionable.
Después de todo, las distribuciones de Linux proporcionan habitualmente
muchas más aplicaciones comparadas con Windows NT de
Microsoft.</footnote>Tenga también en mente que alguna de las
vulnerabilidades de BugTraq que afectan a Debian se aplican sólo a la rama
<em>unstable</em>.

<sect2>¿Es Debian más segura que las otras distribuciones de Linux (como RedHat, SuSE...)?
<p>No hay realmente muchas diferencias entre las distribuciones de Linux más
allá de la instalación base y el sistema de gestión de paquetes. La mayoría
de las distribuciones comparten las mismas aplicaciones con diferencias
fundamentalmente en las versiones de esas aplicaciones que se distribuyen en
esa distribución estable. por ejemplo, el núcleo, Bind, Apache, OpenSSH,
XFree, gcc, zlib, etc, todas son comunes en las distribuciones Linux.

<p>Por ejemplo, RedHat se distribuyó desafortunadamente cuando era actual la
versión 1.2.3 de foo en la que más tarde se encontró un agujero de
seguridad. Debian, por otro lado, tuvo la suerte de distribuir foo 1.2.4 que
incorporaba el parche al fallo. Ese fue el caso en el problema con <url
id="http://www.cert.org/advisories/CA-2000-17.html" name="rpc.statd">
Hace varios años.

<p>Hay mucha colaboración entre los equipos de seguridad de las
distribuciones de Linux más grandes. Las actualizaciones de seguridad
raramente se dejan sin actualizar en una distribución. El conocimiento
acerca de una vulnerabilidad nunca se esconde a otras distribuciones así
que los arreglos se suelen hacer coordinados, o por el <url id="http://cert.org" name="CERT">.
Como resultado, las actualizaciones de seguridad necesarias suelen liberarse
al mismo tiempo y la seguridad relativa entre las diferentes distribuciones
es muy similar.
<p>Una de las mayores ventajas de Debian en relación a la seguridad es la
facilidad del sistema de actualización a través de del uso de  <prgn>apt</prgn>. Aquí hay algún otro aspecto a considerar acerca de la
seguridad de Debian:

<list>

<item>Debian proporciona más herramientas de seguridad que otras
distribuciones, mire en <ref id="sec-tools">.
<item>La instalación estándar de Debian es más pequeña (con menos
funcionalidad) y por lo tanto más segura. Otras distribuciones, en favor de
la usabilidad, tienden a instalar muchos servicios demanera predeterminada y
algunas veces, no están bien configurados (recuerde los
<url id="http://www.sans.org/y2k/lion.htm" name="gusanos Ramen o Lion">). 
La instalación de Debian no está tan limitada como OpenBSD (donde no hay
demonios activados de forma predeterminada), pero es un buen compromiso.
<footnote>Sin descontar el hecho de que algunas distribuciones como RedHat o
Mandrake, están tomando en serio la seguridad de sus instalaciones
predeterminadas haciendo que el usuario seleccione <em>perfiles de
seguridad</em>, o mediante asistentes para ayudar en la configuración de
<em>cortafuegos personales</em>.</footnote>

<item>Debian documenta las mejores prácticas de seguridad en documentos como
este.

</list>

<sect1>Hay muchos errores de Debian en Bugtraq. ¿Significa eso que es muy vulnerable?

<p>La distribución Debian contiene un gran y creciente número de paquetes de
programas y probablemente más que los proporcionados por muchos sistemas
operativos propietarios.
Cuantos más paquetes se instalen, mayor será el riesgo potencial de tener
problemas de seguridad para un sistema dado.

<p>Más y más personas están examinando el código fuente en busca de
debilidades. Hay muchos avisos acerca de auditorías del código fuente de los
componentes más importantes de Debian. Cuando esas auditorías de código
fuente descubren vulnerabilidades, se solucionan y se envía un aviso a las
listas y a Bugtraq.

<p>Los errores que están presentes en la distribución Debian tambien afectan
habitualmente a otros fabricantes y distribuciones. Revise la sección
"Debian specific: yes/no" al comienzo de cada aviso DSA).


<sect1>¿Tiene Debian alguna certificación relacionada con la seguridad?

<p>Respuesta corta: no.

<p>Respuesta larga: las certificaciones cuestan dinero y nadie ha dedicado
los recursos para certificar a Debian GNU/Linux a ningún nivel de, por
ejemplo, el "Common Criteria". Si está interesado en obtener una
distribución certificada, pruebe a proporcionar los recursos para que ello
sea posible.

<sect1>¿Hay algún programa de securización para Debian?

<p>Sí. <url name="Bastille Linux" id="http://www.bastille-linux.org">,
originalmente orientado hacia otras distribuciones de Linux (RedHat
y Mandrake), actualmente funciona para Debian. Los pasos están
siendo tomados para integrar los cambios hechos a la versión original al
paquete Debian llamado <package>bastille</package>.

<p>Sin embargo, algunas personas creen que una herramienta de
securización no elimina la necesidad de una buena administración.

<sect1>Quiero ejecutar el servicio XYZ, ¿cuál debería elegir?

<p>Una de las mayores fortalezas de Debian es la gran variedad de elecciones
posibles entre paquetes que proporcionan la misma funcionalidad (servidores
de DNS, servidores de correo, servidores de FTP, servidores WEB, etc.). Eso
puede resultar confuso para el administrador novel al tratar de determinar
que paquete es el adecuado. La mejor opción para una situación concreta se
basa en el compromiso entre su funcionalidad y los requerimientos de
seguridad. Hay algunas preguntas que debe contestar antes de decidir entre
paquetes similares:

<list>

<item>¿Se mantiene el programa original? Cuando fué su última versión?

<item>¿Está el paquete maduro? El número de versión realmente
<em>no</em> no informa acerca de su madurez. Trate de indagar acerca de la
historia del programa.

<item>¿Está el programa libre de errores? ¿Han salido avisos de seguridad
relacionados con él?

<item>¿Proporciona el programa todas las funcionalidades que necesita?
¿Proporciona más de lo que realmente necesita?

</list>

<sect1>¿Cómo puedo hacer el servicio XYZ más seguro en Debian?
<!-- Changed to XYZ in order to avoid confusion :) jfs -->

<p>Puede encontrar información en este documento acerca de cómo hacer
algunos servicios (FTP, Bind) más seguros en Debian GNU/Linux. Para los
servicios que no se cubran aquí, mire la documentación del programa o
información general sobre Linux. La mayoría de las guías de seguridad para
sistemas Unix también se aplican a Debian. En la mayoría de los casos,
securizar un servicio X en Debian es como securizar ese mismo servicio en
cualquier otra distribución de Linux (o Un*x).

<sect1>¿Cómo puedo eliminar todos los mensajes de los servidores?

<p>Si no le gusta que los usuarios se conecten a su servidor POP4, por
ejemplo, y obtengan información sobre sus sitema, puede querer eliminar (o
cambiar) el mensaje que los servidores muestran a los usuarios.
<footnote>Dese cuenta que eso es 'seguridad por oscuridad', y que
probablemente no tenga un buen efecto a largo plazo.</footnote> El hacer eso
depende del programa que esté ejecutando para un servicio determinado. Por
ejemplo, en 
<prgn>postfix</prgn>, puede configurar el mensaje de SMTP en
<file>/etc/postfix/main.cf</file>:
<example>
  smtpd_banner = $myhostname ESMTP $mail_name (Debian/GNU)
</example>

<p>Otros programas no son tan fáciles de cambiar. <package>OpenSSH</package>
tiene que ser recompilado para poderse cambiar la versión que muestra.
Tenga cuidado con no eliminar la primera parte (<tt>SSH-2.0</tt>) del mensaje, que muchos clientes usan para identificar qué protocolo(s)
soporta su paquete.

<sect1>¿Son seguros todos los paquetes de Debian?

<p>El equipo de seguridad de Debian no puede analizar posiblemente todos los
paquetes incluidos en Debian en busca de vulnerabilidades potenciales porque
simplemente, no tienen recursos suficientes para auditar todo el código
fuente del proyecto. De todas formas Debian se beneficia de la auditoría de
código hecha por los desarrolladores de los proyectos originales y de otros
proyectos como <url name="Proyecto de auditoría de seguridad del kernel de Linux" id="http://kernel-audit.sourceforge.net/">, 
o el <url name="Proyecto de auditoría de seguridad de Linux" id="http://www.lsap.org/">.

<p>De todas formas un desarrollador Debian podría distribuir un troyano en
un paquete y no habría forma posible de comprobarlo. Incluso si se introduce
en una rama de Debian, podría ser imposible cubrir todas las posibles
situaciones en las que un troyano puede ejecutarse. Esa es la razón por la
que Debian tiene una cláusula de <em>"no garantías"</em> en su licencia.

<p>Aun así, los usuarios de Debian tiene confianza en el hecho de que el
código estable tiene una gran audiencia	y la mayoría de los problemas pueden
descubrirse con el uso. Instalar programas no probados no es recomendable en
un sistema crítico (si no puede hacer la auditoría de código necesaria). En
cualquier caso, si se introduce una vulnerabilidad de seguridad en una
distribución, el proceso que se usa para incluir paquetes (usando firma
digital) asegura que el problema puede seguirse hasta el desarrollador. El
proyecto Debian no se ha tomado a la ligera este tema.

<sect1>¿Por qué algunos archivos de registro/configuración tienen permiso de
lectura para todos? ¿No es eso inseguro?

<p>Por supuesto que puede cambiar los permisos predeterminados de Debian en
sus sistemas. La política actual acerca de los archivos de registro y
configuración es que tienen permisos de lectura para todos <em>salvo</em>
que tengan información sensible.

<p>Sea cuidadoso si hace cambios porque:

<list>

<item>Los procesos pueden no ser capaces de escribir en los archivos de
registro si restringe los permisos.

<item>Algunas aplicaciones pueden no funcionar si no pueden leer el archivo
de configuración. Por ejemplo, si elimina los permisos de lectura para todos
de <file>/etc/samba/smb.conf</file>, el programa <prgn>smbclient</prgn> no
funcionará cuando lo ejecute un usuario normal.

</list>

<p>ARREGLAME: Comprobar si esto está escrito en la Política. Algunos
paquetes (p.e. demonios ftp) parece que usan permisos diferentes.


<sect1>¿Por qué /root/ (o usuarioX) tiene permisos 755?

<p>La mismas preguntas, de hecho, se aplican a cualquier otro usuario. Como
la instalación de Debian no pone <em>ningún</em> archivo en ese directorio,
no hay información sensible que proteger. Si piensa que esos permisos son
demasiado permisivos para su sistema, considere en asegurarlos a 750. Para
los usuarios lea <ref id="limit-user-perm">.

<p>Este <url
id="http://lists.debian.org/debian-devel/2000/debian-devel-200011/msg00783.html"
name= "hilo de discusión"> de la lista de seguridad de Debian tiene más
información acerca de ésto.

<sect1>¡Tras instalar un grsec/cortafuegos he empezado a recibir muchos
mensajes de consola! ¿Cómo puedo eliminarlos?

<p>Si está recibiendo mensajes de consola y tiene configurado
<file>/etc/syslog.conf</file> para enviarlos a archivos o a un TTY especial,
puede estar viendo los mensajes que se envían directamente a la consola.

<p>El nivel de log predeterminado de la consola para cualquier núcleo es 7,
lo que significa que cualquier mensaje con una prioridad menor aparecerá en
la consola. Habitualmente, los cortafuegos (la regla LOG) y algunas otras
herramientas de seguridad usan prioridades menores, que por lo tanto, se
envían directamente a la consola.

<p>Para reducir los mensajes que se envían a la consola puede usar
la opción <prgn>dmesg</prgn> (<tt>-n</tt>, mire <manref section="8"
name="dmesg">), que examina y <em>controla</em> el anillo del buffer del
kernel. Para solucionar esto en el próximo inicio, cambie
<file>/etc/init.d/klogd</file> de:

<example>
  KLOGD=""
</example>

<p>a:

<example>
  KLOGD="-c 4"
</example>

<p>Use un número menor en <tt>-c</tt> si aun así los ve. Puede encontrar una
descripción de los diferentes niveles de log en <file>/usr/include/sys/syslog.h</file>:

<example>
  #define LOG_EMERG       0       /* sistema no usable */
  #define LOG_ALERT       1       /* se debe actuar inmediatamente */
  #define LOG_CRIT        2       /* condiciones críticas */
  #define LOG_ERR         3       /* condición de error */
  #define LOG_WARNING     4       /* condición de aviso */
  #define LOG_NOTICE      5       /* condiciones normales pero significativas */
  #define LOG_INFO        6       /* informativo */
  #define LOG_DEBUG       7       /* mensajes de depuración */
</example>

<sect1>Usuarios y grupos del sistema operativo

<sect2>¿Son necesarios todos los usuarios del sistema?

<p>Si y no. Debian viene con algunos usuarios predeterminados (id de usuario
(UID) &lt; 99 como está descrito en la <url name="Política de Debian"
id="http://www.debian.org/doc/debian-policy/"> o <file>/usr/share/doc/base-passwd/README</file>)
para facilitar la instalación de algunos servicios que requieren que se
ejecute bajo el usuario/UID adecuado. Si no tiene intención de instalar
nuevos servicios puede eliminar los usuarios que no tengan ningún archivo
en su sistema y no ejecuten ningún servicio tranquilamente. En cualquier
caso, el comportamiento predeterminado es que los UIDs del 0 al 99 se
reservan en Debian y los UIDs del 100 al 999 se crean por los paquetes
cuando se instalan (y se eliminan cuando el paquete se elimina
completamente).

<p>Para encontrar fácilmente los usuarios que no tienen ningún archivo
ejecute el comando (como root ya que un usuario común puede no tener
permisos para ir por algunos directorios sensibles):

<!-- Tómese la libertad de hacer más seguro este script ... >:^) // era -->
<example>
  cut -f 1 -d : /etc/passwd | \
  while read i; do find / -user "$i" | grep -q . && echo "$i"; done
</example>

<p>Estos usuarios son del paquete <package>base-passwd</package>. Mire en su
documentación si quiere más información acerca de cómo se gestionan estos
usuarios en Debian. La lista de usuarios predeterminados (con su grupo
correspondiente) es la siguiente:
<list>

<item>root: Root es (típicamente) el super usuario.

<item>daemon: Algunos demonios sin privilegios que necesitan escribir en
archivos del del disco se ejecutan como daemon.daemon (p.e., <prgn>portmap</prgn>,
<prgn>atd</prgn>, y probablemente otros). Los demonios que no necesitan
tener ningún archivo corren como nobody.nogroup, algunos otros demonios más
complejos se ejecutan con usuarios dedicados. El usuario del demonio es
también útil para demonios instalados localmente.

<item>bin: mantenido por razones históricas.

<item>sys: igual que bin. Aun así, /dev/vcs* y
<file>/var/spool/cups</file> son del usuario y grupo sys.

<item>sync: La shell del usuario sync es <file>/bin/sync</file>. Aun así si su
contraseña se pone fácil de adivinar (como ""), cualquiera puede sincronizar
el sistema en la consola incluso si no tiene cuenta.

<item>games: Muchos juegos tienen SETGID de manera que puedan escribir sus
propios archivos de puntuación más alta. Se explica en la política.

<item>man: El programa man (a veces) se ejecuta con el usuario man, para que
pueda escribir páginas en <file>/var/cache/man</file>.

<item>lp: Usado por los demonios de impresión.

<item>mail: los buzones de <file>/var/mail</file> son del grupo mail, como
se explica en la política. El usuario y grupo se usan también con otros propósitos
por varios MTAs.

<item>news: Varios servidores de noticias y programas asociados (como <prgn>suck</prgn>) 
usan el usuario y grupo news de varias formas. Los archivos en la cola news
son habitualmente del usuario y grupo news. Programas como <prgn>inews</prgn> 
que pueden usarse para enviar noticias son típicamente noticias con SETGID.

<item>uucp: El usuario y grupo uucp es usado por el subsistema UUCP. Tiene
su propia cola y archivos de configuración. Los usuarios en el grupo uucp
pueden ejecutar uucico.

<item>proxy: Como daemon, este usuario y grupo lo usan algunos demonios
(especialmente demonios de proxy) que no tienen usuarios dedicados y
necesitan tener archivos. Por ejemplo el grupo proxy lo usan
<prgn>pdnsd</prgn>, y <prgn>squid</prgn>.

<item>majordom: <prgn>Majordomo</prgn> tiene un UID estático en sistemas
Debian por razones históricas. No se instala en sistemas nuevos.

<item>postgres: Las bases de datos de <prgn>Postgresql</prgn> son de este
usuario y grupo. Todos los archvos de  <file>/var/lib/postgresql</file> son
de este usuario para reforzar la seguridad.

<item>www-data: Algunos servidores web corren como www-data. El contenido
*no* debe ser de este usuario o un servidor comprometido podría reescribir
el web. Los datos escritos por el servidor web incluyendo los archivos de
registro, deben ser de www-data.

<item>backup: Muchas funciones de copia/restauración pueden ser delegadas a
alguien sin privilegios completos de root.

<item>operator: Operator es históricamente (y prácticamente) el único
'usuario' que puede acceder al sistema de forma remota y no depende de
NIS/NFS.

<item>list: Los archivos de listas de correo y sus datos son de este usuario
y grupo. Algunos programas de listas de correo pueden ejecutarse también con
este usuario.

<item>irc: Usado por demonios de IRC. Un usuario determinado se necesita
únicamente por un error de <prgn>ircd</prgn>, que hace SETUID()s de si mismo
a un UID determinado en el arranque.

<item>gnats.

<item>nobody, nogroup: Los demonios que no necesitan ningún archivo se
ejecutan con el usuario nobody y grupo nogroup. Así que no debería existir
ningún archivo de este usuario o grupo en el sistema.
</list>

<p>Otros grupos que no tienen un usuario asociado:

<list>

<item>adm: El grupo adm se usa para tareas de monitorización del sistema.
Los miembros de este grupo pueden leer muchos de los archivos de <file>/var/log</file>, 
y pueden usar xconsole. Históricamente <file>/var/log</file> eran
<file>/usr/adm</file> (y más tarde <file>/var/adm</file>), del mismo grupo.

<item>tty: Los dispositivos TTY  son de este grupo. Lo usan
write y wall para escribir en los TTYs de otras personas.

<item>disk: Acceso directo a disco. Mayormente equivalente al acceso de
root.

<item>kmem: /dev/kmem y archivos similares son accesibles en modo lectura
por este grupo. Esto es, mayormente, una reliquia de BSD pero algunos
programas siguen necesitando acceso directo de lectura a la memoria del sistema
que se hace con SETGID kmem.

<item>dialout: Acceso directo y completo a los puertos serie. Los miembros
de este grupo pueden reconfigurar el módem, llamar a cualquier parte, etc.

<item>dip: El nombre del grupo viene de "Dial-up IP", y ser de ese grupo le
permite usar herramientas como <prgn>ppp</prgn>, <prgn>dip</prgn>,
<prgn>wvdial</prgn>, etc. para comenzar una conexión. La mayoría de los
usuarios de este grupo no pueden configurar el módem, pero pueden ejecutar
programas que lo usa.

<item>fax: Permite a los miembros usar el programa de fax para enviar /
recibir faxes.

<item>voice: Voicemail, usado por sistemas que usan módems como
contestadores.

<item>cdrom: Este grupo puede ser usado localmente para dar acceso al CDROM
a los usuarios.

<item>floppy: Este grupo puede ser usado localmente para dar acceso a la
disquetera a los usuarios.

<item>tape: Este grupo puede ser usado localmente para dar acceso a la
cinta a los usuarios.

<item>sudo: Los miembros de este grupo no necesitan teclear la contraseña
cuando usen el programa <prgn>sudo</prgn>. Mire
<file>/usr/share/doc/sudo/OPTIONS</file>.

<item>audio: Este grupo puede ser usado localmente para dar acceso a los
usuarios al dispositivo de audio.

<item>src: Este grupo tiene el código fuente incluyendo los archivos de
<file>/usr/src</file>. Puede usarse para darle al usuario la capacidad de
gestionar el sistema de código fuente.

<item>shadow: <file>/etc/shadow</file> es de lectura para este grupo.
Algunos programas que necesitan acceso a este  archivo tienen SETGID shadow.

<item>utmp: Este grupo puede escribir en <file>/var/run/utmp</file> y
archivos similares. Los programas que necesitan escribir ahí tienen SETGID utmp.

<item>video: Este grupo puede ser usado para dar a los usuarios acceso al
dispositivo de video.

<item>staff: Permite a los usuarios añadir modificaciones locales al sistema
(<file>/usr/local</file>, <file>/home</file>) sin necesidad de tener
privilegios de root. Comparar con el grupo "adm", que está más relacionado
con monitorización/seguridad.

<item>users: Mientras los sistemas Debian usan el sistema de usuarios
privados de forma predeterminada (cada usuario tiene su propio grupo), algunos
prefieren un sistema de grupos más tradicional, en el que cada usuario es
miembro de este grupo.

</list>

<sect2>¿Qué diferencia hay entre el grupo adm y el staff?

<p>El grupo 'adm' son habitualmente administradores y los permisos de este
grupo permiten leer los archivos de registro son tener que usar
<prgn>su</prgn>. El grupo 'staff' es útil en soporte, administradores junior
porque les permite trabajar en  <file>/usr/local</file> y crear directorios
en <file>/home</file>.

<sect1>¿Por qué se crea un nuevo grupo cuando añado un nuevo usuario? (O ¿Por
qué Debian crea un grupo para cada usuario?)

<p>El comportamiento predeterminado de Debian consiste en que cada usuario
tiene su grupo privado. El esquema tradicional de UN*X asigna todos los
usuarios al grupo <em>users</em>. Los grupos adicionales se creaban y se
usaban para restringir el acceso a los archivos compartidos asociados a
directorios de proyectos diferentes. La gestión de archivos era difícil
cuando un usuario trabajaba en múltiples proyectos porque cuando alguien
creaba un archivo, este se asociaba al grupo principal al que perteneciera
(ej. 'users').

<p>El esquema de Debian soluciona este problema asignando a cada usuario su
propio grupo; así que con la máscara adecuada (0002) y el bit SETGID
habilitado en un directorio dado, el grupo correcto se asigna adecuadamente
para los archivos creados en ese directorio. Eso hace más fácil para la
gente que trabaja en múltiples proyectos porque no tienen que cambiar grupos
o umasks cuando trabajan o comparten archivos.

<p>Puede, como siempre, cambiar este comportamiento modificando
<file>/etc/adduser.conf</file>. Cambiar la variable <em>USERGROUPS</em> a 'no',
de tal forma que no se cree un grupo cuando se cree un usuario. También
poner <em>USERS_GID</em> al GID del grupo de usuarios al que pertenecerán
los usuarios.


<sect1>Preguntas acerca de servicios y accesos abiertos

<sect2>¿Por qué están todos los servicios activados tras la instalación?

<p>Es una aproximación al problema de, por una parte la seguridad y por otra
la usabilidad. 
Al contrario que como OpenBSD, deshabilita los servicios a no ser que los
habilite el administrador, Debian GNU/Linux habilitará todos los servicios
instalados a no ser que se desactiven (mire en <ref id="disableserv"> para
ver más información). Después de todo usted instaló el servicio ¿no es así?

<p>Han habido muchas discusiones con las listas del correo en Debian
(las dos, Debian-devel y debian-security) acerca de cual sería una mejor
aproximación en la instalación predeterminada. Sin embargo, mientras se
escribía este documento (marzo 2002) no se ha alcanzado un consenso.

<sect2>¿Puedo eliminar inetd?

<p><prgn>Inetd</prgn> no es fácil de eliminar porque 
<package>netbase</package> depende del paquete que lo provee
(<package>netkit-inetd</package>). 
Si quiere deshabilitarlo (mire <ref id="disableserv"> o elimine el paquete
usando el paquete <package>equivs</package>).

<sect2>¿Por qué tengo abierto el puerto 111?

<p>El puerto 111 es el portmapper de sunrpc y se instala de manera
predeterminada como parte del sistema base de Debian porque no se sabe
cuando un programa de usuario necesitará usar RPC para funcionar
correctamente. En cualquier caso, se usa mayormente en NFS. Si no lo
necesita, elimínelo tal y como se explica en <ref id="rpc">.

<sect2>¿Cual es el uso de <prgn>identd</prgn> (puerto 113)?

<p>El servicio identd es un servicio de autenticación que identifica al
usuario de una conexión TCP/IP concreta al servidor remoto que acepta la
conexión. Típicamente cuando un usuario se conecta a un servidor remoto, 
<prgn>inetd</prgn> del servidor remoto le manda de vuelta una consulta al
puerto 113 para encontrar la información del usuario. Esto se usa
habitualmente en servidores de correo, FTP e IRC, también puede usarse para
conocer qué usuarios de sus sistema local están atacando un sistema remoto.

<p>Han habido discusiones extensas acerca de la seguridad de
<prgn>identd</prgn> (mire los <url
id="http://lists.debian.org/debian-security/2001/debian-security-200108/msg00297.html"
name="archivos de las listas de correo">). 
Por lo general, <prgn>identd</prgn> es más útil en un sistema multi-usuario
que en una estación de trabajo de un sólo usuario. Si no tiene por qué
usarlo, deshabilítelo de tal forma que no deje un servicio abierto para el
resto del mundo. Si decide cerrar con el cortafuegos el puerto identd,
<em>por favor</em> hágalo usando una política de rechazo (reject) en vez de
ignorar (drop) los paquetes, de otra forma la conexión al servidor que usa
<prgn>identd</prgn> tendrá que expirar y se colgará hasta que lo haga (mire
<url id="http://logi.cc/linux/reject_or_deny.php3" name="rechazar o ignorar">).

<!-- revisado por Jaime Robles hasta aquí (sólo el FAQ)-->


<sect2>¿Yo he chequeado y tengo el siguiente acceso (xyz) y puedo
cerrarlo?

<p>Por supuesto que puede, usted puede ir dejando los portales
abiertos en su sitio de política, fortaleciendo los servicios públicos
disponibles para otros sistemas. Revise si estos son abiertos por
inetd (observe <ref id="inetd">) o por otros paquetes instalados y
tómelo en medidas apropiadas (configure inetd, remueva el paquete,
anule el funcionamiento en bootup...).

<sect2>¿He removido los servicios desde <file>/etc/services</file>,estoy en lo 
cierto?
<p><em>No</em>, <file>/etc/services</file> solo suministra un mapping
desde un nombre virtual a un acceso numérico dado, removiendo nombres
desde (usualmente) donde no haya que impedir servicios al ser
iniciados. Algunos demonios no podrán funcionar si
<file>/etc/services</file> ha sido modificado, pero ésta no es la norma y
no es la vía recomendable para hacerlo, observe <ref
id="disableserv">.

<sect1>¡¡He perdido mi password y no puedo tener acceso al sistema!!

<p>Usted necesita seguir unos pasos para recuperar su password y este
depende desi usted ha aplicado o no el procedimiento para limitar el
acceso a Lilo y BIOS.

<p>Si usted ha limitado a ambos. Necesita desactivar las
características de BIOS (hágalo solo desde el disco duro) antes de
proceder, además, si usted olvida el password de BIOS, tendrá que
abrir el sistema y eliminar la batería BIOS manualmente.

<p>Si usted tiene un bootup en la unidad de cd-rom o en un disco
habilitado, usted puede: <list>

<item>inicie desde un disco de rescate e inicie el kernel.

<item>desplácese hasta la consola virtual (Alt+F2)

<item>monte el disco duro, en donde está su /root

<item>edite (El disco de rescate Debian 2.2, viene con
<prgn>ae</prgn>, Debian 3.0 viene con <prgn>nano-tiny</prgn>, el cual
es similar a <prgn>vi</prgn>) <file>/etc/shadow</file> y modifique la
línea:

<example>
root:asdfjl290341274075:XXXX:X:XXXX:X::: (X=cualquier número)
</example>

<p>para:

<example>
root::XXXX:X:XXXX:X:::
</example>

</list>

<p>Este removerá la clave del administrador. Usted puede iniciar el
sistema y entrar como root desde el login: entre como root (con una
clave vacía). Esto funcionará, a menos que usted haya configurado el
sistema más firmemente, por ejemplo, si usted ha permitido usuarios
con claves nulas y el administrador puede entrar puede entrar al
sistema desde la consola. 

<p>Si usted ha introducido también estas características, usted
necesitará entrar en el modo single. LILO no necesita ser limitado si
usted ha hecho esto también, necesitará reiniciar <prgn>lilo</prgn>
justo después que el administrador lo reajusta. Esto es totalmente
difícil desde que su <file>/etc/lilo.conf</file> necesite ser atrapado
por tener un / sistema de archivo, que es un disco de la memoria ram y
no del verdadero disco duro.

<p>Una vez que LILO no sea restringido, usted puede:

<list>

<item>Presionar Alt, shift o la tecla Control, antes que el sistema
BIOS finalice, usted debería obtener la entrada LILO.

<item>Escribir "Linux single", linux init=/bin/sh ó como "linux 1" en
la entrada.

<item>usted debería obtener una entrada a interfaz de comando en el
modo singleuser (este solicitará la clave, aunque usted ya la
conozca).

<item>vuelva a montar read/write the/ partition 
<example>
mount -o remount,rw /
</example>

<item>Cambiar la clave del superusuario con <prgn>passwd</prgn> (desde
que usted sea el superusuario, no se le solicitará la clave
anterior).

</list>

<sect>¡Mi sistema es vulnerable!

<sect1>He sufrido una interrupción, ¿qué debo hacer?

<p>Lea este documento y tome las medidas necesarias descritas aquí.
Si necesita asistencia, usted puede usar
debian-security@lists.debian.org para solicitar consejos sobre cómo
recuperar /parche y arreglar su sistema.

<sect1>¿Cómo puedo encontrar el origen de un ataque?

<p>Observando las bitácoras (si ellas no han sido cambiadas), usando
sistemas de detección de intrusión (observe <ref
id="intrusion-detect">), <prgn>traceroute</prgn>, <prgn>whois</prgn> y
herramientas similares (incluyendo análisis forense), usted puede
encontrar un ataque a la fuente. La manera como usted debería
reaccionar frente a esta información depende, solamente del uso
apropiado que usted le de a la política de seguridad y que
<em>usted</em> considere lo que es un ataque. ¿Es un scanner remoto un
ataque? ¿Un ataque es una prueba de vulnerabilidad?

<sect1>Cualquier programa en Debian es vulnerable ¿Qué debo hacer?

<p>Tómese un momento. Primero, observe si la vulnerabilidad ha sido
anunciada en listas de correo de seguridad pública (como Bugtraq) u
otros foros, el equipo de seguridad Debian permanece actualizado con
estas listas, de manera que ellos ya pueden estar enterados del
problema. No ejecute ningunas acciones remotas si usted ya observa
algún anuncio en <url id="http://security.debian.org">.

<p>Si no observa nada de lo anteriormente nombrado, por favor envíe un
correo a los paquetes afectados, XXXtan bién como una descripción de la
vulnerabilidad, tan detallada como sea posible (demuestre si el
concepto de código también es correcto) para security@debian.org , el
cual lo accederá a un análisis con el equipo de seguridad.

<sect1>El número de versión para un paquete indica que todavía estoy
corriendo una versión vulnerable

<p>En lugar de actualizar una nueva descarga, podemos fijar la
seguridad en backport, a la versión que fue enviada en la descarga
establecida. La razón de esto es asegurarnos que una descarga cambie
posiblemente un poco algunas cosas o que se interrumpan
repentinamente, como un resultado de la seguridad fija. Usted puede
chequear si está corriendo una versión segura de un paquete,
observando el paquete changelog o comparando su número de versión
exacta (versión upstream -slash- descargar debian)el número de la
versión exacta con la versión indicada en el Asesor de seguridad
Debian. 

<sect1>Encontré usuarios haciendo 'su' en mis bitácoras
<p>Usted puede encontrar líneas en sus bitácoras como:
<example>
 Apr 1 09:25:01 server su[30315]: + ??? root-nobody
 Apr 1 09:25:01 server PAM_unix[30315]: (su) session opened for user nobody by 
(uid=0)</example>

<p>No se preocupe tanto, revise si esto se debe a un trabajo en
funcionamiento a través de cron (usualmente con
<file>/etc/cron.daily/find</file> o <prgn>logrotate</prgn>):

<example>
$ grep 25 /etc/crontab
25 6 * * * root test -e /usr/sbin/anacron || run-parts --report
/etc/cron.daily
$ grep nobody /etc/cron.daily/*
find:cd / && updatedb --localuser=nobody 2>/dev/null
</example>


<sect1>Software específico


<sect2>Proftpd es vulnerable a un ataque en el servicio Denial.

<p>Agregue <tt>DenyFilter \*.*/</tt> a su archivo de configuración,
para más información observe <url
id="http://www.proftpd.org/critbugs.html">.


<sect>Preguntas con respecto al equipo de seguridad Debian

<!-- ARREGLAME: update from web page -->

<sect1>Lo que es una Advertencia de Seguridad Debian (DSA).

<p>Ésta es una información enviada por el equipo de seguridad Debian
(observe en la parte de abajo), informando acerca de un ajuste de una
seguridad relacionada a la vulnerabilidad disponible para el sistema
operativo Debian. Los ASDs firmados, son enviados a las listas de
correo público y anunciado en la página web de Debian (tanto en la
página frontal como en el área de seguridad <url
id="http://www.debian.org/security/" name="security area">).

<p>Las DSA incluyen información acerca de el(los) paquete(s)
afectado(s), el error descubierto y donde se pueden obtener los
paquetes actualizados (y sus sumas MD5).


<sect1>La firma sobre de la advertencia de Debian no es verificada 
correctamente.
<p>Probablemente este sea un problema suyo. La lista de anuncios de
seguridad de Debian tiene un filtro que solamente permite el envío de
mensajes con una firma correcta de uno de los miembros del equipo de
seguridad.

<p>Probablemente alguna pieza de los programas de correo de su parte,
hace cambios menores en los mensajes rompiendo la firma. Asegúrese
que sus programas no no hacen ninguna codificación o decodificación
MIME, o haya conversión de tabuladores a espacio.

<p> Un posible culpable es fetchmail (con la codificación MIME
habilitada) y formail (de procmail 3.14 únicamente). 
 

<sect1>Como se tratan los incidentes de seguridad en Debian?

<p>Una vez el equipo de seguridad recibe una notificación de un
incidente , uno o mas miembros lo revisan y consideran a Debian
/estable vulnerable o no. Si nuestro sistema es vulnerable este es
trabajado sobre el ajuste del problema. El paquete se mantiene en
buen contacto siempre y cuando no haya contacto ahora con la seguridad
del equipo. Finalmente el ajuste es probado y los nuevos paquetes son
preparados, los cuales entonces son compilados sobre toda la
arquitectura estable y son transferidos de un computador, de la
perifería al centro, después de que toda esta labor se hace el asesor
de la seguridad (DAS) es enviado a los correos de lista pública.


<sect1>¿Cuánto tiempo tomará Debian para ajustar la vulnerabilidad?

<p>Analizando el tiempo que tarda la seguridad del equipo Debian , al
enviar un acesor y producir paquetes ajustados es mínimo. Una vez es
conocida la vulnerabilidad, ésta se ajusta a la distribución estable
rápidamete.

<p>Un reporte publicado <url
id="http://lists.debian.org/debian-security/2001/debian-security-200112/msg00257
.html"name="published in the debian-security mailinglist"> mostró que en el
año 2001, este tomó el equipo de seguridade Debian, un termino medio
de 35 días para ajustar la seguridad vulnerable relacionada, Sin
embargo, sobre el 50% de las vulnerabilidades fueron ajustados en 10
días y el 15% fueron ajustados <em>algunos días</em>los avisos que
fueron registrados.

<p>Sin embargo, cuando se formula está pregunta la gente se hace estas
preguntas trata de no olvidar que: 

<list>

<item>DSAS no es enviada hasta que:

<list>

<item>los paquetes esten disponibles para <em>todas</em> las
arquitecturas soportadas por Debian (este toma algun tiempo para
paquetes, que son parte del sistema central considerando
especialmente, el numero de la arquitectura soportadas en las
publicaciones estables.

<item>Nuevos paquetes evaluados completamente para asegurar que las
imperfecciones no sean introducidas.

</list>

<item>El paquete sería obtenido antes de que el DSA sea enviado (a
lafila de entrada, o de espejos).

<item>Debian es un proyecto conformado por voluntarios.

<item>Hay una claúsula "no hay garantías" que son parte de la licensia
con la cual debian es otorgado.

</list>

<sect>¿Cómo es manejada la seguridad para <tt>prueba</tt> e
<tt>inestable</tt>? <p>la respuesta corta es:esto no es. La prueba y
lo inestable, son rápidamente movidos objetivamente, y el equipo de
seguridad no tiene los medios apropiados que necesita para
soportarlos, si usted quiere tener un servicio seguro (y estable),
usted está motivado a trabajar con lo estable. 

<p><em>Sin embargo</em>, como un hecho real lo inestable, usualmente
es arreglado rápidamente,para la seguridad de datos actualizada.
Algunas veces estos son usualmente obstenidos en versiones
rápidas (otra versiones posteriores que se necesitan usualmente son
backported).

<sect1>¿Por qué no hay réplicas oficiales de security.debian.org?
<p>A: el objetivo de seguridad.debian.org, es permitir actualizaciones
de seguridad de la forma más rápida y fácil posible. Las réplicas
añadirían complejidad extra innecesaria y pueden la
causar frustraciones si no están actualizados.


<!-- ARREGLAME:
Q: I've seen DSA 100 and DSA 102, now where is DSA 101?
A: Several vendors (mostly of GNU/Linux, but also of BSD
 deriviates) coordinate security advisories for some incidents and
 agree to a particular timeline so that all vendors are able to

 advisory could be released, and hence temporarily leaving out one or
 more advisories by number.
-->

<sect1>¿Cómo puedo buscar el equipo de seguridad?

<p>A: La información de seguridad puede ser enviada a la seguridad
Debian org, la cual es leída por todo el operador Debian. Si usted
tiene información sensitiva , por favor use el equipo@ de seguridad
Debian org, que solamente los miembros de seguridad del equipo pueden
leer. Si desea correo puede ser codificado con la seguridad Debian
contacte la clave (ID 363CCD95)

<sect1>¿Qué diferencia hay entre seguridad @ Debian org y la lista de
seguridad Debian org?

<p>Cuando usted envia mensajes a la seguridad @Debian org y Debian.
Estos son enviados a los reveladores de la lista de correo
(Debian-privada) todos estos están suscritos a los reveladores Debian,
al enviar esta lista son guardados privadamente ( i.e no son
archivados en el web publico).Debian security@lists.debian.org es una
lista de correos pública, a bierta para quien quiera inscribirse, y
hay archivos disponibles en la página web.


<sect1>¿Cómo puedo contribuir con el equipo de seguridad Debian?
<p>
<list>

<item>Para contribuir a este documento ajustar ARREGLAME,proporcionando
nuevos contenidos. La documentacón es importante y reduce la sobre
carga de responder asuntos comúnes. La traduccón de este documento a
otras lenguases de gran utilidad.

<item>Por las aplicaciones de empacar que son útiles para proporcionar
/revisando la seguridad en el /usando un sistema Debian . Si usted no
es un revelador, archive un <url name="WNPP bug"
id="http://www.debian.org/devel/wnpp/"> y solicite al sesoftware lo
que usted considera útil y no es comúnmente proporcionado.

<item>Auditar aplicaciones en Debian o ayudar a resolver la seguridad
de errores de programación y reportar asuntos a securiti@
debian.org.el proyecto de otros trabajos como <url name="Linux Kernel
Security Audit Project" id="http://kernel-audit.sourceforge.net/"> or
the <url name="Linux Security-Audit Project"
id="http://www.lsap.org/"> incrementa la seguridad de Dbian GNU/linux
desde contribuciones , que eventualmente ayudarán también.

</list>

<p>En algunos casos por favor, revise cada problema antes de
reportarlo para la security@ debian org. Si usted es capaz de
proporcionar parches que agilisen el proceso sabiamente. No
simplemente enviar mails bugtraq, desde que ellos todavía sean
recibdos. Sin embargo es una buena idea proporcionar información
adicional.

<sect1>¿Quiénes componen el equipo de seguridad debian?

<p>Normalmente el equipo de seguridad Debian consta de cinco miembros
y dos secretarios. El equipo de seguridad designa las personas para
unirlas al equipo.

<sect1>¿La seguridad debian del equipo revisa los nuevos paquetes en
debian?

<p>No, la seguridad de los equipos Debian no revisa cada paquete nuevo
ni hay un chequeo automático (lintian) para detectar defectos en los
paquetes nuevos, desde esas revisiones es imposible detectarlos
automáticamente . Sin embargo mantenerlos es completamente
responsabilidad de el software que es introducido en Debian y no en
software, y no un software que nisiquiera es asiganado por un
revelador autorizado.Ellos estan encargados de analizar el software y
mantenerlo en la seguridad de aviso.

<sect1>¿Yo tengo una antigua versión sobre Debian , está soportada la 
seguridad?
<p>Infortunadamente no , la seguridad del equipo Debian no puede
manejar la descarga estable de éste, (también inestable) y otras
antiguas descargas . Sin embargo usted puede esperar la seguridad de
la información actualizada por un periodo límite de tiempo justo , a
un despues de que la distribución del nuevo Debian sea descargada.

<appendix>El proceso de fortalecimiento es manejado paso a paso  <!--
me tomé la libertad de cambiar de lista de chequeo a un proceso "paso
a paso" porque yo habia adicionado un tipo de checklist diferente. El
renombramiento es más para evitar una confución que otra cosa// era
-->

<p>Un procedimiento siempre es útil, si le permite ver el proceso
completo de fortalecimiento y le permita tomar desiciones. Una
posibles aproximación para este procedimiento en Debian 2.2.GNU/linux
es mostrado abajo. Este es un proceso post de instalación para una
revición de la lista de medidas a ser tomadas, paso a paso, durante la
configuración. vea <ref id="checklist">.también este procedimiento
está (por el momento) más orientado hacia el fortalecimiento de
servicios del sistema de redes.

<list>

<item>Haga una instalación del sistema (considere la información en
este howto acerca de las particiones). Después que la instalación de
base sea instalada, entre a la instalación por defecto , no seleccione
paquetes de tareas, si no seleccione shadow passwords.

<item>Vaya através de <prgn>dselect</prgn> y remueva lo que no es
necesario, si no selecciono paquetes antesv de ser (I)instalados. Deje
la menor cantidad de programas necesarios en el servidor.

<item>Actualice todo el software desde los utimos paquetes disponibles
en security.debian.org como se expuso previamente en <ref
id="update">.

<item>implemente las sugerencias presentadas en este manual ,
considerando las cuotas del usuario, definiciones de login y lilo.

<item>Para hacer un fortalecimiento del servicio haga una lista de
servicios activos actualmente en el sistema.

<example>
$ ps -aux
$ netstat -pn -l -A inet 
# /usr/sbin/lsof -i | grep LISTEN
</example>

Necesitará instalar <package>lsof-2.2</package> para que el tercer
comando funcione (corralo como root). Debería ser consiente que
<package>lsof</package> puede transladar la palabra LISTEN a su
configuraciones de los locales.

<item>Para eliminar los servicios innecesario, primero determine como
comienza y de que paquete proviene. Puede hacer esto fácil revisando
el programa que escucha en ese puerto, el siguiente ejemplo le dice
como hacer uso de estas herramientas y <prgn>dpkg</prgn>

<example>
#!/bin/sh
# ARREGLAME: this is quick and dirty; replace with a more robust script snippet
for i in `sudo lsof -i | grep LISTEN | cut -d " " -f 1 |sort -u` ; do
 pack=`dpkg -S $i |grep bin |cut -f 1 -d : | uniq`
 echo "Service $i is installed by $pack";
 init=`dpkg -L $pack |grep init.d/ `
 if [ ! -z "$init" ]; then
 echo "and is run by $init"
 fi
done
</example>

<item>Una vez que usted encuentre servicios no deseados, remueva el
paquete (con <prgn>dpkg --purge</prgn>) o, si es útil, pero no
debería estar habilitado al inicio, use <prgn>update-rc.d</prgn> (vea
<ref id="disableserv">) para removerlo del sistema de inicio.

<item>Para los servicios inetd (lanzado por el super demonio)usted
podría revisar los servicios habilitados, por ejemplo con:

<example>
$ grep -v "^#" /etc/inetd.conf | sort -u
</example>

e incapacitar aquellos que no sean necesarios, comentando la línea que
los incluye, removiendo los paquetes o usando
<prgn>update-inetd</prgn>

<item>Si se tienen servicios de cubierta (usando estos
<prgn>/usr/sbin/tcpd</prgn>) revise que los
<file>/etc/hosts.allow</file> y <file>/etc/hosts.deny</file> estén
configurados acorde a su política de servicios.

<item>Si es posible y dependiendo de cada servicio usted puede tener
un límite de servicios, si desea limitar cuando se usa más de una
interfaz externa para escuchar solamente cada una de ellas. Por
ejemplo, si usted desea el acceso interno a FTP, haga que el demonio
escuche en su interfaz de administración solamente, no sobre todas las
interfaces (i.e, 0.0.0.0:21).

<item>Reinicie la máquina, o cámbiela para entrar a single user y
vuelva a multiusuario con

<example>
$ init 1
(....)
$ init 2
</example>

<item>Revise los servicios disponibles actualmente, y si es necesario
repita estos pasos de nuevo.

<item>Instale, ahora los servicios necesarios, si usted todavia no lo
ha hecho, y configurelos apropiadamente.

<item>Revise que usuarios son utilizados para correr los servicios
deisponibles, por ejemplo con:

<example>
$ for i in `/usr/sbin/lsof -i |grep LISTEN |cut -d " " -f 1 |sort -u`;
do user=`ps -ef |grep $i |grep -v grep |cut -f 1 -d " "` ; echo
"Service $i is running as user $user"; done
</example>

y considere cambiar estos servicios para un usuario o grupo dado, que
pueden también ser cambiados de directorio raíz, para incrementar la
seguridad. Puede hacer esto cambiando el script
<file>/etc/init.d</file> donde el servicio se activa. La mayoría de
servicios en Debian usan <prgn>start-stop-daemon</prgn> de tal forma
que puede usar la opción --change-uid y la opción --chroot para
configurar estos servicios. Cambiar el directorio raíz de los
servicios está más allá del alcance de este documento, pero ofrecemos
una palabra de advertencia: Usted podría necesitar poner todos los
archivos instalados por el servicio de paquetes usando dpkg -L y los
paquetes de los que dependen en el ambiente de cambio de directorio
raíz.

<item>Repita los pasos anteriores para revisar que los solamente los
servicios deseados corran, y que lo hagan como el usuario o grupo
desea.

<item>Pruebe la instalación de servicios para saber si trabajan como
se esperaba.

<item>Compruebe el sistema usando un revisor de aseguramiento de
vulnerabilidades (como <package>nessus</package>) para determinar las
vulnerabilidades del sistema (configuraciones erróneas, servicios
viejos o innecesarios)

<item>Instale medidas de instrusión por red y medidas de intrusión por
servidor (como <package>snort</package> y
<package>logsentry</package>).

<item>Repita el paso del revisor de red y verifique que los sistemas
de detección de intrusiónd trabajan correctamente.

</list>
para los verdaderos paranoicos, considere también lo siguiente: 
<list>

<item>Agregar capacidades de cortafuegos al sistema, aceptando
conexiones entrantes solamente para los servicios ofrecidos y limite
conexiones salientes para los autorizados. 

<item>Vuelva a revisar la instalación con una nueva herramienta de
revisión de vulnerabilidades.

<item>Revise las conexiones salientes usando un revisor de red desde
el sistema a un servidor externo y verificque que las conexiones
indeseadas no encuentren vía de salida.</list>

<p>ARREGLAME: Este procedimiento considera el servicio de fortelecimiento,
pero no el sistema de fortalecimiento a nivel de usuario, incluir
informaciones con respecto al chequeo de permisos del usuario,
archivos setuid y paros en el sistema usando el sistema de archivos.



<appendix id="checklist">Lista de chequeo de la configuración

<p>Este apéndice reitera puntos de otras secciones de este manual
condensando en un formato de lista de chequeo. El propósito es ser un
resumen para quienes ya han leído el manual. También hay otras buenas
listas de chequeo disponibles, Kurt Seifried tiene una configuración
basada en un curso en <url
id="http://seifried.org/security/os/linux/20020324-securing-linux-step-by-step.h
tml"name="Securing Linux Step by Step">.

<!-- ARREGLAME: Adicionar puntos a la seguridad Unix del chekeo de listas (CERT) -->

<!-- Order is slightly different from body text. Consider changing text? -->
<!-- (ARREGLAME) -->

<p>ARREGLAME: esto es basado en v1.4 del manual, y podría necesitar actualizarse.

<list>

<item>límitar la entrada para un acceso físico.
 
 <list>

 <item>Capacitar la contraseña BIOS 

 <item>incapacitar la entrada floppy/cdrom/...
		 
 <item>enviar una contraseña LILO o GRUB (<file>/etc/lilo.conf</file>
 o <file>/boot/grub/menu.lst</file>, respectivamente); revisar que la
 configuración de los archivos LILO o GRUB sea de lectura-protegida.
 
 <item>desaprobar el disco flexible MBR para iniciar por el respaldo
 de la floppy booting back door by overwriting the MBR (maybe not?)

 </list>
	 
<item>partitura 

 <list>
		
 <item>Separe los datos del suscriptor, no sistema de datos, y cambiar
 rápaidamente los datos del tiempo de recorrido de sus datos de
 particón.
		 
 <item>enviar <tt>nosuid,noexec,nodev</tt> montar opciones en
 <file>/etc/fstab</file> sobre la partición ext2 tal como
 <file>/tmp</file>.

 </list>
	 
<item>Higiene de las contraseñas y aseguramiento a la entrada
	 
 <list>

 <item>Defina una buena contraseña para el administrador

 <item>Habilite shadowing y MD5 en las contraseñas

 <item>Instale y use PAM
		 
 <list>
 
 <item>Agregue MD5 para soportar PAM y asegúrese que: (en términos
 generales) las entradas en el archivo <file>/etc/pam.d/</file> que
 permiten acceso a la máquina, tengan en el segundo campo del archivo
 pam.d <!-- or is it third? (ARREGLAME: check) --> definidoc com
 "requisite" o "required".
		 
 <item>Cambie <file>/etc/pam.d/login</file> para permitir solamente
 entradas locales al administrador.

 <item>también marque las tty: atuorizadas en
 <file>/etc/security/access.conf</file> y generalmente configurar
 este archivo para limitar la entrada del administrador tanto como
 sea posible.
			 
 <item>Agregue pam_limits.so si usted desea habilitar límites para
 usuarios.

 <item>Cambie <file>/etc/pam.d/passwd</file>: especifique un tamaño
 mínimo de contraseña.(podrían ser 6 caracteres) y habilite md5

 <item>agregue un grupo wheel a <file>/etc/group</file> si desea,
 agregue pam_wheel. para entrar a <file>/etc/pam.d/su</file>
			 
 <item>para especificar controles por usuario iniciales, use
 pam_listfile cuando sea apropiado.
			 
 <item>tenga un archivo <file>/etc/pam.d/other</file>y montarlo con
 seguridad alta.
			 
 </list>
		 

 <item>ponga límites en <file>/etc/security/limits.conf</file> (note
 que <file>/etc/limits</file> no es usado si usted está utilizando
 PAM)

 <item>Restrinja <file>/etc/login.defs</file>; también, si usted
 habilita MD5 y/o PAM, asegurese que usted hace los cambios
 carrespondientes ahí también.
		 
 <item>inhabilite el acceso a root por ftp en
 <file>/etc/ftpusers</file>
		 
 <item>inhabilite la entrada vía red al root; use <manref name="su"
 section="1"> o <manref name="sudo" section="1">. (considere
 instalar <package>sudo</package>)
		 
 <item>Use PAM para hacer cumplir las restrinciones adicionales sobre
 logins?

 </list>

	 <item>Otros asuntos de la seguridad local.
	 <list>
		<item>Cambios de Kernel 
		 (ver <ref id="kernel-conf">)
		 
		<item>Parches del Kernel 
		 (ver <ref id="kernel-patches">)
		 
		<item>restrinja los permisos de los archivos de bitácora
	 (<file>/var/log/{last,fail}log</file>, Apache logs)
		 
 <item>Verifique que la revisión de setuid está habilitada en
 <file>/etc/checksecurity.conf</file>
		 
 <item>Considere hacer algunos archivos log append-only y
 configurar archivos inmutables usando chattr (ext2 filesystems
 únicamente)



 <item>Active integridad de archivos (vea <ref id="check-integ">).
 instale <package>debsums</package>
		 
 <item>Considere remplazar locate con slocate
		 
 <item>Enviar bitácoras a una impresora local?
		 
 <item>Queme su configuración sobre un CD de arranque y e inicie la
 máquina desde este?
		 
 <item>incapacitar módulos del kernel? 

	 </list>
	 
 <item>Limite el acceso a la red

 <list>

<item>Instale y configure <prgn>ssh</prgn> (se sugiere PermitRootLogin
No <file>/etc/ssh/sshd_config</file>, PermitEmptyPasswords No; note
que hay otras sugerencias en este texto)
		 
<item>Considere incapacitar o eliminar in.telnetd
		 
<item>Generalmente, inhabilite los servicios gratuitos en
<file>/etc/inetd.conf</file> usando <tt>update-inetd --disable</tt>
(or inhabilite todo inetd, o use un reemplazo como xinetd or rlinetd)
		 
<item>Inhabilite los otros servicios gratuitos de red; mail, ftp, DNS,
www, etc no deben estar corriendo si usted no los necesita y
monitoréelos regularmente.

<item>Para los servicios que necesite, no use solamente los programas
comunes, busque más versiones seguras enviadas por Debian (o busque
otros recursos). Para cualquier servicio que usted termine usando,
asegúrese de entender los riesgos.

<item>Monte celdas de directorio raíz distintos para usuarios externos
y demonios.

<item>Configure firewall y tcpwrappers (i.e. <manref
name="hosts_access" section="5">); revise <file>/etc/hosts.deny</file>
en este texto.
		 
<item>si usted corre ftp, monte su servidor ftpd y siempre corra
chrooted para el directorio raíz del usuario
		 
<item>Si usted corre X, inhabilite la autenticación xhost y use ssh a
cambio, mejor aún, inhabilite X remoto si usted puede (adicione
-nolisten tcp a X desde la línea de comandos y apague XDMCP en
<file>/etc/X11/xdm/xdm-config</file> configurando requestPort a 0)
		 
<item>Inhabilite el acceso externo a impresoras.
		 
<item>Use tunel para sesiones de IMAP o POP a través de SSL o ssh;
instale stunnel si usted quiere proporcionar este servicio a usuarios
de correo remoto
		 
<item>Monte un loghost y configure otras máquinas para enviar logs a
ésta (<file>/etc/syslog.conf</file>)
		 
<item>asegure BIND, Sendmail, y otros demonios complejos
(Configure una celda de cambio de directorio ; corra como non-root
pseudo-user)

<item>Instale snort o una herramienta de logging similar.
		 
<item>Prescinda de NIS y RPC si usted puede (inhabilite portmap).
		 
 </list>
 
 <item>Políticas 

 <list>
		
<item>Eduque a los usuarios acerca de los porque y los como de sus
políticas. Cuando usted ha prohibido algo que normalmente está
disponible en otros sistemas, suministre documenteción que explique
como conseguir resultados similares usando otros medios más seguros.

<item>Prohiba el uso de protocolos que usa claves en texto plano
(telnet, rsh y friends; ftp, imap, http, ...).
		 
<item>Prohiba programas comoVGAlib.
		 
<item>Use quotas de disco.

</list>
	 
<item>manténegase informado sobre asuntos de seguridad
 
 <list>
		
 <item>Subscríbase a la lista de correo de seguridad 

 <item>Subscríbase a las actualizaciones de seguridad, adicione a
 <file> /etc/apt/sources.list</file> una entrada (o entradas) a
 http://security.debian.org/debian-security
		 
 <item>Además recuerde correr periódicamente <prgn>apt-get update ;
 apt-get upgrade</prgn> (tal vez instalar un cron job?) como se
 explicó en <ref id="update">.

 </list>

</list>

<appendix id="snort-box">Montar un IDS aislado

<p>Usted puede montar fácilmente una máquina Debian como un Sistema de
Detección de Instrusos usando <package>snort</package>.

<p>Algunas pautas:

<list>

<item>Instale una base de sistema Debian y no seleccione paquetes
adicionales. 

<item>Baje e instale (con dpkg) manualmente los paquetes necesarios
(vea los paquetes instalados en la lista de abajo).

<item>Baje e instale ACID (Analisis Consolado para Instrucciones para
la Base de Datos).

</list>

<p>ACID es un paquete corrientepara Debian con el
<package>acidlab</package>, esto ocaciona un grafico WWW interfaz
para sacar snort's . Esto pude obtenerse desde <url
id="http://www.cert.org/kb/acid/">, <url
id="http://acidlab.sourceforge.net"> or <url
id="http://www.andrew.cmu.edu/~rdanyliw/snort/">. You might want to
read the <url
id="http://www.linuxdoc.org/HOWTO/Snort-Statistics-HOWTO/index.html"
name="Snort Statistics HOWTO">.

<p>Usted puede montar este sistema con almenos dos interfaces: una
interfaz conectada para un mantenimiento lan (para el acceso a los
resultados y para mantener el sistema), una interfaz conectada con
ip-direcciónagregada al sistema al segmento de la red para ser
analizado .
 
<p>Para configurar las tarjetas de red sin una ip-dirección usted
no puede usar el standard's Debian
<file>/etc/network/interfaces</file> desde el <prgn>ifup</prgn> y
<prgn>ifdown</prgn> espere más informaciones que necesita. Usted
tiene (simple <tt>ifconfig eth0 up</tt>) 

<p> Usted necesita tener puesta instalacióne Debian standard Apache,
MySQL y PHP4 por ACID para trabajar. Downloaded paquetes (Nota:las
versiones podrian variar dependiendo de cada distribución debian que
usted usa, esto es desde Debian <em>woody</em> septiembre 2001):es

<example>
ACID-0.9.5b9.tar.gz
adduser_3.39_all.deb
apache-common_1.3.20-1_i386.deb
apache_1.3.20-1_i386.deb
debconf_0.9.77_all.deb
dialog_0.9a-20010527-1_i386.deb
fileutils_4.1-2_i386.deb
klogd_1.4.1-2_i386.deb
libbz2-1.0_1.0.1-10_i386.deb
libc6_2.2.3-6_i386.deb
libdb2_2.7.7-8_i386.deb
libdbd-mysql-perl_1.2216-2_i386.deb
libdbi-perl_1.18-1_i386.deb
libexpat1_1.95.1-5_i386.deb
libgdbmg1_1.7.3-27_i386.deb
libmm11_1.1.3-4_i386.deb
libmysqlclient10_3.23.39-3_i386.deb
libncurses5_5.2.20010318-2_i386.deb
libpcap0_0.6.2-1_i386.deb
libpcre3_3.4-1_i386.deb
libreadline4_4.2-3_i386.deb 
libstdc++2.10-glibc2.2_2.95.4-0.010703_i386.deb
logrotate_3.5.4-2_i386.deb
mime-support_3.11-1_all.deb
mysql-client_3.23.39-3_i386.deb
mysql-common_3.23.39-3.1_all.deb
mysql-server_3.23.39-3_i386.deb
perl-base_5.6.1-5_i386.deb
perl-modules_5.6.1-5_all.deb
perl_5.6.1-5_i386.deb
php4-mysql_4.0.6-4_i386.deb
php4_4.0.6-1_i386.deb
php4_4.0.6-4_i386.deb
snort_1.7-9_i386.deb
sysklogd_1.4.1-2_i386.deb
zlib1g_1.1.3-15_i386.deb
</example>

<p>Installed packages (dpkg -l):
<example>
ii adduser 3.39
ii ae 962-26
ii apache 1.3.20-1
ii apache-common 1.3.20-1
ii apt 0.3.19
ii base-config 0.33.2
ii base-files 2.2.0
ii base-passwd 3.1.10
ii bash 2.03-6
ii bsdutils 2.10f-5.1
ii console-data 1999.08.29-11.
ii console-tools 0.2.3-10.3
ii console-tools- 0.2.3-10.3
ii cron 3.0pl1-57.2
ii debconf 0.9.77
ii debianutils 1.13.3
ii dialog 0.9a-20010527-
ii diff 2.7-21
ii dpkg 1.6.15
ii e2fsprogs 1.18-3.0
ii elvis-tiny 1.4-11
ii fbset 2.1-6
ii fdflush 1.0.1-5
ii fdutils 5.3-3 
ii fileutils 4.1-2 
ii findutils 4.1-40
ii ftp 0.10-3.1
ii gettext-base 0.10.35-13
ii grep 2.4.2-1
ii gzip 1.2.4-33
ii hostname 2.07
ii isapnptools 1.21-2
ii joe 2.8-15.2 
ii klogd 1.4.1-2 
ii ldso 1.9.11-9 
ii libbz2-1.0 1.0.1-10
ii libc6 2.2.3-6
ii libdb2 2.7.7-8
ii libdbd-mysql-p 1.2216-2
ii libdbi-perl 1.18-1
ii libexpat1 1.95.1-5
ii libgdbmg1 1.7.3-27
ii libmm11 1.1.3-4
ii libmysqlclient 3.23.39-3
ii libncurses5 5.2.20010318-2
ii libnewt0 0.50-7 
ii libpam-modules 0.72-9
ii libpam-runtime 0.72-9 
ii libpam0g 0.72-9
ii libpcap0 0.6.2-1
ii libpcre3 3.4-1 
ii libpopt0 1.4-1.1
ii libreadline4 4.2-3 
ii libssl09 0.9.4-5 
ii libstdc++2.10 2.95.2-13 
ii libstdc++2.10- 2.95.4-0.01070
ii libwrap0 7.6-4 
ii lilo 21.4.3-2
ii locales 2.1.3-18
ii login 19990827-20
ii makedev 2.3.1-46.2
ii mawk 1.3.3-5
ii mbr 1.1.2-1 
ii mime-support 3.11-1 
ii modutils 2.3.11-13.1
ii mount 2.10f-5.1
ii mysql-client 3.23.39-3
ii mysql-common 3.23.39-3.1
ii mysql-server 3.23.39-3
ii ncurses-base 5.0-6.0potato1
ii ncurses-bin 5.0-6.0potato1
ii netbase 3.18-4 
ii passwd 19990827-20
ii pciutils 2.1.2-2
ii perl 5.6.1-5 
ii perl-base 5.6.1-5 
ii perl-modules 5.6.1-5
ii php4 4.0.6-4 
ii php4-mysql 4.0.6-4 
ii ppp 2.3.11-1.4
ii pppconfig 2.0.5
ii procps 2.0.6-5 
ii psmisc 19-2 
ii pump 0.7.3-2 
ii sed 3.02-5 
ii setserial 2.17-16
ii shellutils 2.0-7
ii slang1 1.3.9-1 
ii snort 1.7-9
ii ssh 1.2.3-9.3
ii sysklogd 1.4.1-2
ii syslinux 1.48-2
ii sysvinit 2.78-4 
ii tar 1.13.17-2 
ii tasksel 1.0-10 
ii tcpd 7.6-4 
ii telnet 0.16-4potato.1
ii textutils 2.0-2 
ii update 2.11-1 
ii util-linux 2.10f-5.1
ii zlib1g 1.1.3-15 
</example>
!!!!! Falta mucho aqui !!!!! ¿Dónde esta lo demás?

</book>
