
<chapt>Antes y durante la instalación

<sect>Escoger una contraseña BIOS
<p> Antes de instalar algún sistema operativo en su computador,
establezca una contraseña BIOS. Después de la instalación (una vez se
haya posibilitado la entrada desde el disco duro) regrese a la BIOS y
cambie la secuencia de arranque del sistema para impedir el
arranque desde el disco flexible, el CD-ROM y otros dispositivos desde los
que no se debería arrancar. De otro modo un cracker solo necesitaría
acceso físico y un disco de arranque para tener acceso a la totalidad
de su sistema. 

<p> Inhabilitar El ingreso al programa sin una contraseña es mejor.
Este puede ser muy efectivo si usted está administrando un servidor,
porque éste no es reiniciado muy frecuentemente. El inconveniente para
esta táctica es que el ingreso requiere intervención humana la cual
puede causar problemas si la máquina no es de fácil acceso. 

<sect>Escoger inteligentemente un esquema de partición
<p> Un esquema de partición inteligente depende de cómo sea usada la
máquina. Una buena regla para torpes es ser completamente tolerante con
sus particiones y prestar atención a los siguientes factores: <list>

<item>Cualquier jerarquía de directorios en la cual un usuario tiene
permiso de escritura, así como <file>/home</file> y
<file>/tmp</file>, debería estar en una partición separada. Esto reduce
el riesgo de un DoS por parte de un usuario, al llenar su punto de
montaje de "/" y tornar el sistema inservible. (Nota: esto no es
estrictamente cierto, dado que siempre hay algún espacio reservado
para el administrador, el cual un usuario normal no puede llenar). 

<item>Cualquier partición que pueda variar, p.e. <file>/var</file>
(especialmente <file>/var/log</file>) también debería estar en una
partición separada. En un sistema Debian, usted debe crear /var un
poco más grande de lo normal, debido a que los paquetes descargados (el
apt cache) son guardados en <file>/var/cache/apt/archives</file>. Esto
es mucho más importante para los servidores del correo
(<file>/var/mail</file> y/o <file>/var/spool/mail</file>) ya que los
usuarios remotos pueden llenar la cola del correo 
(intencionada o no intencionadamente). 

<item>Cualquier partición donde usted quiera instalar un software
fuera de la distribución debe estar en una partición separada. De
acuerdo con la jerarquía estándar de archivos, serían
<file>/opt</file> o <file>/usr/local</file>. Si estos directorios están en
particiones separadas, no serán borrados si usted tiene que
reinstalar Debian.

<item>Desde el punto de vista de seguridad, tiene sentido intentar
mover los datos estáticos a su propia partición y luego montar la
partición en modo sólo lectura. Mejor aún, ponga los
datos en un medio de sólo lectura. Ver más detalles a continuación.
</list>

<sect>No se conecte a Internet hasta que este listo

<p>El sistema que usted va a instalar no debe ser conectado inmediatamente a
Internet durante la instalación. Esto puede sonar
estúpido pero usualmente se hace. Ya que el sistema instalará y
activará servicios inmediatamente, si el sistema es conectado a
Internet y los servicios no están correctamente configurados, usted
está abierto a sufrir un ataque.

<p>También verifique si algún servicio tiene nuevas vulnerabilidades
de seguridad no arregladas en los paquetes que usted está utilizando para
la instalación. Normalmente esto es cierto si usted está instalando
desde un medio antiguo (como CD-ROMs) . En este caso, ¡puede estar
comprometido antes de que la instalación se haya terminado!.

<p>Como la instalación y las actualizaciones de Debian pueden ser
realizadas desde Internet, usted debe pensar que es una buena idea usar esta
característica en la instalación. Si el sistema va a ser conectado
directamente a Internet (y sin estar protegido por un cortafuegos o
NAT), es mejor instalar sin conexión a Internet, utilizando un
espejo local de paquetes tanto para los fuentes de los paquetes de Debian como
para las actualizaciones de seguridad. Usted puede configurar los
espejos de paquetes usando otro sistema conectado a Internet con
herramientas específicas de Debian (si es un sistema Debian)
como <package>apt-move</package> o <package>apt-proxy</package>, u
otras herramientas comunes para espejos que provean los archivos para
el sistema instalado.

<sect>Colocar una contraseña de root (Administrador de Linux)
<p> Colocar una buena contraseña a root es el más básico requerimiento
para tener un sistema seguro. 

<sect>Activar contraseñas shadow y md5
<p>
Al final de la instalación se le preguntará si las contraseñas 
shadow deben ser habilitadas. Responda con un SI a esta pregunta,
y así las contraseñas se mantendrán en el archivo
<file>/etc/shadow</file>. Solo el usuario root y el grupo shadow
tienen acceso de lectura a este archivo, así que los usuarios no estarán
autorizados a realizar una copia de este archivo con el objeto de ejecutar
un decodificador de contraseñas. Usted puede cambiar entre las contraseñas
shadow  y las contraseñas normales en cualquier momento utilizando
<tt>shadowconfig</tt>. Además, durante la instalación se le preguntará si
quiere usar las contraseñas con una función MD5 aplicada.
Esto es generalmente una muy buena idea, ya que permite unas
contraseñas más extensas y una mejor encriptación.

<p>Lea más acerca de las contraseñas shadow en 
<url
name="Shadow Password"
id="http://www.linuxdoc.org/HOWTO/Shadow-Password-HOWTO.html">
(<file>/usr/share/doc/HOWTO/en-txt/Shadow-Password.txt.gz</file>).


<sect>Ejecute el mínimo número de servicios requeridos 

<p>Los servicios son programas tales como los servidores de ftp y los
servidores web. Ya que ellos deben estar <em>escuchando</em>
las conexiones entrantes que requieren el servicio,
computadores externos podrán conectarse con usted. Los servicios son
algunas veces vulnerables (i.e. puede estar comprometido bajo un
ataque dado) y por lo tanto son un riesgo de seguridad. 
<p>Usted no debería instalar servicios innecesarios para su máquina. Todo 
nuevo servicio instalado, quizás sin evidencia (o
evidentemente), puede crear fallas de seguridad en su computador.

<p>Como es bien sabido, cuando usted instala un 
servicio dado, el comportamiento erróneo es activarlo. En una instalación 
por defecto de Debian, sin servicios instalados, la huella de los servicios 
recorridos es lenta y es aun más lento cuando se habla acerca de los servicios 
ofrecidos en la red. La huella en Debian 2.1 no era tan difícil como la 2.2 
(algunos servicios inetd fueron permitidos por descuido) y en el Debian 2.2 el 
Rpc PORTMAPPER se permite para la instalación. Rpc es instalado por descuido 
porque este es necesitado por muchos servicios, por ejemplo NFS, para
recorrer en un sistema dado. Esto puede ser removido fácilmente, sin
embargo, vea <ref id="disableserv"> para saber como desactivarlo.

<p>Cuando usted instale un nuevo servicio relacionado con la red
(demonio) en su sistema Debian GNU/ Linux, éste puede ser habilitado de
dos formas: a través del superdemonio de inetd (i.e una línea será
añadida a <file>/etc/inetd.conf</file>) o a través de un programa
automático que se ratifica a si mismo con el conector de unidades del
sistema. Los programas automáticos son controlados a través de los
archivos <file>/etc/init.d</file> , los cuales son llamados al momento
de entrar a través del mecanismo SysV (o una alternativa mas) por usar
conexiones del sistema en <file>/etc/rc?.d/*</file> (para mas
información sobre como hacer la lectura
<file>/usr/share/doc/sysvinit/README.runlevels.gz</file>).

<p>Si usted aun desea tener algunos servicios para usarlos de vez en
cuando, use los comandos de update, e.g. 'update-inetd' y
'update-rc.d' para eliminarlos del proceso de inicio.

<sect1 id="disableserv">Deshabilitar los demonios

<p>Incapacitar un demonio (o servicio) es muy sencillo. Hay diferentes métodos: 
<list>

<item>Eliminar las conexiones de <file>/etc/rc${runlevel}.d/</file> o
renombrar las conexiones (así que ellos no empezarán con 'S')
<item>Mover el archivo de escritura (<file>/etc/init.d/_service_name_</file>)
a otro nombre (por ejemplo <file>/etc/init.d/OFF._service_name_</file>)

<item>Eliminar la marca de ejecución del
archivo <file>/etc/init.d/_service_name_</file>.

<item>Editar el fichero <file>/etc/init.d/_service_name_</file> para
que éste se pare nada más ejecutarse.

</list>

<p>Usted puede eliminar estas conexiones de
<file>/etc/rc${runlevel}.d/</file> manualmente o usando
<tt>update-rc.d</tt> (ver <manref section="8" name="update-rc.d">).
Por ejemplo, Usted puede inhabilitar un servicio de ejecución en los
niveles haciendo:
<example>
update-rc.d stop XX 2 3 4 5 .
</example>



<p>Por favor note que, si usted no <em>está</em> usando
<package>file-rc</package>, <tt>update-rc.d -f _service_ remove</tt>
no trabajara adecuadamente, ya que <em>todas</em> las conexiones son
removidas, cuando se realice la reinstalación o crezca el paquete,
estas conexiones estarán regeneradas (probablemente no como usted
quería). Si usted piensa que esto no es intuitivo probablemente usted
estaría en lo cierto (vea <url id="http://bugs.debian.org/67095"
name="Bug 67095">. Del manual de paginas:

<example>
Si algunos archivos /etc/rcrunlevel.d/[sk]??nombre ya existen entonces
update-rc.d no hace nada. Esto ocurre porque el sistema administrador
puede reorganizar las conexiones, permitiendo que ellos dejen la
ultima conexión que queda, sin tener su configuración sobrescrita.
</example>

<p>Si usted esá usando <package>file-rc</package> toda la información
relativa a los servicios de entrada está manejada por un archivo de
configuración común y es mantenido aun sí los paquetes son removidos
del sistema.

<p>Usted puede usar el TUI (Texto Interfaces del Usuario)
proporcionado por <package>rcconf</package> para hacer todos estos
cambios fácilmente (<prgn>rcconf</prgn> trabaja de dos formas por
file-rc y el sistema normal V runlevels).

<p>Otros métodos (no recomendables) de servicios inhabilitados son:
<tt>chmod 644 /etc/init.d/_demonio_</tt> (pero éste provocará un mensaje 
de error cuando usted entre al sistema) o modificar la escritura de
<file>/etc/init.d/_demonio_</file> (añadiendo una línea con
<prgn>exit 0</prgn> al comienzo o comentando la parte
<tt>start-stop-daemon</tt>).  Ya que los archivos
init.d son archivos de configuración, éstos no serán sobrescritos al
actualizar programas.

<p>Desafortunadamente, a diferencia de otros sistema operativos (UNIX),
los servicios en Debian no pueden ser desactivados al modificar los
archivos en <file>/etc/default/_servicename_</file>.

<p>ARREGLAME: Proporcionar mas información sobre el manejo de demonios usando 
file-rc.

<sect1 id="inetd">Deshabilitar los servicios inetd
<p>
Usted debe parar todos los servicios innecesarios en su sistema, como
echo, chargen, discard, daytime, time, talk, ntalk y r-services
(rsh, rlogin y rcp) los cuales son considerados ALTAMENTE inseguros
(en cambio use ssh). Después de inhabilitarlos, usted debe revisar si
realmente necesita el demonio inetd. Mucha gente prefiere usar
los demonios en lugar de servicios de llamada via inetd. En los
ataques de Denial of service existen posibilidades en contra de inedt, las
cuales pueden incrementar la carga de la máquina tremendamente. Si
usted aun quiere ejecutar algún tipo de servicio inedt, utilize un
demonio de inet más configurable como xinetd o rlinetd.

<p> Usted puede inhabilitar directamente los servicios por la edición de
<file>/etc/inetd.conf</file>, pero Debian proporciona una mejor
alternativa para hacer esto:<tt>update-inetd</tt> (el cual comenta los
servicios de una forma que este pude fácilmente ser reactivado de
nuevo). Usted podría eliminar el demonio telnet ejecutando 
estos comandos para cambiar el archivo de configuración y  reiniciar
el demonio (en este caso el servicio telnet es inhabilitado): 

<example>
/usr/sbin/update-inetd --disable telnet
</example>
<!-- # /etc/init.d/inetd restart Not needed since the manpage says update-inetd
sends a SIGHUP, commented out as suggested by Dariusz Puchalak -->

<p>Si usted quiere tener servicios escuchando, pero no quiere que
escuchen todas las direcciones IP de su host, usted
podría usar una característica no documentada de inetd.<!-- ARREGLAME
write the information sent by Alexander to the debian-security mailing
list -->. O usar un demonio inetd alterno como <prgn>xinetd</prgn>.

<sect>Lea las listas de correo de seguridad de Debian

<p>Nunca es malo dar un vistazo en cualquier lista de correo de los
anuncios de seguridad de Debian, donde son anunciados avisos y
correcciones para promocionar paquetes por el equipo de Debian, o en
debian-security@lists.debian.org, donde usted puede participar en
discusiones acerca de cosas relacionadas a la Seguridad de Debian.

<p>Para recibir alertas importantes de la seguridad de update.
Envíe un e-mail a <url
name="debian-security-announce-request@lists.debian.org"
id="mailto:debian-security-announce-request@lists.debian.org">con la
palabra 'suscribir' en la línea "subject". Usted también puede
suscribirse a esta lista e-mail moderada en la pagina Web
<url name="http://www.debian.org/MailingLists/subscribe"
id="http://www.debian.org/MailingLists/subscribe">

<p>Estas listas de correo tienen un muy bajo volumen, y al
suscribirse a esta usted será inmediatamente alertado de los asuntos
de seguridad de la distribución Debian. Esto le permite
rápidamente cargar nuevos paquetes con correcciones en la
seguridad, lo cual es muy importante en el mantenimiento de un sistema
seguro. (Vea<ref id="update"> para mas detalles sobre como hacer
esto.) 


