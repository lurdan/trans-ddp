<!-- CVS revision of original english document "1.16" -->

<chapt id="uptodate">Garder son système Debian à jour

<p>L'un des buts de Debian est de fournir un chemin de mise à jour compatible et un processus 
de mise à jour sûr. Nous faisons toujours de notre mieux pour que la mise à jour des nouvelles
versions soit une procédure douce. Dans certain cas, il peut y avoir des avertissements importants 
lors du processus de mise à jour, l'utilisateur en sera alerté et souvent une solution à un possible 
problème sera fournie.

<p>Vous pouvez aussi lire les notes de publication, qui décrivent en détail les 
spécificités de la mise à jour, présentes sur tous les cédéroms de Debian et
disponibles sur le site web à l'adresse  
<url id="http://www.debian.org/releases/stable/releasenotes">.

<!-- ***************** PAS de TRADUCTION
<sect id="libc5to6upgrade">How can I upgrade my Debian 1.3.1 (or earlier)
  distribution, based on libc5, to 2.0 (or later), based on libc6?

<p>There are several ways to upgrade:
<list>
  <item>Using a simple shell script called <tt>autoup.sh</tt> which upgrades
    the most important packages. After <tt>autoup.sh</tt> has done his job,
    you may use dselect to install the remaining packages <em>en masse</em>.
    This is probably the recommended method, but not the only one.
    <p>Currently, the latest release of <tt>autoup.sh</tt> may be found on the
    following locations:
    <list>
      <item><url id="http://www.debian.org/releases/2.0/autoup/">
      <item><url id="http://www.taz.net.au/autoup/">
      <item><url id="http://debian.vicnet.net.au/autoup/">
    </list>
  <item>Following closely the <url name="Debian libc5 to libc6 Mini-HOWTO"
    id="http://debian.vicnet.net.au/autoup/HOWTO/libc5-libc6-Mini-HOWTO.html"> and
    upgrade the most important packages by hand. <tt>autoup.sh</tt> is based
    on this Mini-HOWTO, so this method should work more or less like using
    <tt>autoup.sh</tt>.
  <item>Using a libc5-based <tt>apt</tt>. APT stands for Advanced Package Tool, and
    it might replace dselect some day. Currently, it works just as a
    command-line interface, or as a dselect access method. You will find a
    libc5 version in the <tt>dists/slink/main/upgrade-older-i386</tt>
    directory at the Debian archives.
  <item>Using just dselect, without upgrading any package by hand
    first. It is highly recommended that you do NOT use this method
    if you can avoid it, because dselect alone currently does not install
    packages in the optimal order. APT works much better and it is safer.
    <!- - This should probably work if dpkg's max-error-before-stop internal
    variable is increased. Question: Will it be increased some day? - ->
</list>

<!- -
This paragraph is obsolete, but I will keep it here as a reminder in
case libc6-based dpkg happen to be some better than the one in Debian
1.3.1: Note that the version of <tt>dpkg</tt> in this directory has the
a.out binary format.  The versions of <tt>dpkg</tt> in the development and
stable trees have the ELF format.
-->


<sect id="howtocurrent">Comment puis-je garder mon système à jour&nbsp;?

<p>On pourrait simplement ouvrir une session FTP anonyme vers une archive Debian, 
parcourir les répertoires jusqu'à ce qu'on trouve le fichier désiré, le récupérer 
et enfin l'installer en utilisant <tt>dpkg</tt>. Notez que dpkg installera les fichiers 
mis à jour à leur place, même sur un système en marche.
Parfois, la mise à jour d'un paquet aura besoin de l'installation d'une nouvelle version 
d'un autre paquet, auquel cas l'installation échouera si l'autre paquet n'est pas installé.

<p>Beaucoup de gens trouvent cette approche trop gourmande en temps, car Debian évolue 
très rapidement&nbsp;; typiquement, une douzaine ou plus de nouveaux paquets sont 
téléchargés chaque semaine. Ce nombre est encore plus grand avant la sortie d'une version
majeure. Pour gérer cette avalanche, beaucoup de gens préfèrent utiliser une méthode 
automatique. Plusieurs outils de gestion des paquets sont disponibles dans ce but&nbsp;:

<sect1 id="apt">APT

<p>APT est une interface avancée pour le système de gestion des paquets Debian. Apt-get est 
l'outil en ligne de commande pour la gestion des paquets et la méthode APT de dselect est
une interface pour APT via <prgn/dselect/. Tous les deux fournissent une manière plus simple 
et plus sûre pour installer et mettre à jour les paquets.

<p>APT fournit les fonctionnalités d'ordonnancement d'installation
complet, de possibilités de sources multiples et plusieurs autres
fonctionnalités uniques, 
voir le guide de l'utilisateur
<tt>/usr/share/doc/apt-doc/guide.html/index.html</tt> (vous pouvez aussi installer
le paquet <tt>apt-doc</tt>).

<p>Installez le paquet <package/apt/ et éditez le fichier <tt>/etc/apt/sources.list</tt> 
pour le configurer. Si vous souhaitez mettre à jour votre système vers la dernière version
stable de Debian, vous voudriez probablement utiliser une ligne comme celle-la

<example>http://http.us.debian.org/debian stable main contrib non-free</example>

<p>Vous pouvez remplacer http.us.debian.org avec le nom d'un miroir Debian plus
proche de chez vous et plus rapide. Voir la liste des miroirs à l'adresse 
<url id="http://www.debian.org/misc/README.mirrors"> pour plus d'informations.

<p>Vous trouverez plus d'informations en lisant les pages de manuel
<manref name="apt-get" section="8"> et <manref name="sources.list" section="8">,
ainsi que le guide de l'utilisateur d'APT mentionné ci-dessus, 
<tt>/usr/share/doc/apt-doc/guide.html/index.html</tt>.

<p>Exécutez
      <example>apt-get update</example>
suivi par
      <example>apt-get dist-upgrade</example>
répondez à toutes les questions qui vous seront posées et votre système sera mis à jour.

<p>Pour utiliser APT avec <prgn/dselect/, choisissez la méthode d'accès par APT
dans l'écran de sélection de méthode de dselect (option 0) et indiquez les sources
devant être utilisées. Le fichier de configuration est <file>/etc/apt/sources.list</file>
et son format est décrit dans la page de manuel <manref name="sources.list" section="5">.

<p>Si vous souhaitez utiliser les cédéroms pour installer les paquets, vous 
pouvez utiliser le programme <prgn/apt-cdrom/. Pour plus de détails, veuillez-vous
reporter aux notes de publication, paragraphe «&nbsp;Ajouter des sources Internet à apt&nbsp;».

<p>Veuillez noter que quand vous installez un paquet, les archives sont conservées dans 
un sous-répertoire de /var. Pour ne pas saturer votre partition, vous devriez supprimer
les archives en utilisant <tt>apt-get clean</tt> et <tt>apt-get autoclean</tt> ou les 
déplacer à un autre endroit (conseil&nbsp;: utiliser <package/apt-move/).

<sect1 id="dpkg-ftp">dpkg-ftp

<p>C'est une ancienne méthode d'accès pour <prgn/dselect/. Il peut être appelé dans
<prgn/dselect/, laissant ainsi à un utilisateur la possibilité de télécharger les
fichiers et de les installer directement en une étape. Pour faire ceci, choisissez 
la méthode d'accès <tt>ftp</tt> dans <prgn/dselect/ (option 0) et indiquez le nom 
d'hôte distant et le répertoire. <prgn/Dpkg-ftp/ téléchargera alors automatiquement 
les fichiers qui ont été choisis (soit dans cette session de <prgn/dselect/ ou
soit dans la précédente).

<p>Notez qu'à la différence du programme <prgn/mirror/, <prgn/dpkg-ftp/ ne capture
pas tout le site miroir. Il télécharge seulement les fichiers que vous avez choisis 
(au premier lancement de <prgn/dpkg-ftp/) et qui ont besoin d'être mis à jour.

<p><prgn/dpkg-ftp/ est quelque peu obsolète. Vous devriez à la place utiliser APT
avec des URLs ftp:// dans votre fichier <file>sources.list</file>.

<sect1 id="mirror">mirror

<p>Ce script Perl et son programme (optionel) de gestion nommé <prgn/mirror-master/,
peuvent être employés pour rechercher des parties indiquées par l'utilisateur d'une
arborescence de répertoire sur un serveur particulier <em>via</em> un FTP anonyme.

<p><prgn/Mirror/ est particulièrement utile pour télécharger un grand nombre
de logiciels. Après le premier téléchargement, un fichier nommé <tt>.mirrorinfo</tt>
est conservé sur l'ordinateur local. Les changements du système de fichiers distant
sont détectés automatiquement par <prgn/mirror/, qui compare le fichier local avec 
un fichier semblable sur le système distant et télécharge seulement les fichiers 
modifiés.

<p>Le programme <prgn/mirror/ est généralement utile pour mettre à jour les copies 
locales des arborescences de répertoire distant. Les fichiers cherchés n'ont pas besoin
d'être des fichiers Debian. (Depuis que le programmme <prgn/mirror/ a été porté en Perl, 
il peut aussi être exécuté sur des systèmes non-Unix). Bien que le programme <prgn/mirror/ 
fournisse des mécanismes pour exclure des fichiers dont les noms correspondent à des chaînes
indiquées par l'utilisateur, ce programme est plus utile quand son objectif est de télécharger 
des arborescences entières, plutôt que des paquets choisis.

<!-- Should we recommend GNU wget here, too? -->

<sect1 id="dpkg-mountable">dpkg-mountable

<p>Dpkg-mountable ajoute une méthode d'accès nommée «&nbsp;mountable&nbsp;» à la liste de dselect, 
qui vous permet d'installer depuis tout système de fichiers indiqué dans /etc/fstab.
Par exemple, l'archive peut être sur un disque dur local ou sur un serveur NFS
qui sera automatiquement monté et démonté si nécessaire.

<p>Il a aussi quelques fonctionnalités supplémentaires que l'on ne trouve pas avec 
les méthodes standards de dselect, telle que la disposition dans une arborescence
locale de fichier (soit en parallèle de la distribution principale soit totalement séparée),
et en obtenant seulement les paquets qui sont exigés, plutôt qu'en effectuant un long balayage 
récursif de répertoires et également la journalisation de toutes les actions de dpkg dans 
la méthode d'installation.

<sect id="upgradesingle">Faut-il être dans le mode mono-utilisateur pour mettre 
		à jour un paquet&nbsp;?

<p>Non. Les paquets peuvent être mis à jour en mode multi-utilisateur, même quand le système
est en fonctionement. Il y a sur les systèmes Debian le programme <tt>start-stop-daemon</tt>
qui permet d'arrêter et de redémarrer les processus en cours d'exécution si cela est nécessaire
pendant la mise à jour du paquet.

<sect id="savedebs">Faut-il garder toutes les achives .deb sur le disque&nbsp;?

<p>Non. Si vous avez téléchargé les fichiers sur votre disque (ce qui n'est absolument pas
nécessaire, voir au-dessus pour la description de dpkg-ftp), alors après 
avoir installé les paquets vous pouvez les supprimer de votre système.

<sect id="keepingalog">Comment puis-je garder un journal des paquets que j'ai ajouté 
				sur le système&nbsp;

<p><prgn/Dpkg/ garde une trace des paquets que vous avez configurés, supprimés et/ou purgés
mais ne garde pas (actuellement) de journal sur l'affichage du terminal qui a lieu lors 
de la manipulation d'un paquet.

<p>Le moyen le plus simple pour contourner ce problème est de lancer vos sessions
<prgn>dpkg</prgn>/<prgn>dselect</prgn>/<prgn>apt-get</prgn> avec le programme
<manref name="script" section="1">.
