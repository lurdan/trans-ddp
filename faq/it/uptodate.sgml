<chapt id="uptodate">Mantenere il proprio sistema Debian aggiornato

<p>Uno degli scopi di Debian è quello di fornire un consistente percorso
di aggiornamento e un sicuro processo di aggiornamento. Facciamo
sempre del nostro meglio per rendere semplice l'aggiornamento a
nuove release. Nel caso ci fossero alcune note importanti da aggiungere
al processo di aggiornamento, i pacchetti avviseranno l'utente e spesso
forniranno una soluzione ad un possibile problema.

<p>Si dovrebbe inoltre leggere le Note di Rilascio (Release Notes), documento che descrive i
dettagli degli specifici aggiornamenti, reperibile su tutti i CD Debian e disponibile
su <url id="http://www.debian.org/releases/stable/releasenotes">.

<sect id="libc5to6upgrade">Come posso aggiornare la mia distribuzione Debian 1.3.1 (o
  precedente), basata sulla libc5, alla 2.0 (o successiva), basata sulla libc6?

<p>Ci sono diverse maniere per aggiornare:
<list>
  <item>Usando un semplice script di shell chiamato <tt>autoup.sh</tt> che aggiorna
    i pacchetti più importanti. Dopo che <tt>autoup.sh</tt> ha svolto il suo lavoro,
    si può usare dselect per installare i pacchetti rimanenti <em>in massa</em>.
    Questo probabilmente è il metodo raccomandato, ma non l'unico.
    <p>Attualmente, l'ultima release di <tt>autoup.sh</tt> può essere trovata
    sui seguenti siti:
    <list>
      <item><url id="http://www.debian.org/releases/2.0/autoup/">
      <item><url id="http://www.taz.net.au/autoup/">
      <item><url id="http://debian.vicnet.net.au/autoup/">
    </list>
  <item>Seguendo attentamente il <url name="Debian libc5 to libc6 Mini-HOWTO"
    id="http://debian.vicnet.net.au/autoup/HOWTO/libc5-libc6-Mini-HOWTO.html"> e
    aggiornando i più importanti pacchetti a mano. <tt>autoup.sh</tt> è basato
    su questo Mini-HOWTO, quindi questo metodo dovrebbe funzionare più o meno come
    utilizzando <tt>autoup.sh</tt>.
  <item>Usando un <tt>apt</tt> basato su libc5. APT sta per A Package Tool e
    un giorno potrebbe sostituire dselect. Attualmente, funziona solo come
    un'interfaccia a riga di comando o come un metodo di accesso di dselect. Si potrà
    trovare una versione per libc5 nella directory <tt>dists/slink/main/upgrade-older-i386</tt>
    negli archivi Debian.
  <item>Usando solo dselect, senza aggiornare nessun pacchetto a mano prima. È altamente
    raccomandato di NON usare questo metodo se lo si può evitare, perché dselect
    da solo attualmente non installa i pacchetti in un ordine ottimale. APT
    funziona meglio ed è più sicuro.
    <!-- This should probably work if dpkg's max-error-before-stop internal
    variable is increased. Question: Will it be increased some day? -->
</list>

<!--
This paragraph is obsolete, but I will keep it here as a reminder in
case libc6-based dpkg happen to be some better than the one in Debian
1.3.1: Note that the version of <tt>dpkg</tt> in this directory has the
a.out binary format.  The versions of <tt>dpkg</tt> in the development and
stable trees have the ELF format.
-->

<sect id="howtocurrent">Come posso mantenere il mio sistema Debian recente?

<p>Si può eseguire semplicemente un ftp anonimo ad un archivio Debian,
poi esplorare le directory fino a quando si trova il file desiderato,
poi lo si scarica e finalmente lo si installa usando <tt>dpkg</tt>.
Si noti che <tt>dpkg</tt> installerà i file aggiornati al volo,
anche su un sistema in esecuzione. Qualche volta, un
pacchetto revisionato richiederà l'installazione di una rinnovata
versione di un altro pacchetto, in questo caso l'installazione
fallirà fino a quando l'altro pacchetto non sarà installato.

<p>Molta gente trova questo approccio troppo uno spreco di tempo, dato
che Debian si evolve molto rapidamente -- tipicamente, sono caricati ogni settimana
una dozzina o più nuovi pacchetti. Questo numero è più grande appena prima una
nuova major release. Dovendosi occupare di questa valanga, molta gente preferisce
usare un metodo più automatico. Sono disponibili diversi pacchetti a questo scopo:

<sect1 id="apt">APT

<p>APT è un'interfaccia avanzata al sistema di pacchettamento Debian. apt-get
è lo strumento da riga di comando per gestire pacchetti, e il metodo APT dselect
è un'interfaccia ad APT attraverso <prgn/dselect/. Entrambi forniscono una via più
semplice, sicura per installare e aggiornare pacchetti.

<p>Come caratteristiche di APT l'ordine di installazione,
la possibilità di sorgenti multiple e diverse altre funzionalità uniche,
si veda l'User's Guide su <tt>/usr/share/doc/apt/guide.html/index.html</tt>.

<p>Si installi il pacchetto <package/apt/, e si modifichi il file
<tt>/etc/apt/sources.list</tt> per configurarlo. Se si desidera aggiornare
all'ultima versione stabile di Debian, si vorrà probabilmente usare un
sorgente come questo:

<example>http://http.us.debian.org/debian stable main contrib non-free</example>

<p>Si può sostituire http.us.debian.org con il nome del mirror Debian più veloce
vicino a voi. Si veda la lista dei mirror su
<url id="http://www.debian.org/misc/README.mirrors"> per maggiori informazioni.

<p>Dettagli su questo possono essere trovati nelle pagine di manuale
<manref name="apt-get" section="8"> e <manref name="sources.list" section="8">,
così come nella suddetta APT User's Guide, su <tt>/usr/share/doc/apt/guide.html/index.html</tt>.

<p>Poi si esegua
      <example>apt-get update</example>
seguito da
      <example>apt-get dist-upgrade</example>
Si risponda a qualsiasi domanda possa comparire, e il proprio sistema sarà aggiornato.

<p>Per usare APT con <prgn/dselect/, si scelga il metodo di accesso di APT sulla
schermata di selezione del metodo di dselect (opzione 0) e si specifichino poi i sorgenti
che dovrebbero venire utilizzati. Il file di configurazione è
<file>/etc/apt/sources.list</file> e il suo formato è descritto nella pagina di
manuale <manref name="sources.list" section="5">.

<p>Se si vogliono usare dei CD per installare pacchetti, si può usare <prgn/apt-cdrom/.
Per dettagli, si vedano le Note di Rilascio (Release Notes), sezione "Setting up for an
upgrade from a local mirror".

<p>Si noti che quando si ottengono e si installano i pacchetti, li si ha ancora
nella gerarchia di directory in /var. Per preservare la propria partizione
dall'overflow, ci si ricordi di eliminare i file in più usando <tt>apt-get clean</tt> e
<tt>apt-get autoclean</tt>, o di spostarli in qualche altro posto (consiglio: si usi
<package/apt-move/).

<sect1 id="dpkg-ftp">dpkg-ftp

<p>Questo è un metodo di accesso più vecchio per <prgn/dselect/. Può essere richiamato
dall'interno di <prgn/dselect/, permettendo quindi ad un utente di scaricare file e
installarli in un unico passo. Per fare ciò, si selezioni il metodo di accesso
<tt>ftp</tt> in <prgn/dselect/ (opzione 0) e si specifichi
il nome dell'host remoto e la directory. <prgn/dpkg-ftp/ scaricherà poi automaticamente
i file che sono selezionati (in questa sessione di <prgn/dselect/ oppure in una precedente).

<p>Si noti che, a differenza del programma <prgn/mirror/, <prgn/dpkg-ftp/ non
preleva tutto da un sito mirror. Piuttosto, scarica solo quei file selezionati
(al primo avvio di <prgn/dpkg-ftp/), e che necessitano di essere aggiornati.

<p><prgn/dpkg-ftp/ è un qualcosa di obsoleto. Si dovrebbe invece utilizzare il metodo di
accesso APT con URL ftp:// in <file>sources.list</file>.

<sect1 id="mirror">mirror

<p>Questo script in Perl, e il suo (opzionale) programma di gestione chiamato
<prgn/mirror-master/, può essere usato per prelevare parti di alberi di directory
specificate dall'utente da uno specifico host <em>via</em> FTP anonimo.

<p><prgn/mirror/ è particolarmente utile per scaricare grandi
quantità di software. Dopo che i file sono stati scaricati da un sito
per la prima volta, un file chiamato <tt>.mirrorinfo</tt> viene memorizzato
nell'host locale. Cambiamenti al file system remoto sono tracciati
automaticamente da <prgn/mirror/, che paragona questo file ad un file simile
sul sistema remoto e scarica solo i file cambiati.

<p>Il programma <prgn/mirror/ è generalmente utile per aggiornare copie locali
o remote di alberi di directory. I file prelevati non hanno bisogno di essere file Debian.
(Dato che <prgn/mirror/ è uno script in Perl, può anche funzionare su sistemi non Unix.)
Sebbene il programma <prgn/mirror/ fornisca meccanismi per escludere nomi di file
che corrispondono a stringhe definite dall'utente, questo programma è più utile
quando l'obiettivo è scaricare interi alberi di directory, piuttosto che pacchetti selezionati.

<!-- Should we recommend GNU wget here, too? -->

<sect1 id="dpkg-mountable">dpkg-mountable

<p>dpkg-mountable aggiunge un metodo di accesso chiamato 'mountable'
alla lista di dselect, che permetterà di installare da ogni file system
specificato in /etc/fstab. Per esempio, l'archivio potrebbe essere una
normale partizione di un hard disk o un server NFS, che monterà e
smonterà automaticamente se necessario.

<p>Possiede anche alcune caratteristiche extra non
reperibili nei metodi standard di dselect, come una riserva per un albero
locale di file (sia parallelo alla distribuzione principale che
totalmente separato), e l'ottenimento di soli pacchetti richiesti, piuttosto
che una scansione ricorsiva delle directory dispendiosa in termini di tempo,
così come l'accesso di tutte le azioni di dpkg nel metodo di installazione.

<sect id="upgradesingle">Devo entrare in modalità singolo-utente per aggiornare un pacchetto?

<p>No. I pacchetti possono essere aggiornati al volo, anche su sistemi in esecuzione.
Debian ha un programma <tt>start-stop-daemon</tt> che è invocato per fermare e
poi riavviare processi in esecuzione se necessario durante l'aggiornamento di un pacchetto.

<sect id="savedebs">Devo tenere tutti questi file di archivio .deb sul mio disco?

<p>No. Se ci si è scaricati i file nel proprio disco (il che non è
assolutamente necessario, si veda sopra per la descrizione di dpkg-ftp),
dopo che si sono installati questi pacchetti, li si può rimuovere dal proprio sistema.

<sect id="keepingalog">Come posso tenere un log dei pacchetti che ho aggiunto al sistema?

<p><prgn/dpkg/ tiene una traccia dei pacchetti che sono stati spacchettati,
configurati, rimossi e/o eliminati, ma (attualmente) non
tiene un log delle operazioni del terminale che viene usato quando un
pacchetto viene così manipolato.

<p>La maniera più semplice per superare questo è eseguire il proprio
<prgn>dpkg</prgn>/<prgn>dselect</prgn>/<prgn>apt-get</prgn>/qualsiasi
sessione all'interno del programma <manref name="script" section="1">.