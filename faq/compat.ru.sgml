<!--
  english version: 1.8
  russian version: $Id: compat.ru.sgml,v 1.3 2001-04-13 09:16:52 nidd Exp $
  -->

<chapt id="compat">Проблемы совместимости

<sect id="arches">На каких архитектурах/системах работает &debian;?

<p>&debian; содержит полный исходный код всех включённых в него программ,
поэтому он должен работать на всех системах, которые поддерживаются ядром
Linux; подробней смотрите
<url name="Linux FAQ" id="http://www.linuxdoc.org/FAQ/Linux-FAQ/">.

<!-- XXX обновляется в новых дистрибутивах -->
<p>Текущий выпуск &debian;, &release;, содержит полный двоичный код для
следующих архитектур:

<p><em/i386/: охватываются PC, построенные на базе процессоров Intel и
совместимых с ним, влкючая Intel 386, 486, Pentium, Pentium Pro, Pentium II
(и Klamath и Celeron), и Pentium III, и почти все совместимые процессоры от
AMD, Cyrix и других.

<p><em/m68k/: охватываются Amiga и ATARI, построенные на процессоре
Motorola 680x0, где x>=2; с MMU.

<p><em/alpha/: Alpha системы от Compaq/Digital.

<p><em/sparc/: охватываются SPARC от Sun и большинство систем UltraSPARC.

<p><em/powerpc/: охватываются некоторые IBM/Motorola PowerPC машины, включая
CHRP, PowerMac и машины PReP.

<p><em/arm/: машины ARM и StrongARM.

<p>В настоящий момент ведётся разработка двоичных дистрибутивов Debian для
архитектур Sparc64 (родной UltraSPARC) и MIPS.

<p>Дальнейшие инструкции по загрузке, разбиению дисков, включении
PCMCIA (PC Card) устройств и с подобными проблемами отправляйтесь читать
Руководство по Установке, которое лежит на нашем WWW сайте по адресу
<url id="http://www.debian.org/releases/stable/i386/install">.

<sect id="otherdistribs">Насколько совместим Debian с другими дистрибутивами Linux?
	
<p>Разработчики Debian общаются с другими создателями дистрибутивов Linux для
достижения совместимости управления двоичными файлами между дистрибутивами
Linux. Большинство коммерческих продуктов под Linux также хорошо работают под
Debian как и в системах где они были собраны.

<p>&debian; придерживается <url name="Стандарта Иерархии
Файловой Системы Linux" id="http://www.pathname.com/fhs/">. Однако, в правилах
стандарта остались места, интерпретация которых может несколько различаться
между системой Debian и другим системами Linux.

<sect id="otherunices">Насколько исходный код Debian совместим с другими
системами Unix?
	
<p>Исходный код большинства приложений Linux совместим с другими системами Unix.
Он поддерживает почти всё, что есть в системах System V Unix, а также свободных и коммерческих системах, основанных от BSD. Однако, для бизнеса такое
утверждение о Unix почти не имеет значения, потому что это нельзя никак
доказать. В области разработки программного обеспечения необходима полная
совместимость, вместо совместимости для "большинства" случаев. Несколько лет
назад возникла потребность в стандартах, и теперь POSIX.1 (IEEE Стандарт
1003.1-1990) является одним из основных стандартов по совместимости исходного
кода для Unix-подобных операционных систем.

<p>Linux намеревается придерживаться POSIX.1, но стандарты POSIX стоят настоящих
денег, а сертификация POSIX.1 (и FIPS 151-2) довольно дорога; это ещё более
усложняет разработчикам Linux работу по полному соответствию POSIX.
Стоимость сертификации делает её непривлекательной в том что Debian получит
официальное подтверждение о соответствии, даже если он полностью пройдёт
аттестационный пакет. (Аттестационный пакет теперь свободно доступен, так что
ожидается, что это привлечёт ещё больше людей, которые станут работать над
проблемами с POSIX.1.)

<!-- <p><strong>(Авторы очень хотели бы дать вам ссылку на он-лайн документацию,
которая описывала бы этот стандарт, но IEEE - это одна из тех организаций,
которые уходят, объявив стандарт и затем требуют, что люди ПЛАТИЛИ, чтобы
узнать что же они там напридумали. С похожими ощущения сталкиваешься, когда
узнаешь смысл цветов светофора на перекрестке во время движения.)</strong> -->

<p>Unifix GmbH (Braunschweig, Germany) разработала Linux систему, которая была
сертифицирована как удовлетворяющая FIPS 151-2 (superset POSIX.1). Эта
технология была доступна в дистрибутиве Unifix, называемом Unifix Linux 2.0 и
в Lasermoon Linux-FT.
<!-- Я закоментировал это по вполне понятным причинам... SVD
 <url name="Linux-FT" url="http://www.lasermoon.co.uk/linux-ft/linux-ft.html">.
Сейчас Unifix добавил свои патчи в ядро Linux, gcc и другие утилиты; так что
ожидается, что их исправления улучшат соответствие с POSIX.1 в Debian
(и других дистрибутивах).
-->

<sect id="otherpackages">Могу я использовать пакеты Debians (".deb" файлы) 
в моей системе RedHat/Slackware/... Linux? Могу я использовать пакеты RedHat
(".rpm" файлы) в моей системе &debian;?

<p>Различные дистрибутивы Linux используют различные форматы пакетов и
различные программы управления пакетами.

<taglist>
<tag><strong/Вы вероятно сможете:/
  <item>Существует программа, которая распаковывает пакет Debian на Linux хост,
  который работает под `чужим' дистрибутивом, и она в общем работает, в том
  смысле, что файлы будут распакованы. Обратное утверждение, вероятно, тоже
  верно, т.е. программа распакует RedHat или Slackware пакет на хост, который
  работает под &debian; вероятна успешная распаковка пакета и распределение
  большинства файлов по каталогам их назначения. Это, в значительной степени,
  благодаря существованию (и сильной приверженности) Стандарту Иерархии
  Файловой Системы Linux.

<tag><strong/Вы это сможете, но не захотите сделать:/
  <item>Большинство программ управления пакетами сохраняют данные в управляющих
  файлах, когда они используются для распаковки архива. Обычно, эти
  административные файлы не стандартизованы. Поэтому, распаковка пакета Debian
  на `чужом' хосте может оказать непредсказуемый (уж точно ничего хорошего)
  эффект на менеджер пакетов этой системы. Более того, утилиты из других
  дистрибутивов могут успешно распаковать свои архивы в систему Debian, но это,
  вероятно, приведёт к неправильной работе системы управления пакетами Debian,
  когда придёт время обновлять или удалять некоторые пакеты, или даже просто
  при выводе списка пакетов, установленных в системе.

<tag><strong/Лучший способ:/
  <item>Стандарт Файловой Системы Linux (а следовательно &debian;) требует,
  чтобы подкаталоги <tt>/usr/local/</tt> были полностью во власти пользователей.
  Поэтому, пользователи могут распаковывать `чужие' пакеты в этот каталог, а
  затем индивидуально управлять их настройкой, обновлением и удалением.
</taglist>

<!-- Полезно будет описать все различия между системами Debian и RedHat.
Я верю, что такой документ рассеит страх перед использованием системы Unix.
 SGK -->

<sect id="a.out">Сможет ли Debian запускать мои очень старые программы "a.out"?

<p>А у вас действительно ещё есть такие программы? :-)

<p>Чтобы <em>запускать</em> программы, которые имеют двоичный формат
<tt>a.out</tt> (т.е., QMAGIC или ZMAGIC),

<list>
  <item>Удостоверьтесь, что ядро поддерживает <tt>a.out</tt>, или напрямую
  (CONFIG_BINFMT_AOUT=y) или с помощью модуля (CONFIG_BINFMT_AOUT=m).
  (Пакет Debian kernel-image содержит модуль <tt>binfmt_aout</tt>.)

  <p>Если ваше ядро поддерживает двоичные файлы <tt>a.out</tt> с помощью модуля,
  то удостоверьтесь, что модуль <tt>binfmt_aout</tt> будет загружен. Вы можете
  загружать его во время запуска машины, введя строку <tt>binfmt_aout</tt> в
  файл <tt>/etc/modules</tt>. Вы можете сделать это из командной строки,
  выполнив команду <tt>insmod DIRNAME/binfmt_aout.o</tt>, где
  <tt>DIRNAME</tt> - это имя каталога, в котором лежат модули ядра, запущенного
  в данный момент. В системе с ядром версии 2.2.17, <tt>DIRNAME</tt> 
  вероятно будет <tt>/lib/modules/2.2.17/fs/</tt>.

  <item>установите пакет <package/libc4/, который можно найти в одном из
  выпусков раньше 2.0 (потому что, начиная с этого выпуска мы удалили пакет).
  Вы можете захотеть взглянуть на старый Debian CD-ROM (в Debian 1.3.1 ещё
  содержится этот пакет), или посмотрите в
  <url id="ftp://archive.debian.org/debian-archive/">
  в интернете.

  <item>Если программа, которую вы хотите запустить, является <tt>a.out</tt> X
  клиентом, то установите пакет <package/xcompat/ (смотрите выше где взять).
</list>

<p>Если у вас в формате <tt>a.out</tt> коммерческое приложение, то теперь
самое время попросить поставщика прислать вам <tt>ELF</tt> обновление.

<sect id="libc5">Сможет ли Debian запускать мои старые libc5 программы?

<p>Да. Просто установите нужные библиотеки <package/libc5/ из раздела
<tt>oldlibs</tt> (содержащего старые пакеты, включённые для совместимости со
старыми приложениями).

<sect id="libc5-compile">Можно ли использовать Debian для сборки libc5
программ?

<p>Да. Установите пакеты <package/libc5-altdev/ и <package/altgcc/s (из раздела
<tt>oldlibs</tt>). Там вы найдёте соответствующие libc5-собранные
<prgn/gcc/ и <prgn/g++/ в каталоге <tt>/usr/i486-linuxlibc1/bin</tt>.
Поместите их в свою переменную $PATH, чтобы сначала собрать <prgn/make/ 
и другие программы.

<p>Если вам требуется собирать libc5 X клиента, то установите пакеты
<package/xlib6/ и <package/xlib6-altdev/.

<p>Помните, что среда libc5 в наших других пакетах полностью больше не
поддерживается.

<sect id="non-debian-programs">Как мне установить не-Debian программу?
	
<p>Файлы в каталоге <tt>/usr/local/</tt> не контролируются системой управления
пакетами Debian. Поэтому, хорошей практикой является размещение исходного кода
ваших программ в каталог /usr/local/src/. Например, вы можете распаковать
файлы из пакета с именем "foo.tar" в каталог <tt>/usr/local/src/foo</tt>. После
сборки, поместите двоичные файлы в <tt>/usr/local/bin/</tt>, библиотеки в
<tt>/usr/local/lib/</tt>, а настроечные файлы в <tt>/usr/local/etc/</tt>.

<p>Если ваша программа и/или файлы требуют размещать их в каком-то другом
каталоге, вы всё равно должны держать их в <tt>/usr/local/</tt>, и создавать
соответствующие символические ссылки в требуемом месте на сохранённые файлы из
<tt>/usr/local/</tt>, например, вы должны сделать ссылку так
<example>ln -s /usr/local/bin/foo /usr/bin/foo</example>

<p>В любом случае, если вы получили пакет, авторские права на который,
позволяют дальнейшее распространение, вы должны рассмотреть создание пакета
Debian под него, и отправить его в систему Debian. Основы, как стать
разработчиком пакета, описаны в Руководстве по Политике Debian (смотрите
<ref id="debiandocs">).

<sect id="xlib6">Почему я получаю ошибки типа "Can't find libX11.so.6" при запуске <tt>foo</tt>?

<p>Это сообщение об ошибке означает, что программа собрана с поддержкой
библиотеки X11 версии <tt>libc5</tt>. В этом случае вам необходимо установить
пакет <package/xlib6/ из раздела <tt>oldlibs</tt>.

<p>Вы можете получить похожие сообщения об ошибках, указывающие на файл
libXpm.so.4, в этом случае вам нужно установить версию libc5 библиотеки XPM из
пакета <package/xpm4.7/, также из раздела <tt>oldlibs</tt>.

<sect id="termcap">Почему я не могу собрать программы, которым нужна libtermcap?
	
<p>Debian использует базу данных <tt>terminfo</tt> и библиотеку <tt>ncurses</tt>для работы с терминалом, а не базу данных <tt>termcap</tt> и библиотеку
<tt>termcap</tt>. Пользователям, собирающим программы, требуются некоторые
знания по взаимодействию с терминалом, чтобы заменить ссылки на
<tt>libtermcap</tt> ссылками на <tt>libncurses</tt>.

<p>Чтобы поддержать двоичные файлы, которые уже слинкованы с библиотекой
<tt>termcap</tt> и для которых нет исходных текстов, Debian предоставляет
пакет <package/termcap-compat/. В нём имеется и <tt>libtermcap.so.2</tt> и
<tt>/etc/termcap</tt>. Установите этот пакет, если программа отказывается
запускаться с сообщением об ошибке "can't load library 'libtermcap.so.2'", или
жалуется на отсутствие файла <tt>/etc/termcap</tt>.

<sect id="accelx">Почему я не могу установить AccelX?
	
<p>Для установки AccelX используется библиотека <tt>termcap</tt>. Смотрите
про <ref id="termcap"> выше.

<sect id="motifnls">Почему сбоят мои старые приложения XFree 2.1 Motif?

<p>Вам требуется установить пакет <package/motifnls/, который содержит
настроечные файлы для XFree-2.1, необходимые, для того чтобы приложения Motif,
собранные под XFree-2.1, могли работать под XFree-3.1.

<p>Без этих файлов некоторые приложения Motif, собранные на других машинах
(такие как Netscape) могут сбоить при попытке копирования или вставки из или
в текстовое поле, а также могут проявляться другие проблемы.

