<!-- CVS revision of this document "# Revision is not used here.#"  -->
<!-- CVS revision of original english document "1.29"  -->
<chapt id="edit">Gli Editor

<sect id="pop-editor">Editor più popolari
<p>
Linux molte scelte fra gli editor di testo per console. Fra questi elenchiamo:
<list compact>
<item><prgn>vim</prgn>:    Editor di eredità BSD potente e leggero. VI iMproved.
<item><prgn>emacs</prgn>:  L'editor definitivo di eredità GNU, pesante. 
 Originale da RMS (Richard M. Stallman).
<item><prgn>xemacs</prgn>: "Emacs: The Next Generation", in origine da Lucid.
<item><prgn>mcedit</prgn>: Editor GNU per principianti. 
  Identico all'editor interno di <prgn>mc</prgn>. Vedere <ref id="mcedit">.
<item><prgn>ae</prgn>:     Piccolo editor di default (Potato). Evitatelo.
<item><prgn>nano</prgn>:   Piccolo editor GNU di default (Woody). Emula
  <prgn>pico</prgn>. 
<item><prgn>joe</prgn>:    Per i nostalgici di WordStar o TurboPascal.
<item><prgn>jed</prgn>:    Editor veloce, ricco di dotazioni, completamente 
  gestito da menu, con comandi da tastiera Emacs.
<item><prgn>jove</prgn>:   Editor molto piccolo, con comandi da tastiera Emacs.
<item><prgn>nvi</prgn>:    Il nuovo vi.  Compatibile baco per baco con il
  vi originale.
</list>
<p>
Usate <tt>update-alternatives --config editor</tt> per cambiare l'editor predefinito.
In aggiunta, alcuni programmi usano variabili d'ambiente <tt>EDITOR</tt> o
<tt>VISUAL</tt> per decidere quale usare.  Vedere <ref id="mcedit">.
<p>
Degni di nota anche alcuni editor basati su X:
<list compact>
<item><prgn>gvim</prgn>: Vim con GUI (pacchetti <package>vim</package> e 
  <package>vim-gtk</package>)
<item><prgn>emacs</prgn>:  L'Unico Vero Emacs (riconosce automaticamente X). 
<item><prgn>xemacs</prgn>:  Emacs di nuova generazione (riconosce automaticamente X). 
</list>
Questi comandi  xclient accettano opzioni standard, tipo 
<tt>-fn <var>a24</var></tt>, cosa che rende la vita facile per gente più vecchia 
come me :)  Vedere <ref id="xclnt">.
</sect>

<sect id="bin-editor">Editor di salvataggio
<p>
Esistono alcuni editor che risiedono in <file>/bin</file>.  Uno di questi dovrebbe essere 
installato, per facilitare la modifica dei file quando <file>/usr</file> non è accessibile.
<p>
<list compact>
<item><package>elvis-tiny</package>: Editor minimo vi (<prgn>vi</prgn> per lanciarlo)
<item><package>nano-tiny</package>:  Editor minimo non-vi (<prgn>nano-tiny</prgn> per lanciarlo)
<item><package>nano</package>:       Editor minimo non-vi (<prgn>nano</prgn> per lanciarlo (Sarge)
<item><package>ed</package>:         Editor minimo (sempre lì, ma difficile da usare)
</list>
<p>

<sect>Emacs e Vim

<sect1>Tracce per Vim
<p>
Leggete il documento "VIM - file di aiuto principale" premendo &lt;F1&gt; mentre usate 
il programma.

<example>
&lt;F1&gt;          Aiuto
&lt;esc&gt;         Ritorno al modo normale
V              Modo Visuale
i              Modo Inserimento
:              Comandi da console
:set tw=72     Imposta larghezza testo a 72
&lt;F11&gt;         Modo copia testo
:r! date -R    Inserisce la data come da RFC-822
q<var>a</var>       Registra i tasti premuti nel registro <var>a</var>
q              Ferma la registrazione dei tasti premuti
@<var>a</var>       Esegue i comandi registrati dal registro <var>a</var>
:edit <var>foo.txt</var>  Modifica un altro file caricando <var>foo.txt</var>
:wnext         Scrive il file corrente e modifica il file successivo
</example>

<tt>q</tt> e <tt>@</tt> possono essere utilizzati per la registrazione e la
riproduzione delle macro. Per esempio, per creare una macro che inserisca delle
tag HTML in corsivo attorno ad una parola nella sede del cursore, si possono
dare i seguenti comandi: <tt>qii&lt;i&gt;^[ea&lt;/i&gt;^[q</tt> (dove
<tt>^[</tt> è il tasto ESC). Poi, digitando <tt>@i</tt> all'inizio di una
parola aggiungerà le tag &lt;i&gt; e&lt;/i&gt;.
<p>
Vedere anche <ref id="vimgpg">.

</sect1>

<sect1>Tracce per Emacs 
<p>
<example>
&lt;F1&gt;          Aiuto
&lt;F10&gt;         Menu
C-u M-! date -R     Inserisce la data come da RFC-822
</example>
</sect1>

<sect1>Lanciare l'editor
<p>
<example>
lancia l'editor:                emacs nomefile  vim nomefile
lancia un editor vi-compatibile:                vim -C
lancia un editor non vi-compatibile:            vim -N
lancia l'editor in modo compilatore di default:      emacs -q        vim -N -u NONE
</example>
</sect1>

<sect1 id="editkey">Riassunto dei comandi (Emacs e Vim)
<p>
<example>
esce:                           C-x C-c         :qa /:wq /:xa /:q!
Ritorno/modo comando:           C-g             &lt;esc&gt;
Indietro(sinistra):             C-b             h
Avanti(destra):                 C-f             l
Successivo(giù):                C-n             j
Precedente(su):                 C-p             k
Inizio riga(^):                 C-a             0
Fine riga($):                   C-e             $
Comandi multipli:               C-u nnn cmd     :count cmd
Comandi multipli:               M-numero cmd
Salva File:                     C-x C-s         :w file
Inizio buffer:                  M-&lt;          1G
Fine Buffer:                    M-&gt;           G
avanti di una pagina:           C-v             ^F
avanti di 1/2 pagina:                           ^D
avanti di una riga:                             ^E
indietro di una pagina:         M-v             ^B
indietro di 1/2 pagina:                         ^U
indietro di una riga:                           ^Y
Scorri alla pagina superiore:   M-C-v
cancella nel cursore:           C-d             x
cancella dal cursore alla fine 
della riga:                     C-k             D
iCerca in avanti:               C-s
iCerca indietro:                C-r
cerca in avanti:                C-s enter       /
cerca indietro:                 C-r enter       ?
icerca regexp:                  M-C-s
icerca indietro regexp:         M-x isearch-backward-regexp
cerca regexp:                   M-C-s enter     /
cerca indietro regexp:          M-x isearch-backward-regexp enter
                                                ?
Aiuto:                          C-h C-h         :help
Aiuto Apropos:                  C-h a
Aiuto comandi:                  C-h b           :help [key]
Aiuto Info:                     C-h i
Aiuto modo Major:               C-h m
Aiuto tutorial:                 C-h t           :help howto
Annulla:                        C-_             u
Ripeti:                         C-f             ^R
Marca la posizione del cursore: C-@             m{a-zA-Z}
Scambia Marcatura e posizione:  C-x C-x
vai al segno nel file corrente:                 '{a-z}
vai al segno in un altro file:                  '{A-Z}
copia regione (di testo):       M-w             {visual}y
elimina regione:                C-w             {visual}d
Copia e tieni il buffer:        C-y             p y
Copia e cancella il buffer:     M-y             p
Cambia una regione in maiuscolo:C-x C-u         {visual}U
Cambia una regione in minuscolo:C-x C-l         {visual}u
Inserisci carattere speciale:   C-q ottale/keystroke  
                                                ^V decimale/keystroke
sostituisci:                    M-x replace-string      :&percnt;s/aaa/bbb/g
sostituisci regexp:             M-x replace-regexp      :&percnt;s/aaa/bbb/g
trova e sostituisci:            M-&percnt;                     :&percnt;s/aaa/bbb/gc
trova e sostituisci:            M-x query-replace
trova e sostituisci regexp:     M-x query-replace-regexp
Apri file:                      C-x C-f         :r file
Salva file:                     C-x C-s         :w
Salva tutti i buffers:          C-x s           :wa
Salva come...:                  C-x C-w file    :w file
Chiede un buffer specifico:     C-x b
Elenca i buffer:                C-x C-b         :buffers
Commuta in sola lettura:        C-x C-q         :set ro
Chiede ed elimina un buffer:    C-x k
Divide lo schermo in verticale: C-x 2           :split
Divide in orizzontale:          C-x 3           :vsplit (ver. 6)
Muove all'altra finestra:       C-x o           ^Wp
Cancella la finestra corrente:  C-x 0           :q
Cancella le/l'altra finestra(e):C-x 1           ^Wo
lancia una shell sullo sfondo:  M-x compile
uccide la shell sullo sfondo:   M-x kill-compilation
lancia make                                     :make Makefile
controlla i msg di errore:      C-x`            :echo errmsg
lancia una shell e registra:    M-x shell       :!script -a tmp
...pulisce BS, ...                                :!col -b &lt;tmp &gt;record
...salva/richiama una 
registrazione:                  C-x C-w record  :r record
lancia una shell:               M-! sh          :sh
lancia un comando:              M-! cmd         :!cmd
lancia un comando ed inserisce: C-u M-! cmd     :r!cmd
lancia un filtro:               M-| file        {visual}:w file
lancia un filtro ed inserisce:  C-u M-| filter  {visual}:!filter
mostra le opzioni:                              :se[t] {option}?
riporta l'opzione al default                    :se[t] {option}&
resetta un'opzione booleana                     :se[t] no{option}
commuta un'opzioe booleana                      :se[t] inv{option}
a capo alla colonna 72                          :se tw=72
niente a capo                                   :se tw=0
autoindentazione                                :se ai
estende tabulazione                             :se et
specifica un commento (posta)                   :se comments=n:&gt;,n:\|

Lancia GDB                      M-x gdb                        
descrivi il modo GDB            C-h m                          
salta una riga                  M-s
riga successiva                 M-n
salta una istruzione (stepi)    M-i                            
Finisci lo stack frame corrente C-c C-f                        
continua                        M-c                            
up arg frames                   M-u                            
down arg frames                 M-d                            
copia un numero a partire dal punto, inseriscilo alla fine 
                                C-x &                          
Imposta una cesura              C-x SPC                        
</example>
</sect1>

<sect1>Configurare Vim 
<p>
Per utilizzare tutte le caratteristiche di vim e la sintassi
evidenziata, includete le linee seguenti in <file>~/.vimrc</file> oppure
<file>/etc/vimrc</file>:
<example>
set nocompatible
set nopaste
set pastetoggle=&lt;f11&gt;
syn on
</example>
Il modo incolla evita che l'autoindentazione interferisca con le
operazioni di taglia-e-incolla, se eseguite in terminale. E' molto di
più di un semplice ":set noai".
<p>
Vedere <ref id="vimgpg"> per l'integrazione con GnuPG.
</sect1>

<sect1>Ctags
<p>
<tt>apt-get install exuberant-ctags</tt> e lanciate <prgn>ctags</prgn> sul file
sorgente. Digitando <tt>:tag <var>function_name</var></tt> in Vim arrivate alla riga
dove inizia <var>function_name</var>. Funziona per C, C++, Java, Python e
moltri altri linguaggi.
<p>
Emacs possiede la medesima funzionalità.
</sect1>

<sect1>Convertire una schermata da sintassi-evidenziata in sorgente HTML
<p>
<tt>so \$VIMRUNTIME/syntax/2html.vim</tt> dal modo comando in Vim converte il
testo evidenziato in testo HTML. Salvate con <tt>:w file.html</tt> e
<tt>:q</tt>. Utile per codice in C, ecc.
</sect1>

<sect1>Dividere lo schermo con <prgn>vim</prgn>
<p>
<prgn>vim</prgn> può aprire più file in un ambiente con uno schermo diviso in più finestre.
Digitate <tt>:help usr_08.txt</tt> per i dettagli.
<p>
Per dividere lo schermo e mostrare file differenti, digitate al prompt di vi:
<example>
:split <var>altro-file</var>
:vsplit <var>altro-file</var>
</example>
o al prompt della shell:
<example>
$ vi -o file1.txt file2.txt   # Divide orizzontalmente
$ vi -O file1.txt file2.txt   # Divide verticalmente
</example>
risulterà un vi a molte finestre.
<example>
$ vimdiff file.txt~ file.txt         # controlla i cambiamenti recenti di file.txt
$ vimdiff file.en.sgml file.fr.sgml  # controlla i cambiamenti fra le traduzioni
$ gvimdiff file.txt~ file.txt        # in X
</example>
fornisce una buona visione con un file di backup. In SGML accoppia le tag, così 
fare una comparazione fra traduzioni è molto facile.
<p>
Movimenti speciali del cursore con i comandi CTRL-W:
<example>
CTRL-W +      ingrandisce una finestra
CTRL-W -      rimpicciolisce una finestra
CTRL-W h      va alla finestra di sinistra
CTRL-W j      va alla finestra inferiore
CTRL-W k      va alla finestra superiore
CTRL-W l      va alla finestra di destra
...
</example>
I controlli seguenti modificano lo scorrimento dello schermo:
<example>
:set scrollbind
:set noscrollbind
</example>
</sect1>


</sect>

</chapt>
