<!-- CVS revision of this document "# Revision is not used here.#"  -->
<!-- CVS revision of original english document "1.18"  -->

<chapt id="gnupg">GnuPG

<p>
Odnośniki:
<list compact>
<item><manref name="gpg" section="1">.
<item><file>&dochome;gnupg/README.gz</file>
<item><em>GNU privacy handbook</em> w
 <file>&dochome;gnupg-doc/GNU_Privacy_Handbook/</file>
 (zainstaluj pakiet <package>gnupg-doc</package>)
</list>

<sect>Instalacja GnuPG
<p>
<example>
$ gpg --gen-key
            # tworzenie nowej pary kluczy
$ gpg --gen-revoke <var>ID_użytk</var>
            # tworzenie certyfikatu unieważnienia klucza dla <var>ID_użytk</var>ownika
$ host -l pgp.net | grep www | less
            # znajdowanie serwerów kluczy
</example>
Jak na razie, dobrymi serwerami kluczy są:
<example>
keyserver wwwkeys.eu.pgp.net
keyserver wwwkeys.pgp.net
</example>
Musisz uważać, aby <strong>nie tworzyć więcej, niż dwa podklucze</strong>.
Jeśli tak zrobisz, serwery kluczy w pgp.net <strong>popsują</strong> Twój klucz.
Użyj nowszego <package>gnupg</package> (>1.2.1-2), aby obsłużyć te popsute
podklucze. Zobacz <url id="&gpg-subkeys;">.
<p>
Miej również na uwadze, że w <file>$HOME/.gnupg/options</file> można ustawić
tylko jeden serwer kluczy.
<p>
Niestety, następująca konstrukcja już nie działa:
<example>
keyserver search.keyserver.net
keyserver pgp.ai.mit.edu
</example>

</sect>

<sect>Używanie GnuPG
<p>
Obsługa plików:
<example>
$ gpg  [opcje]  <var>polecenie  [argumenty]</var>
$ gpg {--armor|-a} {--sign|-s} <var>plik</var>
            # zapisanie podpisanego pliku do pliku tekstowego <var>plik</var>.asc
$ gpg --clearsign <var>plik</var>
            # złożenie podpisu z zachowaniem czytelności tekstu
$ gpg --clearsign --not-dash-escaped <var>plik_łaty</var>
            # podpisanie z zachowaniem czytelności pliku łaty
$ gpg --verify <var>plik</var>
            # sprawdzenie podpisu <var>plik</var>u
$ gpg -o <var>plik.sig</var> {-b|--detach-sig} <var>plik</var>
            # złożenie podpisu oddzielnego od dokumentu
$ gpg --verify <var>plik.sig</var> <var>plik</var>
            # sprawdzenie oddzielonego podpisu <var>plik.sig</var>
$ gpg -o <var>plik_wynik</var> {--recipient|-r} <var>nazwa</var> {--encrypt|-e} <var>plik</var>
            # zaszyfrowanie <var>plik</var>u kluczem publicznym użytkownika o danej nazwie
$ gpg -o <var>plik_wynik</var> {--symmetric|-c} <var>plik</var>
            # szyfrowanie algorytmem symetrycznym
$ gpg -o <var>file</var> --decrypt <var>plik_szyfr</var>
            # odszyfrowanie danych z <var>plik_szyfr</var>
</example>
</sect>

<sect>Utrzymywanie GnuPG
<p>
Zarządzanie kluczami:
<example>
$ gpg --edit-key <var>ID_użytk</var>
            # „help” w celu uzyskania pomocy, tryb interaktywny
$ gpg -o <var>plik</var> --exports
            # eksport wszystkich kluczy do <var>plik</var>u
$ gpg --imports <var>plik</var>
            # import wszystkich kluczy z <var>plik</var>u
$ gpg --send-keys <var>ID_użytk</var>
            # eksport klucza o podanym <var>ID_użytk</var>ownika do serwera kluczy
$ gpg --recv-keys <var>ID_użytk</var>
            # pobieranie klucza o podanym <var>ID_użytk</var>ownika z serwera kluczy
$ gpg --list-keys <var>ID_użytk</var>
            # wypisanie kluczy o podanym <var>ID_użytk</var>ownika
$ gpg --list-sigs <var>ID_użytk</var>
            # wypisanie podpisów kluczy o podanym <var>ID_użytk</var>ownika
$ gpg --check-sigs <var>ID_użytk</var>
            # sprawdzenie podpisów na kluczach o podanym <var>ID_użytk</var>ownika
$ gpg --fingerprint <var>ID_użytk</var>
            # sprawdzenie odcisku klucza o danym <var>ID_użytk</var>ownika
$ gpg --list-sigs | grep '^sig' | grep '[User id not found]' \
  | awk '{print $2}' | sort -u | xargs gpg --recv-keys # get unknown keys
            # pobranie kluczy dla każdego nieznanego podpisu
</example>
Kod zaufania:
<example>
-         Brak przypisanego poziomu zaufania / jeszcze nie obliczony.
e         Obliczanie poziomu zaufania nie powiodło się.
q         Zbyt mało informacji do obliczeń.
n         Nie ufaj temu kluczowi.
m         Częściowo zaufany.
f         W pełni zaufany.
u         Zaufanie bezgraniczne.
</example>
Następujące polecenie eksportuje mój klucz „<var>A8061F32</var>” do wielu serwerów:
<example>
$ for xx in us es cz de dk uk ch net.uk earth.net.uk; \
$ do gpg --keyserver wwwkeys.$xx.pgp.net  --send-keys <var>A8061F32</var>; done
</example>
</sect>

<sect>Używanie GnuPG z innymi programami
<p>
<sect1>Używanie GnuPG z Muttem
<p>
Aby powstrzymać wolne GnuPG od automatycznego startowania, pozwalając
jednocześnie na użycie go przez wpisanie `<tt>S</tt>', dodaj następujący wpis do
<file>~/.muttrc</file>:
<example>
macro index S ":toggle pgp_verify_sig\n"
set pgp_verify_sig=no
</example>

<sect1 id="vimgpg">Używanie GnuPG z Vimem
<p>
Aby w sposób przezroczysty używać GnuPG, dodaj zawartość pliku <file>_vimrc</file> z
<url id="&examples;" name="katalogu z przykładami"> do <file>~/.vimrc</file>.

</chapt>
