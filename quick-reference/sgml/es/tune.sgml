<!-- CVS revision of original english document "1.113"  -->

<chapt id="tune"> Puesta a punto del sistema &debian;
<p>
<!-- XXX FIXME XXX -->
Este capítulo se basa en una más vieja versión del texto original inglés.
Comprobar por favor la versión inglesa también.

<p> Este capítulo describe solamente lo básico de la configuración del sistema
mediante interfaces basada en textos.  Como prerrequisito de este capítulo
léase <ref id="install">.  
<p>
Para aquellos interesados en la seguridad, es altamente recomendables leer
<url id="&securing-debian-howto;" name="Securing Debian Manual"> que se
también se puede encontrar en el paquete
<package>&p-securing-debian-howto;</package>.

<sect id="init-hints">Trucos para la inicialización del sistema
<p>
Véase <ref id="init"> para los fundamentos del script init de &debian;.

<sect1 id="init-defaults">Personalizando los scripts init
<p>
&debian; utiliza el sistema de scripts sys-V.  Aunque todos los scripts init
en <file>/etc/init.d/*</file> están marcados como archivos de configuración y
el administrador del sistema tiene la libertad de modificarlos, es preferible
personalizarlos editando los archivos <file>/etc/default/*</file>.
<p>
Por ejemplo, <file>/etc/init.d/rcS</file> se puede usar para personalizar los
valores predeterminados de arranque de <prgn>motd</prgn>,
<prgn>sulogin</prgn>, etc.

<sect1 id="syslogd">Personalizando el sistema de registro
<p>
El modo de registro del sistema se puede configurar usando
<file>/etc/syslog.conf</file>.  Utilice el paquete <package>colorize</package>
para dar distintos colores a los archivos de registro del sistema.  Véase
también <manref name="syslogd" section="8"> y <manref name="syslog.conf"
section="5">.
</sect1>

<sect1 id="hdtune">Optimización del acceso al hardware
<p>
Existen algunas pocas configuraciones de optimización del hardware que
&debian; deja a cargo del administrador del sistema.
<list>
<item><package>hdparm</package>
 <list compact>
<item>Optimización del acceso al disco. Muy efectivo.
<item>Peligroso. Primero debe leer <manref name="hdparm" section="8">.
<item><tt>hdparm -tT <var>/dev/hda</var></tt> to test disk access speed.
<item><tt>hdparm -c1 -d1 -u1 -m16 -A <var>/dev/hda</var></tt> para acelerar
  un sistema IDE moderno (puede resultar peligroso).
 </list>

<item><package>setcd</package>
 <list compact>
<item>Optimización del acceso a la unidad de CDs.
<item><tt>setcd -x <var>2</var></tt> para disminuir la velocidad a
<var>2</var>x.
<item>Véase <manref name="setcd" section="1">.
 </list>

<item><package>setserial</package>
 <list compact>
<item>Conjunto de herramienta para la administración del puerto serie.
 </list>

<item><package>scsitools</package>
 <list compact>
<item>Conjunto de herramientas para la administración de hardware SCSI.
 </list>

<item><package>memtest86</package>
 <list compact>
<item>Conjunto de herramientas para la administración de la memoria.
 </list>

<item><package>hwtools</package>
 <list compact>
<item>Conjunto de herramientas para la administración de hardware de bajo nivel.
  <list compact>
   <item>irqtune: modifica la prioridad del IRQ de los dispositivos para que
   aquellos que requieran de una prioridad alta y un servicio rápido lo puedan
   conseguir (por ejemplo, puertos serie, módems) Es posible incrementar el
   rendimiento de un módem/puerto serie en un factor 3X.
   <item>scanport: analiza el espacio I/O de 0x100 a 0x3ff buscando
   dispositivos ISA instalados.
   <item>inb: un pequeño programa que lee un puerto I/O y vuelca el valor en
   hexadecimal o binario.
  </list>

 </list>

<item><package>schedutils</package>
 <list compact>
<item>Utilidades de planificación de Linux.
<item>se incluyen <prgn>taskset</prgn>, <prgn>irqset</prgn>, <prgn>lsrt</prgn>, 
 y <prgn>rt</prgn>.
<item>Junto con <prgn>nice</prgn> y <prgn>renice</prgn> 
 (no incluídos), permiten el control absoluto de los parámetros de la planificación
 de procesos. 
 </list>

</list>
<p>
También resulta muy efectivo montar un sistema de archivos con la opción
noatime para incrementar el acceso de lectura a los archivos. Véase <manref
name="fstab" section="5"> y <manref name="mount" section="8">.
<p>
Algunos dispositivos se pueden poner a punto directamente mediante el kernel
de Linux por medio del sistema de archivos proc.  Véase <ref id="proc-sys">.
<p>
Existen diversas utilidades para la configuración de hardware específico en
Debian.  La mayoría de ellas tienen en cuenta los requerimientos específicos
de las PC portátiles.  Veamos algunos paquetes interesantes en Derbian: 
<list compact>
<item><package>tpconfig</package> - Programa para configurar el touch pad
<item><package>apmd</package> - Utilidades para la Administración Avanzada de
Energía (APM)
<item><package>acpi</package> - Muestra información sobre dispositivos ACPI
<item><package>acpid</package> - Utilidades para usar ACPI
<item><package>lphdisk</package> - Prepara una partición para hibernación para
Phoenix NoteBIOS
<item><package>sleepd</package> - Hace "dormir" una portátil durante su
inactividad.
<item><package>noflushd</package> - Permite disminuir la velocidad de rotación
de los discos duros ociosos
<item><package>big-cursor</package> - Cursores del ratón más grandes para X
<item><package>acme</package> - Activa las "teclas multimedias" de los
ordenadores portátiles
<item><package>tpctl</package> - Herramientas de configuración de hardware
para la IBM ThinkPad
<item><package>mwavem</package> - Soporte del módem Mwave/ACP
<item><package>toshset</package> - Acceso a la mayoría de la interfaz de
hardware de la pc portátil Toshiba
<item><package>toshutils</package> - Utilidades para la pc portátil Toshiba
<item><package>sjog</package> - Un programa para usar el "Jog Dial" de las pc
portátiles Sony Vaio
<item><package>spicctrl</package> - Programa para configurar el brillo de
fondo de la pantalla LCD de la Sony Vaio
</list>
ACPI es un estándar para la administración de la energía del sistema más nuevo
que APM.
<p>
Algunos de estos paquetes necesitan módulos especiales del kernel. En muchos
casos ya han sido incluido en las últimas funentes del mismo. En caso de
problemas, puede aplicar el último parche para el kernel por su propia
cuenta.
<sect>Control de acceso
<sect1 id="loginctrl">Control de acceso mediante PAM y login
<p>
PAM (Módulos de Autenticación Conectables, con sus siglas en inglés) proporciona
el control del acceso.  
<example>
/etc/pam.d/*             # archivos de control de PAM
/etc/pam.d/login         # archivo de control PAM para el acceso
/etc/security/*          # parámetros del módulo de PAM
/etc/securetty           # controla el acceso del superusuario en consola (login)
/etc/login.defs          # controla el comportamiento de login
</example>
<p>
Si desea acceder a consolas sin necesidad de contraseña modifique, bajo su
entera responsabilidad, el contenido del archivo <file>/etc/pam.d/login</file>
de la siguiente manera
<example>
#auth       required   pam_unix.so nullok
auth       required   pam_permit.so
</example>
Un truco similar se puede aplicar para <prgn>xdm</prgn>, <prgn>gdm</prgn>, ... , 
para conseguir una consola X sin contraseña.
<p>
Por otra parte, si desea reforzar su política de contraseñas, instale 
<package>cracklib2</package> y añada lo siguiente a su  
<file>/etc/pam.d/passwd</file>.
<example>
password required       pam_cracklib.so retry=3 minlen=6 difok=3
</example>
Para la activación de una cuenta puede ayudar una contraseña temporaria.  Para
ello, use el comando passwd con la opción <tt>-e</tt> <manref name="passwd"
section="1">.
<p>
En bash se puede configurar el número máximo de procesos con <tt>ulimit -u
1000</tt> o desde PAM con la configuración de
<file>/etc/security/limits.conf</file>.  De igual manera se pueden configurar
otros parámetros como, por ejemplo, <tt>core</tt>.  El valor inicial de
<prgn>PATH</prgn> se puede fijar mediante el archivo
<file>/etc/login.defs</file> antes de script de arranque del shell.
<p>
La documentación de PAM se encuentra en el paquete
<package>libpam-doc</package>. La Guía del Administrador de un Sistema
Linux-PAM explica la configuración de PAM, los módulos que hay disponibles,
etc. La documentación también incluye la Guía para Desarrolladores de
Aplicaciones Linux-PAM y la Guía de Desarrolladores de Módulos Linux-PAM.
</sect1>

<sect1 id="wheel">"Por qué el <prgn>su</prgn> GNU no soporta el grupo
<tt>wheel</tt>"
<p>
Esta es la famosa frase de Richard M. Stallman al final de la antigua página
info de <tt>su</tt>. No se preocupe: el <prgn>su</prgn> actual en &debian;
utiliza PAM, de modo que uno puede restringir la posibilidad de usar
<prgn>su</prgn> a cualquier grupo usando <prgn>pam_wheel.so</prgn> en
<file>/etc/pam.d/su</file>.  Lo siguiente configurará al grupo <tt>adm</tt> en
un sistema &debian; en forma equivalente al grupo BSD <tt>wheel</tt> y
permitirá a sus miembros hacer <prgn>su</prgn> sin contraseña.
<example>
# configuración anti-RMS en /etc/pam.d/su
auth       required   pam_wheel.so group=adm

# permitir a los miembros de wheel hacer su sin contraseña
auth       sufficient pam_wheel.so trust group=adm
</example>

<sect1>Significado de los distitos grupos
<p>
Algunos grupos interesantes:
<list compact>
<item>el grupo <tt>root</tt> es el grupo wheel predeterminado para <prgn>su</prgn> 
 si se usa <prgn>pam_wheel.so</prgn> sin el argumento <tt>group=</tt>. 
<item>el grupo <tt>adm</tt> puede leer los archivos de registro. 
<item>el grupo <tt>cdrom</tt> se puede usar en forma local para dar a un conjunto
      de usuarios acceso a la unidad de CD.
<item>el grupo <tt>floppy</tt> se puede usar en forma local para dar a un conjunto
      de usuarios acceso a la unidad de disquete.
<item>el grupo <tt>audio</tt> se puede usar en forma local para dar a un conjunto
      de usuarios acceso al dispositivo de audio.
<item>el grupo <tt>src</tt> administra el código fuente, incluyendo los archivos de 
      <file>/usr/src</file>. Se puede usar localmente para dar a un usuario
      la posibilidad de administrar el código fuente del sistema.
<item>el grupo <tt>staff</tt> es útil para administradores de sistemas junior, dándoles
      la posibilidad de hacer cosas en <file>/usr/local</file> y crear directorios
      en <file>/home</file>.
</list>
<p>
Para una lista completa, véase la sección "FAQ" en el <url
id="&securing-debian-howto;" name="Securing Debian Manual">, que también se
puede encontrar en el paquete <package>&p-securing-debian-howto;</package>.

<sect1 id="sudo"><prgn>sudo</prgn> &ndash; un entorno de trabajo más seguro
<p>
Utilizo <prgn>sudo</prgn> principalmente como protección contra mi propia
estupidez. Considero que usar <prgn>sudo</prgn> es una mejor alternativa que
usar el sistema siendo superusuario.  YMMV. 
<p>
Instale <prgn>sudo</prgn> y actívelo configurando
/etc/<url id="&examples;" name="sudoers">.  También consulte las posibilidades
de <tt>sudo</tt> para los grupos en <file>&dochome;sudo/OPTIONS</file>.
<p>
La configuración de ejemplo brinda a los miembros del grupo "staff" el acceso
a todos los comandos ejecutados como superusuario bajo <prgn>sudo</prgn> y
también proporciona a los miembros del grupo "src" a determinados comandos
ejecutados como superusuario bajo <prgn>sudo</prgn>.
<p>
La ventaja de <prgn>sudo</prgn> radica en que sólo requiere de la contraseña
de un usuario normal y que su actividad es monitoreada.  Esta es una buena
manera de dar cierta autoridad a un administrador principiante.
Por ejemplo:
<example>
$ sudo chown -R <var>yo_mismo</var>:<var>mi_grupo</var> .
</example>
<p>
Por supuesto, si conoce la contraseña de superusuario (como la mayoría
de los usuarios domésticos), cualquier comando se puede ejecutar como 
superusuario desde una cuenta de usuario normal:
<example>
$ su -c "shutdown -h now"
Password:
</example>
(Soy conciente que debería limitar los privilegios de la cuenta del
administrador con <prgn>sudo</prgn>.  Pero puesto que se trata de mi servidor
personal, aún no me he molestado en hacerlo)
<p>
Otro programa que permite a los usuarios normales ejecutar comandos con
privilegios de superusuario, véase el paquete <package>super</package>.
</sect1>
    
<sect1 id="tcpd">Control de accesos a los demonios
<p>
El <em>superservidor</em> de Internet, <prgn>inetd</prgn>, es ejecutado
durante el arranque por <file>/etc/rc2.d/S20inetd</file> (para el nivel de
ejecución 2), que es un enlace simbólico a <file>/etc/init.d/inetd</file>.
Básicamente, <prgn>inetd</prgn> permite ejecutar un único demonio para invocar
otros, reduciendo la carga del sistema.
<p>
Cada vez que llega la petición a un servicio, se identifica el protocolo y el
servicio mirando las bases de datos situadas en <file>/etc/protocols</file> y
<file>/etc/services</file>.  Para un servicio de internet normal,
<prgn>inetd</prgn>l consulta la base de datos <file>/etc/inetd.conf</file> o
la si el servicio se basa en Sun-RPC.

<p>
Para seguridad del sistema, asegúrese desactivar los servicios sin utilizar
del archivo <file>/etc/inetd.conf</file>.  Los servicios Sun-RPC necesitan
estar activos para NFS y otros programas basados en RPC.
<p>
A veces, <prgn>inetd</prgn> no arranca el servidor solicitado directamente
sino el programa envoltorio del demonio TCP/IP <prgn>tcpd</prgn> con el
nombre del servidor pedido como argumento en el <file>/etc/inetd.conf</file>.  
En este caso, <prgn>tcpd</prgn> ejecuta el programa servidor adecuado luego
de haber registrado la solicitud y haber realizado algunas comprobaciones
adicionales usando <file>/etc/hosts.deny</file> y <file>/etc/hosts.allow</file>.
<p>
Si tiene problemas con el acceso remoto sobre un sistema &debian; reciente,
comente la línea "ALL: PARANOID" si es que existe en el archivo 
<file>/etc/hosts.deny</file>.
<p>
Para más detalles, consulte
<manref name="inetd" section="8">,  
<manref name="inetd.conf" section="5">, 
<manref name="protocols" section="5">,  
<manref name="services" section="5">,  
<manref name="tcpd" section="8">,  
<manref name="hosts_access" section="5"> y
<manref name="hosts_options" section="5">. 
<p>
Para más información sobre Sun-RPC, véase
<manref name="rpcinfo" section="8"> , 
<manref name="portmap" section="8"> y
<file>&f-portmap;</file>.

<sect1 id="ldap">Lightweight Directory Access Protocol
<p>
Referencias:
<list compact>
<item><url id="&openldaphome;" name="OpenLDAP">
<item>OpenLDAP Admin Guide del paquete <package>openldap-guide</package>
<item>LDP: <url id="&ldap-linux-howto;" name="LDAP Linux HOWTO">
<item>LDP: <url id="&ldap-implementation-howto;" name="Implementación de LDAP HOWTO">
<item><url id="&ldap-use1;" name="OpenLDAP, uso de informes">
<item><url id="&ldap-use2;" name="Open LDAP con IMAP y Postfix">
</list>
</sect>

<sect id="cdrw">Grabadora de CDs
<p>
Las grabadoras de CDs con interfaz IDE/ATAPI se han convertido en periféricos
muy populares. Es un medio conveniente para un usuario doméstico que necesite
&lt; 640 MB de capacidad para hacer copias de respaldos o archivar documentos.
Para información más autorizada, consulte el <url id="&cd-writing-howto;"
name="CD-Writing-HOWTO"> del LDP.

<sect1>Introducción
<p>
Antes que todo, cualquier interrupción de los datos enviados a la grabadora
provocará un daño irreparable al CD. Consiga una grabadora con un búfer
tan grande como le sea posible. Si el dinero no es importante, no se moleste
con una grabadora IDE/ATAPI y adquiera una SCSI. Si tiene la posibilidad de
elegir la interfaz IDE a la cual va a conectar la grabadora, prefiera el bus
PCI antes que el ISA (tarjeta SB16, etc.).
<p>
Cuando una grabadora de CDs se conecta al canal IDE, debe utilizarse el
controlador IDE-SCSI en vez del IDE común. Asimismo, es necesario activar el
controlador genérico SCSI. Suponiendo la utilización de un kernel usado por
las distribuciones modernas (posteriores a marzo del 2001), existen dos formas
posibles de hacerlo.
</sect1>

<sect1>Primer enfoque: módulos + <prgn>lilo</prgn>
<p>
Añada la siguiente línea al <file>/etc/lilo.conf</file> si utiliza
el núcleo que distribuye Debian. Si utiliza múltiples opciones, 
lístelas separadas mediante espacios:
<example>
append="hdx=ide-scsi ignore=hdx"
</example>
Aquí la ubicación de la grabadora, a la que se accede mediante el controlador
ide-scsi, se indica mediante <tt>hdx</tt> con el siguiente significado:
<example>
hda          maestro en el primer puerto IDE
hdb          esclavo en el primer puerto IDE
hdc          maestro en el segundo puerto IDE
hdd          esclavo en el segundo puerto IDE
hde ... hdh  para una unidad en un puerto IDE externo o
             puerto IDE ATA66/100
</example>
Siendo superusuario, escriba los siguientes comandos para activar las opciones
luego de haber terminado con la configuración:
<example>
# lilo
# shutdown -h now
</example>
</sect1>

<sect1>Segundo enfoque 2: recompile el kernel
<p>
Para crear el kernel, Debian utiliza <prgn>make-kpkg</prgn>.  Use la nueva
opción <tt>--append_to_version</tt> de make-kpkg para crear múltiples imágenes
del kernel.
Veáse <ref id="kernel">.
<p>
Utilice la siguiente configuración con <tt>make menuconfig</tt>:
<list>
<item>bzImage
<item>Excluir el controlador CD IDE (no es fundamental, pero simplifica las cosas)
<item>Compilar ide-scsi y sg, o compílelos como módulos.
</list>
</sect1>

<sect1>Etapas post-configuración
<p>
El soporte para la grabadora se puede activar durante el arranque mediante
lo siguiente:
<example>
# echo ide-scsi &gt;&gt;/etc/modules
# echo sg       &gt;&gt;/etc/modules
# cd /dev; ln -sf scd0 cdrom
</example>
La activación manual se puede realizar haciendo:
<example>
# modprobe ide-scsi
# modprobe sg
</example>
Tras el arranque, puede comprobar la instalación haciendo:
<example>
$ dmesg|less
# apt-get install cdrecord
# cdrecord -scanbus
</example>
<p>
[Por Warren Dodge] A veces, pueden existir conflictos entre <tt>ide-scsi</tt>
y <tt>ide-cd</tt> si el sistema cuenta con una lectora de CD y una grabadora.
Pruebe añadir la siguiente línea a su <file>/etc/modutils/aliases</file>,
ejecute <prgn>update-modules</prgn> y vuelva a arrancar el sistema.
<example>
pre-install      ide-scsi      modprobe ide-cd
</example>
Esto hará que el controlador IDE se cargue antes que el <tt>ide-scsi</tt>. El
controlador IDE <tt>ide-cd</tt> tomará el control de la lectora de CD &mdash;
de todo lo que no se le pidió <strong>ignorar</strong>. Esto deja únicamente a
los dispositivos no tenidos en cuenta bajo el control del <tt>ide-scsi</tt>. 
</sect1>

<sect1>Imagen en CD (arrancable)
<p>
Para grabar un CD-ROM con los archivos contenidos en el
<file>directorio-objetivo/</file> como <file>imagen-cd.raw</file> (arrancable,
con formato Joliet TRANS.TBL activado; para un CD no arrancable, no incluir
las opciones <tt>-b</tt> y <tt>-c</tt>), inserte un disquete de arranque en la
primera unidad de disquetes y  haga:
<example>
# dd if=<var>/dev/fd0</var> <var>directorio-objetivo/boot.img</var> 
# mkisofs -r -V <var>volume_id</var> -b <var>boot.img</var> -c \
        <var>bootcatalog</var> -J -T -o <var>imagen-cd.raw</var>\
        <var>directorio-objetivo/</var>
</example>
<p>
Como aplicación interesante se puede crear un CD-ROM DOS de arranque.  Si
<file><var>boot.img</var></file> contiene la imagen de un disquete de arranque
DOS, el CD-ROM arrancará como si hubiese un disquete DOS en la unidad (A:).
Hacer esto con freeDOS puede ser aún más interesante.
<p>
El archivo imagen se puede inspeccionar montándolo en un dispositivo loop.
<example>
# mount -t iso9660 -o ro,loop <var>imagen-cd.raw</var> /cdrom
# cd /cdrom
# mc
# umount /cdrom
</example>
</sect1>

<sect1>Grabar un CD (R, R/W):
<p>
Primero pruebe con (suponiendo una velocidad 2x)
<example>
# nice --10 cdrecord -dummy speed=2 dev=0,0 <var>imagen</var>
</example>
Si no hay problemas, grabe el CD-R haciendo
<example>
# nice --10 cdrecord -v -eject speed=2 dev=0,0 <var>imagen</var>
</example>
O grabe un CD-RW mediante
<example>
# nice --10 cdrecord -v -eject blank=fast speed=2 dev=0,0 <var>imagen</var>
</example>
Algunas grabadoras de CD funcionan mejor con
<example>
# nice --10 cdrecord -v blank=all speed=2 dev=0,0
</example>
seguido de
<example>
# nice --10 cdrecord -v -eject speed=2 dev=0,0 <var>imagen</var>
</example>
Se necesitan dos etapas para evitar que los tiempos de espera durante la etapa de
formateo no interfieran con la etadpa de grabación.  El valor del argumento de 
<prgn>nice</prgn> puede requerir de algunos ajustes.
</sect1>

<sect1>Crear la imagen de un CD
<p>
Algunos CD-Rs y CDs comerciales tienen sectores parásitos al final que torna
imposible su copia mediante <prgn>dd</prgn> (el CD de Windows 98 es uno de
ellos).  El paquete <package>cdrecord</package> viene con el comando
<prgn>readcd</prgn>.  Utilícelo para copiar el contenido de cualquier CD en un
archivo imagen. Si se trata de un disco de datos, móntelo y use
<prgn>du</prgn> para ver su tamaño verdadero.  Divida por dos el número que se
muestra (en bloques, = 1024 bytes) para obtener el número de sectores del CD
(2048 bytes). Ejecute <prgn>readcd</prgn> con las opciones correspondientes y
utilice la imagen para grabar el CD-R/RW.
<example>
# readcd <var>target</var> <var>lun</var> <var>scsibusno</var> # elija la función 11
</example> 
En la mayoría de los casos, elija aquí los 3 parámetros de la línea de
comandos iguales a cero. A veces, el números de sectores proporcionado por
<prgn>readcd</prgn> es demasiado grande.   Utilice el valor dado por mount
para obtener mejores resultados.
<p>
It should be noted that the use of <prgn>dd</prgn> has few problems if
used on CD-ROM.  The first run of <prgn>dd</prgn> command may cause
error message and may yield a shorter disk image with the lost tail-end.
The second run of <prgn>dd</prgn> command may yield a larger disk image
with garbage data attached at the end on some systems if the data size
is not specified.  Only the second run of <prgn>dd</prgn> command with
the correct data size specified without ejecting CD after error message
seems to avoid these problems.  If the image size displayed by
<prgn>df</prgn> is <tt>46301184</tt> blocks , use the following command
twice to get right image (this is my empirical information):
<example>
# dd if=/dev/cdrom of=cd.img bs=2048 count=$((46301184/2))

</example>
</sect1>

<sect1>Imágenes de CD Debian
<p>
Para obtener la información más actual sobre los CDs de &debian;, visite
el <url id="&debian-cd;" name="sitio de CDs Debian">. 
<p>
Si posee una conexión de Internet veloz, considere realizar
la instalación a través de la red usando:
<list compact>
<item>algunas <url id="&debian-floppyinst;" name="imágenes en disquetes">.
<item>una <url id="&debian-netinst;" name="imagen de CD mínima">.
</list>
<p>
Si no posee una conexión de Internet veloz, considere adquirir los CDs 
de los <url id="&debian-venders;" name="distribuidores de CDs">.
<p>
Por favor no desperdicie ancho de banda descargando las imágenes de los CDs
estándar a menos que sea un tester de imágenes de CDs (incluso con el nuevo
método jigdo).
<p>
Una imagen de CD que vale la pena mencionar es <url id="&knoppix;"
name="KNOPPIX - Sistema de archivos Linux en CD">.  Este CD arrancará un sistema
&debian; funcional sin instalarlo en el disco duro.

<!-- old document section
$ export CVSROOT=anonymous@cvs.debian.org:/cvs/debian-boot
$ cvs co debian-cd
</example>
Following is a summary of CD image creation. 
<example>
# apt-get install debian-cd
# cd /etc/debian-cd
# vim CONF.sh
$ . CONF.sh
$ make distclean
$ make status
$ make list COMPLETE=1 SIZELIMIT1=555000000 SRCSIZELIMIT=665000000
$ make official_images
 or if you want only binary images :
$ make bin-official_images
-->
</sect1>

<sect1>Hacer una copia de respaldo del sistema en un CD-R
<p>
Para copiar los archivos de configuración y datos importantes a un CD-R, use
el script de ejemplo <url id="&examples;" name="backup">.  También véase <ref
id="diff-backup">.
</sect1>

<sect1>Grabar un CD de música a un CD-R
<p>
No he comprobado lo siguiente personalmente:
<example>
# apt-get install cdrecord cdparanoia
# cdparanoia -s -B
# cdrecord dev=0,0,0 speed=2 -v -dao -eject defpregap=1 -audio *.wav
</example>
o
<example>
# apt-get install cdrdao #sin multisesión
# cdrdao read-cd --device /dev/cdrom --paranoia-mode 3 mi_cd # leer el CD
# cdrdao write --device /dev/cdrom --speed 8 mi_cd    # grabar un CD nuevo
</example>
<prgn>cdrdao</prgn> realiza una copia verdadera (sin interrupciones, etc...)
</sect1>
</sect>

<sect id="x">El programa X
<p>
El entorno X es proporcionado por <url id="&xfree86home;" name="Xfree86">.
Existen 2 versiones del servidor X disponibles en un sistema &debian;: 
V3.x y V4.x.
Xfree86 Version 3.3 (XF3) and XFree86 Version 4.x series (XF4) both
based on X11R6 specifications by <url id="&xorghome;" name="X.ORG">.
<p>
Para los fundamentos de a <manref name="X" section="7">, al <url
id="&xwindowuser-howto;" name="XWindow-User-HOWTO"> del LDP y el <url
id="&remote-xapps-howto;" name="Remote X Apps mini-HOWTO">.  Para una guía
específica para el usuario &debian;, lea la <file>&f-x-deb-faq;</file>
proporcionada por el paquete <package>xfree86-common</package>.  Ésta contiene
un análisis autorizado e interesante de Branden Robinson de temas relacionados
con combinaciones de teclas.
<p>
<taglist>
<tag><ref id="xsrvr">
<item>un programa en la máquina local que muestra una ventana X y/o
un escritorio en el monitor del usuario (CRT, LCD) y acepta
la entrada del teclado y del ratón. 
<tag><ref id="xclnt">
<item>un programa en una máquina (local o remota) que ejecuta
una aplicación compatible con X-Window.
</taglist>
Esto invierte el significado de los términos "servidor" y "cliente" usado
en otros contextos. 
<p>
Existen distintas maneras de lograr que el "servidor X" acepte conexiones
remotas de un "cliente X":  

<list>
<item><prgn>xhost</prgn>
<list compact>
<item>el mecanismo de la lista de hosts (muy inseguro).
<item>protocolo sin cifrado (propenso a ataques de intervención de línea telefónica).
<item>En lo posible, no la utilice.
<item>Véase <ref id="xhost"> y <manref name="xhost" section="1x">.
</list>
<item><prgn>xauth</prgn>
<list compact>
<item>el mecanismo de la cookie mágica del MIT (inseguro pero mejor que
  <prgn>xhost</prgn>).
<item>protocolo sin cifrado (propenso a ataques de intervención de línea telefónica).
<item>utilícelo únicamente en una conexión local ya que requiere menos CPU
que <prgn>ssh -X</prgn>.
<item>Véase <ref id="ss-xsu"> y <manref name="xauth" section="1x">.
</list>
<item><prgn>xdm</prgn>, <prgn>wdm</prgn>, <prgn>gdm</prgn>, 
 <prgn>kdm</prgn>, ...métodos: 
<list compact>
<item>el mecanismo de la cookie mágica del MIT (inseguro al igual que
 <prgn>xauth</prgn>).
<item>Véase <manref name="xdm" section="1x"> y
 <manref name="Xsecurity" section="7"> para los fundamentos de la pantalla
 de acceso a X.
<item>Véase <manref name="wdm" section="1x">, <manref name="gdm" section="8">, 
 y <manref name="kdm.options" section="5"> para más información, si 
 se encuentran instalados.
<item>Véase <ref id="sys-v"> para saber cómo desactivar <prgn>xdm</prgn> para
tener acceso a la consola de Linux sin tener que eliminar el paquete
<prgn>xdm</prgn>.
</list>
<item><strong><prgn>ssh -X</prgn></strong>
<list compact>
<item>el mecanismo de reenvío de puertos a través de un shell seguro
      (<strong>seguro</strong>).
<item>protocolo con cifrado (una pérdida de recursos si se usa en forma local).
<item>úselo para conexiones remotas.
<item>Véase <ref id="xssh">.
</list>
</list>
Todos los métodos para conexiones remotas, excepto <prgn>ssh</prgn>, requieren que
esté activada la conexión TCP/IP en el servidor X. Véase <ref id="xtcp">.

<sect1 id="x-system">Paquetes del sistema X 
<p>
En Woody existen algunos (meta)paquetes que facilitan la instalación de X.
<taglist>
<tag><package>x-window-system-core</package>
<item>
Este metapaquete provee los componentes esenciales para ejecutar el
sistema X-Window en una estación de trabajo. Proporciona las bibliotecas X,
un servidor X <package>xserver-xfree86</package>, un conjunto de fuentes,
clientes y utilidades X básicas.

<tag><package>x-window-system</package> 
<item>
Este metapaquete proporciona todos los componentes del sistema X-window
desarrollado por el Proyecto XFree86, así como un conjunto de programas
accesorios muy populares (en particular, depende de 
<package>x-window-system-core</package>, <package>twm</package> y
<package>xdm</package>, es decir, si lo instala no necesitará el paquete
<package>x-window-system-core</package>)

<tag><package>xserver-common-v3</package> 
<item>
Archivos y utilidades comunes a todos los servidores X de XFree86 3.x (X3)

<tag><package>xserver-*</package> 
<item>
Paquetes de servidores X3 adicionales para soportar hardware que por algún
motivo no es portado por el nuevo servidor X4. Algunas tarjetas ATI mach64
antiguas no son soportadas por X4, algunas tarjetas de video se cuelgan en
forma abrupta en la versión Woody de X4, etc.  (para ver los paquetes
disponibles, haga <tt>apt-cache search xserver-|less</tt>.  Todos estos
servidores de X3 dependen del paquete <package>xserver-common-v3</package>.)
</taglist>
<p>
En la mayoría de los casos, <package>x-window-system</package> es el paquete
que se deberá instalar (si desea la consola de acceso, asegúrese de desactivar
<package>xdm</package> como se explica en <ref id="no-x-start">.)

<sect1 id="hdetect-x">Paquetes de detección de hardware para el servidor X
<p>
Para activar la detección de hardware durante la etapa de configuración
de X, instale los siguientes paquetes antes de instalar el sistema X:
<list>
<item><package>discover</package> &mdash; sistema de identificación de hardware.
<item><package>mdetect</package> &mdash; herramienta de autodetección de ratones.
<item><package>read-edid</package> &mdash; herramienta para obtener información
de los monitores PnP VESA.
</list>

<sect1 id="xsrvr">El servidor X
<p>
Véase <manref name="XFree86" section="1x"> para información sobre el servidor
X.
<p>
Invoque el servidor X desde una consola local:
<example>
$ startx -- :&lt;display&gt; <var>vtXX</var>
e.g.:
$ startx -- :1 vt8 -bpp 16
... ejecución en una terminal vt8 conectada a localhost:1 with 16 bpp mode
</example>
Los argumentos a continuación de <tt>--</tt> son para el servidor X.
<p>
Observación: al usar el script <file>~/.xserverrc</file> para personalizar
el proceso de arranque del servidor X asegúrese de usar <tt>exec</tt> con el
servidor real. Caso contrario el servidor será lento al arrancar o al salir.
Por ejemplo:
<example>
#!/bin/sh
exec /usr/bin/X11/X -dpi 100 -nolisten tcp
</example>

<sect2 id="config-x4">Configurar el servidor X4
<p>
Para volver a configurar el servidor X4,
<example>
# dpkg-reconfigure --priority=low xserver-common
# dpkg-reconfigure --priority=low xserver-xfree86
</example>
generará el archivo <file>/etc/X11/XF86Config-4</file> y configurará X usando
el script <prgn>dexconf</prgn>.

<sect2 id="config-x3">Configurar el servidor X3
<p>
Para volver a configurar el servidor X3,
<example>
# dpkg-reconfigure --priority=low xserver-common-v3
# dpkg-reconfigure --priority=low xserver-mach64
</example>
generará el archivo <file>/etc/X11/XF86Config</file> 
y configurará X usando el script <prgn>xf86config-v3</prgn>.

<sect2 id="manual-config-x">Configurar el servidor X4 en forma manual
<p>
Para añadir personalizaciones, <strong>no edite el archivo de configuración
en medio del texto</strong> (válido para X4):
<!-- FIXME for X3 -->
<example>
### BEGIN DEBCONF SECTION
[snip]
### END DEBCONF SECTION
</example>
<p>
En cambio, <strong>añada las personalizaciones antes del mismo</strong>. Por
ejemplo, para usar un dispositivo de video personalizado, añada algo similar a
lo siguiente <em>al principio</em> del archivo:
<example>
Section "Device"
  Identifier        "Custom Device"
  Driver            "ati"
  Option            "NoAccel"
EndSection

Section "Screen"
  Identifier  "Custom Screen"
  Device      "Custom Device"
  Monitor     "Generic Monitor"
  DefaultDepth 24
  Subsection "Display"
    Depth       8
    Modes       "1280x960" "1152x864" "1024x768" "800x600" "640x480"
  EndSubsection
  Subsection "Display"
    Depth       16
    Modes       "1280x960" "1152x864" "1024x768" "800x600" "640x480"
  EndSubsection
  Subsection "Display"
    Depth       24
    Modes       "1280x960" "1152x864" "1024x768" "800x600" "640x480"
  EndSubsection
EndSection

Section "ServerLayout"
    Identifier        "Custom"
    Screen            "Custom Screen"
    InputDevice       "Generic Keyboard" "CoreKeyboard"
    InputDevice       "Configured Mouse" "CorePointer"
EndSection
</example>

<sect1 id="xclnt">El cliente X 
<p>
La mayoría de los clientes X se pueden arrancar con un comando similar a éste:
<example>
client $ xterm -geometry 80x24+30+200 -fn 6x10 -display <var>hostname</var>:0 &amp;
</example>
los argumentos opcionales de la línea de comando tienen el siguiente significado:
<list>
<item><tt>-geometry
<var>ANCHO</var>x<var>ALTO</var>+<var>POSICIÓN_X</var>+<var>POSICIÓN_Y</var></tt>:
ubicación y tamaño de la ventana inicial.

<item><tt>-fn <var>FUENTE</var></tt>: fuente utilizada para mostrar el texto.
<tt><var>FUENTE</var></tt> puede ser:
<list compact>
<item>a14: fuente de tamaño normal
<item>a24: fuente de tamaño grande
<item>... (vea las fuentes disponibles mediante <tt>xlsfont</tt>.)
</list>
<item><tt>-display <var>displayname</var></tt>: el nombre del servidor X a usar. 
 <tt><var>displayname</var></tt> puede ser:
<list compact>
<item><tt><var>hostname</var>:<var>D.S</var></tt> significa pantalla <tt><var>S</var></tt>
en terminal <tt><var>D</var></tt> de la máquina <tt><var>hostname</var></tt>;
el servidor X para este terminal está escuchando en el puerto TCP 6000+D.

<item><tt><var>host</var>/unix:<var>D.S</var></tt> significa pantalla
<tt><var>S</var></tt> en el terminal <var>D</var> de la máquina
<tt><var>host</var></tt>; el servidor X para este terminal está escuchando en
el socket UNIX <file>/tmp/.X11-unix/XD</file> (por lo tanto, solamente
accesible desde <tt><var>host</var></tt>).

<item><tt><var>:D.S</var></tt> es equivalente a
<tt><var>host</var>/unix:<var>D.S</var></tt>, donde <tt><var>host</var></tt>
es el nombre de la máquina local.
</list>
</list>
<p>
El <tt><var>displayname</var></tt> predeterminado para el programa X
cliente puede configurarase mediante la variable de entorno DISPLAY.
Por ejemplo, antes de ejecutar un programa X cliente, se puede
ejecutar uno de los siguientes comandos para alcanzar este objetivo:
<example>
$ export DISPLAY=:0 
        # el predeterminado, máquina local usando la primer pantalla X
$ export DISPLAY=<var>hostname.fulldomain.name</var>:0.2
$ export DISPLAY=localhost:0
</example>
El arranque puede ser personalizado con <file>~/.xinitrc</file>. 
Por ejemplo:
<example>
xrdb -load $HOME/.Xresources
xsetroot -solid gray &amp;
xclock -g 50x50-0+0 -bw 0 &amp;
xload -g 50x50-50+0 -bw 0 &amp;
xterm -g 80x24+0+0 &amp;
xterm -g 80x24+0-0 &amp;
twm
</example>
Como se explicó en <ref id="custom-x">, esto ethis overrides todo lo que una
ejecución normal de Xsession hace cuando se arranca desde <prgn>startx</prgn>.
Utilice este enfoque sólo como último recurso.
</sect1>

<sect1 id="x-session">Sesión X
<p>
Una sesión X (servidor X + cliente X) puede arrancarse mediante:
<list compact>
<item><prgn>startx</prgn>: script para <prgn>initx</prgn> que arranca el
      cliente y el servidor X desde la consola de Linux.  Si
      <file>~/.xinitrc</file> no existe, <file>/etc/X11/Xsession</file> se
      ejecuta a través de <file>/etc/X11/xinit/xinitrc</file>.
<item><prgn>xdm</prgn>, <prgn>gdm</prgn>, <prgn>kdm</prgn> o
      <prgn>wdm</prgn>: administradores de pantalla X que arrancan el cliente
      y el servidor X y que controlan el acceso desde un interfaz gráfica
      (GUI).  
      <file>/etc/X11/Xsession</file> se ejecuta directamente.
</list>
Se puede disponer de la consola leyendo <ref id="no-x-start">.

<sect2 id="custom-x">Personalizando la sesión en X 
<p>
El script de arranque <file>/etc/X11/Xsession</file> es en realidad una
combinación de
<file>/etc/X11/Xsession.d/50xfree86-common_determine-startup</file> y
<file>/etc/X11/Xsession.d/99xfree86-common_start</file>.
<p>
La ejecución de <file>/etc/X11/Xsession</file> se ve afectada por 
<file>/etc/X11/Xsession.options</file> que consiste esencialmente en la
ejecución de un programa mediante el comando <prgn>exec</prgn>
teniendo en cuenta el siguiente orden:
<enumlist compact>
<item><file>~/.xsession</file> o <file>~/.Xsession</file>, si está definida
<item><file>/usr/bin/x-session-manager</file>,si está definida
<item><file>/usr/bin/x-window-manager</file>, si está definida
<item><file>/usr/bin/x-terminal-emulator</file>, si está definida
</enumlist>
<p>
El significado exacto de estos comandos viene determinado por el sistema de
alternativos explicado en <ref id="alternatives">.  Por ejemplo:
<example>
# update-alternatives --config x-session-manager
... o
# update-alternatives --config x-window-manager
</example>
A fin de que cualquier administrador de ventanas sea el predeterminado,
dejando instalados los administradores de sesiones GNOME y KDE reemplace
<file>/etc/X11/Xsession.d/50xfree86-common_determine-startup</file> con el
adjuntado al segundo informe de fallos dado a conocer en  <url
id="&bug-xfree;"> (espero que sea incluido pronto) y edite de la siguiente
manera el <file>/etc/X11/Xsession.options</file> para desactivar el
administrador de sesiones X:
<example>
# /etc/X11/Xsession.options
#
# opciones de configuración para /etc/X11/Xsession
# Véase Xsession.options(5) para una explicación de las opciones disponibles.
# predeterminados activados
allow-failsafe
allow-user-resources
allow-user-xsession
use-ssh-agent
# predeterminados desactivados (actívelos descomentándolos)
do-not-use-x-session-manager
#do-not-use-x-window-manager
</example>
<p>
Sin la modificación anterior, <package>gnome-session</package> y
<package>kdebase</package> son los paquetes que contienen los administradores
de sesión X. Al eliminarlos el administrador de ventanas X pasa a ser el
predeterminado. (Hmm, ¿alguna mejor idea?)
<p>
En un sistema donde <file>/etc/X11/Xsession.options</file> incluye una línea
<tt>allow-user-xsession</tt> sin ningún caracter precediéndola, cualquier
usuario podrá personalizar el comportamiento del
<file>/etc/X11/Xsession</file>.  mediante <file>~/.xsession</file> o
<file>~/.Xsession</file>
<p>
El último comando del archivo <file>~/.xsession</file> debe ser de la forma
<tt>exec <var>some-window/session-manager</var></tt> para arrancar su
administrador de sesiones/ventanas X favorito.
<p>
Un buen ejemplo de script <file>~/.xsession</file> se encuentra en
<file>&f-xsession;</file>.
<p>
Lo utilizo para definir el administrador de ventanas y el idioma para
cada cuenta de usuario. Véase <ref id="s-w-manager">, <ref id="ss-xsu"> y
<ref id="x-cjk">.
<p>
Los recursos X específicos para cada usuario se pueden almacenar en
<file>~/.Xresources</file>, mientras que los recursos X para todo el sistema
en <file>/etc/X11/Xresources/*</file>.  Véase <manref name="xrdb"
section="1x">.
<p>
En X, los teclados personalizados y las asociaciones de los botones del
ratón se pueden especificar en <file>~/.xmodmaprc</file>.  Véase
<manref name="xmodmap" section="1x">.

<sect2 id="s-w-manager">Arrancar un administrador de sesiones/ventanas determinado
<p>
Siguiendo los pasos explicados en <ref id="custom-x">, se puede activar
un administrador de ventanas/sesiones X específico para cada usuario instalando
el paquete indicado y configurando el archivo <file>~/.xsession</file> de la
siguiente manera (me gusta blackbox por su estilo simple y por ser veloz):

<list>
<item>administración de sesión X predeterminada. 
<list compact>
<item>Véase <ref id="alternatives">.
<item><tt>exec /usr/bin/x-session-manager</tt>
</list>
<item>administrador de ventanas X predeterminado. 
<list compact>
<item>See <ref id="alternatives">.
<item><tt>exec /usr/bin/x-window-manager</tt>
</list>

<item>Administrador de sesión de GNOME (consume muchos recursos)
<list compact>
<item>Instale el paquete: <package>gnome-session</package>
<item><tt>exec /usr/bin/gnome-session</tt>
</list>

<item>Administrador de sesión de KDE (consume muchos recursos)
<list compact>
<item>Instale el paquete: <package>kdebase</package> (o 
<package>kdebase3</package> para KDE3)
<item><tt>exec /usr/bin/kde2</tt>
</list>

<item>Administrador de ventanas Blackbox (consume pocos recursos).
<list compact>
<item>Instale el paquete: <package>blackbox</package>
<item><tt>exec /usr/bin/blackbox</tt>
</list>
<item>Administrador de ventanas Fluxbox (consume pocos recursos, el nuevo
blackbox)
<list compact>
<item>Install package: <package>fluxbox</package>
<item><tt>exec /usr/bin/fluxbox</tt>
</list>
<item>Adminitstrador de ventanas Xfce (Mac OS-X, aspecto similar al CDE de SUN).
<list compact>
<item>Install package: <package>xfce</package>
<item><tt>exec /usr/bin/xfwm</tt>
</list>
<item>Administrador de ventanas IceWM (consume pocos recursos, alternativa de GNOME)
<list compact>
<item>Install package: <package>icewm</package>
<item><tt>exec /usr/bin/X11/icewm</tt>
</list>
<item>Administrador de ventanas virtual FVWM2 (consume pocos recursos, aspecto
similar a Win95). 
<list compact>
<item>Instalar el paquete: <package>fvwm</package>
<item><tt>exec /usr/bin/fvwm2</tt>
</list>
<item>Administrador de ventanas Windowmaker (aspecto similar a NexT)
<list compact>
<item>Instale el paquete: <package>wmaker</package>
<item><tt>exec /usr/bin/wmaker</tt>
</list>
<item>Administrador de ventanas Enlightenment (consume muchos recursos).
<list compact>
<item>Install package: <package>enlightenment</package>
<item><tt>exec /usr/bin/enlightenment</tt>
</list>

</list>
Véase <url id="&windomanagerhome;" name="Administradores de ventanas para X">.


<sect2 id="kde-gnome">Configuración del entorno KDE/GNOME
<p>
Para configurar plenamente el entorno KDE/GNOME, resultan de utilidad
los siguiente metapaquetes:
<list>
<item>KDE: instale el paquete <package>kde</package>
<item>GNOME: instale el paquete <package>gnome</package>
</list>
Instalar estos paquetes con herramientas que tengan en cuenta los
<tt>recomendados</tt>, como <prgn>dselect</prgn> y <prgn>aptitude</prgn>,
le permitirá una elección más variada de programas que hacerlo
con <prgn>apt-get</prgn>.
<p>
Si desea ingresar al sistema por consola, asegúrese de deshabilitar el
administrador de pantallas X, como <package>kdm</package>,
<package>gdm</package> y <package>wdm</package>, que pueden ser instalados por
el sistema de dependencias, como se explica en <ref id="no-x-start">.
<p>
Si desea tener a GNOME como sistema predeterminado en vez de KDE, asegúrese de
configurar <prgn>x-session-manager</prgn> como se detalla en <ref
id="alternatives">.

<sect1 id="xtcp">Conexión TCP/IP en X
<p>
Puesto que las conexiones TCP/IP remotas sin cifrado  son propensas a ataques
de intervención de línea telefónica, la configuración predeterminada de X en
versiones recientes de &debian; viene con los sockets TCP/IP desactivados.
Para una conexión X remota piense en usar <prgn>ssh</prgn> (véase <ref
id="xssh">). 
<p>
No se recomienda el método recién explicado a menos que uno esté en un 
entorno muy seguro, detrás de un buen firewall y con usuarios confiables.
Use el siguiente comando para verificar la configuración actual de su
socket TCP/IP de su servidor X:
<example>
# find /etc/X11 -type f -print0 | xargs -0 grep nolisten
/etc/X11/xinit/xserverrc:exec /usr/bin/X11/X -dpi 100 -nolisten tcp
</example>
Eliminar <tt>-nolisten</tt> para restaurar la escucha TCP/IP en el
servidor X.
</sect1>
 
<sect1 id="xhost">Conexión X remota: <prgn>xhost</prgn>
<p>
<prgn>xhost</prgn> permite el acceso basándose en los nombres de host.  Esto
resulta ser muy inseguro. Los comandos siguientes desactivarán la verificación
del host y permitirán conexiones desde cualquier lugar si las conexiones
TCP/IP están autorizadas (véase <ref id="xtcp">):
<example>
$ xhost +
</example>
Se puede volver a habilitar la verificación del host haciendo:
<example>
$ xhost -
</example>
<p>
<prgn>xhost</prgn> no distingue entre diferentes usuarios en la máquina
remota. Además, los nombres de las máquinas (en realidad, sus direcciones)
pueden ser falseadas. 
<p>
Si se encuentra en una red que no es confiable (por ejemplo, con un acceso a
Internet mediante una línea telefónica a través de PPP) debe evitar este
método incluso si se consideran criterios más restrictivos sobre los hosts.
Véase <manref name="xhost" section="1x">.
</sect1>

<sect1 id="xssh">Conexión X remota: <prgn>ssh</prgn>
<p>
El uso de <prgn>ssh</prgn> permite una conexión segura desde un servidor X
local a una aplicación servidora remota.  
<list>
<item>en el archivo <file>/etc/ssh/sshd_config</file> de la máquina
remota. Asigne a las entradas <tt>X11Forwarding</tt> y <tt>AllowTcpForwarding</tt>
el valor <tt>yes</tt> 
<item>Arranque el servidor X en la máquina local.
<item>Abra una <prgn>xterm</prgn> en la máquina local.
<item>Ejecute <prgn>ssh</prgn> para establecer una conexión con la máquina
distante.  
<example>
nombre_local @ máquina_local $ ssh -q -X -l nombre_usuario máquina_remota.dominio
Password:
.....
</example>
<item>Ejecute una aplicación X en el sitio remoto.
<example>
nombre_usuario @ máquina_remota $ gimp &
</example>
</list>
Este método permite la visualización de la salida
del cliente X remoto como si estuviera conectado a un socket
UNIX local.
</sect1>

<sect1 id="xtermfaq"><prgn>xterm</prgn>
<p>
Aprenda todo sobre <prgn>xterm</prgn> en la dirección <url id="&xtermfaq;">.
</sect1>

<sect1 id="xresources">Base de datos de recursos de X 
<p>
Algunos programas X antiguos, como xterm, usan la base de datos de recursos de
X para configurar su apariencia.  El archivo <file>~/.Xresources</file> se
utiliza para almacenar las especificaciones de los recursos del usuario. Al
autenticarse, este archivo automáticamente se anexa a los recursos
predeterminados de X.
<p>
Veamos algunos parámetros interesantes para añadir a su archivo
<file>~/.Xresources</file>:
<example>
! Usar una fuente más legible 9x15
XTerm*font: 9x15

! Mostrar barra de desplazamiento
XTerm*scrollBar: true

! Fijar el tamño del búfer en 1000 líneas
XTerm*saveLines: 1000
</example>
Para que estas configuraciones tengan efecto inmediatamente, añádalas
a la base de datos mediante el comando:
<example>
xrdb -merge ~/.Xresources
</example>

<sect1 id="ss-xsu">Adquirir privilegios de superusuario en X
<p>
Si una aplicación gráfica mecesita ejecutarse con privilegios de superusuario,
use el siguiente procedimiento para visualizar la salida del programa en el
servidor X del usuario.  Con objeto de evitar posibles riesgos de seguridad
<strong>nunca intente iniciar un servidor X directamente desde la cuenta de
superusuario</strong>.
<p>
Inicie el servidor X como usuario normal y abra una consola
<prgn>xterm</prgn>.
Then:
<example>
$ XAUTHORITY=$HOME/.Xauthority
$ export XAUTHORITY
$ su root
Password:*****
# printtool &
</example>
Cuando utilice este truco para hacer <prgn>su</prgn> a un usuario normal,
asegúrese que el archivo <file>~/.Xauthority</file> tenga permiso de lectura
para el grupo al que pertenece dicho usuario.
<p>

<!-- this section moved up -->

Para automatizar esta secuencia de comandos, cree un archivo
<file>~/.xsession</file> desde la cuenta del usuario, que contenga las
siguientes líneas:
<example>
# Esto permite arrancar X cuando hago su para ser superusuario.
if [ -z "$XAUTHORITY" ]; then
        XAUTHORITY=$HOME/.Xauthority
        export XAUTHORITY
fi
unset XSTARTUP
# Si desea un administrador de sesiones/ventanas particular descomente
# lo siguiente y edítelo según sus necesidades.
# XSTARTUP=/usr/bin/blackbox
# Esto inicia el administrador de sesiones/ventanas de X
if [ -z "$XSTARTUP" ]; then
  if [ -x /usr/bin/x-session-manager ]; then
    XSTARTUP=x-session-manager
  elif [ -x /usr/bin/x-window-manager ]; then
    XSTARTUP=x-window-manager
  elif [ -x /usr/bin/x-terminal-emulator ]; then
    XSTARTUP=x-terminal-emulator
  fi
fi
# ejecuta el administrador de sesiones/ventanas seleccionado
exec $XSTARTUP
</example>
A continuación ejecute <prgn>su</prgn> (no <tt>su -</tt>) en una ventana
<prgn>xterm</prgn> de usuario.  A partir de ahora, es posible ejecutar
aplicaciones gráficas con privilegios de superusuario en una pantalla X de
superusuario.  Este truco funciona siempre y cuando se ejecute la
<file>/etc/X11/Xsession</file> predeterminada.  Si un usuario personaliza
<file>~/.xinit</file> o <file>~/.xsession</file>, la variable
<tt>XAUTHORITY</tt> mencionada anteriormente necesita ser inicializada de
manera similar en estos scripts.

<p>Otro método, consiste en usar <package>sudo</package> para automatizar
la secuencia de comandos:
<example>
$ sudo xterm
... o
$ sudo -H -s
</example>
En este  casp <file>/root/.bashrc</file> debe contener:
<example>
if [ $SUDO_USER ]; then
    sudo -H -u $SUDO_USER xauth extract - $DISPLAY | xauth merge -
fi
</example>
Esto funciona correctamente incluso si el directorio personal
del usuario se encuentra en una partición NFS, ya que
el superusuario no lee el archivo <file>.Xauthority</file>.
<p>
Existen también diversos paquetes específicos para este fin:
<package>kdesu</package>, <package>gksu</package>, <package>gksudo</package>,
<package>gnome-sudo</package> y <package>xsu</package>.  Se pueden usar otro
métodos para alcanzar resultados similares: crear un enlace simbólico del
<file>/root/.Xauthority</file> al correspondiente al usuario; utilizar el
script <url id="&suxhome;" name="sux">; o incluir "<tt>xauth merge
~<var>USER_RUNNING_X</var>/.Xauthority</tt>" en el script de inicialización
del root.
<p>
Véase más en la <url id="&deb-dev-su;" name="lista de correos debian-devel">.
</sect1>

<sect1 id="xfs-tt">Fuentes trueType en X
<p>
El <prgn>xfs</prgn> estándar de XFree86-4 funciona correctamente
con fuentes TrueType.  Si está usando XFree86-3 debe instalar
algún servidor de terceros como, por ejemplo,
<prgn>xfs-xtt</prgn>.
<p>
Sólo necesita asegurarse que las aplicaciones que desee usar con las fuentes
TrueType hayan sido enlazadas con libXft o libfreetype (es muy probable que no
tenga ni siquiera que preocuparse por ello si usa .debs precompilados).
<p>
Recuerde instalar las fuentes y generar los archivos
<file>fonts.{scale,dir}</file> para que puedan ser indexadas y utilizadas.
<p>
Puesto que hay pocas fuentes <strong>libres</strong>, los usuarios de &debian;
pueden instalar fuentes TrueType comerciales o shareware.  A fin de facilitar
este proceso al usuario, han sido creado algunos paquetes muy prácticos:
<list compact>
<item><package>ttf-commercial</package>
<item><package>msttcorefonts (>1.1.0)</package> (el paquete en Woody no
funciona desde el of 8/2002 debido a los cambios que experimentó el sitio web
de Microsoft)
</list>
De esta manera tendrá una buena colección de fuentes TT a expensas de
contaminar su sistema <strong>libre</strong> con fuentes propietarias.

<sect1 id="ss-browser">Navegador web (gráfico)
<p>
Existe algunos paquetes de navegadores web disponibles con el lanzamiento
de Woody : 
<list compact>
<item><package>mozilla</package> el navegador Mozilla (nuevo)
<item><package>galeon</package> navegador basado en Mozilla con una interfaz
      Gnome (nuevo)
<item><package>konqueror</package> navegador KDE
<item><package>dillo</package> navegador GTK
<item><package>amaya-gtk</package> navegador de referencia de la W3C
<item><package>amaya-lesstif</package> navegador de referencia de la W3C
<item><package>netscape-...</package> (muchos, antiguos)
<item><package>communicator-...</package> (muchos, antiguos)
<item>...
</list>
La versión de <package>mozilla</package> debe coincidir 
con la versión correspondiente de <package>galeon</package>.  Aunque difieren
en su interfaz, ambos programas conparten el mismo motor de
renderizado de HTML Gecko.
<p>
Los añadidos (plug-ins) para los navegadores tales como
<package>mozilla</package> y <package>galeon</package> se pueden activar
instalando manualmente los archivos "<tt>*.so</tt>" en el directorio de
añadidos y reiniciando el navegador.
<p>
Recursos:
<list compact>
<item>Java: instale el binario "J2SE" de <url id="&javasunhome;">.
<item>Flash: instale el binario "Macromedia Flash Player 5" de
 <url id="&flashhome;">.
<item><package>freewrl</package>: navegador VRML y añadido de Netscape
<item>...
</list>
</sect1>

<!-- CJK and X moved to bottom with different name to locale section -->

</sect>

<sect id="ssh">SSH
<p>
SSH (Secure SHell) es la manera segura de comunicarse a través de Internet.  
Una versión libre de SSH llamada OpenSSH se encuentra disponible en el paquete
&debian; <package>ssh</package>.

<sect1 id="ssh-basics">Fundamentos
<p>
Primero instale el cliente y el servidor OpenSSH.
<example>
# apt-get update && apt-get install ssh
</example>
<file>/etc/ssh/sshd_not_to_be_run</file> no debe estar presente si desea
ejecutar el servidor OpenSSH.
<p>
SSH tiene dos protocolos de autenticación:
<list>
<item>Protocolo SSH versión 1: 
 <list compact>
<item>la versión que viene con Potato admite únicamente este protocolo.
<item>métodos de autenticación disponibles:
  <list compact>
<item>RSAAuthentication: autenticación del usuario basada en una clave RSA
<item>RhostsAuthentication: autenticación basada en .rhosts 
 (insegura, desactivada)
<item>RhostsRSAAuthentication: autenticación basada en .rhosts combinada
con una clave RSA (desactivada)
<item>ChallengeResponseAuthentication: autenticación basada en 
challenge-response RSA
<item>PasswordAuthentication: autenticación basada en contraseña
  </list>
 </list>
<item>Protocolo SSH versión 2: 
 <list compact>
<item>versiones posteriores a Woody usan este protocolo como protocolo 
 principal.
<item>métodos de autenticación disponibles:
  <list compact>
<item>PubkeyAuthentication: autenticación del usuario basada en una clave pública
<item>HostbasedAuthentication: autenticación basada en<file>.rhosts</file> o
 <file>/etc/hosts.equiv</file> combinada con la autenticación de la clave
 pública de la máquina cliente (desactivada)
<item>ChallengeResponseAuthentication: autenticación basada en challenge-response
<item>PasswordAuthentication: autenticación basada en contraseña
  </list>
 </list>
</list>

<p>
Tenga cuidado con estas diferencias si está migrando hacia Woody o usando 
un sitema que no es &debian;.  
<p>
Véase <file>/usr/share/doc/ssh/README.Debian.gz</file>,
<manref name="ssh" section="1">, 
<manref name="sshd" section="8">,
<manref name="ssh-agent" section="1"> y
<manref name="ssh-keygen" section="1"> para más detalles.

<p>
Los siguientes son los archivos de configuración más importantes:
<list>
<item><file>/etc/ssh/ssh_config</file>: valores predeterminados del cliente SSH .
 Véase <manref name="ssh" section="1">.  Las entradas más importantes son:
 <list compact>
<item><tt>Host</tt>: Restricts the following declarations 
  (up to the next Host keyword) to be only for those hosts 
   that match one of the patterns given after the keyword.
<item><tt>Protocol</tt>: especifica la versión del protocolo SSH.  
 Valor predeterminado "2,1".
<item><tt>PreferredAuthentications</tt>: especifica el método de autenticación
para el cliente SSH2. Por defecto: "hostbased,publickey,keyboard-interactive,password".
<item><tt>ForwardX11</tt>: desactivado por defecto.  Se puede no tener en cuenta
 mediante la opción "<tt>-X</tt>" de la línea de comandos.
 </list>
<item><file>/etc/ssh/sshd_config</file>: valores predeterminados del servidor SSH.
 Véase <manref name="sshd" section="8">.  Las entradas más importantes son:
 <list compact>
<item><tt>ListenAddress</tt>: especifica las direcciones locales 
 que <prgn>sshd</prgn> debe escuchar. Se permiten múltiples opciones.
<item><tt>AllowTcpForwarding</tt>: desactivado por defecto.  
<item><tt>X11Forwarding</tt>: desactivado por defecto.   
 </list>
<item><file>$HOME/.ssh/authorized_keys</file>: la lista de las claves públicas
predeterminadas que los clientes usan para conectarse con la cuenta en este
host. Véase <manref name="ssh-keygen" section="1">.
<item><file>$HOME/.ssh/identity</file>: 
Véase <manref name="ssh-add" section="1">
y <manref name="ssh-agent" section="1">.
</list>

<p>
Lo siguiente iniciará una conexión <prgn>ssh</prgn> desde un cliente.
<example>
$ ssh nombre_usuario@nombre_máquina.dominio.ext
$ ssh -1 nombre_usuario@nombre_máquina.dominio.ext # Fuerza la versión 1 de SSH
$ ssh -1 -o RSAAuthentication=no -l username foo.host
    # force password on SSH1
$ ssh -o PreferredAuthentications=password -l username foo.host
    # force password on SSH2
</example>
Para el usuario, las funciones de <prgn>ssh</prgn> son mejores y más seguras que
las de <prgn>telnet</prgn> (no lo bombardearán con ^]).

</sect1>

<sect1 id="ssh-forward">Reenvío de puertos &ndash; túnel SMTP/POP3 
<p>
Para establecer un túnel para conectarse al puerto 25 del <var>servidor-remoto</var>
desde el puerto 4025 de la máquina local y al puerto 110 del
<var>servidor-remoto</var> desde el puerto 4110 de la máquina local mediante
<prgn>ssh</prgn>, ejecute lo siguiente en la máquina local:
<example>
# ssh -q -L 4025:servidor-remoto:25 4110:servidor-remoto:110 \
           nombre_usuario@servidor-remoto
</example>
Es una manera segura de conectarse a servidores SMTP/POP3 a través de Internet.
En el <file>/etc/ssh/sshd_config</file> de la máquina remota, 
asigne a la entrada <tt>AllowTcpForwarding</tt> el valor <tt>yes</tt>.
</sect1>

<sect1 id="ssh-rsa">Conectarse con pocas contraseñas
<p>
Uno puede evitar recordar la contraseña para cada sistema remoto usando
RSAAuthentication (protocolo SSH1) o PubkeyAuthentication (protocolo SSH2).  
<p>
En el <file>/etc/ssh/sshd_config</file> del sistema remoto debe figurar
"RSAAuthentication yes" o "PubkeyAuthentication yes".
<p>
A continuación genere las claves de autenticación en forma local e instale
la clave pública en el sistema remoto:
<example>
$ ssh-keygen          # RSAAuthentication: clave RSA1 para SSH1
$ cat .ssh/identity.pub | ssh user1@remote \
        "cat - &gt;&gt;.ssh/authorized_keys"
...
$ ssh-keygen -t rsa   # PubkeyAuthentication: clave RSA para SSH2
$ cat .ssh/id_rsa.pub | ssh user1@remote \
        "cat - &gt;&gt;.ssh/authorized_keys"
...
$ ssh-keygen -t dsa   # PubkeyAuthentication: clave DSA para SSH2
$ cat .ssh/id_dsa.pub | ssh user1@remote \
        "cat - &gt;&gt;.ssh/authorized_keys"
</example>
Uno puede cambiar la frase de contraseña posteriormente haciendo
"<tt>ssh-keygen -p</tt>".  Asegúrese de verificar la configuración probando la
conexión.  En caso de problemas, haga "<tt>ssh -v</tt>".
<p>
Puede añadir opciones a las entradas en <prgn>authorized_keys</prgn> para limitar los
hosts y ejecutar comandos específicos. Véase <manref name="sshd" section="8"> para más
detalles.
<p>
Observe que SSH2 realiza una autenticación del tipo
<tt>HostbasedAuthentication</tt>.  Para que esto funcione, debe asignar a la
entrada <tt>HostbasedAuthentication</tt> el valor <tt>yes</tt> tanto en el
<file>/etc/ssh/sshd_config</file> de la máquina servidor como en el
<file>/etc/ssh/ssh_config</file> o el <file>$HOME/.ssh/config</file> de la
máquina cliente.
</sect1>

<sect1 id="ssh-client">Otro clientes SSH
<p>
Existen algunos clientes SSH libres disponibles para plataformas que no son UNIX.
<taglist>
<tag>Windows
<item><url id="&puttyhome;" name="puTTY"> (GPL)
<tag>Windows (cygwin)
<item>SSH en <url id="&cygwinhome;" name="cygwin"> (GPL)
<tag>Macintosh Clásico
<item><url id="&macsshhome;" name="macSSH"> (GPL) [Obsérvese que Mac OS X
  incluye OpenSSH; utilice <tt>ssh</tt> en el terminal]
</taglist>
Recurra también al <url id="&sfdochome;" name="sitio de documentación de SourceForge.net">: 
"6. CVS Instructions".

<sect1 id="ssh-agent">Agente SSH 
<p>
Resulta más seguro proteger su clave de autenticación SSH con una frase de
contraseña. Si no ha sido configurada, use <tt>ssh-keygen -p</tt> 
para hacerlo.
<p>
Ubique su clave pública (por ejemplo, <file>~/.ssh/id_rsa.pub</file>) 
en el  <file>~/.ssh/authorized_keys</file> de una máquina remota usando la
conexión basada en contraseñas como se explica en
<ref id="ssh-rsa">.
<example>
$ ssh-agent bash # o ejecute en cambio el programa zsh/tcsh/pdksh.
$ ssh-add ~/.ssh/id_rsa
Enter passphrase for /home/osamu/.ssh/id_rsa:
Identity added: /home/osamu/.ssh/id_rsa (/home/osamu/.ssh/id_rsa)
$ scp <var>foo</var> <var>user@remote.host:foo</var>
 ... de ahora en adelante no se necesita frase de contraseña :-)
$^D
 ... terminating ssh-agent session
</example>
Para el servidor X, los scripts de arranque normales de &debian;
ejecutan al <prgn>ssh-agent</prgn> como proceso padre.  Por lo tanto, necesitará
ejecutar <prgn>ssh-add</prgn> una sola vez.
<p>
Para más información , consulte <manref name="ssh-agent" section="1"> y
<manref name="ssh-add" section="1">.
</sect1>

<sect1 id="ssh-trouble">Resolución de problemas
<p>
Si tiene problemas, controle los permisos de los archivos de configuración
y ejecute <prgn>ssh</prgn> con la opción "<tt>-v</tt>".
<p>
Utilice la opción "<tt>-P</tt>" si no es superusuario y tiene problemas con
un firewall; esto evita el uso de los puertos 1&ndash;1023 del servidor.
<p>
Si las conexiones <prgn>ssh</prgn> con un sitio remoto dejan de funcionar
repentinamente, puede ser debido a modificaciones hechas por el administrador
de sistema, muy probablemente debido a un cambio de <prgn>host_key</prgn>
durante el mantenimiento del sistema.  Tras asegurarse que este es el caso y
que nadie está haciéndose pasar por la máquina remota mediante algún artilugio
ingenioso, es posible recuperar la conexión eliminando la entrada
<prgn>host_key</prgn> del archivo <file>$HOME/.ssh/known_hosts</file> de la
máquina local.
</sect1>
</sect>
<sect id="mail">Programas de correo
<p>
La configuración del correo comprende tres partes:
<list>
<item>un agente de transferencia de correo (MTA): <prgn>exim</prgn>
<item>utilidades de correo: <prgn>procmail</prgn>, <prgn>fetchmail</prgn>,
<prgn>mailx</prgn>, ...
<item>agente de usuario de correo (MUA): <prgn>mutt</prgn>,
<prgn>emacs</prgn>+<prgn>gnus</prgn>
</list>

<sect1 id="mta">Agente de transporte de correo (MTAs)
<p>
Para un MTA con un sinnúmero de posibilidades, utilice
<package>exim</package>. Referencias:
<list compact>
<item>paquetes <package>exim-doc</package> y <package>exim-doc-html</package>
<item><url id="&eximhome;">
</list>
Si le preocupa el tema de la seguridad, el único MTA alternativo razonable es
<package>postfix</package>.  Tanto <package>sendmail</package> como
<package>qmail</package> se encuentran disponibles como paquetes &debian; pero
no se recomiendan. 
<p>
Si no necesita de la función de reenvío del MTA como en el caso de un sistema
satélite como puede ser una PC portátil, considere usar uno de estos paquetes
pequeñosl:
<list compact>
<item><prgn>ssmtp</prgn>: necesita una conexión SMTP y permite alias, o
<item><prgn>nullmailer</prgn>: no permite alias.
</list>
Por el momento, considero a que <prgn>exim</prgn> es más conveniente incluso para mi
estación de trabajo que es una PC portátil..
<p>
Necesitará eliminar <prgn>exim</prgn> para la instalación de estos paquetes
que entran en conflicto:
<example>
# dpkg -P --force-depends exim
# apt-get install nullmailer         # o ssmtp
</example> 

<sect2>Configuración básica de Exim
<p>
Para usar <prgn>exim</prgn> como MTA, configure lo siguiente:
<example>
/etc/exim/exim.conf     "eximconfig" para crearlo o editarlo
/etc/inetd.conf          descomente smtp para ejecutar exim como demonio
/etc/email-addresses     edítelo si su nombre de usuario y máquina no es una dirección
                         de correo válida en Internet
verifique los filtros usando exim -brw, -bf, -bF, -bV, ... etc.
</example>

<sect2 id="addr-catchall">Direcciones de correo electrónico inexistentes (Exim)
<p>
En la parte DIRECTORS del archivo <file>/etc/exim/exim.conf</file> (Woody o
posterior), añada una directiva "catchall" al final (a continuación de
localuser: director) que corresponda a todas las direcciones que la directiva
anterior no pudo resolver (por Miquel van Smoorenburg):
<example>
catchall:
  driver = smartuser
    new_address = <var>webmaster@mi_dominio.com</var>
</example>
<p>
Si desea una receta más detallada para cada dominio virtual, 
añada lo siguiente al final del archivo <file>/etc/exim/exim.conf</file> 
(para mí, no muy probado):
<example>
*@su_dominio.com ${lookup{$1}lsearch*{/etc/email-addresses} \
        {$value}fail} T
</example>
y añada una entrada "*" al <file>/etc/email-addresses</file>.
</sect2>

<sect2 id="addr-rewrite">Reescritura selectiva de direcciones del correo saliente (Exim)
<p>
<!-- Derrick 'dman' Hudson dman@dman.ddts.net -->
En <prgn>exim</prgn> la reescritura  selectiva de direcciones del correo
saliente para que los encabezados "From:" se muestren correctamente se puede
realizar modificando el final del archivo <file>/etc/exim/exim.conf</file>:
<example>
*@host1.algo.dyndns.org \
  "${if eq {${lookup{$1}lsearch{/etc/passwd}{1}{0}}} {1}  \
   {$0}{$1@algo.dyndns.org}}"  frFs
</example>
Esto reescribe todas las direcciones coincidentes con <tt>*@host1.algo.dyndns.org</tt>.
<enumlist>
<item>busca en <file>/etc/password</file> para ver si la parte local ($1)
   es un usuario local o no.
<item>si se trata de un usuario local, reescribe la dirección con lo mismo que
   estaba en primer lugar ($0).
<item>si no se trata de un usuario local, reescribe la parte del dominio.
</enumlist>

<sect2>Autenticación SMTP con Exim
<p>
Algunos servicios SMTP tales como yahoo.com requieren de autenticación SMTP.
Configure <file>/etc/exim/exim.conf</file> de la siguiente manera:
<example>
remote_smtp:
  driver = smtp
  authenticate_hosts = smtp.mail.yahoo.com
...

smarthost:
  driver = domainlist
  transport = remote_smtp
  route_list = "* smtp.mail.yahoo.com bydns_a"
...

plain:
  driver = plaintext
  public_name = PLAIN
  client_send = "^cmatheson3^esta_es_mi_contraseña"
</example>
No se olvide entrecomillar la última líneas.

<sect1 id="fetchmail">Utilidad de correo (Fetchmail)
<p>
<prgn>fetchmail</prgn> se ejecuta en modo demonio para transferir los mensajes de
correo de una cuenta POP3 de un ISP al sistema de correo local.  Configure:
<example>
/etc/init.d/fetchmail   
/etc/rc?.d/???fetchmail ejecute update-rc.d fetchmail default priority 30
/etc/fetchmailrc        archivo de configuración (chown 600)
</example>
<p>
La información para arrancar fetchmail como demonio desde un script de
<prgn>init.d</prgn> en Potato es confusa (Woody corrigió esta situación).
Véase los archivos de ejemplo <file>/etc/init.d/fetchmail</file> y
<file>/etc/fetchmailrc</file> en los <url id="&examples;" name="scripts de
ejemplo">.
<p>
Si los encabezados de sus mensajes de correo están contaminados con ^M debido
al programa de correo de su ISP, añada "stripcr" a sus opciones en
<file>$HOME/.fetchmailrc</file>:
<example>
options fetchall no keep stripcr
</example>
</sect1>

<sect1 id="procmail">Utilidad de correo (Procmail)
<p>
<prgn>procmail</prgn> es un programa de filtrado y distribución de correo
local. Se necesita crear un <file>$HOME/.procmailrc</file> para cada cuenta
que se utiliza. Ejemplo:
<url id="&examples;" name="_procmailrc">
</sect1>

<sect1>Agente de usuario de correo (Mutt)
<p>
Utilice <prgn>mutt</prgn> como agente de usuario de correo (MUA) en
combinación con <prgn>vim</prgn>.
Personalícelo mediante <file>~/.muttrc</file>; por ejemplo:

<example>
# use el modo visual y "gq" para reformatear citas
set editor="vim -c 'set tw=72 et ft=mail'"
#
# selección de encabezados tomada del manual (Sven's Draconian header weeding)
#
ignore *
unignore from: date subject to cc
unignore user-agent x-mailer
hdr_order from subject to cc date user-agent x-mailer
auto_view application/msword
....
</example>
<p>
Añada lo siguiente al <file>/etc/mailcap</file> o
<file>$HOME/.mailcap</file> para visualizar correo en HTML y documentos
adjuntos en MS Word:
<example>
text/html; lynx -force_html &percnt;s; needsterminal;
application/msword; /usr/bin/antiword '&percnt;s'; copiousoutput;
description="Microsoft Word Text"; nametemplate=&percnt;s.doc
</example>

</sect1>

</sect>

<sect id="l10n">Localización y soporte de idiomas
<p>
&debian; se encuentra internacionalizado y admite el uso de un número
creciente de idiomas y convenciones de uso local. Las siguientes
subseccines discuten la <strong>localización</strong>, es decir,
el proceso de personalización de un entorno de trabajo para permitir
la entrada y salida de el/los idioma(s) elegido(s), convenciones para 
las fechas, formatos numéricos y monetarios y otros aspectos de un 
sistema que difiere de región en región.

<sect1 id="languages">Personalización básica
<p>
Existen algunos aspectos de la personalización para la localización y el
soporte de un idioma.

<sect2 id="keyboard">Teclado
<p>
&debian; se distribuye con los mapas de caracteres de casi dos docenas de
teclados. En Woody, el teclado se reconfigura así:

<list compact>
<item><tt>dpkg-reconfigure --priority=low console-data # consola</tt>
<item><tt>dpkg-reconfigure --priority=low xserver-xfree86   # X4</tt>
<item><tt>dpkg-reconfigure --priority=low xserver-common-v3 # X3</tt>
</list>
</sect2>

<sect2 id="data-stream">Datos
<p>
    La gran mayoría de los paquetes Debian soporta el manejo de datos 
    en caracteres no US-ASCII a través de la variable de entorno
    LC_CTYPE brindada por la tecnología <strong>locale</strong> de glibc 
   
    <list compact>
    <item>en 8-bits puro: prácticamente todos los programas
    <item>otros conjuntos de caracteres latinos (por ejemplo ISO-8859-1 o
          ISO-8859-2): la mayoría de los programas
    <item>idiomas de múltiples bytes tales como el chino, el japonés o el
         coreano: muchas aplicaciones recientes
    </list>
</sect2>

<sect2 id="display">Visualización
<p>
X puede mostrar cualquier codificación -incluyendo UTF-8- y soporta todas las
fuentes. La lista incluye no sólo las fuentes de 8 bits sino las de 16 bits
que aparecen en el idioma chino, japonés o coreano. El método de entrada de
los caracteres de múltiples bytes es soportado por el mecanismo XIM.   
Véase <ref id="x-cjk">.
<p>
La visualización del código japonés EUC se encuentra también disponible en la
consola gráfica (S)VGA mediante el paquete <package>kon2</package>. Existe una
terminal alternativa nueva en japonés llamada <package>jfbterm</package> que
usa la consola FB. En estos entornos de consola, la aplicación debe
proporcionar el método de entrada del japonés.  Utilice el paquete
<package>egg</package> para el paquete Emacs y el paquete
<package>jvim</package> para el entorno Vim.
</sect2>

<sect2 id="translation">Traducción
<p>
    Existen traducciones para diversos mensajes y documentos que se muestran
    en un sistema &debian;, como mensajes de errores, salida estándar de
    programas, menús y páginas del manual. Actualmente, hay soporte para las
    páginas del manual en alemán, español, finlandés, francés, italiano,
    japonés, coreano y polaco proporcionados por los paquetes
    <tt>manpages-<var>LANG</var></tt> (donde  <var>LANG</var> son dos letras
    ISO del código del país.  Utilice <tt>apt-cache search manpages-|less</tt>
    para obtener la lista de manuales unix disponibles)
    <p>
    Para acceder a la página de un manual NLS, el usuario debe configurar la
    variable de entorno LC_MESSAGES apropiadamente. Por ejemplo, para las
    páginas del manual en el idioma italiano,  LC_MESSAGES debe ser igual a
    <tt>it</tt>.  El programa <prgn/man/ buscará entonces las páginas del
    manual en italiano en <file>/usr/share/man/it/</file>.
</sect2>
</sect1>

<sect1 id="locales">Locales
<p>
Debian soporta la tecnología <strong>locale</strong>.  Locale es un mecanismo
que permite a los programas brindar una salida adecuada y una funcionalidad
conforme a las convenciones locales tales como el conjunto de caracteres, el
formato del tiempo y de la fecha, los símbolos monetarios, etc.
Utiliza las variables de entorno para determinar el comportamiento apropiado. Por
ejemplo, suponiendo que tiene instalado en su sistema tanto el local 
para el francés como para el inglés americano,  los mensajes de error de varios
programas se pueden mostran en uno u otro idioma:
<example>
$ LANG="en_US" cat foo
cat: foo: No such file or directory
$ LANG="fr_FR" cat foo
cat: foo: Aucun fichier ou répertoire de ce type
</example>
Glibc brinda soporte a esta funcionalidad.  Véase
<manref name="locale" section="7">.

<sect1 id="activate-locales">Activar el soporte de locales
<p>
&debian;  <strong>no</strong> viene con todos los locales disponibles
precompilados. Vaya a <file>/usr/lib/locale</file> para ver qué locales 
(además del predeterminado "C") han sido compilados para su sistema. Si no 
encuentra el que necesita, tiene dos opciones:
<list compact>
 <item>Editar el <file>/etc/locale.gen</file> para añadir el local que
   necesita y luego ejecutar <prgn>locale-gen</prgn> siendo superusuario
   para compilarlo. Véase <manref name="locale-gen" section="8"> y las páginas
   del manual listadas en su "VER TAMBIÉN".
 <item>Ejecute <tt>dpkg-reconfigure locales</tt> para volver a configurar el
   paquete <package>locales</package>. Al
   hacerlo aparecerá una interfaz debconf para que pueda elegir los locales y
   así compilarlos.
</list>

<sect1 id="env-locale">Activar un local determinado
<p>
Las siguientes variables de entorno se evalúan en el siguiente orden para
proporcionar a los programas los valores de un local determinado:
<enumlist>
<item>LANGUAGE: esta variable de entorno consiste en una lista de locales
      separados por dos puntos en orden de prioridad. Es utilizado sólo si el
      local POSIX tiene un valor diferente de "C" [en Woody; en Potato
      tiene siempre prioridad sobre el local POSIX]. (extensión GNU)
<item>LC_ALL: si no es nulo, su valor se utiliza para todas las categorías del
      local. (POSIX.1) Generalmente "" (nulo).
<item>LC_*: si no es nulo, su valor se utiliza para la categoría
      correspondiente (POSIX.1).  Generalmente "C".
<p>
      Las variables LC_* son las siguientes:
<list compact>
<item>LC_CTYPE: juego de caracteres.
<item>LC_COLLATE: ordenación del alfabeto.
<item>LC_TIME: formatos del tiempo y fechas.
<item>LC_NUMERIC: formatos numéricos no monetarios.
<item>LC_MONETARY: formatos monetarios.
<item>LC_MESSAGES: formatos de los mensajes informativos, de diagnóstico y
                   respuestas interactivas.
<item>LC_PAPER: tamaño del papel.
<item>LC_NAME: formatos de los nombres
<item>LC_ADDRESS: formatos de las direcciones e información sobre lugares.
<item>LC_TELEPHONE: formatos de los números telefónicos.
<item>LC_MEASUREMENT: unidades de medida (sistema métrico u otro).
<item>LC_IDENTIFICATION: metadatos referente a información del local.
 </list>
<item>LANG: si es no nulo y LC_ALL está indefinido, el valor se utiliza para
      todas las categorías LC_* si valores definidos. (POSIX.1) Generalmente
      "C".
</enumlist>
Obsérvese que algunas aplicaciones (por ejemplo, Netscape 4) ignora los
valores de LC_*.
<p>
El programa <prgn>locale</prgn> pude mostrar la configuración local activa y
los locales disponibles; véase  <manref name="locale" section="1">.
(OBSERVACIÓN: <tt>locale -a</tt> lista todos los locales que su sistema
reconoce; eso <em>no</em> significa que la totalidad de ellos hayan sido
compilados. Véase <ref id="activate-locales">.)

<sect1 id="ISO-locale">Formato de la fecha del local ISO 8601 
<p>
El soporte de local para el estándar internacional de la fecha
<tt>yyyy-mm-dd</tt> (formato de fecha ISO 8601) es proporcionado por el local
denominado <tt>en_DK</tt>, &mdash; <strong>Inglés en Dinamarca</strong> lo
cual es una broma :-) Parece ser que sólo funciona en la consola para
<prgn>ls</prgn>.

<!-- beyond locale moved to below -->

<sect1 id="iso-8859-1">Ejemplo para los Estados Unidos (ISO-8859-1)
<p>
Añada las siguientes líneas a su <file>~/.bash_profile</file>:
<example>
LC_CTYPE=en_US.ISO-8859-1
export LC_CTYPE
</example>

<sect1 id="france">Ejemplo para Francia con el signo euro (ISO-8859-15)
<p>
Añada las siguientes líneas a su <file>~/.bash_profile</file>:
<example>
LANG=fr_FR@euro
export LANG
LC_CTYPE=fr_FR@euro
export LC_CTYPE
</example>
<p>
Configure el teclado francés "AZERTY" como se explica en <ref id="keyboard">.
y añada las páginas del manual en francés instalando
<package>manpages-fr</package>.  Alt-derecho en el teclado estadounidense se
llama al Alt-Gr en Europa.  Pulsándola simultáneamente junto con otras teclas
se obtienen numerosos caracteres acentuados, etc. Por ejemplo, Alt-Gr+E da el
signo euro.
<p>
La mayoría de las lenguas europeas occidentales se pueden configurar de una
manera similar.
<p>
Véase <url id="&debian-euro-support;" name="Debian Euro HOWTO"> para añadir
soporte para el nuevo signo monetario y  
<url id="&debian-fr-howto;" name="Utilizar y configurar Debian para el idioma
francés"> para más detalles en francés.

<sect1 id="x-cjk">Ejemplo para un sistema bilingüe (EUC japonés e ISO-8859-1)
<p>
Configuremos un sistema bilingüe: ja_JP.eucJP (EUC japonés, entorno
tradicional japonés para UNIX) en X con mensajes en inglés y fecha tipo ISO y 
en_US.ISO-8859-1 (ASCII con soporte de la mayoría de los caracteres con acento) 
en la consola Linux.
<list>

 <item>añada el soporte del local para el japonés ja_JP.eucJP usando el método
 descripto en <ref id="l10n">.

 <item>instale el sistema de conversión y el diccionario Kana-a-Kanji:
  <list compact>
  <item><package>canna</package> &mdash; servidor local (licencia gratuita) o
  <item><package>freewnn-jserver</package> &mdash; servidor extensible de red 
   (Dominio Público)
  </list>

 <item>instale el sistema de entrada para el japonés:
  <list compact>
  <item><package>kinput2-canna</package> &mdash; para X o
  <item><package>kinput2-canna-wnn</package> &mdash; para X y
  <item><package>egg</package> &mdash; que funciona directamente con Emacsen
  incluso en consola (opcional)
  </list>

 <item>terminal compatible con el japonés:
  <list compact>
  <item><package>kterm</package> &mdash; X (clásico),
  <item><package>mlterm</package> &mdash; X (muy bueno, con tamaño de fuente
  variable) y 
  </list>

 <item>agregue todos los paquetes de fuentes japonesas.
 
 <item>Configure como se explica en <ref id="custom-x">. Esto permite al
 usuario utilizar un entorno X específico independiente de los métodos de
 arranque de X (<prgn>startx</prgn>, <prgn>xdm</prgn>, ...)
  
 <item>cree <file>~/.xsession</file> que configura el entorno X del usuario
 específico:

<example>
#!/bin/sh
# This makes X work when I su to root.
if [ -z "$XAUTHORITY" ]; then
        XAUTHORITY=$HOME/.Xauthority
        export XAUTHORITY
fi

# local japonés predeterminado, local C en caso de problemas
# export LANG=ja_JP.eucJP
# asegúrese de sobreescribir en_US.ISO-8859-1 usado en consola
# export LC_CTYPE=ja_JP.eucJP
# quiero los mensajes en inglés ASCII :-)
export LC_MESSAGES=C
# activar método de entrada
kinput2 &        
XMODIFIERS=@im=kinput2
export XMODIFIERS
# administrador de ventanas blackbox (consume pocos recursos)
exec /usr/bin/blackbox
</example>

 <item>agregar las siguientes líneas al <file>~/.bashrc</file>:
<example>
# Change language environment depending on the console program
# X-shells only execute .bashrc (They are not login shell)
# General environment for X is set by .xsession
if [ $TERM = kterm ] || [ $TERM = mlterm ]; then
        unset LC_ALL
        export LANG=C
        #export LANG=ja_JP.eucJP
# para mostrar fecha ISO en formato yyyy-mm-dd date display más natural para
# los japoneses :-)
        export LC_TIME=en_DK.ISO-8859-1
        export LC_MESSAGES=C
        export LANGUAGE=ja_JP.eucJP:en_US.ISO-8859-1:C
        export LC_CTYPE=ja_JP.eucJP
else
        unset LC_ALL
        export LANG=C
        export LC_TIME=en_DK.ISO-8859-1
        export LANGUAGE=en_US.ISO-8859-1:C
        export LC_CTYPE=en_US.ISO-8859-1
fi
</example>

 <item>añada las siguientes líneas a su <file>~/.muttrc</file>:
<example>
# El soporte UTF-8 no es popular en el entrono EMACS japonés
# La codificación de 7 bits de la iso-2022-jp resulta ser más fácil para todo
# el mundo
# orden predeterminado codificación = us-ascii --&gt; iso-8859-1 --&gt; utf-8
#set send_charset="us-ascii:iso-8859-1:utf-8"
#set allow_8bit=yes
set send_charset="us-ascii:iso-8859-1:iso-2022-jp"
set allow_8bit=no
</example>
 <item>activar XIM <prgn>kinput2</prgn> para las aplicaciones X
  <list compact>
  <item>añada <tt>*inputMethod: kinput2</tt> a su archivo de recursos X 
  <file>.~/Xresources</file>  (a primera vista Debian lo tiene en cuenta
  automáticamente).
  <item>Algunas aplicaciones (como <prgn>mlterm</prgn>) también permiten
  configurar el <tt>*inputMethod:</tt> y otra información en forma dinámica en
  tiempo de ejecución (presione <strong>Ctrl-tercer-botón-ratón</strong> en
  <prgn>mlterm</prgn>).
  </list>
 <item>arranque X escribiendo <tt>startx</tt> o desde un administrador de
 pantalla (xdm, gdm, kdm, wdm, ...)
 <item>arranque una aplicación compatible con el japonés: 
  VIM6, (x)emacs21, mc-4.5, mutt-1.4, ...
  (Parece ser que Emacs es la plataforma más popular, aunque personalmente no
  la utilizo)
 <item>presione "<strong>Mayús+Espacio</strong>" para activar/desactivar la
 entrada de caracteres japoneses.
</list>
Véase también las  <url id="&suse-cjk;" name="páginas de SuSE para CJK">.

<sect1 id="x-utf-8">Ejemplo de UTF-8 en X
<p>
Lo necesitará todo el mundo en un futuro.  
Véase <url id="&unicode-howto;" name="The Unicode HOWTO">.

<sect1 id="fb-utf-8">Ejemplo de UTF-8 en una consola FB
<p>
El soporte UTF-8 para la consola FB es proporcionada por <package>bterm</package>
utilizado en  <package>debian-installer</package>.

<sect1 id="beyond-locale">Más allá de los locales
<p>
Cuando vaya a configurar por primera vez un <strong>entorno de idioma 
</strong>, por favor considere usar <prgn>tasksel</prgn> o
<prgn>aptitude</prgn> para averiguar qué paquetes han sido seleccionados al
elegir la tarea correspondiente a dicho entorno.
La elección del idioma es útil incluso para la configuración de un entorno
multilingüe. Si encuentra problemas de dependencia durante la instalación en
su sistema configurado, evite instalar los programas que causan conflicto.
Puede recurrir a <prgn>update-alternative</prgn> para recuperar el estado
original de algunos comandos ya que los nuevos instalados pueden tener una
prioridad mayor sobre los ya existentes.
<p>
La gran mayoría de los programas usan glibc 2.2 y en gran parte están
internacionalizados.  Por lo tanto versiones localizadas tales como
<prgn>jvim</prgn> para VIM puede que no sean necesarias y su funcionalidad es
ofrecida por la versión 6.0 para X de <prgn>vim</prgn>.  En realidad, aún es
difícil de usar.  Puesto que <prgn>jvim</prgn> posee una versión compilada con
soporte nativo de caracteres japoneses (<prgn>canna</prgn>) incluso en consola
y soluciona diversos problemas específicos del japonés  puede que aún la
quiera usar :-)
<p>
Puede que se necesite configurar los programas más allá de la configuración
del <tt>local</tt> para lograr un entorno de trabajo agradable.  El paquete
<package>language-env</package> y su comando <prgn>set-language-env</prgn>
facilita notablemente este proceso.
<p>
Asimismo consulte el documento sobre internalización <url id="&intro-i18n;" 
name="Introducción a la i18n">. Está dirigido a los desarrolladores pero también
resulta útil para los administradores de sistemas.
</sect1>

</sect>
</chapt>

