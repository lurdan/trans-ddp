<!-- CVS revision of this document "# Revision is not used here.#"  -->
<!-- CVS revision of original english document "1.18"  -->
<chapt id="gnupg">GnuPG

<p>
Références&nbsp;:
<list compact>
<item><manref name="gpg" section="1">.
<item><file>&dochome;gnupg/README.gz</file>
<item><em>Manuel de GNU Privacy</em> dans
<file>&dochome;gnupg-doc/GNU_Privacy_Handbook/</file> (installez le paquet
<package>gnupg-doc</package>)
</list>

<sect>Installer GnuPG
<p>
<example>
# gpg --gen-key                   # génère une nouvelle clé
# gpg --gen-revoke <var>my_user_ID</var>     # génère une clé de révocation
                                    pour <var>my_user_ID</var>
# host -l pgp.net | grep www|less # cherche les serveurs de clés pgp
</example>
Aujourd'hui, les bons serveurs de clés sont&nbsp;:
<example>
keyserver wwwkeys.eu.pgp.net
keyserver wwwkeys.pgp.net
</example>
Il faut faire attention de <strong>ne pas créer plus de deux
sous-clés</strong>. Si vous le faites, les serveurs de clés de pgp.net vont
<strong>corrompre</strong> votre clé. Utilisez un paquet
<package>gnupg</package> récent (>1.2.1-2) pour gérer ces sous-clés
corrompues. Voir <url id="&gpg-subkeys;">.
<p>
De plus, seul un serveur de clé peut être spécifié dans
<file>$HOME/.gnupg/options</file>.
<p>
Malheureusement, les serveurs suivants ne fonctionnent plus&nbsp;:
<example>
keyserver search.keyserver.net
keyserver pgp.ai.mit.edu
</example>

</sect>

<sect>Utiliser GnuPG
<p>
Gestion des fichiers&nbsp;:
<example>
$ gpg  [options]  <var>command  [args]</var>
$ gpg {--armor|-a} {--sign|-s} <var>file</var> # signe <var>file</var> dans le fichier texte
                                      <var>file</var>.asc
$ gpg --clearsign <var>file</var>              # signe <var>file</var> sans le chiffrer
$ gpg --clearsign --not-dash-escaped <var>patchfile</var>  # signe sans le chiffrer
                                      <var>patchfile</var>
$ gpg --verify <var>file</var>         # vérifie un fichier signé sans chiffrement
$ gpg -o <var>file.sig</var> {-b|--detach-sign} <var>file</var> # crée une signature détachée
$ gpg --verify <var>file.sig</var> <var>file</var>        # vérifie <var>file</var> à l'aide de <var>file.sig</var>
$ gpg -o <var>crypt_file</var> {--recipient|-r} <var>name</var> {--encrypt|-e} <var>file</var>
        # chiffrement à clé publique pour le destinataire <var>name</var>
$ gpg -o <var>crypt_file</var> {--symmetric|-c} <var>file</var> # chiffrement symétrique
$ gpg -o <var>file</var> --decrypt crypt_file  # déchiffrement
</example>
</sect>

<sect>Gérer GnuPG
<p>
Gestion des clés&nbsp;:
<example>
$ gpg --edit-key <var>user_ID</var>               # « help » pour l'aide, intéractive
$ gpg -o <var>file</var> --exports                # exporte toutes les clés
                                         vers le fichier <var>file</var>
$ gpg --imports <var>file</var>                   # importe toutes les clés
                                         depuis le fichier <var>file</var>
$ gpg --send-keys <var>user_ID</var>              # envoie la clé de <var>user_ID</var>
                                         vers un serveur de clés
$ gpg --recv-keys <var>user_ID</var>              # reçoit la clé de <var>user_ID</var>
                                         depuis le serveur de clés
$ gpg --list-keys <var>user_ID</var>              # liste les clés de <var>user_ID</var>
$ gpg --list-sigs <var>user_ID</var>              # liste les  signatures de <var>user_ID</var>
$ gpg --check-sigs <var>user_ID</var>             # vérifie la signature de <var>user_ID</var>
$ gpg --fingerprint <var>user_ID</var>            # vérifie l'empreinte de <var>user_ID</var>
$ gpg --list-sigs | grep '^sig' | grep '[User id not found]' \
  | awk '{print $2}' | sort -u | xargs gpg --recv-keys
  # récupère les clés inconnues
  # met à jour les clés pour toutes les signatures inconnues
</example>
Code de confiance&nbsp;:
<example>
-         Pas de confiance assignée au possesseur / pas encore calculée
e         Calcul de la confiance échoué
q         Pas assez d'informations pour le calcul
n         Ne jamais faire confiance à cette clé
m         Confiance marginale
f         Confiance complète
u         Confiance ultime
</example>
Les commandes suivantes téléchargent ma clé «&nbsp;<var>A8061F32</var>&nbsp;»
vers plusieurs serveurs de clés&nbsp;:
<example>
$ for xx in us es cz de dk uk ch net.uk earth.net.uk; \
$ do gpg --keyserver wwwkeys.$xx.pgp.net  --send-keys <var>A8061F32</var>; done
</example>
</sect>

<sect>Utiliser GnuPG avec des applications
<p>
<sect1>Utiliser GnuPG avec Mutt
<p>
Ajoutez les instructions suivantes à <file>~/.muttrc</file> pour éviter que
GnuPG, qui est lent, s'exécute automatiquement, mais l'autoriser à être utilisé
en tapant `<tt>S</tt>' au menu principal.
<example>
macro index S ":toggle pgp_verify_sig\n"
set pgp_verify_sig=no
</example>

<sect1 id="vimgpg">Utiliser GnuPG avec Vim
<p>
Ajoutez le contenu de <file>_vimrc</file> obtenu depuis <url id="&examples;"
name="le sous-répertoire des exemples"> dans <file>~/.vimrc</file> pour lancer
GnuPG de façon transparente.

</chapt>
