<!-- CVS revision of original english document "1.43"  -->

<chapt id="woody">Päivittäminen jakeluun <tt>stable</tt>, <tt>testing</tt> tai <tt>unstable</tt>

<![%f-ref;[
<p>
Viralliset julkaisumuistiot päivittämiseen löytyvät osoitteista
<url id="&stable-release;">
ja
<url id="&testing-release;"> (työn alla).

<p>
Järjestelmän päivittäminen 
<tt>stable</tt>-, <tt>testing</tt>- tai <tt>unstable</tt>-jakeluun
voi sisältää useita vaiheita, jotka on suoritettava seuraavassa järjestyksessä:

<list>
 <item> Päivitä Woodyyn (jos järjestelmäsi on vanhempi kuin Woody)
 <item> Päivitä <tt>stable</tt>:en
 <item> Päivitä <tt>testing</tt>:in
 <item> Päivitä <tt>unstable</tt>:en
</list> 

Debian ei tue päivityksiä, jotka hyppäävät yli peräkkäisiä julkaisuja.

]]>


<sect id="woody-transition">Päivittäminen Potatosta Woodyyn
<p>
Tämä prosessi on kuvattu erikseen, koska Potaton APT-ohjelmassa ei ole
kaikkia ohjesivulla <manref name="apt_preferences" section="5"> kuvattuja
toiminnallisuuksia.
<p>
Lisättyäsi Woodyn lähteet tiedostoon
<file>/etc/apt/sources.list</file>,
päivitä APT ja vaaditut peruspaketit Woody-versioihin
seuraavilla komennoilla:
<example>
# apt-get update
# apt-get install libc6 perl libdb2 debconf
# apt-get install apt apt-utils dselect dpkg
</example>
Päivitä tämän jälkeen järjestelmän loppuosa Woodyyn.
<example>
# apt-get upgrade
# apt-get dist-upgrade
</example>

<sect id="testing-transition">Päivitykseen valmistautuminen
<p>
Voit päivittää jakelusta toiseen hakemalla paketit
verkon yli seuraavasti.
<p>
Hanki puhdas lista <tt>stablen</tt>:n säilytyspaikoista:
<example>
# cd /etc/apt
# cp -f sources.list sources.list.old
# :&gt;sources.list  
# apt-setup noprobe 
</example>
Jos haluat päivittää <tt>testing</tt>-jakeluun,
lisää <tt>testing</tt>:in lähteet tähän uuteen listaan.
Jos haluat päivittää <tt>unstable</tt>-jakeluun,
lisää myös <tt>unstable</tt>:n lähteet listaan.
<example>
# cd /etc/apt
# grep -e "^deb " sources.list &gt;srcs
# :&gt;sources.list  
# cp -f srcs sources.list
# sed -e "s/stable/testing/" srcs &gt;&gt;sources.list
# sed -e "s/stable/unstable/" srcs &gt;&gt;sources.list
# apt-get update
# apt-get install apt apt-utils
</example>

Kappale <ref id="apt-install"> kertoo tiedostojen
<file>/etc/apt/sources.list</file> ja <file>/etc/apt/preferences</file>
virittämisestä.
</sect>

<sect id="upgrade-system">Päivittäminen
<p>
Muokattuasi tiedostoja <file>/etc/apt/sources.list</file> ja
<file>/etc/apt/preferences</file> ylläolevien ohjeiden mukaan
voit aloittaa päivityksen.
<p>
Huomaa, että Debianin <tt>testing</tt>-jakelun käyttäminen saattaa
sivuvaikutuksena aiheuttaa sen, että tietoturvapäivityksiä sisältävien
pakettien asennus viivästyy, koska tällaiset paketit ladataan jakeluun
<tt>unstable</tt> ja ne vasta myöhemmin siirtyvät jakeluun <tt>testing</tt>.
<p>
Katso kappaleesta <ref id="package"> perusteet ja katso kappaletta
<ref id="apt-trouble">, jos törmäät ongelmiin.

<sect1><prgn>dselect</prgn>-ohjelman käyttö
<p>
Jos järjestelmässä on useita paketteja, mukaan lukien <tt>-dev</tt>-paketteja
jne., on suositeltavaa käyttää ohjelmaa <prgn>dselect</prgn> seuraavasti
pakettien tarkempaan hallinnointiin.
<example>
# dselect update  # Aja tämä aina ennen päivitystä
# dselect select  # Valitse lisää paketteja
</example>
Kaikki nykyiset paketit valitaan, kun <prgn>dselect</prgn> käynnistyy.
<prgn>dselect</prgn> saattaa kysyä lisäpakettien asentamisesta perustuen
asennettujen pakettin <tt>Depends</tt>-, <tt>Suggests</tt>- ja
<tt>Recommends</tt>-riippuvuuksiin. Jos et halua asentaa lisää paketteja,
kirjoita <tt>Q</tt> poistuaksesi ohjelmasta.
<example>
# dselect install
</example>
Sinun täytyy vastata joihin pakettien asetuksiin liittyviin kysymyksiin
tämän prosessin aikana, joten pidä muistiinpanosi lähellä ja varaa aikaa
tämän osan suorittamiseen. Katso <ref id="dselect">.
<p>
Käytä ohjelmaa <prgn>dselect</prgn>. <strong>Se toimii aina. :)</strong>

<![%f-ref;[
<sect1>Ohjelman <prgn>apt-get</prgn> käyttäminen
<p>
<example>
# apt-get update
# apt-get -t stable upgrade
# apt-get -t stable dist-upgrade
# apt-get -t testing upgrade
# apt-get -t testing dist-upgrade
# apt-get -t unstable upgrade
# apt-get -t unstable dist-upgrade
</example>
Kun järjestelmäsi on päivitetty Sargeen, on suositeltavaa
siirtyä käyttämään ohjelmaa <prgn>aptitude</prgn> ohjelman
<prgn>apt-get</prgn> sijaan. (<prgn>aptitude</prgn> hyväksyy
monet ohjelman <prgn>apt-get</prgn> valitsimista, mukaan lukien
yllä käytetyt.)
<p>
Säilyttääksesi päivityksessä nykyiset <prgn>dselect</prgn>:n asetukset:
<example>
# apt-get dselect-upgrade
</example>
<p>
Katso <ref id="depends">.
]]>
</sect>

</chapt>

