<!-- CVS revision of this document "$Revision: 1.26 $"  -->
<!-- CVS revision of original english document "1.174"  -->
<chapt id="tune"> Messa a punto del sistema &debian;
<p>
Questo capitolo descrive solo i principi basilari della configurazione del sistema tramite
l'interfaccia a carattere. Un prerequisito di questo capitolo è aver letto 
<ref id="install">.  
<p>
Per coloro interessati alla sicurezza, si raccomanda caldamente di leggere il <url id="&securing-debian-howto;" 
name="Securing Debian Manual">, che si può anche reperire come pacchetto
<package>&p-securing-debian-howto;</package>.

<sect id="init-hints">Inizializzazione del sistema
<p>
debian; usa il sistema di script System V.
Vedere <ref id="init"> per un'introduzione.

<sect1 id="init-defaults">Personalizzare gli script di inizializzazione
<p>
Il modo più semplice di controllare il comportamento di uno script di
inizializzazione è modificando i compiti assegnati alle variabili d'ambiente nel file
con lo stesso nome dello script nella directory <file>/etc/default/*</file>.
<footnote>
I file in <file>/ect/default/</file> contengono <strong>solo</strong>
i compiti delle variabili d'ambiente.
Ciascun file è così strettamente correlato allo script corrispondente che
questi compiti scavalcano qualsiasi impostazione predefinita della variabile
nello script.
La scelta del nome della directory è <url id="&etc-defaults;" name="peculiare
a &debian;">. E' grosso modo l'equivalente di <file>/etc/sysconfig</file> di
Red Hat ed altre distribuzioni.
</footnote>
Per esempio, <file>/etc/default/hotplug</file> può essere utlizzato per
controllare il comportamento di <file>/etc/init.d/hotplug</file>.
Il file <file>/etc/init.d/rcS</file> può essere utilizzato per
personalizzare i default al boot per <prgn>motd</prgn>, <prgn>sulogin</prgn>, etc.
<p>
Se non riuscite ad ottenere il comportamento che volete modificando dette
variabili, potete allora modificare gli script stessi: sono tutti file di
configurazione.

<sect1 id="syslogd">Personalizzare i file di log
<p>
La modalità del log del sistema può essere configurata tramite
<file>/etc/syslog.conf</file>.
Date un'occhiata al pacchetto <package>colorize</package> per un programma che
assegna colori differenti ai vari file di log.  Vedere anche <manref
 name="syslogd" section="8"> e <manref name="syslog.conf" section="5">.
</sect1>

<sect1 id="hdtune">Ottimizzare l'accesso hardware
<p>
Esistono alcune configurazioni hardware la cui ottimizzazione e lasciata da
&debian; alla cura dell'amministratore di sistema.
<list>
<item><package>hdparm</package>
 <list compact>
<item>Ottimizzazione dell'accesso all'hard disk. Molto efficiente.
<item>Pericolosa. Dovete leggere prima <manref name="hdparm" section="8">.
<item><tt>hdparm -tT <var>/dev/hda</var></tt> per provare la velocità di accesso al disco.  
<item><tt>hdparm -q -c3 -d1 -u1 -m16 <var>/dev/hda</var></tt> per accelerare un moderno sistema IDE. (Può essere
pericoloso.)
 </list>

<item><package>setcd</package>
 <list compact>
<item>Ottimizzazione dell'accesso al lettore CD
<item><tt>setcd -x <var>2</var></tt> per rallentare a velocità <var>2</var>x.
<item>Vedere <manref name="setcd" section="1">.
 </list>

<item><package>setserial</package>
 <list compact>
<item>Collezione di strumenti per la gestione delle porte seriali.
 </list>

<item><package>scsitools</package>
 <list compact>
<item>Collezione di strumenti per la gestione di hardware SCSI.
 </list>

<item><package>memtest86</package>
 <list compact>
<item>Collezione di strumenti per la gestione dell'hardware di memoria.
 </list>

<item><package>hwtools</package>
 <list compact>
<item>Collezione di strumenti per la gestione dell'hardware a basso livello.
  <list compact>
   <item><prgn>irqtune</prgn>: modifica la priorità dell'IRQ delle periferiche per
   concedere alte priorità e servizi veloci alle periferiche (tipo porte seriali, modem) che ne hanno bisogno. In tal modo è possibile ottenere
   accelerazioni 3X del throughput delle seriali/modem.
   
   <item><prgn>scanport</prgn>: effettua la scansione dello spazio I/O da 0x100 a 0x3ff
   cercando periferiche ISA installate.  
   <item><prgn>inb</prgn>: un trucchetto piccolo e veloce che legge una porta I/O port e ne mostra il valore in esadecimale e
   binario.
  </list>

 </list>

<item><package>schedutils</package>
 <list compact>
<item>Utilità del Linux scheduler.
<item>sono compresi <prgn>taskset</prgn>, <prgn>irqset</prgn>, <prgn>lsrt</prgn>, 
 e <prgn>rt</prgn>.
<item>Insieme a  <prgn>nice</prgn> e <prgn>renice</prgn> 
 (non incluso), permettono un controllo completo dei parametri di scheduling dei processi. 
 </list>

</list>
<p>
Montare un filesystem con l'opzione <tt>noatime</tt> è anch'esso molto efficace
nel velocizzare l'accesso in lettura ai file. Vedere <manref name="fstab"
section="5"> e <manref name="mount" section="8">.
<p>
Alcuni componenti hardware possono essere messi a punto direttamente dal kernel 
stesso, tramite il filesystem proc. Vedere <ref id="proc-sys">.
<p>
Esistono molte utilità di configurazione hardware-specifiche in Debian. Molte 
di loro sono specifiche per i bisogni dei PC portatili. Ecco alcuni pacchetti
interssanti disponibili in Debian:
<list compact>
<item><package>tpconfig</package> - Programma per la configurazione del touchpad
<item><package>apmd</package> - Utilità per Advanced Power Management (APM)
<item><package>acpi</package> - mostra le informazioni sui device ACPI
<item><package>acpid</package> - Utilità per usare ACPI
<item><package>lphdisk</package> - prepara la partizione per l'ibernazione per i Phoenix NoteBIOS
<item><package>sleepd</package> - mette il portatile in sleep durante l'inattività
<item><package>noflushd</package> - permette il rallentamento dei dischi inattivi
<item><package>big-cursor</package> - cursori del mouse più grandi per X
<item><package>acme</package> - Abilita i "multimedia buttons" dei portatili
<item><package>tpctl</package> - Strumenti di configurazione hardware per IBM ThinkPad 
<item><package>mwavem</package> - Supporto per i modem Mwave/ACP 
<item><package>toshset</package> - Accede a gran parte delle interfacce per l'hardware dei portatitili Toshiba
<item><package>toshutils</package> - Toshiba laptop utilities
<item><package>sjog</package> - Programma per usare il "Jog Dial" dei portatili Sony Vaio
<item><package>spicctrl</package> - Programma per il controllo della luminosità dello schermo dei Sony Vaio
</list>
ACPI è un'infrastruttura più nuova di APM per la gestione dei profili energetici.
<p>
Alcuni di questi pacchetti richiedono speciali moduli del kernel. In molti
casi sono già inclusi nei sorgenti più recenti. In caso di problemi potreste
dover applicare da voi l'ultima patch.

<sect>Controllare gli accessi

<sect1 id="loginctrl">Restrizione tramite PAM
<p>
PAM (Pluggable Authentication Modules) forniscono il controllo sul login.  
<example>
/etc/pam.d/*             # file di controllo PAM 
/etc/pam.d/login         # file di controllo PAM per il login
/etc/security/*          # parametri dei moduli PAM
/etc/securetty           # controlla il login di root da console (login)
/etc/login.defs          # controlla i vari comportamenti del login (login)
</example>
<p>
Se volete dei terminali senza password, ma insicuri, modificate a vostro
rischio e pericolo il contenuto di <file>/etc/pam.d/login</file> come segue.
<example>
#auth       required   pam_unix.so nullok 
auth       required pam_permit.so
</example>
Trucchetti simili possono essere applicati a <prgn>xdm</prgn>,
<prgn>gdm</prgn>, ... , per un accesso senza password alla console X.
<p>
Al contrario, se volete applicare una buona politica di password, installate
<package>cracklib2</package> e modificate <file>/etc/pam.d/passwd</file> come
segue.
<example>
password required pam_cracklib.so retry=3 minlen=6 difok=3
</example>
Le password utilizzabili solo una volta per l'attivazione degli account
possono anche essere utili.  Per fare ciò, usate il comando
<prgn>passwd</prgn> con l'opzione <tt>-e</tt>. Vedere <manref name="passwd" section="1">.
<p>
Il numero massimo di processi può essere impostato con <tt>ulimit -u 1000</tt>
nella Bash shell oppure tramite <file>/etc/security/limits.conf</file> da PAM.
Altri parametri, come <tt>core</tt> possono essere impostati allo stesso
modo. Il valore iniziale di <prgn>PATH</prgn> può essere impostato tramite
<file>/etc/login.defs</file> prima che intervenga lo script di
inizializzazione della shell.
<p>
La documentazione per PAM è contenuta nel pacchetto
<package>libpam-doc</package>. La <em>Linux-PAM System
Administrator's Guide</em> copre gli aspetti della configurazione di, quali moduli sono
disponibili, ecc. La documentazione comprende, inoltre, la <em>The Linux-PAM
Application Developers' Guide</em> e la <em>The Linux-PAM Module Writers' 
Guide</em>.
</sect1>

<sect1 id="wheel">"Why GNU <prgn>su</prgn> does not support the <tt>wheel</tt>
group" (Perchè GNU <prgn>su</prgn> non supporta il gruppo <tt>wheel</tt>)
<p>
Questa è la famosa frase al termine della vecchia pagina di <tt>info su</tt>, di
Richard M. Stallman. Per non preoccuparsi: l'attuale <prgn>su</prgn> in &debian;
usa PAM, così che potete ridurre la capacità di usare <prgn>su</prgn> a qualsiasi gruppo
usando <prgn>pam_wheel.so</prgn> in <file>/etc/pam.d/su</file>.  Quanto segue
imposta il gruppo <tt>adm</tt> group di un sistema &debian; come equivalente
del gruppo <tt>wheel</tt> di BSD, permettendo <prgn>su</prgn> senza la
password per i suoi membri.
<example>
# configurazione anti-RMS in /etc/pam.d/su
auth       required   pam_wheel.so group=adm

# I membri del gruppo wheel possono dare su senza la password
auth       sufficient pam_wheel.so trust group=adm
</example>

<sect1>Il significato dei vari gruppi
<p>
Alcuni gruppi interessanti:
<list compact>
<item>il gruppo <tt>root</tt> è il gruppo wheel di default per <prgn>su</prgn> 
 se <prgn>pam_wheel.so</prgn> è utilizzato senza l'argomento <tt>group=</tt>. 
<item><tt>adm</tt> può leggere il file di log. 
<item><tt>cdrom</tt> può essere usato localmente per fornire ad una serie di 
        utenti l'accesso ad un drive CD-ROM.
<item><tt>floppy</tt> può essere usato localmente per fornire ad una serie di 
        utenti l'accesso ad un drive floppy.
<item><tt>audio</tt> può essere usato localmente per fornire ad una serie di 
        utenti l'accesso ad un device audio.
<item><tt>src</tt> è proprietario del codice sorgente, compresi i file in 
        <file>/usr/src</file>. può essere usato localmente per fornire ad un 
        utente la possibilità di modificare il codice sorgente del sistema.
<item><tt>staff</tt>: la sua appartenenza è utile per personale di helpdesk o amministratori
        di sistema aggiunti, dando loro la possibilità di fare modifiche in
        <file>/usr/local</file> e di creare delle directory in
        <file>/home</file>.
</list>
<p>
Per una lista completa, leggete la sezione "FAQ" del
<url id="&securing-debian-howto;" name="Securing Debian Manual">,
che può anche essere reperita come pacchetto
<package>&p-securing-debian-howto;</package> in Woody.
Anche il nuovo pacchetto <package>&p-base-passwd;</package> (>3.4.6) contiene
una lista autorevole: <file>&f-users-and-groups;</file>.

<sect1 id="sudo"><prgn>sudo</prgn> &ndash; lavorare con maggiore sicurezza
<p>
L'uso che faccio di <prgn>sudo</prgn> è fondamentalmente a protezione dalla
mia stessa stupidità. Reputo l'uso di <prgn>sudo</prgn> un'alternativa
migliore al continuo uso del sistema come root. Per voi le cose possono essere
diverse.
<p>
Installate <prgn>sudo</prgn> ed attivatelo impostando le opzioni in
<file>/etc/<url id="&examples;" name="sudoers"></file>.  Controllate anche le caratteristiche
del gruppo <tt>sudo</tt> in <file>&dochome;sudo/OPTIONS</file>.
<p>
La configurazione di esempio fornisce ai membri del gruppo "staff" accesso a qualsiasi
comando come root tramite <prgn>sudo</prgn> nonchè accesso ai membri di "src" a comandi
selezionati come root, sempre tramite <prgn>sudo</prgn>.
<p>
Il vantaggio di <prgn>sudo</prgn> è che richiede solo la password utente, e che
l'attività e monitorizzata. E' un modo carino per dare un minimo di
autorità ad un amministratore alle prime armi. Per esempio:
<example>
$ sudo chown -R <var>myself</var>:<var>mygrp</var> .
</example>
<p>
Ovviamente se conoscete la password di root (come la maggior parte degli
utenti casalinghi) qualunque comando può essere eseguito come root
da un account utente:
<example>
$ su -c "shutdown -h now"
Password:
</example>
(So che dovrei restringere i privilegi dell'account admin in <prgn>sudo</prgn>.
Dato che è il mio server casalingo, non me ne sono ancora preso la briga.)
<p>
Per un programma differente che permetta agli utenti ordinari di eseguire
comandi con privilegi di root, vedere il pacchetto <package>super</package>.
</sect1>
    
<sect1 id="tcpd">Controllare l'accesso ai servizi
<p>
Il <em>super-server</em> Internet <prgn>inetd</prgn>, viene lanciato al boot
da <file>/etc/rc2.d/S20inetd</file> (per RUNLEVEL=2), che è un collegamento simbolico
a <file>/etc/init.d/inetd</file>.  In breve, <prgn>inetd</prgn> permette il
lancio di un demone per richiamarne altri, riducendo il carico sul sistema.
<p>
Ogni volta che arriva la richiesta di un servizio, il suo protocollo ed il
servizio vengono identificati guardando nel database contenuto in
<file>/etc/protocols</file> e in <file>/etc/services</file>.
<prgn>inetd</prgn> cerca, poi, un normale servizio Internet nel database
<file>/etc/inetd.conf</file>, oppure un servizio basato su Sun-RPC
in <file>/etc/rpc.conf</file>.
<p>
Per la sicurezza del sistema, accertatevi di disabilitare i servizi inutilizzati in 
<file>/etc/inetd.conf</file>.
I servizi Sun-RPC devono essere attivi per il NFS ed altri programmi basati su RPC.
<p>
Talvolta <prgn>inetd</prgn> non lancia il server interessato direttamente, 
ma lancia il wrapper del demone TCP/IP <prgn>tcpd</prgn> con il nome del
server come argomento in <file>/etc/inetd.conf</file>.  
In questo caso <prgn>tcpd</prgn> lancia il server appropriato dopo aver registrato 
la richiesta e fatto alcuni controlli addizionali, utilizzando
<file>/etc/hosts.deny</file> e <file>/etc/hosts.allow</file>.
<p>
Se avete problemi con l'accesso remoto in un sistema &debian; recente, 
commentate "ALL: PARANOID" in <file>/etc/hosts.deny</file>, se esiste.
<p>
Per i dettagli, vedere
<manref name="inetd" section="8">,  
<manref name="inetd.conf" section="5">, 
<manref name="protocols" section="5">,  
<manref name="services" section="5">,  
<manref name="tcpd" section="8">,  
<manref name="hosts_access" section="5">, e
<manref name="hosts_options" section="5">. 
<p>
Per maggiori informazioni su Sun-RPC, vedere
<manref name="rpcinfo" section="8"> , 
<manref name="portmap" section="8">, e
<file>&f-portmap;</file>.

<sect1 id="ldap">Centralizzare l'autenticazione &ndash; LDAP
<p>
Usate il Lightweight Directory Access Protocol (LDAP)
Riferimenti:
<list compact>
<item><url id="&openldaphome;" name="OpenLDAP">
<item>OpenLDAP Admin Guide nel pacchetto <package>openldap-guide</package>
<item>LDP: <url id="&ldap-linux-howto;" name="LDAP Linux HOWTO">
<item>LDP: <url id="&ldap-implementation-howto;" name="LDAP Implementation HOWTO">
<item><url id="&ldap-use1;" name="OpenLDAP, extensive use reports">
<item><url id="&ldap-use2;" name="Open LDAP with Courier IMAP and Postfix">
</list>
</sect>

<sect id="cdrw">Masterizzatori
<p>
I masterizzatori con interfaccia ATAPI/IDE sono di recente diventati
un'opzione molto popolare. Rappresentano un supporto valido per il
backup e l'archiviazione per l'utente casalingo che ha bisogno di capacità di
&lt; 640 MB.  Per le informazioni più autorevoli, consultate il
LDP <url id="&cd-writing-howto;" name="CD-Writing-HOWTO">.

<sect1>Introduzione
<p>
Primo, ogni danneggiamento di dati inviati al masterizzatore porterà
ad un danno irreparabile del CD. Prendete il masterizzatore con il
buffer più grande possibile. Se i soldi non sono un problema,
prendetene uno con interfaccia SCSI. Se potete scegliere quale
interfaccia IDE connettere, prendete quello su bus PCI (sulla scheda
madre), piuttosto che su bus ISA (schede SB16, ecc.).
etc.).
<p>
Quando il masterizzatore è connesso su IDE, deve essere comandato dal
driver IDE-SCSI, non dall'IDE-CD. Deve essere attivato anche il driver
generico SCSI. Esistono due approcci per ottenere ciò, per i kernel
delle moderne distribuzioni (aggiornato a Marzo 2001).
<p>
 Per il kernel 2.6, dovreste usare il driver ordinario IDE ed accedere al
 masterizzatore direttamente con il nome del device, tipo <file>/dev/hd<var>x</var></file>.
 In questo modo, potete usare il DMA.
</sect1>

<sect1>Approccio 1: moduli + <prgn>lilo</prgn>
<p>
Aggiungete la riga seguente a <file>/etc/lilo.conf</file> se state usando un
kernel Debian standard. Se usate opzioni multiple, separatele da spazi:
<example>
append="hd<var>x</var>=ide-scsi ignore=hd<var>x</var>"
</example>
Dove la collocazione del masterizzatore, a cui si accede tramite il driver ide-scsi,
è indicata da <tt>hd<var>x</var></tt>, dove <var>x</var> rappresenta uno dei seguenti:
<example>
hda          se master sulla prima porta IDE
hdb          se slave sulla prima porta IDE
hdc          se master sulla seconda porta IDE
hdd          se slave sulla seconda porta IDE
hde ... hdh  per un drive su porta IDE esterna, ATA66/100
</example>
Date i comandi seguenti per l'attivazione dopo la configurazione:
<example>
# lilo
# shutdown -h now
</example>
</sect1>


<sect1>Approccio 2: ricompilare il kernel
<p>
Debian usa <prgn>make-kpkg</prgn> per creare il kernel.  Usate il nuovo
<tt>--append_to_version</tt> con make-kpkg per produrre più kernel.
Vedere <ref id="kernel">.
<p>
Usate le seguenti impostazioni attraverso <tt>make menuconfig</tt>:
<list>
<item>bzImage
<item>Escludete il driver IDE CD (non è obbligatorio, ma rende le cose più semplici)
<item>Compilate ide-scsi e sg, direttamente nel kernel o come moduli
</list>
</sect1>

<sect1>Procedure post-configurazione
<p>
Il supporto del kernel per il CD-writer può essere attivato al boot con
il seguente:
<example>
# echo ide-scsi &gt;&gt;/etc/modules
# echo sg       &gt;&gt;/etc/modules
# cd /dev; ln -sf scd0 cdrom
</example>
L'attivazione manuale può essere fatta con:
<example>
# modprobe ide-scsi
# modprobe sg
</example>
Dopo il reboot, potete controllarne l'installazione con:
<example>
$ dmesg|less
# apt-get install cdrecord
# cdrecord -scanbus
</example>
<p>
[Da Warren Dodge] Talvolta sorgono conflitti fra
<tt>ide-scsi</tt> e <tt>ide-cd</tt> se ci sono sia un lettore che un
masterizzatore nel sistema.  Provate ad aggiungere la riga seguente al vostro
<file>/etc/modutils/aliases</file>, lanciando poi <prgn>update-modules</prgn>, e
facendo il reboot.
<example>
pre-install      ide-scsi      modprobe ide-cd
</example>
Ciò determina il caricamento del driver IDE prima di <tt>ide-scsi</tt>. Il driver
IDE <tt>ide-cd</tt> prende il controllo del CD_ROM ATAPI&mdash;qualsiasi 
che non gli sia stato detto di <strong>ignorare</strong>. Ciò
lascia solo i device ignorati al controllo di <tt>ide-scsi</tt>. 
</sect1>

<sect1>Il file CD-image (avviabile)
<p>
Per creare un CD-ROM con files contenuti nella <file>target-directory/</file> come
<file>cd-image.raw</file>
(avviabile, con il formato Joliet TRANS.TBL abilitato; se non lo volete
avviabile, togliete le opzioni <tt>-b</tt> e <tt>-c</tt>), inserite un boot floppy nel drive e,
<example>
# dd if=<var>/dev/fd0</var> <var>target-directory/boot.img</var> 
# mkisofs -r -V <var>volume_id</var> -b <var>boot.img</var> -c <var>bootcatalog</var> -J -T \
        -o <var>cd-image.raw</var> <var>target_directory/</var>
</example>
<p>
Una trucco divertente è fare dei CD-ROM avviabili in DOS. Se una normale
immagine DOS di un boot floppy è contenuta in <file><var>boot.img</var></file>, il CD-ROM
eseguirà il boot come se nel primo floppy drive (A:) ci fosse un
floppy DOS. Più interessante potrebbe essere farlo con freeDOS.
<p>
Il file CD-image può essere ispezionato montandolo sul device loop.
<example>
# mount -t iso9660 -o ro,loop <var>cd-image.raw</var> /cdrom
# cd /cdrom
# mc
# umount /cdrom
</example>
</sect1>

<sect1>Scrivere sul masterizzatore (R, RW):
<p>
Primo test con (in caso di velocità 2x)
<example>
# nice --10 cdrecord -dummy speed=2 dev=0,0 <var>disk.img</var>
</example>
Se tutto va bene, scrivete sul CD-R con
<example>
# nice --10 cdrecord -v -eject speed=2 dev=0,0 <var>disk.img</var>
</example>
Oppure, sul CD-RW con
<example>
# nice --10 cdrecord -v -eject blank=fast speed=2 dev=0,0 <var>disk.img</var>
</example>
Alcune periferiche CD-RW funzionano meglio con
<example>
# nice --10 cdrecord -v blank=all speed=2 dev=0,0 <var>disk.img</var>
</example>
seguito da
<example>
# nice --10 cdrecord -v -eject speed=2 dev=0,0 <var>disk.img</var>
</example>
Sono necessari due passaggi per prevenire i timeout SCSI durante la fase di
blanking dall'interferire con la fase di masterizzazione. Il valore dell'argomento di 
<prgn>nice</prgn> può richiedere qualche aggiustamento.
</sect1>

<sect1>Creare un file immagine di un CD
<p>
Alcuni CD-R e CD commerciali hanno dei settori spuri alla fine, cosa
che rende impossibile la copia tramite <prgn>dd</prgn> (il CD di Windows 98 è uno
di questi).  Il pacchetto <package>cdrecord</package> ha il comando <prgn>readcd</prgn>.
Usatelo per copiare qualsiasi CD in un file immagine. Se è un disco di dati,
montatelo ed eseguite <prgn>mount</prgn> per vedere le dimensioni reali.  Dividete
il numero ottenuto (in blocchi = 1024 bytes) per 2 per avere il numero
reale di settori del CD (2048 bytes). Lanciate <prgn>readcd</prgn> con le
opzioni ed usate l'immagine risultante per bruciare il CD-R/RW.
<example>
# readcd dev=<var>target</var>,<var>lun</var>,<var>scsibusno</var> # select function 11 
</example> 
Impostate tutti e tre i parametri a 0 per la maggior
parte dei casi.  Talvolta il numero di settori dato da <prgn>readcd</prgn> è
eccessivo!  Utilizzate il numero ottenuto da un montaggio reale per i migliori risultati.
<p>
Dovrebbe essere notato che l'uso di <prgn>dd</prgn> ha alcuni problemi se
usato su CD-ROM.  La prima esecuzione del comando <prgn>dd</prgn> può causare un
messaggio di errore e produrre un'immagine del disco più piccola con perdita della coda.
La seconda esecuzione di <prgn>dd</prgn> può produrre un'immagine più grande,
con dati spuri attaccati alla fine su alcuni sistemi se le dimensioni dei dati non 
sono specificate.  Solo la seconda esecuzione di <prgn>dd</prgn> con le
dimensioni corrette dei dati specificate e senza espellere il CD dopo un messaggio di errore,
sembra evitare questi problemi.  Se, per esempio, le dimensioni dell'immagine
mostrate da <prgn>df</prgn> sono di <tt>46301184</tt> blocchi, usate il comando
seguente due volte per ottenere l'immagine corretta (queste sono mie
informazioni empiriche):
<example>
# dd if=/dev/cdrom of=cd.img bs=2048 count=$((46301184/2))
</example>
</sect1>

<sect1>CD con le immagini Debian
<p>
Per le informazioni più aggiornate sui CD &debian; visitate il
<url id="&debian-cd;" name="Sito Debian CD">. 
<p>
Se avete una connessione Internet veloce, potete prendere in considerazione 
l'installazione via rete usando:
<list compact>
<item>alcune <url id="&debian-floppyinst;" name="immagini floppy">.
<item>una <url id="&debian-netinst;" name="immagine minima su CD avviabile ">.
</list>
<p>
Se non avete una connessione veloce, considerate l'acquisto dei 
CD dai <url id="&debian-venders;" name="Venditori di CD">.
<p>
Non sprecate banda scaricando i CD immagine standard a meno di non 
essere un tester di CD immagine (anche con il nuovo metodo jigdo).
<p>
Un'mmagine degna di nota è <url id="&knoppix;" 
name="KNOPPIX - Live Linux Filesystem On CD">.  
Questo CD farà il boot in un sistema &debian; perfettamente 
funzionante senza installarsi sul disco rigido.

<!-- old document section
$ export CVSROOT=anonymous@cvs.debian.org:/cvs/debian-boot
$ cvs co debian-cd
</example>
Following is a summary of CD image creation. 
<example>
# apt-get install debian-cd
# cd /etc/debian-cd
# vim CONF.sh
$ . CONF.sh
$ make distclean
$ make status
$ make list COMPLETE=1 SIZELIMIT1=555000000 SRCSIZELIMIT=665000000
$ make official_images
 or if you want only binary images :
$ make bin-official_images
-->
</sect1>

<sect1>Backup del sistema su CD-R
<p>
Per copiare i file di configurazione chiave e di dati sul CD-R,
usate lo script di "backup" <url id="&examples;" name="backup">.
Vedete anche <ref id="archiving"> e <ref id="diff-backup">.
</sect1>

<sect1>Copiare CD musicali su CD-R
<p>
Non testato da me:
<example>
# apt-get install cdrecord cdparanoia
# cdparanoia -s -B
# cdrecord dev=0,0,0 speed=2 -v -dao -eject defpregap=1 -audio *.wav
</example>
oppure,
<example>
# apt-get install cdrdao #disk at once
# cdrdao read-cd --device /dev/cdrom --paranoia-mode 3 mio_cd # legge il cd
# cdrdao write --device /dev/cdrom --speed 8 mio_cd    # scrive un nuovo CD
</example>
<prgn>cdrdao</prgn> esegue una copia conforme (senza pause, ecc...)
</sect1>

<sect1 id="dvd">Masterizzare i DVD-R, DVD-RW e DVD+RW
 <p>
 Per masterizzare i DVD, avete due approcci: 
 <list compact> 
 <item>Usate <package>growisofs</package> con <package>mkisofs</package>.
 <item>Ricompilate <package>cdrecord</package> con l'opzione dvd per creare
 un pacchetto locale come da <file>&f-readmedvd;</file>.
</list>
</sect1>
</sect>

<sect id="x">X
<p>
L'ambiente grafico X è fornito da <url id="&xfree86home;" name="Xfree86">.
Due sono le versioni principali del server X disponibili su un sistema &debian;: 
Le serie di XFree86 Versione 3.3 (XF3) e XFree86 Versione 4.x (XF4) sono
basate sulle specifiche X11R6 di <url id="&xorghome;" name="X.Org">.
<p>
Per le basi di X, fate riferimento a <manref name="X" section="7">, l'LDP
<url id="&xwindowuser-howto;" name="XWindow-User-HOWTO">, ed il <url
id="&remote-xapps-howto;" name="Remote X Apps mini-HOWTO">.  
Per una guida per l'utente &debian;-specifica, leggete <file>&f-x-deb-faq;</file> 
fornito dal pacchetto <package>xfree86-common</package>.  Questa contiene
una interessante ed autorevole revisione dei problemi chiave
di Branden Robinson.
<p>
<taglist>
<tag><ref id="xsrvr">
<item>è un programma su host locale che mostra una finestra X e/o un desktop 
sul monitor di un utente (CRT, LCD) ed accetta input da tastiera e mouse. 
<tag><ref id="xclnt">
<item>è un programma su un host (locale o remoto) su cui girano applicazioni compatibili 
con X window.
</taglist>
Queste definizioni ribaltano il concetto normale di "server" e "client".
<p>
Molteplici sono i modi di far accettare al "server X" (lato schermo) 
connessioni remote da un "client X" (lato applicazione):  

<list>
<item>il metodo <prgn>xhost</prgn>
<list compact>
<item>meccanismo della lista degli host (molto poco sicuro).
<item>protocollo non criptato (soggetto ad attacchi tipo eavesdropping).
<item>Se possibile, non utilizzatelo.
<item>Vedere <ref id="xhost"> and <manref name="xhost" section="1x">.
</list>
<item>il metodo <strong><prgn>xauth</prgn></strong>
<list compact>
<item>meccanismo MIT dei cookie magici (non sicuro, ma migliore di
  <prgn>xhost</prgn>).
<item>protocollo non criptato (soggetto ad attacchi tipo eavesdropping).
<item>usatelo solo per connessioni locali, dato che chiede meno CPU di
<prgn>ssh -X</prgn>.
<item>Vedere <ref id="ss-xsu"> e <manref name="xauth" section="1x">.
</list>
<item><prgn>xdm</prgn>, <prgn>wdm</prgn>, <prgn>gdm</prgn>, 
 <prgn>kdm</prgn>, ... 
<list compact>
<item>meccanismo MIT dei cookie magici (non sicuro, come <prgn>xauth</prgn>).
  <item>Vedere <manref name="xdm" section="1x"> e 
 <manref name="Xsecurity" section="7"> per le basi del controllo 
 degli accessi allo schermo X.
<item>Vedere <manref name="wdm" section="1x">, <manref name="gdm"
  section="8">, e <manref name="kdm.options" section="5"> per maggiori
  informazioni, se sono installati. 
<item>Vedere <ref id="custombootscripts"> su come
  disabilitare <prgn>xdm</prgn> per avere una cosole Linux al boot senza
  rimuovere il pacchetto <prgn>xdm</prgn>.
</list>
<item>il metodo <strong><prgn>ssh -X</prgn></strong>
<list compact>
<item>meccanismo del port forwarding tramite shell sicura (<strong>sicuro</strong>).  
<item>procollo criptato (uno spreco di risorse se usato localmente).  
<item>usatelo per connessioni remote.  
<item>Vedere <ref id="xssh">.
</list>
</list>
Tutti i metodi di connessione remota, tranne <prgn>ssh</prgn>, richiedono
l'abilitazione della connessione TCP/IP sul server X.  Vedere <ref id="xtcp">.

<sect1 id="x-system">Pacchetti del sistema X
<p>
Per facilitare l'installazione di X esistono alcuni (meta)pacchetti in Woody.
<taglist>
<tag><package>x-window-system-core</package>
<item>
Questo metapacchetto fornisce i componenti essenziali per una singola
postazione con l' X Window System.  Fornisce le librerie X, un X
server <package>xserver-xfree86</package>, una serie di font ed un gruppo di
X client base e di utilità.

<tag><package>x-window-system</package>
<item>
Fornisce in sostanza tutti i componenti dell' X Window System così come sono
stati sviluppati dall' XFree86 Project, ed una serie di programmi accessori
storicamente popolari. (Da notare che dipende da
<package>x-window-system-core</package>, <package>twm</package>, e
<package>xdm</package>, cioè non è necessario installare
<package>x-window-system-core</package> se installate questo.)

<tag><package>xserver-common-v3</package>
<item>
Files ed utilità comuni agli X server XFree86 3.x (XF3)

<tag><package>xserver-*</package>
<item>
Pacchetti supplementari per XF3 server per supportare hardware non supportato
dal nuovo XF4 server per qualsiasi ragione.  Alcune vecchie ATI mach64 non sono
supportate in XF4, alcune schede video si piantano brutalmente nella versione
di XF4 per Woody, ecc.  (Per una lista di pacchetti disponibili, usate
<tt>apt-cache search xserver-|less</tt>.  Tutti questi XF3 server dipendono da
<package>xserver-common-v3</package>.)
</taglist>
<p>
Per la maggior parte dei casi il pacchetto da installare è
<package>x-window-system</package>.  (Se volete il login da console,
assicuratevi di diasbilitare <package>xdm</package> come descritto in <ref
id="no-x-start">.)

<sect1 id="hdetect-x">Pacchetti per il riconoscimento hardware per X
<p>
Per abilitare il riconoscimento dell' hardware durante la fase di
configurazione di X, installate i seguenti pacchetti prima di installare X:
<list>
<item><package>discover</package> &mdash; sistema di identificazione hardware.
<item><package>mdetect</package> &mdash; Strumento di autoidentificazione del
mouse.  <item><package>read-edid</package> &mdash; strumento per la raccoglta
di informazioni sull'hardware per monitor VESA PnP.
</list>

<sect1 id="xsrvr">X server
<p>
Vedere <manref name="XFree86" section="1x"> per informazioni sull' X server.
<p>
Invocare l' X server da una console locale:
<example>
$ startx -- :&lt;display&gt; <var>vtXX</var> 
p.es.: 
$ startx -- :1 vt8 -bpp 16
... parte su vt8 connesso ao localhost:1 in modalità 16 bpp
</example>
Gli argomenti dati dopo <tt>--</tt> sono per l' X server.
<p>
Notate che, quando si usa uno script <file>~/.xserverrc</file> per la
personalizzazione dell'avvio dell' X server, bisogna essere certi di
<tt>exec</tt> l' X server reale.  Non fare ciò può causare rallentamenti
nell'avvio e nell'uscita del server. Per esempio:
<example>
#!/bin/sh 
exec /usr/bin/X11/X -dpi 100 -nolisten tcp
</example>

<sect2 id="config-x4">Configurare l' X server (versione 4)
<p>
Per (ri-)configurare l' XF4 server,
<example>
# dpkg-reconfigure --priority=low xserver-common
# dpkg-reconfigure --priority=low xserver-xfree86
</example>
genererà il file <file>/etc/X11/XF86Config-4</file> e configurerà X usando lo
script <prgn>dexconf</prgn>.

<sect2 id="config-x3">Configurare l' X server (versione 3)
<p>
Per (ri-)configurare l' X3 server,
<example>
# dpkg-reconfigure --priority=low xserver-common-v3
# dpkg-reconfigure --priority=low xserver-mach64
</example>
genererà il file <file>/etc/X11/XF86Config</file> e configurerà X usando lo
script <prgn>xf86config-v3</prgn>.

<sect2 id="manual-config-x">Configurazione manuale dell' X server
<p>
Per aggiungere delle personalizzazioni utente a 
<file>/etc/X11/XF86Config-4</file>, <strong>non modificate il file
di configurazione compreso fra il testo</strong>: 
<!-- FIXME for X3 -->
<example>
### BEGIN DEBCONF SECTION 
[snip]
### END DEBCONF SECTION
</example>
<p>
Invece, <strong>aggiungete le personalizzazioni prima del testo</strong>.  Per
esempio, per usare una scheda video personalizzata, aggiungete qualcosa di
simile al testo seguente all' <em>inizio</em> del file:
<example>
Section "Device"
  Identifier        "Custom Device"
  Driver            "ati"
  Option            "NoAccel"
EndSection

Section "Screen"
  Identifier  "Custom Screen"
  Device      "Custom Device"
  Monitor     "Generic Monitor"
  DefaultDepth 24
  Subsection "Display"
    Depth       8
    Modes       "1280x960" "1152x864" "1024x768" "800x600" "640x480"
  EndSubsection
  Subsection "Display"
    Depth       16
    Modes       "1280x960" "1152x864" "1024x768" "800x600" "640x480"
  EndSubsection
  Subsection "Display"
    Depth       24
    Modes       "1280x960" "1152x864" "1024x768" "800x600" "640x480"
  EndSubsection
EndSection

Section "ServerLayout"
    Identifier        "Custom"
    Screen            "Custom Screen"
    InputDevice       "Generic Keyboard" "CoreKeyboard"
    InputDevice       "Configured Mouse" "CorePointer"
EndSection
</example>
<p>
Per Sarge (<tt>testing</tt> al momento di scrivere), se volete mantenere le
personalizzazioni dell'utente a <file>/etc/X11/XF86Config</file> attraverso
gli aggiornamenti, lanciate da root il comando seguente:
<example>
# cp /etc/X11/XF86Config-4 /etc/X11/XF86Config-4.custom
# md5sum /etc/X11/XF86Config-4 &gt; /var/lib/xfree86/XF86Config-4.md5sum
# dpkg-reconfigure xserver-xfree86
</example> 
Per ottenere un <strong>abbellimento dei caratteri</strong>, dovete modificare
<file>/etc/X11/XF86Config-4</file> come descritto in <ref
id="xfs-tt">.
<!--
<p>
For XF3, in order to achieve <strong>font de-uglification</strong>, 
you need to edit the order of <tt>FontPath</tt> in
<file>/etc/X11/XF86Config</file> 
while adding <tt>:unscaled</tt> as follows.
<example>
FontPath        "/usr/X11R6/lib/X11/fonts/misc:unscaled"
FontPath        "/usr/X11R6/lib/X11/fonts/100dpi:unscaled"
FontPath        "/usr/X11R6/lib/X11/fonts/75dpi:unscaled"
FontPath        "/usr/X11R6/lib/X11/fonts/Type1"
FontPath        "/usr/X11R6/lib/X11/fonts/Speedo"
FontPath        "/usr/X11R6/lib/X11/fonts/misc"
FontPath        "/usr/X11R6/lib/X11/fonts/100dpi"
FontPath        "/usr/X11R6/lib/X11/fonts/75dpi"
</example>
<p>
If you use xfs serves fonts via a Unix Domain Socket, you may also edit
<tt>catalogue</tt> entry of <file>/etc/X11/fs/config</file> as:
<example>
catalogue = /usr/X11R6/lib/X11/fonts/misc:unscaled,
            /usr/X11R6/lib/X11/fonts/100dpi:unscaled,
            /usr/X11R6/lib/X11/fonts/75dpi:unscaled,
            /usr/X11R6/lib/X11/fonts/Type1,
            /usr/X11R6/lib/X11/fonts/Speedo,
            /usr/X11R6/lib/X11/fonts/misc,
            /usr/X11R6/lib/X11/fonts/100dpi,
            /usr/X11R6/lib/X11/fonts/75dpi,
</example>
<p>
These <tt>:unscaled</tt> tricks are deprecated in new XF4 and no longer
needed.
-->
<!-- per /usr/share/doc/xfree86-common/README.fonts.gz in 4.2.1 -->
<p>
Controllate anche le altre parti della vostra confiurazione di X. Impostazioni
errate per il monitor possono dare più mal di testa dei caratteri brutti,
quindi assicuratevi che il refresh rate sia il più alto che il vostro monitor 
possa gestire (85 Hz è ottimo, 75 Hz buono, 60 Hz doloroso).

<sect1 id="xclnt">X client
<p>
La maggior parte dei programmi X client possono essere lanciati con un comando tipo questo:
<example>
client $ xterm -geometry 80x24+30+200 -fn 6x10 -display <var>hostname</var>:0 &amp;
</example>
Dove gli argomenti opzionali vogliono dire:
<list>
<item><tt>-geometry <var>WIDTH</var>x<var>HEIGHT</var>+<var>XOFF</var>+<var>YOFF</var></tt>: 
le dimensioni iniziali e la posizione della finestra.

<item><tt>-fn <var>FONTNAME</var></tt>: il font da usare per il testo.
 <tt><var>FONTNAME</var></tt> può essere:
<list compact>
<item>a14: Font di grandezza normale
<item>a24: Font di grandezza aumentata
<item>... (controllate i font disponibili con <tt>xlsfont</tt>.)
</list>
<item><tt>-display <var>displayname</var></tt>: il nome dell' X server da usare. 
 <tt><var>displayname</var></tt> può essere:
<list compact>
<item><tt><var>hostname</var>:<var>D.S</var></tt> significa schermo <tt><var>S</var></tt> sul display
 <tt><var>D</var></tt> dell' host <tt><var>hostname</var></tt>; l' X server per questo display è in
ascolto sulla porta TCP 6000+D.

<item><tt><var>host</var>/unix:<var>D.S</var></tt> significa schermo <tt><var>S</var></tt> sul display 
<var>D</var> dell' host <tt><var>host</var></tt>; l' X server per questo display è in 
ascolto sullo UNIX domain socket
<file>/tmp/.X11-unix/XD</file> (in tal modo è raggiungibile solo da <tt><var>host</var></tt>).

<item><tt><var>:D.S</var></tt> è equivalente a 
<tt><var>host</var>/unix:<var>D.S</var></tt>, dove <tt><var>host</var></tt> è il nome dell'host locale.
</list>
</list>
<p>
Il <tt><var>displayname</var></tt> predefinito per il programma X client program (lato applicazione) 
può essere impostato tramite la variabile d'ambiente DISPLAY.  Per esempio, prima di lanciare un 
programma X client l'esecuzione di uno dei seguenti comandi permette ciò:
<example>
$ export DISPLAY=:0 
        # il predefinito, macchina locale, utilizzando il primo schermo X
$ export DISPLAY=<var>hostname.fulldomain.name</var>:0.2
$ export DISPLAY=localhost:0
</example>
Il suo lancio può essere personalizzato tramite <file>~/.xinitrc</file>. Per esempio:
<example>
xrdb -load $HOME/.Xresources
xsetroot -solid gray &amp;
xclock -g 50x50-0+0 -bw 0 &amp;
xload -g 50x50-50+0 -bw 0 &amp;
xterm -g 80x24+0+0 &amp;
xterm -g 80x24+0-0 &amp;
twm
</example>
Come descritto in <ref id="custom-x">, ciò scavalca ogni normale esecuzione di 
<prgn>Xsession</prgn>, quando lanciato da <prgn>startx</prgn>.
Usate questo approccio solo come ultima risorsa.

Vedere <manref name="xsetroot" section="1x">, 
<manref name="xset" section="1x">, e <ref id="xresources">.
</sect1>

<sect1 id="x-session">Le X session
<p>
Una X session (X server + X client) può essere lanciata da:
<list compact>
<item><prgn>startx</prgn>: script wrapper per <prgn>initx</prgn> per
      lanciare l' X server e client dalla console di Linux.   Se
      <file>~/.xinitrc</file> non esiste, <file>/etc/X11/Xsession</file> viene
      lanciato tramite <file>/etc/X11/xinit/xinitrc</file>.
<item><prgn>xdm</prgn>, <prgn>gdm</prgn>, <prgn>kdm</prgn>, o
      <prgn>wdm</prgn>: demoni di X display manager per lanciare l' X server e
      client e per controllare il login da un'interfaccia grafica.  
      <file>/etc/X11/Xsession</file> viene eseguito direttamente.
</list>
Si può avere l'accesso alla console come da <ref id="no-x-start">.

<sect2 id="custom-x">Personalizzare le X session
<p>
Lo script di inizializzazione predefinito, <file>/etc/X11/Xsession</file> è, in 
effetti, una combinazione di
<file>/etc/X11/Xsession.d/50xfree86-common_determine-startup</file> e di
<file>/etc/X11/Xsession.d/99xfree86-common_start</file>.
<p>
L'esecuzione di <file>/etc/X11/Xsession</file> viene in qualche modo influenzata da 
<file>/etc/X11/Xsession.options</file> ed è fondamentalmente l'esecuzione del programma
che viene trovato per primo nella seguente lista dal comando 
<prgn>exec</prgn>:
<enumlist compact>
<item><file>~/.xsession</file> o <file>~/.Xsession</file>, se è definito.
<item><file>/usr/bin/x-session-manager</file>, se è definito.
<item><file>/usr/bin/x-window-manager</file>, se è definito.
<item><file>/usr/bin/x-terminal-emulator</file>, se è definito.
</enumlist>
<p>
L'esatto significato di questi comandi è determinato dal sistema alternativo &debian; 
descritto in <ref id="alternatives">.
Per esempio:
<example>
# update-alternatives --config x-session-manager
... oppure
# update-alternatives --config x-window-manager
</example>
Per rendere qualsiasi X window manager quello predefinito mentre si mantengono installati i
session manager di GNOME e KDE, sostituite
<file>/etc/X11/Xsession.d/50xfree86-common_determine-startup</file>
con quello allegato al secondo bug report in 
<url id="&bug-xfree;"> (Spero che venga presto incluso.)
e modificate <file>/etc/X11/Xsession.options</file> come segue per disabilitare l' 
X session manager:
<example>
# /etc/X11/Xsession.options
#
# configuration options for /etc/X11/Xsession
# See Xsession.options(5) for an explanation of the available options.
# Default enabled
allow-failsafe
allow-user-resources
allow-user-xsession
use-ssh-agent
# Default disabled (enable them by uncommenting)
do-not-use-x-session-manager
#do-not-use-x-window-manager
</example>
<p>
Senza le summenzionate modifiche al sistema,
<package>gnome-session</package> e <package>kdebase</package> sono i 
pacchetti che contengono questi X session manager.  Rimuovendoli si permette
all'X window manager preferito di essere quello predefinito. (Idee migliori?)
<p>
Su un sistema in cui <file>/etc/X11/Xsession.options</file> contiene
una riga <tt>allow-user-xsession</tt> non preceduta da altri caratteri,
qualsiasi utente che definisse un proprio <file>~/.xsession</file> o <file>~/.Xsession</file>
sarebbe in grado di personalizzare le azioni di <file>/etc/X11/Xsession</file>.
<p>
L'ultimo comando nel file <file>~/.xsession</file> dovrebbe essere sotto forma di 
<tt>exec <var>some-window/session-manager</var></tt> per lanciare il vostro
X window/session manager preferito.
<p>
Un buon esempio del file <file>~/.xsession</file> si trova in
<file>&f-xsession;</file>.
<p>
Io lo uso per impostare il window manager, accesso allo schermo e lingua per
ciascun utente. Vedere <ref id="s-w-manager">, <ref id="ss-xsu">, e
<ref id="x-cjk">.
<p>
Se volete avere lanciare automaticamente parecchi programmi X client, guardate
gli esempi di <ref id="xclnt"> ed invocateli da <file>~/.xsession</file>
invece che da <file>~/.xinitrc</file>.
<p>
Risorse addizionali di X specifiche per utente possono essere inserite in
<file>~/.Xresources</file>. Vedere <ref id="xresources">.
<p>
Mappature del mouse e della tastiera specifiche per ciascun utente in X possono essere 
definite nello script di lancio dell'utente. Vedere <ref id="xmodmap">.

<sect2 id="s-w-manager">Lanciare una X session per un utente
<p>
Seguendo il principio descritto in <ref id="custom-x">,
X session/window manager specifici per l'utente possono essere attivati installando
il pacchetto indicato ed impostando il contenuto alla fine del file 
<file>~/.xsession</file> come segue.
(Amo <package>blackbox</package>/<package>fluxbox</package> per lo stile semplice e la velocità.):

<list>
<item>default X session manager. 
<list compact>
<item>Vedere <ref id="alternatives">.
<item><tt>exec /usr/bin/x-session-manager</tt>
</list>
<item>default X window manager. 
<list compact>
<item>Vedere <ref id="alternatives">.
<item><tt>exec /usr/bin/x-window-manager</tt>
</list>

<item>GNOME session manager. (caricato)
<list compact>
<item>Installare il pacchetto: <package>gnome-session</package>
<item><tt>exec /usr/bin/gnome-session</tt>
</list>

<item>KDE session manager. (caricato)
<list compact>
<item>Installare il pacchetto: <package>kdebase</package> (oppure 
<package>kdebase3</package> per KDE3)
<item><tt>exec /usr/bin/kde2</tt>
</list>

<item>Blackbox window manager. (leggero).
<list compact>
<item>Installare il pacchetto: <package>blackbox</package>
<item><tt>exec /usr/bin/blackbox</tt>
</list>

<item>Fluxbox window manager (leggero, il nuovo blackbox)
<list compact>
<item>Installare il pacchetto: <package>fluxbox</package>
<item><tt>exec /usr/bin/fluxbox</tt>
</list>

<item>Xfce window manager (Mac OS-X, SUN CDE&ndash;simile)
<list compact>
<item>Installare il pacchetto: <package>xfce</package>
<item><tt>exec /usr/bin/xfwm</tt>
</list>

<item>IceWM window manager. (leggero, alternativa a GNOME)
<list compact>
<item>Installare il pacchetto: <package>icewm</package>
<item><tt>exec /usr/bin/X11/icewm</tt>
</list>

<item>FVWM2 window manager virtuale (leggero, tipo Win95)
<list compact>
<item>Installare il pacchetto: <package>fvwm</package>
<item><tt>exec /usr/bin/fvwm2</tt>
</list>

<item>Windowmaker window manager (in qualche modo simile a NexT)
<list compact>
<item>Installare il pacchetto: <package>wmaker</package>
<item><tt>exec /usr/bin/wmaker</tt>
</list>

<item>Enlightenment window manager (caricato).
<list compact>
<item>Installare il pacchetto: <package>enlightenment</package>
<item><tt>exec /usr/bin/enlightenment</tt>
</list>

</list>
Vedere <url id="&windomanagerhome;" name="Window Manager per X">.


<sect2 id="kde-gnome">Impostazione degli ambienti KDE e GNOME
<p>
Per un setup completo degli ambienti KDE o GNOME sono utili i seguenti 
metapacchetti:
<list>
<item>KDE: installare il pacchetto <package>kde</package>
<item>GNOME: installare il pacchetto <package>gnome</package>
</list>
L'installazione di questi pacchetti con programmi in grado di maneggiare
pacchetti marcati con <tt>Raccomanda</tt>, tipo <prgn>dselect</prgn> ed
<prgn>aptitude</prgn>, fornisce una scelta di software rispetto alla semplice
installazione con <prgn>apt-get</prgn>.
<p>
Se volete comunque il login da console, disabilitate gli X display manager,
tipo <package>kdm</package>, <package>gdm</package>, e <package>wdm</package>,
che possono essere richiamati dal gioco delle dipendenze, come descritto in
<ref id="no-x-start">.
<p>
Se volete GNOME come sistema predefinito invece che KDE, configurate
<prgn>x-session-manager</prgn> come descritto in <ref id="alternatives">.

<sect1 id="xtcp">Connessione TCP/IP ad X
<p>
Siccome una connessione remota TCP/IP senza cifratura è vulnerabile ad
attacchi tipo eavesdropping, l'impostazione predefinita per X nelle versioni
&debian; più recenti disabilita il socket TCP/IP.  Prendete in considerazione
<prgn>ssh</prgn> per una connessione remota ad X (vedere <ref id="xssh">).
<p>
Il metodo qui descritto non è consigliato, a meno di essere in un ambiente
altamente sicuro, dietro un buon firewall, solo con utenti fidati.  Usate il
seguente comando per verificare le impostazioni del vostro X server rispetto
al socket TCP/IP:
<example>
# find /etc/X11 -type f -print0 | xargs -0 grep nolisten
/etc/X11/xinit/xserverrc:exec /usr/bin/X11/X -dpi 100 -nolisten tcp
</example>
Rimuovete <tt>-nolisten</tt> per ripristinare l'ascolto TCP/IP sull' X server.
</sect1>
 
<sect1 id="xhost">Connessioni ad un X server remoto &ndash; <prgn>xhost</prgn>
<p>
<prgn>xhost</prgn> permette l'accesso basato sugli hostname. Altamente
insicuro.  Quanto segue disabilita il controllo degli host e permette le
connessioni da ovunque se una connessione TCP/IP è permessa (vedere <ref
id="xtcp">):
<example>
$ xhost +
</example>
Potete riabilitare il controllo dell'host con:
<example>
$ xhost -
</example>
<p>
<prgn>xhost</prgn> non fa distinzioni fra utenti differenti sull'host remoto.
In più gli hostname (in realtà gli indirizzi) possono essere contraffatti.
<p>
Tale metodo va evitato, anche con criteri relativi agli host più restrittivi,
se siete su una rete non fidata (tipo l'accesso dialup con PPP ad Internet).
Vedere <manref name="xhost" section="1x">.
</sect1>

<sect1 id="xssh">Connessioni ad un X server remoto &ndash; <prgn>ssh</prgn>
<p>
L'uso di <prgn>ssh</prgn> permette una connessione sicura da un server X
locale ad un application server remoto.
<list>
<item>Impostate i parametri di <tt>X11Forwarding</tt> e
<tt>AllowTcpForwarding</tt> a <tt>yes</tt> in
<file>/etc/ssh/sshd_config</file> sull'host remoto.  
<item>lanciate l' X server sull'host locale.  
<item>Aprite un <prgn>xterm</prgn> sul'host locale.
<item>Lanciate <prgn>ssh</prgn> per stabilire una connessione col sito remoto.
<example>
localname @ localhost $ ssh -q -X -l loginname remotehost.domain 
Password:
.....
</example>
<item>Eseguire comandi di applicazioni X sul sito remoto.
<example>
loginname @ remotehost $ gimp &
</example>
</list>
Questo metodo permette la visione dell'output del client X remoto come fosse
connesso localmente attraverso uno UNIX domain socket.
</sect1>

<sect1 id="xtermfaq">L'emulatore di terminale di X &ndash; <prgn>xterm</prgn>
<p>
Per conoscere tutto su <prgn>xterm</prgn> guardate a <url id="&xtermfaq;">.
</sect1>

<sect1 id="xresources">X resources
<p>
Molti programmi per X più vecchi, tipo <prgn>xterm</prgn>, usano il cosiddetto X resource
database per configurare il loro aspetto.  Per immagazzinare le risorse
specifiche per l'utente si usa il file <file>~/.Xresources</file>.
Questo file viene fatto confluire automaticamente al login nelle X resources di default.
Le X resources predefinite per il sistema sono contenute in <file>/etc/X11/Xresources/*</file> e i loro 
application defaults in <file>/etc/X11/app-defaults/*</file>.  Usate queste
impostazioni come punto di partenza.
<p>
Ecco alcune impostazioni utili da aggiungere al vostro file
<file>~/.Xresources</file>:
<example>
! Imposta il font ad un più leggibile 9x15
XTerm*font: 9x15

! Mostra la barra di scorrimento
XTerm*scrollBar: true

! Imposta la grandezza del buffer a 1000 linee
XTerm*saveLines: 1000

! Schermo kterm più grande
KTerm*VT100*fontList: -*-fixed-medium-r-normal--24-*,\
 -*-gothic-medium-r-normal--24-*,\
 -*-mincho-medium-r-normal--24-*
</example>
Affinchè queste impostazioni abbianno effetto immediato, fatele confluire nel
database con il comando:
<example>
xrdb -merge ~/.Xresources
</example>
Vedere <manref name="xrdb" section="1x">.

<sect1 id="xmodmap">Mappatura della tastiiera e dei tasti del puntatore in X
<p>
Il programma <prgn>xmodmap</prgn> viene usato per modificare e mostrare la 
la modifier map della tastiera la keymap table usate dalle applicazioni client
per convertire i keycode in keysyms in X.
<example>
$ xmodmap -pm 
 ... mostra la modifier map attuale
$ xmodmap -pk | pager
 ... mostra la keymap tabl attuale
$ xmodmap -e "pointer = 3 2 1" # imposta il mauose per la mano sinistra
$ xmodmap ~/.xmodmaprc # imposta la tastiera come in ~/.xmodmaprc
</example>
E' in genere lanciato dallo script di inizio della sessione di ciascun utente,
<file>~/.xsession</file>. 
<!--
User-customized keymaps and pointer button mappings in X can be
specified in <file>~/.xmodmaprc</file>.
-->
<p>
Per avvere il <tt>keycode</tt>, lanciate <prgn>xev</prgn> in X  e premete i
tasti. Per sapere cosa significa <tt>keysym</tt>, guardate alla definizione MACRO in
<file>/usr/include/X11/keysymdef.h</file>.  Tutte le istruzioni
<tt>#define</tt> in questo file sono chiamate con <tt>XK_</tt> davanti ai nomi
<tt>keysym</tt>.
<p>
Vedere <manref name="xmodmap" section="1x">.

<sect1 id="ss-xsu">Diventare root in X
<p>
Se un programma con interfaccia grafica richiede l'esecuzione da root, usate le seguenti
procedure per visualizzare l'output del programma sull'X server dell'utente.
<strong>Non tentate mai di lanciare un X server direttamente dal root
account</strong> per evitare possibili rischi dal punto di vista della sicurezza.
<p>
Lanciate l' X server come un utente normale, ed aprite una console <prgn>xterm</prgn>.
Poi:
<example>
$ XAUTHORITY=$HOME/.Xauthority
$ export XAUTHORITY
$ su root
Password:*****
# printtool &
</example>
Quando usate questo trucco con <prgn>su</prgn> verso un utente non root, assicuratevi che
<file>~/.Xauthority</file> sia leggibile dal gruppo di detto utente non root.
<p>

<!-- this section moved up -->

Per automatizzare questa sequenza di comandi, create un file
<file>~/.xsession</file> dall'accout utente che contenga le seguenti righe:
<example>
# Questo fa funzionare X quando lancio su verso l'account root.
if [ -z "$XAUTHORITY" ]; then
        XAUTHORITY=$HOME/.Xauthority
        export XAUTHORITY
fi
unset XSTARTUP
# Se si desidera un window/session manager particolare, decommentate la riga seguente
# e modificatela a vostro piacimento.
#XSTARTUP=/usr/bin/blackbox
# Questo lancia il programma x-window/session-manager
if [ -z "$XSTARTUP" ]; then
  if [ -x /usr/bin/x-session-manager ]; then
    XSTARTUP=x-session-manager
  elif [ -x /usr/bin/x-window-manager ]; then
    XSTARTUP=x-window-manager
  elif [ -x /usr/bin/x-terminal-emulator ]; then
    XSTARTUP=x-terminal-emulator
  fi
fi
# lancia automaticamente l'X window/session manager selezionato
exec $XSTARTUP
</example>
Poi lanciate <prgn>su</prgn> (non <tt>su -</tt>) in una finestra
<prgn>xterm</prgn> dell'utente.  I programmi con interfaccia grafica lanciati da
questo <prgn>xterm</prgn> possono visualizzare l'output sull'X window dell'utente mentre
girano con i privilegi di root.  Il trucco funziona finchè si usa il file 
<file>/etc/X11/Xsession</file> di default.
Se un utente fa le proprie modifiche tramite <file>~/.xinit</file>
o <file>~/.xsession</file>, la variabile d'ambiente sopra descritta
<tt>XAUTHORITY</tt> dovrà essere impostata allo stesso modo in questi script.

<p>In alternativa, si può usare, <package>sudo</package> per automatizzare la sequenza di comandi:
<example>
$ sudo xterm
... oppure 
$ sudo -H -s
</example>
In questo caso <file>/root/.bashrc</file> dovrà contenere:
<example>
if [ $SUDO_USER ]; then 
sudo -H -u $SUDO_USER xauth extract - $DISPLAY | xauth merge - 
fi
</example>
Questo funziona bene anche se la directory home dell'utente è montata su NFS
mount, poichè root non legge il file <file>.Xauthority</file>.
<p>
Esistono anche parecchi altri pacchetti specializzati all'uopo:
<package>kdesu</package>, <package>gksu</package>, <package>gksudo</package>,
<package>gnome-sudo</package>, e <package>xsu</package>.  Altri metodi possono
essere usati per raggiungere lo stesso risultato: creare un collegamento simbolico tra
<file>/root/.Xauthority</file> ed il corrispettivo dell'utente; usare lo
script <url id="&suxhome;" name="sux">; or mettere "<tt>xauth merge
~<var>USER_RUNNING_X</var>/.Xauthority</tt>" nello script di inizializzazione di root.
<p>
Vedere anche sulla <url id="&deb-dev-su;" name="lista di messaggi debian-devel">.
</sect1>

<sect1 id="xfs-tt">Font TrueType in X
<p>
Lo standard <prgn>xfs</prgn> in XFree86-4 funziona bene con i fonts TrueType.
Se usate XFree86-3 dovete installare un server di terzi, tipo
<prgn>xfs-xtt</prgn>.
<p>
Dovete solo assicurarvi che con qualsiasi applicazione vogliate usare, i font
TrueType siano collegati a libXft o libfreetype (se usate file .deb
precompilati non dovete nemmeno preoccuparvi di questo, 
probabilmente).
<p>
Per prima cosa, impostate l'infrastruttura per il supporto dei font:_
<list compact>
<item>Installate i pacchetti <package>x-ttcidfont-conf</package> e
<package>defoma</package>. Ciò automatizza la generazione dei file
<file>fonts.scale</file> e <file>fonts.dir</file>.
<example>
# apt-get install x-ttcidfont-conf
</example>
<item>Modificate <file>/etc/X11/XF86Config-4</file> in <tt>Section "Files"</tt>
come segue:
<example>
Section "Files"
    FontPath  "/var/lib/defoma/x-ttcidfont-conf.d/dirs/TrueType"
    FontPath  "/usr/share/fonts/truetype"
    FontPath  "/usr/lib/X11/fonts/CID"
    FontPath  "/usr/lib/X11/fonts/Speedo"
    FontPath  "/usr/lib/X11/fonts/misc"
    FontPath  "/usr/lib/X11/fonts/cyrillic"
    FontPath  "/usr/lib/X11/fonts/100dpi:unscaled"
    FontPath  "/usr/lib/X11/fonts/75dpi:unscaled"
    FontPath  "/usr/lib/X11/fonts/Type1"
EndSection
</example>
la prima riga imposta XFree86 ad usare qualsiasi font TrueType installiate
da un pacchetto &debian;.  
La voce relativa al font Type1 è stata spostata in basso, poichè XFree86 non fa un bel lavoro
nel rendere i font Type1.
Il trucco <tt>:unscaled</tt> per i font bitmap non dovrebbe essere più
necessario con il nuovo XF4, ma lo ho incluso lo stesso, tanto per essere
sicuro.
<!-- per /usr/share/doc/xfree86-common/README.fonts.gz in 4.2.1 -->
<p>
Per mantenere le modifiche manuali a <file>/etc/X11/XF86Config-4</file>
seguite le istruzioni in <ref id="manual-config-x">.
</list>
<p>
Poi installate i pacchetti di font DFSG:
<list compact>
<item>Western TrueType font:
<list compact>
<item><package>ttf-bitstream-vera</package>: font TrueType di
alta qualità, creati day Bitstream, Inc.
<footnote>
Sebbene non disponibili per in Woody, potete installarli da Sarge.
</footnote>
<item><package>ttf-freefont</package>: font gratuiti TrueType di alta
qualità che comprende il gruppo di caratteri UCS.
<item><package>ttf-thryomanes</package>: font TrueType unicode che copre
Latino, Graco, Cirillico ed IPA.
</list>
<item>Asian font:
<list compact>
<item><package>tfm-arphic-bsmi00lp</package>: Chinese Arphic "AR PL
Mingti2L Big5" TrueType font TeX font metric data
<item><package>tfm-arphic-bkai00mp</package>: Chinese Arphic "AR PL
KaitiM Big5" TrueType font TeX font metric data
<item><package>tfm-arphic-gbsn00lp</package>: Chinese Arphic "AR PL
SungtiL GB" TrueType font TeX font metric data
<item><package>tfm-arphic-gkai00mp</package>: Chinese Arphic "AR PL
KaitiM GB" TrueType font TeX font metric data
<item><package>ttf-baekmuk</package>: serie di font TrueType Korean Baekmuk 
<item><package>hbf-jfs56</package>: Chinese Jianti Fangsong 56x56 bitmap
font (GB2312) per CJK
<item><package>hbf-cns40-b5</package>: Chinese Fanti Song 40x40 bitmap
font (Big5) per CJK
<item><package>hbf-kanji48</package>: Japanese Kanji 48x48 bitmap font
(JIS X-0208) perr CJK
</list>
</list>
<!-- Need to watch Japanese font issue -->
<p>
Siccome i font <strong>Free</strong> sono talvolta limitati, installarne o 
condividerne di commerciali è un'opzione per gli utenti &debian;. Per rendere
facile tale processo, sono stati creati alcuni pacchetti
ad hoc:
<list compact>
<item><package>ttf-commercial</package>
<item><package>msttcorefonts (>1.1.0)</package>
<footnote>
Il pacchetto in Woody non funziona, almeno fino al 8/2002, a causa di
modifiche al sito della Microsoft. Usate la versione di Sarge anche in Woody, invece.
</footnote>
</list>
Avrete un'ottima selezione di font TrueType al costo di contaminare
il vostro sistema <strong>Free</strong> con font non-Free.
<p>
Tutti questi pacchetti di font dovrebbero funzionare in &debian; senza sforzi, ed
apparire disponibili a tutti i programmi che usano il font system 
"centrale". Ciò include programmi tipo Xterm, Emacs, e molte altre
applicazioni non-KDE e non-GNOME.
<p>
Ora, lanciate <prgn>xfontsel</prgn> e scegliete qualsiasi font TrueType nel
menu fndry, dovreste essere in grado di vedere molte voci disponibili nel menu
"fmly".
<p>
Per KDE2.2 e GNOME1.4 (con libgdkxft0, che è un trucco per costringere GTK 1.2
ad eseguire il rendering dei font anti-aliased), dovete impostare anche Xft1.
Xft1 è altamente deprecato ed è in pratica usato solo da GNOME1.4 e da
KDE2.2.  Modificate <file>/etc/X11/XftConfig</file> ed aggiungete una riga
tipo
<example>
    dir "/var/lib/defoma/x-ttcidfont-conf.d/dirs/TrueType"
</example>
<p>
prima delle altre righe dir. 
<footnote>
Io non ho più roba xft1 sulla mia macchina, per cui non sono certo se 
avete bisogno di riavviare X o no prima che le modifiche abbiano effetto.
Mi pare di ricordare che "xftcache" aggiorni la cache Xft1, ma sarebbe bello
che qualcuno possa confermarlo per
me.
</footnote>
<p>
Per GNOME2 e KDE3 (dopo il rilascio di Sarge), dovete impostare 
<package>fontconfig</package> che usa Xft2 per trovare i font. 
<footnote>
<package>Fontconfig</package> non esiste in Woody.  
</footnote>
Non dovreste aver bisogno di installare alcunchè di extra per questo,
pochè tutti i pacchetti che usano <package>fontconfig</package> Dipendono
già da esso (indirettamente).
<p>
Prima gurdate in <file>/etc/fonts/fonts.conf</file>.  Dovrebbe esserci una
riga come quella sotto.  Se non c'è, aprite
<file>/etc/fonts/local.conf</file> ed aggiungete questo
<example>
    &lt;dir&gt;/var/lib/defoma/x-ttcidfont-conf.d/dirs/TrueType&lt;/dir&gt;
</example>
subito dopo la riga &lt;fontconfig&gt;.
<p>
<package>Fontconfig</package> dovrebbe prenderli immediatamente ed
"fc-list" dovrebbe elencare i vostri nuovi font. Un'altra valida caratteristica 
di <package>fontconfig</package> è che potete inserire semplicemente i font
da <file>~/.fonts/</file> e tutti i vostri programmi fontconfigurati avranno
accesso a loro immediatamente.
<p>
Se installate manualmente un set di font TrueType mentre siete in X senza
usare un pacchetto &debian;, lanciate
<example>
# xset fp rehash
</example>
per far sì che XFree86 guardi al contenuto di quella directory nuovamente e
prenda i nuovi font.

<sect1 id="ss-browser">Web Browser (grafici)
<p>
In Woody esistono alcuni pacchetti di Web browser 
con capacità grafiche:
<list compact>
<item><package>mozilla</package> Il browser Mozilla (nuovo)
<item><package>galeon</package> Browser basato su Mozilla con interfaccia Gnome (nuovo)
<item><package>konqueror</package> Browser KDE
<item><package>dillo</package> Browser GTK
<item><package>amaya-gtk</package> Browser di riferimento W3C
<item><package>amaya-lesstif</package> idem come sopra
<item><package>netscape-...</package> (molti, vecchio)
<item><package>communicator-...</package> (molti, vecchio)
<item>...
</list>
La versione di <package>mozilla</package> deve corrispondere a quella 
richiesta da <package>galeon</package>.  Nonostante differiscano nell'interfaccia,
entrambi condividono il motore di rendering HTML Gecko.
<p>
I plug-in per i browser tipo <package>mozilla</package> e
<package>galeon</package> possono essere abilitati installando manualmente "<tt>*.so</tt>" 
nella directory plug-in e riavviando i browser.
<p>
Varie risorse per i plug-in:
<list compact>
<item>Java plug-in: installate i binari di "J2SE" da <url id="&javasunhome;">.
<item>Flash plug-in: installate i binari di "Macromedia Flash Player 5" da
 <url id="&flashhome;">.
<item><package>freewrl</package>: Browser VRML e plugin per Netscape
<item>...
</list>
</sect1>

<!-- CJK and X moved to bottom with different name to locale section -->

</sect>

<sect id="ssh">SSH
<p>
SSH (Secure SHell) è il modo sicuro per connettersi via Internet. Una versione free
di SSH, chiamata OpenSSH è disponibile come pacchetto <package>ssh</package>
in &debian;.

<sect1 id="ssh-basics">Principi basilari di SSH
<p>
Installate prima il server ed il client OpenSSH.
<example>
# apt-get update && apt-get install ssh
</example>
E' necessario il riferimento a non-US in <file>/etc/apt/source.list</file>.
<file>/etc/ssh/sshd_not_to_be_run</file> non deve essere presente se si vuole far 
girare il server OpenSSH.
<p>
SSH ha due protocolli di autenticazione:
<list>
<item>Versione 1: 
 <list compact>
<item>Solo Potato supporta questo protocollo.
<item>metodi di autenticazione disponibili:
  <list compact>
<item>RSAAuthentication: autenticazione utente basata su "RSA identity key"
<item>RhostsAuthentication: autenticazione host basata su .rhosts 
 (insicura, disabilitata)
<item>RhostsRSAAuthentication: autenticazione .rhosts combinata con 
 "RSA host key" (disabilitata)
<item>ChallengeResponseAuthentication: autenticazione "RSA challenge-response"
<item>PasswordAuthentication: autenticazione basata su password
  </list>
 </list>
<item>Versione 2: 
 <list compact>
<item>tutte le versioni post-Woody la usano come protocollo primario.
<item>metodi di autenticazione disponibili:
  <list compact>
<item>PubkeyAuthentication: autenticazione utente basata su chiave pubblica
<item>HostbasedAuthentication: autenticazione basata su <file>.rhosts</file> o
 <file>/etc/hosts.equiv</file>  
 combinata con autenticazione dell'host basata su chiave pubblica del client (disabilitata)
<item>ChallengeResponseAuthentication: autenticazione challenge-response
<item>PasswordAuthentication: autenticazione basata su password
  </list>
 </list>
</list>

<p>
Fate attenzione a queste differenze se state migrando da Woody od usando un sistema 
non-&debian;.  
<p>
Vedere <file>/usr/share/doc/ssh/README.Debian.gz</file>,
<manref name="ssh" section="1">, 
<manref name="sshd" section="8">,
<manref name="ssh-agent" section="1">, e
<manref name="ssh-keygen" section="1"> per i dettagli.

<p>
A seguire i file di configurazione chiave:

<list>

<item><file>/etc/ssh/ssh_config</file>: Il default per il client SSH.
 Vedere <manref name="ssh" section="1">.  Voci da notare sono:

 <list compact>
<item><tt>Host</tt>: Restringe le seguenti dichiarazioni 
  (fino alla Host keyword successiva) ad essere le uniche per i dati host 
   a corrispondere ad uno dei pattern dati dopo la keyword.
<item><tt>Protocol</tt>: Specifica la versione di protocollo SSH.  
 Default è "2,1".
<item><tt>PreferredAuthentications</tt>: Specifica il metodo di autenticazione 
 del client SSH2.  Il default è 
"hostbased,publickey,keyboard-interactive,password".
<item><tt>PasswordAuthentication</tt>: Se volete accedere con una 
 password, dovete assicurarvi chenon sia impostato su <tt>no</tt>.
<item><tt>ForwardX11</tt>: E' disabilitato di default.  Si può scavalcare con l'opzione
 "<tt>-X</tt>".
 </list>

<item><file>/etc/ssh/sshd_config</file>: Il default per il server SSH.
 Vedere <manref name="sshd" section="8">.   Voci da notare sono:

 <list compact>
<item><tt>ListenAddress</tt>: Specifica l'indirizzo locale verso cui 
 <prgn>sshd</prgn> dovrebbe essere in ascolto. Sono permesse opzioni multiple.
<item><tt>AllowTcpForwarding</tt>: Disabilitato di default.  
<item><tt>X11Forwarding</tt>: Disabilitato di default.
 </list>

<item><file>$HOME/.ssh/authorized_keys</file>: lista delle chiavi pubbliche di
default usate dai client per connettersi ad un dato account sul dato host.
Vedere <manref name="ssh-keygen" section="1">.

<item><file>$HOME/.ssh/identity</file>: 
Vedere <manref name="ssh-add" section="1"> 
e <manref name="ssh-agent" section="1">.
</list>

<p>
I seguenti comandi lanciano una connessione <prgn>ssh</prgn> da un client.
<example>
$ ssh username@hostname.domain.ext 
$ ssh -1 username@hostname.domain.ext # Forza la versione 1 di SSH
$ ssh -1 -o RSAAuthentication=no -l username foo.host
    # forza la password su SSH1
$ ssh -o PreferredAuthentications=password -l username foo.host
    # forza la password su SSH2
</example>
Per l'utente, <prgn>ssh</prgn> funziona da <prgn>telnet</prgn> più sicuro ed
intelligente (non vi bombarda con ^]).

</sect1>

<sect1 id="ssh-forward">Port forwarding &ndash; per il tunneling SMTP/POP3
<p>
Per stabilire una pipe per connettere la porta 25 del <var>server-remoto</var> dalla
porta 4025 del localhost, e la porta 110 del <var>server-remoto</var> dalla porta 4110 del localhost
attraverso <prgn>ssh</prgn>, eseguite sulla macchina locale:
<example>
# ssh -q -L 4025:server-remoto:25 4110:server-remoto:110 \
           username@server-remoto
</example>
E' un modo sicuro di eseguire connessioni a server SMTP/POP3 su Internet.
impostate  la voce <tt>AllowTcpForwarding</tt> a <tt>yes</tt> in 
<file>/etc/ssh/sshd_config</file> sull'host remoto.
</sect1>

<sect1 id="ssh-rsa">Connettersi con meno passwords &ndash; RSA
<p>
Potete evitare di ricordare una password per ogni sistema remoto
usando la RSAAuthentication (protocollo SSH1) o PubkeyAuthentication (protocollo SSH2).  
<p>
Sul sistema remoto impostate i rispettivi parametri,
"RSAAuthentication yes" o "PubkeyAuthentication yes", in 
<file>/etc/ssh/sshd_config</file>.
<p>
Infine, generate le chiavi di autenticazione localmente ed installate la chiave pubblica
sul sistema remoto:
<example>
$ ssh-keygen          # RSAAuthentication: chiave RSA per SSH1
$ cat .ssh/identity.pub | ssh user1@remote \
        "cat - &gt;&gt;.ssh/authorized_keys"
...
$ ssh-keygen -t rsa   # PubkeyAuthentication: chiave RSA per SSH2
$ cat .ssh/id_rsa.pub | ssh user1@remote \
        "cat - &gt;&gt;.ssh/authorized_keys"
...
$ ssh-keygen -t dsa   # PubkeyAuthentication: chiave DSA per SSH2
$ cat .ssh/id_dsa.pub | ssh user1@remote \
        "cat - &gt;&gt;.ssh/authorized_keys"
</example>
Potrete cambiare la passphrase in seguito con "<tt>ssh-keygen -p</tt>".
Verificate le impostazioni provando la connessione. In caso di problemi, usate
"<tt>ssh -v</tt>".
<p>
Potete aggiungere delle opzioni ai parametri in <prgn>authorized_keys</prgn> per limitare gli
host e per eseguire comandi specifici. Vedere <manref name="sshd" section="8"> per i dettagli.
<p>
Notate che SSH2 ha <tt>HostbasedAuthentication</tt>. Affinchè funzioni, 
dovete aggiustare le impostazioni di <tt>HostbasedAuthentication</tt> a <tt>yes</tt> in 
both <file>/etc/ssh/sshd_config</file> on the server machine and 
<file>/etc/ssh/ssh_config</file> o <file>$HOME/.ssh/config</file> sulla macchina
client.
</sect1>

<sect1 id="ssh-client">Client SSH differenti
<p>
Esistono alcuni client SSH disponibili per piattaforme non Unix e simili.
<taglist>
<tag>Windows
<item><url id="&puttyhome;" name="puTTY"> (GPL)
<tag>Windows (cygwin)
<item>SSH in <url id="&cygwinhome;" name="cygwin"> (GPL)
<tag>Macintosh Classic
<item><url id="&macsshhome;" name="macSSH"> (GPL) [Notate che Mac OS X
  include OpenSSH; usate <tt>ssh</tt> nell'applicazione Terminal]
</taglist>
Vedere anche <url id="&sfdochome;" name="SourceForge.net, site documentation">, 
"6. CVS Instructions".

<sect1 id="ssh-agent">SSH agent
<p>
E' più sicuro proteggere la vostra autenticazione SSH con una passphrase.
Se non è impostata, usate <tt>ssh-keygen -p</tt> per farlo.
<p>
Inserite la vostra chiave pubblica (p. es <file>~/.ssh/id_rsa.pub</file>)
in <file>~/.ssh/authorized_keys</file>, su un host remoto mediante una
connessione basata su password come descritto in
<ref id="ssh-rsa">.
<example>
$ ssh-agent bash # oppure lanciate zsh/tcsh/pdksh.
$ ssh-add ~/.ssh/id_rsa
Enter passphrase for /home/osamu/.ssh/id_rsa:
Identity added: /home/osamu/.ssh/id_rsa (/home/osamu/.ssh/id_rsa)
$ scp <var>foo</var> <var>user@remote.host:foo</var>
 ... da qui in poi più nessuna passphrase richiesta :-)
$^D
 ... terminando la sessione di ssh-agent 
</example>
Per l'X server, i normali script di lancio &debian; eseguono
<prgn>ssh-agent</prgn> come processo genitore. Così, dovete eseguire 
<prgn>ssh-add</prgn> solo una volta.
<p>
Per ulteriori informazioni, leggete <manref name="ssh-agent" section="1"> e
<manref name="ssh-add" section="1">.
</sect1>

<sect1 id="ssh-trouble">Risoluzione dei problemi con SSH
<p>
In caso di problemi, controllate i permessi del file di configurazione e
lanciate <prgn>ssh</prgn> con l'opzione "<tt>-v</tt>".
<p>
Usate l'opzione "<tt>-P</tt>" se siete root ed avete problemi col firewall, per evitare di
usare le porte del server 1&ndash;1023.
<p>
Se le connessioni <prgn>ssh</prgn> ad un sito remoto smettono improvvisamente di funzionare, ciò
può essere dovuto a maneggiamenti dell'amministratore o, più probabilmente a cambiamenti in
<prgn>host_key</prgn> durante la manutenzione del sistema.  Dopo essersi assicurati che è proprio questo il caso e che
nessuno sta tentando di falsificare l'host remoto mediante qualche trucco
geniale, potete riguadagnare la connessione rimuovendo la voce <prgn>host_key</prgn> da
<file>$HOME/.ssh/known_hosts</file> della macchina locale.
</sect1>

</sect>

<sect id="mail">Posta
<p>
La configurazione della posta si divide in tre categorie:
<list>
<item>agenti di trasferimento posta (mail transfer agent, MTA): <prgn>exim4</prgn>, <prgn>exim</prgn>,
 <prgn>postfix</prgn>, 
 <prgn>sendmail</prgn>, <prgn>qmail</prgn>, <prgn>ssmtp</prgn>,
 <prgn>nullmailer</prgn>, ...
<item>utilità per la posta: <prgn>procmail</prgn>, <prgn>fetchmail</prgn>,
<prgn>mailx</prgn>, <prgn>crm114</prgn>, ...
<item>agenti di gestione posta per l'utente (mail user agent, MUA): <prgn>mutt</prgn>
<prgn>emacs</prgn>+<prgn>gnus</prgn>, ...
</list>

<sect1 id="mta">Mail transport agent (MTA)
<p>
Per un MTA con tutte le funzionalità, usate <package>exim</package> in Woody e
<package>exim4</package> in Sarge.
<footnote>
Le sezioni seguenti usano <prgn>exim</prgn> negli esempi.  Per Sarge
sostituitelo con <prgn>exim4</prgn> dove necessario.
</footnote>
Riferimenti:
<list compact>
<item>i pacchetti <package>exim-doc</package> e <package>exim-doc-html</package>
per <package>exim</package>
<item><package>exim4-doc-info</package> e 
 <package>exim4-doc-html</package> per <package>exim4</package>
<item><url id="&eximhome;">
</list>
L'unica alternativa ragionevole è <package>postfix</package> se avete a 
cuore la sicurezza. <package>sendmail</package> e
<package>qmail</package> sono disponibili come pacchetti &debian;, ma non sono
raccomandati.
<p>
Se non avete bisogno delle capacità specifiche di un MTA, come nel caso di un
sistema satellite tipo un portatile, potete prendere in considerazione uno di
questi pacchetti leggeri.
<list compact>
<item><prgn>ssmtp</prgn>: ncessita di una connessione SMTP ed supporta gli
alias.
<item><prgn>nullmailer</prgn>: può distribuire la posta, ma non supporta gli
alias.
</list>
Al momento, trovo <prgn>exim</prgn> più adatto, anche per la mia
workstation pesonale, che è un PC portatile.
<p>
Potreste dover rimuovere <prgn>exim</prgn> per installare questi pacchetti
conflittuali:
<example>
# dpkg -P --force-depends exim
# apt-get install nullmailer         # o ssmtp
</example> 

<sect2 id="exim-smart">Smarthost
<p>
Se avete <prgn>exim4</prgn> o <prgn>exim</prgn> su un host connesso tramite
servizi commerciali, assicuratevi di inviare la posta in
uscita attraverso uno smarthost
offerto dal vostro ISP, o da qualcun altro.
<footnote>
Dovete segure questa regola per qualsiasi host connesso tramite linea
analogica, DSL, cavo o LAN attraverso qualche route a larga banda  Anche se
il vostro host casalingo ha un IP fisso dato dal vostro ISP, è sempre una
buona idea seguire questa regola. Granparte delle workstation e dei server
ricadono in questa categoria.
</footnote>
esistono alcune buone ragioni:
<list compact>
<item>per assicurarsi più tentativi SMTP, in quanto lo smarthost del vostro
ISP ha una connessione più affidabile.
<item>evitare di inviare la posta direttamente da un <strong>indirizzo IP
dinamico</strong>, che verrà con ogni probabilità bloccato dalle liste dial-u
dello spam.
<item>per risparmiare la vostra banda locale per inviare posta a destinatari
multipli. 
</list>
<p>
Le uniche eccezioni possibili sono:
<list compact>
<item>cura di emergenza per i problemi del servizio SMTP del vostro ISP.
<item>un esperimento a scopi educativi.
<item>il vostro host è un server hosted professionalmente
</list>

<sect2 id="exim-base">Configurazione base di Exim
<p>
per usare <prgn>exim</prgn> e <prgn>exim4</prgn> come MTA, configurate:
<example>
/etc/exim/exim.conf     "eximconfig" per crearlo e modificarlo
/etc/exim4/*            "dpkg-reconfigure exim4-config" per crearlo e modificarlo (exim4)
/etc/inetd.conf         decommentate smtp per lanciare exim come demone
/etc/email-addresses    Aggiungete una lista di indirizzi email fasulli
</example>
controllate i filtri usando <prgn>exim4</prgn> o <prgn>exim</prgn> con 
<tt>-brw, -bf, -bF, -bV, ...</tt> ecc.

<sect2 id="addr-catchall">Raccolta di tutti gli indirizzi e-mail inesistenti in Exim
<p>
In <file>/etc/exim/exim.conf</file> (Woody e seguenti),
aggiungete nella sezione DIRECTORS alla fine, (dopo localuser: director) un
indirizzatore (director) che raccolga tutti gli indirizzi che i directors
precedenti non hanno potuto risolvere (Secondo Miquel van Smoorenburg):
<example>
catchall:
  driver = smartuser
    new_address = <var>webmaster@mydomain.com</var>
</example>
<p>
Se si desidera avere una ricetta più dettagliata per ogni dominio virtuale,
ecc., aggiungete la seguente riga alla fine di <file>/etc/exim/exim.conf</file> 
(secondo me, non ben testato):
<example>
*@yourdomain.com ${lookup{$1}lsearch*{/etc/email-addresses} \
        {$value}fail} T
</example>
Aggiungete, poi una "*" in <file>/etc/email-addresses</file>.
</sect2>

<sect2 id="addr-rewrite">Riscrivere selettivamente l'indirizzo per la posta in uscita (Exim)
<p>
<!-- Derrick 'dman' Hudson dman@dman.ddts.net -->
La riscrittura selettiva dell'indirizzo per la posta in uscita per avere un giusto
header "From:" può essere fatta con <prgn>exim</prgn>
configurando verso la parte finale <file>/etc/exim/exim.conf</file>:
<example>
*@host1.something.dyndns.org \
  "${if eq {${lookup{$1}lsearch{/etc/passwd}{1}{0}}} {1}  \
   {$0}{$1@somethig.dyndns.org}}"  frFs
</example>
Ciò riscrive tutti gli indirizzi che coincidono con <tt>*@host1.something.dyndns.org</tt>.
<enumlist>
<item>Cerca dentro <file>/etc/password</file> per vedere se la parte locale ($1)
   è un utente locale o no.
<item>Se lo è, riscrive l'indirizzo facendolo coincidere con la stessa cosa trovata 
   al primo posto ($0).
<item>Se non lo è, riscrive la parte del dominio.
</enumlist>

<sect2 id="smtp-aauth">Configurare l'autenticazione SMTP in Exim
<p>
Alcuni servizi SMTP, tipo yahoo.com richiedono l'autenticazione SMTP.
Configurate <file>/etc/exim/exim.conf</file> come segue:
<example>
remote_smtp:
  driver = smtp
  authenticate_hosts = smtp.mail.yahoo.com
...

smarthost:
  driver = domainlist
  transport = remote_smtp
  route_list = "* smtp.mail.yahoo.com bydns_a"
...

plain:
  driver = plaintext
  public_name = PLAIN
  client_send = "^cmatheson3^this_is_my_password"
</example>
Non dimenticate le virgolette doppie sull'ultima riga.

<sect1 id="fetchmail">Ritirare la posta &ndash; Fetchmail
<p>
<prgn>fetchmail</prgn> viene eseguito in modalità demone per raccogliere la posta
dagli account POP3 del vostro provider smistandoli nel sistema locale di posta. Configurate:
<example>
/etc/init.d/fetchmail   
/etc/rc?.d/???fetchmail lancia update-rc.d fetchmail default priority 30
/etc/fetchmailrc        file di configurazione (chown 600, posseduto da fetchmail)
</example>
<p>
Le informazioni su come lanciare fetchmail come demone dallo script <prgn>init.d</prgn> 
in Potato sono confuse (in Woody è stato risolto). Vedere i file di esempio
<file>/etc/init.d/fetchmail</file> e <file>/etc/fetchmailrc</file> negli
<url id="&examples;" name="script di esempio">.
<p>
Se i vostri header di posta sono infestati da ^M per colpa del mailer
del vostro provider, aggiungete "stripcr" alle vostre opzioni in <file>$HOME/.fetchmailrc</file>:
<example>
options fetchall no keep stripcr
</example>
</sect1>

<sect1 id="procmail">Processare la posta &ndash; Procmail
<p>
<prgn>procmail</prgn> è il sistema locale di consegna e filtraggio della posta. Per ogni
account che lo usa si deve creare un file <file>$HOME/.procmailrc</file>. Per esempio:
<url id="&examples;" name="_procmailrc">
</sect1>

<sect1 id="crm114">Processare lo spam con <package>crm114</package>
<p>
Il pacchetto <package>crm114</package> fornisce lo script
<prgn>/usr/share/crm114/mailfilter.crm</prgn>, che è scritto in
CRM114.  Esso fornisce un filtro per lo spam molto efficace, che può essere
instruito fornendogli spam e posta normale.
<p>
CRM114 è un piccolo linguaggio disegnato per scrivere dei filtri;
consideratelo una versione di grep con superpoteri. Vedere <manref name="crm" section="1">.
</sect1>

<sect1 id="mutt">Leggere la posta &ndash; Mutt
<p>
Usate <prgn>mutt</prgn> come MUA in combinazione con
<prgn>vim</prgn>.
Personalizzatelo tramite <file>~/.muttrc</file>; per esempio:

<example>
# usa il modo visuale e "gq" per riformattare le citazioni
set editor="vim -c 'set tw=72 et ft=mail'"
#
# impostazione degli header, presa direttamente dal manuale ("Sven's Draconian header weeding")
#
ignore *
unignore from: date subject to cc
unignore user-agent x-mailer
hdr_order from subject to cc date user-agent x-mailer
auto_view application/msword
....
</example>
<p>
Aggiungete quanto segue a <file>/etc/mailcap</file> o a
<file>$HOME/.mailcap</file> per visualizzare messaggi in HTML ed allegati MS Word:
<example>
text/html; lynx -force_html &percnt;s; needsterminal;
application/msword; /usr/bin/antiword '&percnt;s'; copiousoutput;
description="Microsoft Word Text"; nametemplate=&percnt;s.doc
</example>

</sect1>

</sect>

<sect id="l10n">Localizzazione (l10n)
<p>
&debian; è internazionalizzato, offrendo supporto per un numero crescente di
lingue e convenzioni locali. La sottosezione seguente elenca alcune delle diversità che
&debian; attualmente supporta, mentre la successiva tratta della
<strong>localizzazione</strong>, ovvero il processo di personalizzare il vostro ambiente di
lavoro per permettere il giusto input ed output del(i) linguaggio(i) scelto(i) e le convenzioni
per date, formati numerici e monetari e per tutti gli aspetti che caratterizzano una data regione.

<sect1 id="languages">Le basi della localizzazione
<p>
Ci sono alcuni aspetti da considerare per la personalizzazione della localizzazione ed il supporto 
della propria lingua nazionale.

<sect2 id="keyboard">Localizzare la tastiera
<p>
&debian; è distribuito con le keymap per quasi due dozzine di tastiere.
In Woody, riconfigurate la tastiera con:

<list compact>
<item><tt>dpkg-reconfigure --priority=low console-data # console</tt>
<item><tt>dpkg-reconfigure --priority=low xserver-xfree86   # XF4</tt>
<item><tt>dpkg-reconfigure --priority=low xserver-common-v3 # XF3</tt>
</list>
</sect2>

<sect2 id="data-stream">Localizzare i file di dati
<p>
La gran parte dei pacchetti software Debian supporta il trattamento dei dati 
    formati da caratteri non-US-ASCII attraverso la variabile d'ambiente LC_CTYPE 
    offerta dalla tecnologia <strong>locale</strong> in glibc 
   
    <list compact>
    <item>8-bit clean: praticamente tutti i programmi
    <item>altri set di caratteri "Latin" (p.es. ISO-8859-1 o ISO-8859-2): la
                  maggioranza dei
    <item>linguaggi multibyte tipo Cinese, Giapponese o Coreano:
                  molte applicazioni recenti
    </list>
</sect2>

<sect2 id="display">Localizzare lo schermo
<p>
X è in grado di mostrare qualsiasi coding, compreso UTF-8 e supporta tutti i font.
La lista comprende non solo tutti i font a 8-bit, ma anche quelli a 16-bit, 
come il Cinese, Giapponese o Coreano.  Il metodo di inserimento dei caratteri
multibite è supportato dal meccanismo XIM.  
Vedere <ref id="x-cjk"> e <ref id="x-utf-8">.
<p>
La visualizzazione del codice Giapponese EUC è anche disponibile nella console
grafica (S)VGA, tramite il pacchetto <package>kon2</package>.  Esiste anche un
nuovo display giapponese alternativo, <package>jfbterm</package> che usa la
console framebuffer.  In queste console, il metodo di inserimento dei
caratteri giapponesi deve essere fornito dalla applicazione.  Usate il
pacchetto <package>egg</package> per Emacs ed il pacchetto giapponesizzato <package>jvim</package> per Vim.
<p>
L'installazione di font non Unicode in X aiuta a mostrare i documenti con
qualsiasi condifica. Quindi, non preoccupatevi tanto della codifica dei font.
</sect2>

<sect2 id="translation">Localizzare i messaggi e la documentazione
<p>
Traduzioni esistono per molti dei messaggi di testo e documenti che vengono
    visualizzati nel sistema &debian;, tipo messaggi di errore, output dei
    programmi, menu e pagine man.  Al momento il supporto per le pagine di
    manuale in Tedesco, Spagnolo, Finlandese, Francese, Ungherese, Italiano, Giapponese,
    Coreano, Polacco, Portoghese, Cinese e Russo,  viene fornito attraverso i pacchetti
    <tt>manpages-<var>LANG</var></tt> (dove <var>LANG</var> è una lista
    separata da virgole dei codici nazione ISO (di due lettere). Usate
    <tt>apt-cache search manpages-|less</tt> per avere una lista delle pagine
    di manuale Unix disponibili.)
    <p>
    Per accedere ad una pagina di manuale NLS, l'utente deve impostare la variabile
    d'ambiente LC_MESSAGES alla stringa appropriata. Per esempio, in caso di
    pagine di manuale in Italiano, LC_MESSAGES dovrà essere impostata a <tt>it</tt>.
    Il programma <prgn/man</prgn> cercherà quindi le pagine in Italiano sotto
    <file>/usr/share/man/it/</file>.
</sect2>
</sect1>

<sect1 id="locales">I locale
<p>
Debian supporta la tecnologia <strong>locale</strong>.  Locale è un meccanismo
che permette ai programmi di fornire un valido output e funzionalità in
accordo con le convenzioni locali, tipo il set di caratteri, il formato per
data e ora, il simbolo di valuta, e così via. Usa delle variabili d'ambiente
per determinare il comportamento più appropriato.  Per esempio, assumendo che
abbiate installati i locale per L'Inglese Americano ed il Tedesco sul vostro
sistema, i messaggi di errore di molti programmi potrebbero essere bilingue:
<example>
$ LANG="en_US" cat foo
cat: foo: No such file or directory
$ LANG="de_DE" cat foo
cat: foo: Datei oder Verzeichnis nicht gefunden
</example>
Glibc offre il supporto per locale ai programmi sotto forma di libreria.  Vedere
<manref name="locale" section="7">.

<sect1 id="base-locale">Introduzione ai locale
<p>
Una descrizione completa di locale consiste in 3 parti: <tt>xx_YY.ZZZZ</tt>.
<list compact>
<item><strong><tt>xx</tt></strong>: ISO 639 codici lingua (minuscolo)
<item><strong><tt>YY</tt></strong>: ISO 3166 codici nazione (maiuscolo)
<item><strong><tt>ZZZZ</tt></strong>: codeset, cioè set di caratteri od
identificatore di codifica.
</list>
<p>
Per i codici lingua e nazione, vedere una descrizione pertinente in
<tt>info gettext</tt>.
<p>
Notate che la parte codeset può venire normalizzata internamente per ottenere
una compatibilità cross platform rimuovendo tutti i <tt>-</tt> e convertendo
tutti i caratteri in minuscolo. Codeset tipici sono:
<list compact>
  <item><strong>UTF-8</strong>: Unicode per tutte le regioni, principalmente
  in Ottetti 1-3 (il nuovo standard di fatto)
  <item><strong>ISO-8859-1</strong>: western Europe (di fatto il vecchio standard)
  <item><strong>ISO-8859-2</strong>: eastern Europe (Bosnian, Croatian, Czech,
       Hungarian, Polish, Romanian, Serbian, Slovak,  Slovenian)
  <item><strong>ISO-8859-3</strong>: Maltese
  <item><strong>ISO-8859-5</strong>: Macedonian, Serbian
  <item><strong>ISO-8859-6</strong>: Arabic
  <item><strong>ISO-8859-7</strong>: Greek
  <item><strong>ISO-8859-8</strong>: Hebrew
  <item><strong>ISO-8859-9</strong>: Turkish
  <item><strong>ISO-8859-11</strong>: Thai (=TIS-620)
  <item><strong>ISO-8859-13</strong>: Latvian, Lithuanian, Maori
  <item><strong>ISO-8859-14</strong>: Welsh
  <item><strong>ISO-8859-15</strong>: western Europe con euro
  <item><strong>KOI8-R</strong>: Russian
  <item><strong>KOI8-U</strong>: Ukrainian
  <item><strong>CP1250</strong>: Czech, Hungarian, Polish (MS Windows origin)
  <item><strong>CP1251</strong>: Bulgarian, Byelorussian (MS Windows origin)
  <item><strong>eucJP</strong>: Unix style Japanese (=ujis)
  <item><strong>eucKR</strong>: Unix style Korean 
  <item><strong>GB2312</strong>: Unix style Simplified Chinese (=GB, =eucCN) for zh_CN
  <item><strong>Big5</strong>: Traditional Chinese for zh_TW
  <item><strong>sjis</strong>: Microsoft style Japanese (Shift-JIS) 
</list>
Per quanto riguarda il gergo del sistema base di codifica:
<list compact>
<item><strong>ASCII</strong>: 7 bit (0-0x7f)
<item><strong>ISO-8859-?</strong>: 8 bit (0-0xff)
<item><strong>ISO-10646-1</strong>: Universal Character Set (UCS) (31 bit, 0-0x7fffffff)
<item><strong>UCS-2</strong>: Primi 16 bit di UCS, 2 Ottetti pieni (Unicode: 0-0xffff)
<item><strong>UCS-4</strong>: UCS 4 Ottetti pieni (UCS: 0-0x7fffffff)
<item><strong>UTF-8</strong>: UCS codificcato in 1-6 Ottetti (principalmente in 3 Ottetti)
<item><strong>ISO-2022</strong>: 7 bit (0-0xff) con la sequenza di escape
ISO-2022-JP è la codifica più popolare per la posta elettronica in Giapponese.
<item><strong>EUC</strong>: Combinazione 8 bit + 16 bit (0-0xff), Unix style
<item><strong>Shift-JIS</strong>: Combinazione 8 bit + 16 bit (0-0xff), Microsoft
style.
</list>
ISO-8859-?, EUC, ISO-10646-1, UCS-2, UCS-4, ed UTF-8 condividono lo stesso
codice con ASCII per i caratteri a 7 bit.  EUC o Shift-JIS usa caratteri 
high-bit (0x80-0xff) per indicare che parte della codifica è a 16
bit.  Anche UTF-8 usa caratteri high-bit (0x80-0xff) per indicare byte con
sequenze di caratteri non a 7 bit, e questo è il sistema di codifica più sano
per gestire i caratteri non-ASCII.
<p>
Notate la differenza nell'ordine dei byte della implementazione Unicode:
<list compact>
<item><strong>Standard  UCS-2, UCS-4</strong>: big endian
<item><strong>Microsoft UCS-2, UCS-4</strong>: little endian per ix86 (macchina-dipendente)
</list>
Vedere <ref id="recode"> per la conversione fre i vari set di caratteri. Per
maggiori informazioni, vedere <url id="&intro-i18n;" name="Introduzione a i18n">.

<sect1 id="activate-locales">Attivare le capacità di supporto locale
<p>
&debian; <strong>non</strong> arriva con tutti i locale disponibili
precompilati. Controllate <file>/usr/lib/locale</file> per vedere quali
(oltre a quello predefinito, "C") sono compilati sul vostro sistema. Se quello di
cui avete bisogno non è presente, avete due opzioni:
<list compact>
 <item>Modificare <file>/etc/locale.gen</file> per aggiungere il locale desiderato, poi
   lanciate <prgn>locale-gen</prgn> da root per compilarlo. Vedere <manref
   name="locale-gen" section="8"> e le pagine di manuale elencate nella 
   sua sezione "SEE ALSO".
 <item>Lanciare <tt>dpkg-reconfigure locales</tt> per riconfigurare il pacchetto
   <package>locales</package>. Oppure, se non è stato ancora installato,
   l'installazione di <package>locales</package> invocherà l'interfaccia debconf per farvi
   scegliere il locale richiesti e compilare il database.
 <!--  XXX FIXME XXX 
 <item>Run <prgn>localedef</prgn> manually from user account to compile 
   the locale database and use it by setting 
   <tt>LOC_PATH</tt> 
   environment variable.  For example for <tt>en_GB.UTF-8</tt>:
   <example>
$ localedef -v -c -i en_GB -f UTF-8 <var>somewhere/</var>en_GB.UTF-8
$ export LOC_PATH=<var>somewhere/</var>
   </example>
 -->
</list>

<sect1 id="env-locale">Attivare un locale in particolare
<p>
Le seguenti variabili d'ambiente vengono valutate in questo ordine per fornire ai programmi
particolari valori di locale:
<enumlist>
<item>LANGUAGE: Consiste di una lista di nomi di locale, separati da 
      una virgola, in ordine di priorità. Usata solo se il locale POSIX
      è impostato ad un valore diverso da "C" [in Woody; la versione Potato
      ha sempre priorità sul locale POSIX]. (Estensione GNU)
<item>LC_ALL: Se non è nullo, il valore è usato per tutte le categorie di locale.
      (POSIX.1) Di solito "" (nullo).
<item>LC_*: Se non è nullo, il valore è utilizzato per la 
      categoria corrispondente (POSIX.1).  Di solito "C".
<p>
      Variabili LC_* sono:
 <list compact>
<item>LC_CTYPE: Classificazione e conversione dei caratteri.
<item>LC_COLLATE: Ordine di collazione.
<item>LC_TIME: Formati data e ora.
<item>LC_NUMERIC: Formati numerici non monetari.
<item>LC_MONETARY: Formati di valuta.
<item>LC_MESSAGES: Formati dei messaggi informativi e diagnostici, nonchè
            delle risposte interattive.
<item>LC_PAPER: Formato carta.
<item>LC_NAME: Formati dei nomi.
<item>LC_ADDRESS: Formati degli indirizzi e località.
<item>LC_TELEPHONE: Formati dei numeri telefonici.
<item>LC_MEASUREMENT: Unità di misura (Sistema Metrico decimale od Altri).
<item>LC_IDENTIFICATION: Metadati sulle informazioni di locale.
 </list>
<item>LANG:   Se non è nullo e se LC_ALL non è definito, il valore è usato per
      tutte le categorie di locale LC_* con valori non definiti. (POSIX.1) Di solito
      "C".
</enumlist>
Notate che alcune applicazioni (p.es., Netscape 4) ignorano le impostazioni LC_*.
<p>
Il programma <prgn>locale</prgn> può mostrare le impostazioni attive ed i locale
disponibili; vedere <manref name="locale" section="1">. (NOTA: <tt>locale
-a</tt> elenca tutti i locale che il vostro sistema conosce; questo
<em>non</em> significa che tutti siano compilati! Vedere
<ref id="activate-locales">.)


<sect1 id="ISO-locale">Formato data ISO 8601
<p>
Il supporto locale per lo standard internazionale di data <tt>aaaa-mm-gg</tt>
(formato data ISO 8601) è fornito dal locale chiamato <tt>en_DK</tt>, 
"English in Denmark" che è una sorta di gioco di parole :-)
Sembra funzionare solo in console per <prgn>ls</prgn>.

<!-- beyond locale moved to below -->

<sect1 id="iso-8859-1">Esempio per US (ISO-8859-1)
<p>
Aggiungete le righe seguenti in <file>~/.bash_profile</file>:
<example>
LC_CTYPE=en_US.ISO-8859-1
export LC_CTYPE
</example>

<sect1 id="france">Esempio per l'Italiano con euro (ISO-8859-15)
<p>
Aggiungete le righe seguenti in <file>~/.bash_profile</file>:
<example>
LANG=it_IT@euro
export LANG
LC_CTYPE=it_IT@euro
export LC_CTYPE
</example>
<p>
Configurate la tastiera per l'Italiano "QWERTY" come descritto in <ref id="keyboard">.
ed aggiungete le pagine di manuale in Italiano installando <package>manpages-it</package>.
Il tasto Right-Alt degli USA è Alt-Gr in Europa.  Premedolo con altri tasti 
crea molti caratteri speciali.
Per esempio, Alt-Gr+E crea il segno dell'euro.
<p>
Molti dei linguaggi dell'Europa occidentale possono essere configurati allo stesso modo.
<p>
Vedere <url id="&debian-euro-support;" name="Debian Euro HOWTO"> per 
aggiungere il supporto per l'euro e 
<url id="&debian-fr-howto;" name="Utiliser et configurer Debian pour le français"> 
per maggiori dettagli per il Francese (NdT: no, per l'Italiano non mi risulta un equivalente).

<sect1 id="x-cjk">Esempio per un sistema multilingue per X window system
<p>
Impostiamo un sistema multilingue che supporti simultaneamente Giapponese,
Inglese Tedesco e Francese con codifiche EUC, UTF-( ed ISO-8859-1 sulle
diverse console.
<p>
Vi mostrerò una personalizzazione del &debian; menu system.  Vedere i dettagli
del &debian; menu system in <url id="&f-menu;">.  Creerò anche una scorciatoia
al browser <prgn>mozilla</prgn>.
 <footnote>
In questo esempio vengono usate due soluzioni ai bug della versione 2003 di
<prgn>blackbox</prgn>. Io uso <tt>sh -c</tt> nel comando. Nemmeno la voce
<file>~/.menu/*</file> viene usate, ma avendone bisogno root, si è invece
usata <file>/etc/menu/*</file>.
 </footnote>
<list>

 <item>aggiungere il supporto locale per il Giapponese ja_JP.eucJP e gli altri
 locale richiesti  usando il metodo descritto in <ref id="l10n">. (per
 tutti)

 <item>installare il sistema di conversione da-Kana-a-Kanji ed il dizionario
 (per il Giapponese):
  <list compact>
  <item><package>canna</package> &mdash; Server locale, (licenza tipo "free beer"), oppure
  <item><package>freewnn-jserver</package> &mdash; server estensibile in network 
   (Dominio Pubblico)
  </list>

 <item>installare il metodo di input Giapponese:
  <list compact>
  <item><package>kinput2-canna</package> &mdash; per X, oppure
  <item><package>kinput2-canna-wnn</package> &mdash; per X,e
  <item><package>egg</package> &mdash; lavora direttamente con Emacsen persino 
    in console (opzionale)
  </list>

 <item>Installate i terminali compatibili (per tutti)
  <list compact>
  <item><package>xterm</package> &ndash; X (per ISO-8859-1 ed UTF-8),
  <item><package>kterm</package> &mdash; X (per Giapponese EUC) e
  <item><package>mlterm</package> &mdash; X (multilingue) 
  </list>

 <item>Aggiungere tutti i pacchetti di font richiesti (per tutti)
 
 <item>create <file>~/.xsession</file> che imposta l'ambiente X specifico per l'utente:
 come descritto in <ref id="custom-x">. (per tutti):
<example>
#!/bin/sh
# Questo fa funzionare X quando lancio su verso l'account root.
if [ -z "$XAUTHORITY" ]; then
        XAUTHORITY=$HOME/.Xauthority
        export XAUTHORITY
fi

# Set specific environment through debian menu system.
# Reset locale
unset LC_CTYPE LC_NUMERIC LC_TIME LC_COLLATE LC_MONETARY LC_MESSAGES 
unset LC_PAPER LC_NAME LC_ADDRESS LC_TELEPHONE LC_MEASUREMENT 
unset LC_IDENTIFICATION LC_ALL LANG LANGUAGE PAGER
# set locale default in X
LANG=C
# export locale
export LC_CTYPE LC_NUMERIC LC_TIME LC_COLLATE LC_MONETARY LC_MESSAGES 
export LC_PAPER LC_NAME LC_ADDRESS LC_TELEPHONE LC_MEASUREMENT 
export LC_IDENTIFICATION LC_ALL LANG LANGUAGE PAGER
###
# activate input method for Japanese with kinput2
kinput2 &
XMODIFIERS="@im=kinput2"
export XMODIFIERS
# How about blackbox window manager (lightweight)
exec blackbox
#exec xfwm
#exec wmaker
</example>

 <item>impostate locale in <file>~/.bash_profile</file> per le console Linux
 (per tutti).
 
 <item>rimuovete le impostazioni di locale da <file>~/.bashrc</file> se
 esistenti (per tutti).

 <item>create alcuni file in <file>/etc/menu/</file> (per tutti)
 <list compact>
 <item><file>/etc/menu/xterm-local</file>: (aggiungete nuove voci al menu)
 <footnote>
Usate nomi dei file che non sono uguali a nessun nome di pacchetto.
 </footnote>
<example>
?package(xterm):\
 needs=x11\
 section=XShells\
 longtitle="XTerm: terminal emulator (en_US.ISO-8859-1)"\
 title="XTerm (en_US.ISO-8859-1)"\
 command="sh -c 'LC_ALL=en_US.ISO-8859-1 xterm'"
?package(xterm):\
 needs=x11\
 section=XShells\
 longtitle="XTerm: terminal emulator (de_DE.ISO-8859-1)"\
 title="XTerm (de_DE.ISO-8859-1)"\
 command="sh -c 'LC_ALL=de_DE.ISO-8859-1 xterm -T xterm-de'"
?package(xterm):\
 needs=x11\
 section=XShells\
 longtitle="XTerm: terminal emulator for X with Unicode support (Japanese)"\
 title="UXTerm (ja_JP.UTF-8)"\
 command="sh -c 'LC_ALL=ja_JP.UTF-8 uxterm'"
</example>
 <item><file>/etc/menu/kterm</file>: (scavalca le impostazioni predefinite)
 <footnote>
Usate nomi dei file che corrispondono ai nomi dei pacchetti
 </footnote>
<example>
?package(kterm):\
 needs="x11"\
 section="XShells"\
 command="sh -c 'LC_ALL=ja_JP.eucJP PAGER=w3m /usr/X11R6/bin/kterm -xim'" \
 title="Kanji Terminal"
?package(kterm):\
 needs="x11"\
 section="XShells"\
 command="sh -c 'LANG=ja_JP.eucJP \
          LC_MESSAGES=en_US.ISO-8859-1 PAGER=w3m /usr/X11R6/bin/kterm -xim'" \
 title="Kanji Terminal (bilingal)"
</example>
 <item><file>/etc/menu/mozilla-local</file>: (aggiungete una nuova scorciatoia)
 <footnote>
 La slash in <tt>section="/"</tt> abilita le vosi nel menu iniziale e lo 
 spazio iniziale in <tt>title=" Mozilla Navigator"</tt> pone la voce in cima
 alla lista.
 </footnote>
<example>
?package(mozilla-browser):needs="x11" section="/" \
        title=" Mozilla Navigator" command="mozilla-1.5" hints="Web browsers" \
        icon=/usr/share/pixmaps/mozilla.xpm
</example>
 <item>lanciate <prgn>update-menus</prgn> dall'account di root.
 </list>
 <item>aggiungete le righe seguenti in <file>~/.muttrc</file> (per il Giapponese):
<example>
# il supporto UTF-8 non è popolare nell'ambiente EMACS Giapponese l'encoding a
# 7 bit di iso-2022-jp è più semplice per tutti 
# default encoding order = us-ascii --&gt; iso-8859-1 --&gt; iso-2022-jp
set send_charset="us-ascii:iso-8859-1:iso-2022-jp
set allow_8bit=no
</example>
 <item>attiva XIM <prgn>kinput2</prgn> per applicazioni X
 (per il Giapponese)
  <list compact>
  <item>aggiungete <tt>*inputMethod: kinput2</tt> e
  <tt>KTerm*VT100*OpenIM:true</tt> al vostro file
  <file>~/.Xresources</file> (sembra che Debian se ne prenda carico
  automaticamente, in qualche modo). 
  <item>Alcune applicazioni (tipo <prgn>mlterm</prgn>) permettono anche di 
  impostare <tt>*inputMethod:</tt> ed altre informazioni in maniera dinamica all'avvio (premete
  <strong>Ctrl-MouseButton-3</strong> in <prgn>mlterm</prgn>).
  </list>
 <item>lanciate X digitando <tt>startx</tt> o da uno dei display manager
 (<prgn>xdm</prgn>, <prgn>gdm</prgn>, <prgn>kdm</prgn>, <prgn>wdm</prgn>, ...)  
 (per tutti)
 <item>lanciate l'applicazione compatibile con il Giapponese, tipo Vim 6, (x)emacs21, mc-4.5, mutt-1.4, ...  
 in <prgn>ktern</prgn> 
 (per il Giapponese).
 (Emacs sembra la piattaforma più popolare, sebbene io non la usi.)  
 <item>premete <strong>Maiusc+Spazio</strong> per attivare e disattivare il modo input
  modo Giapponese.
 <item>legget la pagine di manuale localizzata lanciandone il comando in una
 console localizzata (per tutti).
</list>
Per altro supporto per il linguaggio CJK, vedere le sezioni seguenti ed
anche le <url id="&suse-cjk;" name="pagine SuSE per CJK">.

<sect1 id="x-input">Metodi alternativi di input in X
<!-- I need feed back from Chinese and Korean people for here -->
<p>
Molti i pacchetti disponibili che supprtano metodi alternativi di input in X:
<example>
LIngua     LC_CTYPE     XIM server XMODIFIERS              Tasto per il lancio
Japanese   ja_JP*       kinput2    "@im=kinput2"           Maiusc-Spazio
Korean     ko_KR*       ami        "@im=Ami"               Maiusc-Spazio
Chinese(T) zh_TW.Big5   xcin       "@im=xcin-zh_TW.big5"   Ctrl-Spazio
Chinese(S) zh_CN.GB2312 xcin       "@im=xcin-zh_CN.GB2312" Ctrl-Spazio
</example>
<p>
Il metodo Giapponese, <prgn>kinput2</prgn> è offerto dai pacchetti
<package>kinput2-canna-wnn</package>,
<package>kinput2-canna</package> e <package>kinput2-wnn</package>.
Il metodo Giapponese necessita di un server per il dizionario, tipo <package>canna</package> e
<package>freewnn-jserver</package> per essere pratico.

<!--
<p>
Korean and Chinese may also use dictionary server such as 
<package>freewnn-kserver</package> and
<package>freewnn-cserver</package> too.
-->

<sect1 id="x-term">Emulatori di terminale in X
<p>
Sono molte le console in X che supportano la semplice codifica a 8 bit quando
i pacchetti dei font pertinenti sono installati:
<list compact>
  <item><package>xterm</package> &ndash; L'X terminal emulator
  <item><package>gnome-terminal</package> &ndash; <package>xterm</package> 
   per Gnome
  <item><package>konsole</package> &ndash; <package>xterm</package> 
   per KDE
  <item><package>rxvt</package> &ndash; terminale VT102 (leggero)
  <item><package>aterm</package> &ndash; VT102 per Afterstep WM
  <item><package>eterm</package> &ndash; VT102 per Enlightment WM
  <item><package>wterm</package> &ndash; VT102 per WindowMaker WM
</list>
<p>
Il supporto per la codifica multi-byte vine fornito da
<package>xterm</package> tramite la codifica UTF-8 (<ref id="x-utf-8">).
Altri metodi di supporto tradizionali sono in fase di lavorazione (al 2003).
I seguenti pacchetti offrono supporti tradizionali:
<list compact>
  <item><package>aterm-ml</package> &ndash; Multi-lingue
  <item><package>kterm</package> &ndash; Multi-lingue (Giapponese, ...)
  <item><package>rxvt-ml</package> &ndash; Multi-lingue
  <item><package>wterm-ml</package> &ndash; Multi-lingue 
  <item><package>cxterm-big5</package> &ndash; Cinese (Trad., Big5)
  <item><package>cxterm-gb</package> &ndash; Cinese (Simp., GB)
  <item><package>cxterm-ks</package> &ndash; Cinese (KS)
  <item><package>cxterm-jis</package> &ndash; Giapponese
  <item><package>hanterm-classic</package> &ndash; Coreano (Hangul)
  <item><package>hanterm-xf</package> &ndash; Coreano (Hangul)
  <item><package>hztty</package> &ndash; Cinese (GB, Big5, zW/HZ)
</list>
Per <prgn>kterm</prgn> (e possibilmente altri), potreste voler attivare
XIM da menu dopo aver premuto Ctrl-tasto-centrale del mouse.

<sect1 id="x-utf-8">Supporto UTF-8 per l'emulatore di terminale in X
<p>
Il supporto UTF-8 per l'emulatore di terminale viene fornito dal programma
<prgn>uxterm</prgn> del pacchetto <package>xterm</package> per
XFree86 4.x.  Abilita il supporto per tutte le lingue. E' un wrapper
di <manref name="xterm" section="1"> che invoca quest'ultimo con
impostata la X resource class "UXTerm".
<p>
Per esempio, per abilitare la bella visione ingrandita dei caratteri Inglese,
Russo, Giapponese, Cinese e Coreano, aggiungete quanto segue al vostro
<file>~/.Xresources</file> dopo aver installato i font pertinenti:
<example>
! set large font
UXTerm*font: -misc-fixed-medium-r-normal-*-18-120-100-100-c-90-iso10646-1
! Use XIM for Japanese
*inputMethod: kinput2
</example> 
Poi eseguite <tt>xrdb -merge ~/.Xresources</tt> per aggiornare le X resources
come descritto in <ref id="xresources">.
<p>
Sebbene gran parte dei pacchetti dei programmi di console popolari, come
<package>vim</package>, <package>mutt</package>, e
<package>emacs</package> sono stati resi compatibili con UTF-8 di recente
(Woody-Sarge), un programma come <package>mc</package> ancora non lo è, ma 
semplicemente è 8-bit clean. Se state lavorando sulla parte a 7 bit ASCII di
un file dalla codifica sconosciuta o mista, è più sicuro usare un editor
locale ignaro dell'8-bit clean.
<p>
Vedere <url id="&unicode-howto;" name="The Unicode HOWTO">.

<sect1 id="fb-utf-8">Esempio per UTF-8 in console framebuffer
<p>
Il supporto UTF-8 sulla console FB è fornito da <package>bterm</package> usato
nel <package>debian-installer</package>.

<sect1 id="beyond-locale">Oltre i locale
<p>
Quando state impostando il sistema per la prima volta per un
<strong>linguaggio nazionale</strong>, prendete in considerazione l'uso di
<prgn>tasksel</prgn> o di <prgn>aptitude</prgn> per scoprire quali pacchetti
vengono selezionati scegliendo il task corrispondente al linguaggio prescelto.
La scelta dei pacchetti fatta in tal modo è utile persino per un setup
multilingua. Se vi imbattete in qualche conflitto di dipendenze durante
l'installazione del vostro raffinato sistema, evitate di installare i
programmi che sono in conflitto col sistema esistente.  Potreste dover
utilizzare <prgn>update-alternative</prgn> per riguadagnare lo stato originale
per alcuni comandi, dato che quelli puù recentemente installati potrebbero
avere priorità più elevate rispetto a quelli preesistenti.
<p>
I programmi principali più recenti usano glibc 2.2 e sono molto
internazionalizzati.  Quindi, versioni localizzate in maniera particolare, come
<prgn>jvim</prgn> per VIM possono non essere necessarie e la sua funzionalità è
offerta da <prgn>vim</prgn> versione 6.0 in X.  In realtà, è ancora da raffinare.
Dato che <prgn>jvim</prgn> ha una versione compilata con il supporto diretto per il
Giapponese IM (<prgn>canna</prgn>) ha il supporto persino in console
ed è indirizzato verso molte altre caratteristiche giapponesi, ed è maturo,
potreste ancora volerlo :-)
<p>
I programmi potrebbero avere la necessità di essere configurati oltre la configurazione <tt>locale</tt>,
per fornire un ambiente di lavoro confortevole.  Il pacchetto
<package>language-env</package> ed il suo comando
<prgn>set-language-env</prgn> facilitano di molto questo processo.
<p>
Vedere anche il documento sulla internazionalizzazione, <url id="&intro-i18n;" 
name="Introduction to i18n">. E' indirizzato agli sviluppatori, ma è anche utile per gli 
amministratori di sistema.
</sect1>

</sect>

<sect id="m17n">Multilingualizzazione (m17n)
<p>
<ref id="l10n"> abilitato dal pacchetto <package>language-env</package> e
simili, è mirato ad ottenere una localizzazione monolingua. Questi pacchetti
usano anche codifiche tradizionali come scelta per la codifica del testo. Non
potete mescolare in un tale ambiente testo in Francese e Giapponese, poiche
utilizzano codifiche incompatibili ISO-8859-1 ed EUC-JP, rispettivamente.
<p>
Potete ottenere un Desktop multilingua UTF-8 usando GNOME e KDE eseguiti sotto
uno dei locale UTF-8 disponibili. (Sarge) In tale ambiente potrete mescolare
caratteri inglesi, cinesi, russi e giapponesi sotto programmi complianti con
UTF-8.
<p>
<package>m17n-env</package> è uno script di aiuto per l'impostazione di un
tale ambiente.  L'ambiente multilingua UTF-8 viene configurato eseguendo il
comando <prgn>set-m17n-env</prgn> dagli account di root ed utente.

<footnote>
Il pacchetto <package>language-env</package> non è molto utile in un ambiente
multilingualizzato.
</footnote>
<p>
In un tale ambiente, il nuovo metodo di input multilingualizzato (IM) che usa
<package>scim</package> è da preferirsi. IM offerto da
<package>scim</package> viene attivato e disattivato premendo Ctrl-spazio
insieme.  Il motore di conversione dell'input può essere cambiato cliccando il
piccolo pannello SCIM.
<p>
Potete ancora avere un facile accesso all'ambiente di codifica tradizionale
attraverso le console locale personalizzate, create da
<package>m17n-env</package>. Ciò torna utile in caso di modifiche a vecchi
file con codifica EUC-JP o ISO-8859-1.
</sect>
</chapt>

