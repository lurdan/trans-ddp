#!/usr/bin/perl -w
# I hereby place this in the public domain - Osamu Aoki, 2002
#
# Copy SGML sources from en to $language
#
if ( $#ARGV != 0 ) {die "usage: $0 language\n";} ;
#
$language = $ARGV[0];
open FILELIST, "(cd en >/dev/null; ls -1 *.sgml; cd - >/dev/null)|" or die "Shoot I can not open file list\n" ;
while ($filename=<FILELIST>) {
	chomp $filename;
	open (INFILE, 'en/'.$filename, ) or die "Shoot I can not open $filename for input\n" ;
	open (OUTFILE, '>'.$language.'/'.$filename) or die "Shoot I can not open $language/$filename for output\n" ;
	while ($line=<INFILE>) {
		print OUTFILE $line;
		if ($line =~ /<!--\s*CVS revision of this document\s*\"[\$]Revision:\s*([\d\.]+)\s*\$\"\s*-->/) {
			# [] around \$ is needed to keep cvs away from changing text here :-) 
			print OUTFILE "<!-- CVS revision of original english document \"$1\"  -->\n" ;
		}
	}
}
