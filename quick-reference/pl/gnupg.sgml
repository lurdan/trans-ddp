<!-- CVS revision of this document "$Revision: 1.5 $"  -->
<!-- CVS revision of original english document "1.18"  -->

<chapt id="gnupg">GnuPG

<p>
Odno¶niki:
<list compact>
<item><manref name="gpg" section="1">.
<item><file>&dochome;gnupg/README.gz</file>
<item><em>GNU privacy handbook</em> w
 <file>&dochome;gnupg-doc/GNU_Privacy_Handbook/</file>
 (zainstaluj pakiet <package>gnupg-doc</package>)
</list>

<sect>Instalacja GnuPG
<p>
<example>
$ gpg --gen-key
            # tworzenie nowej pary kluczy
$ gpg --gen-revoke <var>ID_u¿ytk</var>
            # tworzenie certyfikatu uniewa¿nienia klucza dla <var>ID_u¿ytk</var>ownika
$ host -l pgp.net | grep www | less
            # znajdowanie serwerów kluczy
</example>
Jak na razie, dobrymi serwerami kluczy s±:
<example>
keyserver wwwkeys.eu.pgp.net
keyserver wwwkeys.pgp.net
</example>
Musisz uwa¿aæ, aby <strong>nie tworzyæ wiêcej, ni¿ dwa podklucze</strong>.
Je¶li tak zrobisz, serwery kluczy w pgp.net <strong>popsuj±</strong> Twój klucz.
U¿yj nowszego <package>gnupg</package> (>1.2.1-2), aby obs³u¿yæ te popsute
podklucze. Zobacz <url id="&gpg-subkeys;">.
<p>
Miej równie¿ na uwadze, ¿e w <file>$HOME/.gnupg/options</file> mo¿na ustawiæ
tylko jeden serwer kluczy.
<p>
Niestety, nastêpuj±ca konstrukcja ju¿ nie dzia³a:
<example>
keyserver search.keyserver.net
keyserver pgp.ai.mit.edu
</example>

</sect>

<sect>U¿ywanie GnuPG
<p>
Obs³uga plików:
<example>
$ gpg  [opcje]  <var>polecenie  [argumenty]</var>
$ gpg {--armor|-a} {--sign|-s} <var>plik</var>
            # zapisanie podpisanego pliku do pliku tekstowego <var>plik</var>.asc
$ gpg --clearsign <var>plik</var>
            # z³o¿enie podpisu z zachowaniem czytelno¶ci tekstu
$ gpg --clearsign --not-dash-escaped <var>plik_³aty</var>
            # podpisanie z zachowaniem czytelno¶ci pliku ³aty
$ gpg --verify <var>plik</var>
            # sprawdzenie podpisu <var>plik</var>u
$ gpg -o <var>plik.sig</var> {-b|--detach-sig} <var>plik</var>
            # z³o¿enie podpisu oddzielnego od dokumentu
$ gpg --verify <var>plik.sig</var> <var>plik</var>
            # sprawdzenie oddzielonego podpisu <var>plik.sig</var>
$ gpg -o <var>plik_wynik</var> {--recipient|-r} <var>nazwa</var> {--encrypt|-e} <var>plik</var>
            # zaszyfrowanie <var>plik</var>u kluczem publicznym u¿ytkownika o danej nazwie
$ gpg -o <var>plik_wynik</var> {--symmetric|-c} <var>plik</var>
            # szyfrowanie algorytmem symetrycznym
$ gpg -o <var>file</var> --decrypt <var>plik_szyfr</var>
            # odszyfrowanie danych z <var>plik_szyfr</var>
</example>
</sect>

<sect>Utrzymywanie GnuPG
<p>
Zarz±dzanie kluczami:
<example>
$ gpg --edit-key <var>ID_u¿ytk</var>
            # &ldquor;help&rdquor; w celu uzyskania pomocy, tryb interaktywny
$ gpg -o <var>plik</var> --exports
            # eksport wszystkich kluczy do <var>plik</var>u
$ gpg --imports <var>plik</var>
            # import wszystkich kluczy z <var>plik</var>u
$ gpg --send-keys <var>ID_u¿ytk</var>
            # eksport klucza o podanym <var>ID_u¿ytk</var>ownika do serwera kluczy
$ gpg --recv-keys <var>ID_u¿ytk</var>
            # pobieranie klucza o podanym <var>ID_u¿ytk</var>ownika z serwera kluczy
$ gpg --list-keys <var>ID_u¿ytk</var>
            # wypisanie kluczy o podanym <var>ID_u¿ytk</var>ownika
$ gpg --list-sigs <var>ID_u¿ytk</var>
            # wypisanie podpisów kluczy o podanym <var>ID_u¿ytk</var>ownika
$ gpg --check-sigs <var>ID_u¿ytk</var>
            # sprawdzenie podpisów na kluczach o podanym <var>ID_u¿ytk</var>ownika
$ gpg --fingerprint <var>ID_u¿ytk</var>
            # sprawdzenie odcisku klucza o danym <var>ID_u¿ytk</var>ownika
$ gpg --list-sigs | grep '^sig' | grep '[User id not found]' \
  | awk '{print $2}' | sort -u | xargs gpg --recv-keys # get unknown keys
            # pobranie kluczy dla ka¿dego nieznanego podpisu
</example>
Kod zaufania:
<example>
-         Brak przypisanego poziomu zaufania / jeszcze nie obliczony.
e         Obliczanie poziomu zaufania nie powiod³o siê.
q         Zbyt ma³o informacji do obliczeñ.
n         Nie ufaj temu kluczowi.
m         Czê¶ciowo zaufany.
f         W pe³ni zaufany.
u         Zaufanie bezgraniczne.
</example>
Nastêpuj±ce polecenie eksportuje mój klucz &ldquor;<var>A8061F32</var>&rdquor; do wielu serwerów:
<example>
$ for xx in us es cz de dk uk ch net.uk earth.net.uk; \
$ do gpg --keyserver wwwkeys.$xx.pgp.net  --send-keys <var>A8061F32</var>; done
</example>
</sect>

<sect>U¿ywanie GnuPG z innymi programami
<p>
<sect1>U¿ywanie GnuPG z Muttem
<p>
Aby powstrzymaæ wolne GnuPG od automatycznego startowania, pozwalaj±c
jednocze¶nie na u¿ycie go przez wpisanie `<tt>S</tt>', dodaj nastêpuj±cy wpis do
<file>~/.muttrc</file>.
<example>
macro index S ":toggle pgp_verify_sig\n"
set pgp_verify_sig=no
</example>

<sect1 id="vimgpg">U¿ywanie GnuPG z Vimem
<p>
Aby w sposób przezroczysty u¿ywaæ GnuPG, dodaj zawarto¶æ pliku <file>vimgpg</file> z
<url id="&examples;" name="katalogu z przyk³adami"> do <file>~/.vimrc</file>.

</chapt>
