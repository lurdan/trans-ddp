<!-- CVS revision of this document "$Revision: 1.10 $"  -->
<!-- CVS revision of original english document "1.155"  -->

<chapt id="tune">Dostrajanie systemu &debian;
<p>
Ten rozdzia³ opisuje tylko podstawy konfiguracji systemu, z u¿yciem narzêdzi
linii poleceñ. Powiniene¶ najpierw przeczytaæ
<ref id="install">.  
<p>
Je¶li chcesz siê dowiedzieæ czego¶ o bezpieczeñstwie, przeczytaj 
<url id="&securing-debian-howto;" name="Securing Debian Manual">,
który znajduje siê w pakiecie 
<package>&p-securing-debian-howto;</package>.

<sect id="init-hints">Inicjalizacja systemu
<p>
&debian; u¿ywa systemu skryptów inicjalizacyjnych System V.
Dobrym wprowadzeniem jest lektura <ref id="init">.

<sect1 id="init-defaults">Dostosowywanie skryptów startowych do w³asnych
potrzeb.
<p>
Najprostszym sposobem na kontrolowanie zachowania systemu inicjalizuj±cego
jest zmiana przypisañ zmiennych ¶rodowiskowych w pliku nazwanym tak jak 
skrypt, a znajduj±cym siê w katalogu <file>/etc/default/</file>.
<footnote>
Pliki w <file>/etc/default/</file> zawieraj± <strong>tylko</strong>
przypisania zmiennych ¶rodowiskowych.
Ka¿dy plik jest wch³aniany przez skrypt inicjalizuj±cy odpowiedni dla niego
w taki sposób, ¿e te przypisania nadpisuj± jakiekolwiek domy¶lne ustawienia
zmiennych ¶rodowiskowych w skrypcie.
Wybór tego katalogu jest <url id="&etc-defaults;" name="typowy"> dla
systemu &debian;. W gruncie rzeczy jest to odpowiednik 
<file>/etc/sysconfig</file> znanego z systemu RedHat i innych dystrybucji.
</footnote>
Na przyk³ad, <file>/etc/default/hotplug</file> mo¿e zostaæ u¿yty do
kontrolowania pracy <file>/etc/init.d/hotplug</file>.
<file>/etc/default/rcS</file> mo¿e zostaæ wykorzystany do dostrojenia 
ustawieñ dla <prgn>motd</prgn>, <prgn>sulogin</prgn>, itp. podczas startu
systemu.
<p>
Je¶li zmieniaj±c te zmienne nie mo¿esz otrzymaæ po¿±danego rezultatu,
mo¿esz zmodyfikowaæ skrypt inicjalizuj±cy; to równie¿ pliki konfiguracyjne.

<sect1 id="syslogd">Logowanie komunikatów systemowych
<p>
Zachowanie programu loguj±cego mo¿e byæ modyfikowane poprzez
<file>/etc/syslog.conf</file>.
Sprawd¼ pakiet <package>colorize</package> je¶li szukasz programu do
kolorowania logów systemowych. 
Zobacz tak¿e <manref name="syslogd" section="8"> oraz
<manref name="syslog.conf" section="5">.
</sect1>

<sect1 id="hdtune">Optymalizacja sprzêtu
<p>
Istnieje kilka ustawieñ sprzêtowych, których optymalizacjê &debian;
pozostawia w gestii administratora.
<list>
<item><package>hdparm</package>
 <list compact>
<item>Optymalizacja dostêpu dysku twardego. Bardzo skuteczna.
<item>Niebezpieczne. Przeczytaj <manref name="hdparm" section="8"> przed
u¿yciem.
<item><tt>hdparm -tT <var>/dev/hda</var></tt>, aby sprawdziæ szybko¶æ dostêpu
do dysku.
<item><tt>hdparm -q -c3 -d1 -u1 -m16 <var>/dev/hda</var></tt>, aby
przyspieszyæ dzia³anie nowoczesnego dysku IDE. (Mo¿e byæ niebezpieczne.)
</list>

<item><package>setcd</package>
 <list compact>
<item>Optymalizacja dostêpu napêdu p³yt kompaktowych.
<item><tt>setcd -x <var>2</var></tt>, aby zmniejszyæ prêdko¶æ do <var>2</var>x.
<item>Zobacz <manref name="setcd" section="1">.
 </list>

<item><package>setserial</package>
 <list compact>
<item>Zbiór narzêdzi do konfiguracji portu szeregowego.
 </list>

<item><package>scsitools</package>
 <list compact>
<item>Zbiór narzêdzi do konfiguracji urz±dzeñ SCSI.
 </list>

<item><package>memtest86</package>
 <list compact>
<item>Zbiór narzêdzi do testowania pamiêci RAM.
 </list>

<item><package>hwtools</package>
 <list compact>
<item>Zbiór narzêdzi do niskopoziomowej konfiguracji sprzêtu.
  <list compact>
   <item><prgn>irqtune</prgn>: zmienia priorytet IRQ, aby zapewniæ go tym urz±dzeniom,
   które wymagaj± wy¿szego priorytetu i szybkiego obs³u¿enia ( np. porty
   szeregowe, modemy). Mo¿liwe jest nawet trzykrotne zwiêkszenie
   przepustowo¶ci modemu/portu szeregowego.
   <item><prgn>scanport</prgn>: skanuje adresy I/O od 0x100 do 0x3ff w celu znalezienia
   zainstalowanych urz±dzeñ ISA.
   <item><prgn>inb</prgn>: narzêdzie odczytuj±ce porty I/O i wy¶wietlaj±ce otrzymane
   wyniki w formacie binarnym i szesnastkowym.
  </list>

 </list>

<item><package>schedutils</package>
 <list compact>
<item> Narzêdzie do zmiany ustawieñ programu szereguj±cego j±dra Linuksa
(scheduler).
<item>Zawiera <prgn>taskset</prgn>, <prgn>irqset</prgn>, <prgn>lsrt</prgn>, 
 oraz <prgn>rt</prgn>.
<item>W po³±czeniu z <prgn>nice</prgn> i <prgn>renice</prgn> 
 (nie bêd±cymi czê¶ci± tego pakietu), pozwalaj± na pe³n± kontrolê parametrów
 programu szereguj±cego.
 </list>
</list>
<p>
Montowanie systemu plików z opcj± <tt>noatime</tt> jest tak¿e bardzo skutecznym
rozwi±zaniem w przyspieszaniu odczytu plików. Zobacz
<manref name="fstab" section="5"> i <manref name="mount" section="8">.
<p>
Niektóre urz±dzenia mog± byæ konfigurowane bezpo¶rednio przez j±dro Linuksa,
poprzez system plików proc. Zobacz <ref id="proc-sys">.
<p>
W Debianie istnieje wiele narzêdzi przeznaczonych dla konkretnego sprzêtu.
Wiele z nich zwi±zanych jest z laptopami. Oto lista interesuj±cych pakietów
dostêpnych w Debianie:
<list compact>
<item><package>tpconfig</package> - Program do konfiguracji urz±dzeñ typu touchpad
<item><package>apmd</package> - Konfiguracja zaawansowanego zarz±dzania energi±  (APM)
<item><package>acpi</package> - Wy¶wietla informacje o urz±dzeniach z ACPI
<item><package>acpid</package> - Narzêdzie konfiguracji ACPI
<item><package>lphdisk</package> - Przygotowuje partycjê hibernacyjn± dla
Phoenix NoteBIOS
<item><package>sleepd</package> - Usypia laptopa, gdy jest nieu¿ywany
<item><package>noflushd</package> - Pozwala bezczynnym dyskom na wolniejszy obrót
<item><package>big-cursor</package> - Wiêkszy kursor w X-ach
<item><package>acme</package> - Obs³uga &ldquor;multimedialnych przycisków&rdquor; w
laptopie
<item><package>tpctl</package> - Narzêdzie konfiguracji IBM ThinkPad
<item><package>mwavem</package> - Obs³uga modemów Mwave/ACP
<item><package>toshset</package> - Umo¿liwia dostêp do wiêkszo¶ci ustawieñ
sprzêtowych laptopów Toshiba
<item><package>toshutils</package> - Narzêdzia dla laptopów Toshiba
<item><package>sjog</package> - Program do obs³ugi &ldquor;Jog Dial&rdquor; na laptopach
Sony Vaio
<item><package>spicctrl</package> - Program do ustawiania parametrów ekranu LCD
w laptopach Sony Vaio
</list>
ACPI jest nowszym systemem zarz±dzania energi± ni¿ APM.
<p>
Niektóre z wymienionych pakietów wymagaj± specjalnych modu³ów j±dra. W
wiêkszo¶ci wypadków s± one do³±czone do najnowszych ¼róde³ j±dra. Jednak w razie
problemów bêdziesz musia³ zainstalowaæ najnowsz± ³atkê dla j±dra.

<sect>Ograniczenia dostêpu

<sect1 id="loginctrl">Ograniczenia dostêpu poprzez PAM
<p>
PAM (Pluggable Authentication Modules) pozwala kontrolowaæ w jaki sposób
u¿ytkownicy loguj± siê do systemu.  
<example>
/etc/pam.d/*             # pliki konfiguracyjne PAM
/etc/pam.d/login         # plik konfiguracyjny PAM dla programu login
/etc/security/*          # ustawienia modu³ów PAM
/etc/securetty           # terminale, na których mo¿e pracowaæ root (login)
/etc/login.defs          # ustawienia programu login (login)
</example>
<p>
Zmieñ zawarto¶æ <file>/etc/pam.d/login</file> tak, jak poni¿ej, je¶li chcesz
aby dostêp do terminala (równie¿ konsoli) nie by³ warunkowany has³em.
U¿ywaj na w³asn± odpowiedzialno¶æ.
<example>
#auth       required   pam_unix.so nullok
auth       required   pam_permit.so
</example>
Podobne sztuczki mog± byæ zastosowane dla <prgn>xdm</prgn>,
<prgn>gdm</prgn>, ... , aby uzyskaæ analogiczn± funkcjonalno¶æ w X-ach.
<p>
Z drugiej strony, je¶li chcesz wymusiæ na u¿ytkownikach politykê wyboru
bezpiecznych hase³, zainstaluj <package>cracklib2</package> i ustaw parametry
w pliku <file>/etc/pam.d/passwd</file> nastêpuj±co:
<example>
password required       pam_cracklib.so retry=3 minlen=6 difok=3
</example>
Mo¿esz tak¿e, podczas aktywacji konta, ustawiæ has³o jednokrotnego u¿ytku, co
zmusi u¿ytkownika do jego zmiany przy pierwszym logowaniu.
Aby uzyskaæ taki efekt, u¿yj polecenia <prgn>passwd</prgn> z opcj±
<tt>-e</tt>. Zobacz <manref name="passwd" section="1">.
<p>
Maksymalna ilo¶æ procesów mo¿e byæ ustalona poprzez 
<tt>ulimit -u 1000</tt> w pow³oce Bash albo poprzez edycjê
<file>/etc/security/limits.conf</file>, elementu PAM. Inne limity, jak np
<tt>core</tt> mog± byæ ustawione w sposób analogiczny. Pocz±tkowa warto¶æ
zmiennej <prgn>PATH</prgn> mo¿e byæ ustawiona w pliku <file>/etc/login.defs</file>
zanim jeszcze zostan± uruchomione skrypty startowe danej pow³oki.
<p>
Dokumentacja dla PAM jest dostêpna w pakiecie
<package>libpam-doc</package>.<em>Linux-PAM System
Administrator's Guide</em> zawiera informacje dotycz±ce konfiguracji PAM,
dostêpnych modu³ów itp. Dokumentacja zawiera tak¿e <em>The Linux-PAM
Application Developers' Guide</em> oraz <em>The Linux-PAM Module Writers'
Guide.</em>
</sect1>

<sect1 id="wheel">&ldquor;Dlaczego GNU <prgn>su</prgn> nie obs³uguje grupy <tt>wheel</tt>&rdquor;
<p>
Jest to s³ynne zdanie w dokumentacji <tt>info su</tt> , napisane przez
Richarda M. Stallmana. Ale nie obawiaj siê, obecne <prgn>su</prgn> w
Debianie u¿ywa PAM, wiêc mo¿na ograniczyæ mo¿liwo¶æ u¿ywania
<prgn>su</prgn> do dowolnej grupy u¿ywaj±c <prgn>pam_wheel.so</prgn> w pliku
<file>/etc/pam.d/su</file>. Poni¿szy przyk³ad ilustruje ustawienie grupy
<tt>adm</tt> analogicznie do <tt>wheel</tt> z systemów BSD oraz umo¿liwia
u¿ywanie <prgn>su</prgn> bez podawania has³a dla cz³onków tej grupy.
<example>
# konfiguracja anty-RMS w /etc/pam.d/su
auth       required   pam_wheel.so group=adm

# Cz³onkowie grupy wheel mog± wywo³ywaæ su bez podawania has³a
auth       sufficient pam_wheel.so trust group=adm
</example>

<sect1>Przeznaczenie standardowych grup
<p>
Oto kilka interesuj±cych grup:
<list compact>
<item><tt>root</tt> grupa jest domy¶lnym odpowiednikiem grupy wheel dla
<prgn>su</prgn>, je¶li <prgn>pam_wheel.so</prgn> jest u¿yte bez podania
argumentu <tt>group=</tt>.
<item><tt>adm</tt> cz³onkowie grupy mog± czytaæ logi systemowe. 
<item><tt>cdrom</tt> grupa mo¿e zostaæ u¿yta, aby nadaæ u¿ytkownikom 
          prawa dostêpu do napêdu CD-ROM.  
<item><tt>floppy</tt> grupa mo¿e zostaæ u¿yta, aby nadaæ u¿ytkownikom
        prawa dostêpu do napêdu dyskietek.
<item><tt>audio</tt> grupa mo¿e zostaæ u¿yta, aby nadaæ u¿ytkownikom 
        prawa dostêpu do urz±dzeñ audio.
<item><tt>src</tt> grupa jest w³a¶cicielem kodu ¼ród³owego umieszczonego w 
        <file>/usr/src</file>. Mo¿e byæ u¿yta, aby nadaæ u¿ytkownikom
          mo¿liwo¶æ zarz±dzania kodem ¼ród³owym systemu.
<item><tt>staff</tt> grupa s³u¿±ca do nauki administracji systemem.
</list>
<p>
Aby uzyskaæ kompletn± listê zobacz czê¶æ FAQ w 
<url id="&securing-debian-howto;" name="Securing Debian Manual">,
który w Woodym mo¿e byæ tak¿e znaleziony w pakiecie
<package>&p-securing-debian-howto;</package>.
Tak¿e nowe <package>&p-base-passwd;</package> (>3.4.6) zawieraj±
wiarygodn± listê: <file>&f-users-and-groups;</file>.

<sect1 id="sudo">Bezpieczniejsza praca &ndash <prgn>sudo</prgn>
<p>
U¿ywam <prgn>sudo</prgn> do ochrony przed w³asn± g³upot±.
Osobi¶cie uwa¿am, ¿e u¿ywanie <prgn>sudo</prgn> jest lepsz± alternatyw± 
ni¿ ci±g³a praca w systemie na koncie u¿ytkownika root.
<p>
Zainstaluj <prgn>sudo</prgn> i skonfiguruj go poprzez edycjê <file>
<url id="&examples;" name="/etc/sudoers"></file>.
Zapoznaj siê tak¿e z mo¿liwo¶ciami <tt>sudo</tt> w pliku 
<file>&dochome;sudo/OPTIONS</file>.
<p>
Przyk³adowa konfiguracja zapewnia cz³onkom grupy staff uprawnienia do
wykonywania dowolnych poleceñ jako root poprzez <prgn>sudo</prgn>, natomiast
cz³onkom grupy src prawo do wykonywania jedynie niektórych poleceñ z takimi
uprawnieniami.
<p>
Zalet± <prgn>sudo</prgn> jest to, ¿e do zalogowania potrzebuje jedynie
podania has³a u¿ytkownika, a dodatkowo monitoruje aktywno¶æ u¿ytkownika. Jest to dobry
sposób, aby daæ pewn± w³adzê m³odym administratorom. Na przyk³ad:
<example>
$ sudo chown -R <var>myself</var>:<var>mygrp</var> .
</example>
<p>
Oczywi¶cie, je¿eli znasz has³o root-a (jak wiêkszo¶æ domowych u¿ytkowników),
dowolne polecenie mo¿e zostaæ wydane jako root z Twojego konta u¿ytkownika:
<example>
$ su -c "shutdown -h now"
Password:
</example>
(Wiem, ¿e powinienem ograniczyæ przywileje <prgn>sudo</prgn> konta admin, ale
poniewa¿ jest to mój domowy serwer, jeszcze siê tym nie przejmowa³em.)
<p>
Inny program umo¿liwiaj±cy zwyk³ym u¿ytkownikom uruchamianie poleceñ z
uprawnieniami root-a mo¿esz znale¼æ w pakiecie <package>super</package>.
</sect1>
    
<sect1 id="tcpd">Ograniczenia dostêpu do us³ug
<p>
Internetowy <em>super-serwer</em>, <prgn>inetd</prgn>, jest uruchamiany
podczas startu systemu z <file>/etc/rc2.d/S20inetd</file> (dla RUNLEVEL=2),
który jest dowi±zaniem symbolicznym do pliku <file>/etc/init.d/inetd</file>.
W skrócie, <prgn>inetd</prgn> umo¿liwia uruchomienie jednego demona, który
w razie potrzeby uruchamia inne, zmniejszaj±c w ten sposób obci±¿enie systemu.
<p>
Gdy <prgn>inetd</prgn> przyjmuje zg³oszenie, sprawdza protokó³ i nazwê
¿±danej us³ugi przeszukuj±c bazê danych w plikach <file>/etc/protocols</file> 
oraz <file>/etc/services</file>. Nastêpnie, wyszukuje odpowiedzialn± za obs³ugê
zg³oszenia us³ugê w <file>/etc/inetd.conf</file> je¶li jest to zwyczajna
us³uga internetowa, natomiast w <file>/etc/rpc.conf</file> je¶li jest to
us³uga Sun-RPC.
<p>
Maj±c na wzglêdzie bezpieczeñstwo, wy³±cz zbêdne us³ugi w pliku
<file>/etc/inetd.conf</file>.
Us³ugi Sun-RPC s± wykorzystywane przez NFS oraz inne programy oparte na RPC.
<p>
Czasami <prgn>inetd</prgn> nie przekazuje kontroli do ¿±danej us³ugi
bezpo¶rednio, lecz uruchamia demona TCP/IP <prgn>tcpd</prgn> przekazuj±c
mu nazwê us³ugi jako argument. W tym wypadku <prgn>tcpd</prgn> uruchomi
¿±dan± us³ugê dopiero po zg³oszeniu tego do logów systemowych oraz
zanalizowaniu plików <file>/etc/host.deny</file> i
<file>/etc/host.allow</file>.
<p>
Je¶li masz problemy ze zdalnym dostêpem w aktualnej dystrybucji &debian;,
skomentuj zapis &ldquor;ALL: PARANOID&rdquor; w <file>/etc/host.deny</file>, je¶li taki zapis
siê tam znajduje.
<p>
Aby uzyskaæ bardziej szczegó³owe informacje zobacz
<manref name="inetd" section="8">,  
<manref name="inetd.conf" section="5">, 
<manref name="protocols" section="5">,  
<manref name="services" section="5">,  
<manref name="tcpd" section="8">,  
<manref name="hosts_access" section="5">, i
<manref name="hosts_options" section="5">. 
<p>
Aby uzyskaæ informacje o Sun-RPC zobacz
<manref name="rpcinfo" section="8"> , 
<manref name="portmap" section="8">, i
<file>&f-portmap;</file>.

<sect1 id="ldap">Centralne uwierzytelnianie &ndash; LDAP
U¿yj Lightweight Directory Access Protocol (LDAP).
<p>
Zasoby:
<list compact>
<item><url id="&openldaphome;" name="OpenLDAP">
<item>OpenLDAP Admin Guide w pakiecie <package>openldap-guide</package>
<item>LDP: <url id="&ldap-linux-howto;" name="LDAP Linux HOWTO">
<item>LDP: <url id="&ldap-implementation-howto;" name="LDAP Implementation HOWTO">
<item><url id="&ldap-use1;" name="OpenLDAP, extensive use reports">
<item><url id="&ldap-use2;" name="Open LDAP with Courier IMAP and Postfix">
</list>
</sect>


<sect id="cdrw">Nagrywarki CD
<p>
Nagrywarki CD z interfejsem ATAPI/IDE sta³y siê w ostatnim czasie bardzo
popularne. S± mi³ym rozwi±zaniem archiwizowania danych i wykonywania kopii
zapasowych w sytuacji, gdy wystarcza &lt; 640MB pojemno¶ci no¶nika. Aby
uzyskaæ najbardziej wiarygodne informacje, zobacz LDP <url id="&cd-writing-howto;
" name="CD-Writing-HOWTO">.

<sect1>Wstêp
<p>
Po pierwsze, ka¿de zak³ócenie danych wys³anych do nagrywarki mo¿e spowodowaæ
nieodwracalne uszkodzenie p³yty CD. Zaopatrz siê w nagrywarkê z jak
najwiêkszym rozmiarem bufora. Je¶li pieni±dze nie s± problemem, zamiast
wersji ATAPI/IDE zdecyduj siê na wersjê SCSI. Je¶li mo¿esz wybieraæ pomiêdzy
IDE, zdecyduj siê na wersjê pod³±czan± do slotu PCI (na p³ycie g³ównej)
zamiast do slotu ISA (jak karta SB16 itp.).
<p>
W j±drach Linuksa 2.2 i 2.4 nagrywarka IDE musi byæ uzupe³niona sterownikami
IDE-SCSI, zamiast zwyk³ego sterownika IDE dla napêdów CD.
Równie¿ ogólny sterownik SCSI ( SCSI generic driver) musi zostaæ
uaktywniony. S± na to dwa sposoby, zak³adaj±c ¿e j±dra rozpowszechniane by³y z
aktualnymi dystrybucjami (jak te z marca 2001).
</sect1>

<sect1>Sposób 1: modu³y j±dra + <prgn>lilo</prgn>
<p>
Dodaj poni¿sze linie do pliku <file>/etc/lilo.conf</file> je¶li u¿ywasz
standardowego j±dra rozpowszechnianego z systemem Debian. Je¶li u¿ytych jest
kilka opcji, pozostaw miêdzy nimi znak spacji.
<example>
append="hd<var>x</var>=ide-scsi ignore=hd<var>x</var>"
</example>
W tym przyk³adzie nagrywarka jest dostêpna poprzez sterownik ide-scsi, a
oznaczony parametrem <tt>hd<var>x</var></tt>, gdzie 
<var>x</var> oznacza jedno z poni¿szych:
<example>
hda          master na pierwszym porcie IDE
hdb          slave na pierwszym porcie IDE
hdc          master na drugim porcie IDE
hdd          slave na drugim porcie IDE
hde ... hdh  napêd na zewnêtrznym porcie IDE lub ATA66/100 IDE
</example>
Wpisz nastêpuj±ce polecenia jako root po zakoñczeniu konfiguracji.
<example>
# lilo
# shutdown -r now
</example>
</sect1>


<sect1>Sposób 2: ponowna kompilacja j±dra
<p>
Debian u¿ywa <prgn>make-kpkg</prgn> do tworzenia j±dra. U¿yj ró¿nych
<tt>--append_to_version</tt> z <prgn>make-kpkg</prgn> aby zbudowaæ 
wiele obrazów j±dra. Zobacz <ref id="kernel">.
<p>
U¿yj nastêpuj±cych ustawieñ podczas <tt>make menuconfig</tt>:
<list>
<item>bzImage
<item>Wy³±cz sterownik IDE CD, (niekoniecznie, ale to prostsze rozwi±zanie)
<item>Do³±cz do j±dra obs³ugê ide-scsi i sg lub ustaw je jako modu³y
</list>
</sect1>

<sect1>Czynno¶ci po konfiguracji
<p>
Wsparcie j±dra dla nagrywarki mo¿e byæ uaktywnione podczas startu systemu
poprzez nastêpuj±ce polecenia:
<example>
# echo ide-scsi &gt;&gt;/etc/modules
# echo sg       &gt;&gt;/etc/modules
# cd /dev; ln -sf scd0 cdrom
</example>
Rêczna inicjalizacja mo¿e byæ wykonana przez:
<example>
# modprobe ide-scsi
# modprobe sg
</example>
Po restarcie mo¿esz sprawdziæ swoj± konfiguracjê:
<example>
$ dmesg|less
# apt-get install cdrecord
# cdrecord -scanbus
</example>
<p>
[Per Warren Dodge] Czasami mo¿e wyst±piæ konflikt miêdzy <tt>ide-scsi</tt> i
<tt>ide-cd</tt>, je¶li masz zarówno CD-ROM jak i napêd CD-R/RW. Mo¿esz
wtedy spróbowaæ dodaæ poni¿sz± liniê do swojego <file>/etc/modutils/aliases</file>,
uruchomiæ <prgn>update-modules</prgn> i zrestartowaæ system.
<example>
pre-install      ide-scsi      modprobe ide-cd
</example>
Polecenie to nakazuje za³adowanie sterownika IDE przed <tt>ide-scsi</tt>. Sterownik
IDE <tt>ide-cd</tt> przejmuje kontrolê nad urz±dzeniem ATAPI CD-ROM &mdash;
wszystkim, co nie zosta³o mu nakazane do <strong>zignorowania</strong>. W ten
sposób <tt>ide-scsi</tt> przejmuje kontrolê tylko nad zignorowanymi
urz±dzeniami.
</sect1>

<sect1>Obrazy startowe p³yt CD
<p>
Aby nagraæ katalog <file>target-directory</file> jako <file>cd-image.raw</file>
(startowy, Joliet z TRANS.TBL; je¶li p³yta nie ma byæ bootowalna, usuñ opcje
<tt>-b</tt> i <tt>-c</tt>), w³ó¿ dyskietkê startow± do stacji dyskietek i:
<example>
# dd if=<var>/dev/fd0</var> <var>target-directory/boot.img</var> 
# mkisofs -r -V <var>volume_id</var> -b <var>boot.img</var> -c <var>bootcatalog</var> 
-J -T \ -o <var>cd-image.raw</var> <var>target_directory/</var>
</example>
<p>
¦miesznym kruczkiem mo¿e byæ zrobienie startowego CD-ROM z systemem DOS. 
Je¶li obraz zwyczajnej dyskietki startowej jest we wspomnianym pliku 
<file><var>boot.img</var></file>,
przy restarcie p³yta zadzia³a jak gdyby dosowa dyskietka startowa by³a w
napêdzie dyskietek. Mo¿e byæ to jeszcze ciekawsze, je¶li wykorzystasz
freeDOS.
<p>
Zawarto¶æ obrazu tej p³yty mo¿e byæ sprawdzona poprzez zamontowanie jej jako
urz±dzenie loop.
<example>
# mount -t iso9660 -o ro,loop <var>cd-image.raw</var> /cdrom
# cd /cdrom
# mc
# umount /cdrom
</example>
</sect1>

<sect1>Wypalanie p³yty (R, RW):
<p>
Najpierw porównajmy (zak³adaj±c podwójn± prêdko¶æ napêdu) z:
<example>
# nice --10 cdrecord -dummy speed=2 dev=0,0 <var>disk.img</var>
</example>
Nastêpnie, je¶li wszystko posz³o OK, wypalimy p³ytê CD-R:
<example>
# nice --10 cdrecord -v -eject speed=2 dev=0,0 <var>disk.img</var>
</example>
Albo CD-RW:
<example>
# nice --10 cdrecord -v -eject blank=fast speed=2 dev=0,0 <var>disk.img</var>
</example>
Niektóre napêdy CD-RW dzia³aj± lepiej z:
<example>
# nice --10 cdrecord -v blank=all speed=2 dev=0,0 <var>disk.img</var>
</example>
i nastêpnie:
<example>
# nice --10 cdrecord -v -eject speed=2 dev=0,0 <var>disk.img</var>
</example>
Te dwa kroki s± niezbêdne, aby zapobiec pokrywaniu siê faz zerowania p³yty i
wypalania. Warto¶æ argumentów dla <prgn>nice</prgn> mo¿e tak¿e wymagaæ
pewnej regulacji.
</sect1>

<sect1>Wykonanie obrazu z posiadanej p³yty CD
<p>
Niektóre p³yty CD-R i komercyjne CD zawieraj± specjalne, b³êdne sektory,
które uniemo¿liwiaj± ich kopiowanie przez <prgn>dd</prgn> (p³yta Windows 98
jest jedn± z nich). Pakiet <package>cdrecord</package> udostêpnia polecenie
<prgn>readcd</prgn>. U¿yj go do skopiowania zawarto¶ci p³yty do pliku. Je¶li
to plik z danymi, zamontuj go i wykonaj <prgn>df</prgn> aby uzyskaæ jego
rzeczywisty rozmiar. Podziel liczbê bloków przez 2 ( 1 blok = 1024 bajty)
aby uzyskaæ ilo¶æ sektorów na CD ( 1 sektor = 2048 bajty). Uruchom
<prgn>readcd</prgn> z niezbêdnymi opcjami i u¿yj obrazu p³yty do wypalenia
nastêpnej.
<example>
# readcd dev=<var>target</var>,<var>lun</var>,<var>scsibusno</var> # select function 11
</example> 
Zwykle mo¿na ustawiæ wszystkie trzy parametry jako 0. Ilo¶æ sektorów podana
przez <prgn>readcd</prgn> jest zazwyczaj zbyt du¿a, u¿yj podanej powy¿ej
metody aby uzyskaæ dok³adniejsze wyniki.
<p>
Powinno zostaæ zauwa¿one, ¿e u¿ycie <prgn>dd</prgn> z p³ytami CD-ROM 
stwarza pewne problemy. Pierwsze uruchomienie <prgn>dd</prgn> spowoduje
komunikat b³êdu i mo¿e wytworzyæ krótszy obraz dysku, utraciwszy koñcow±
jego czê¶æ. Drugie uruchomienie <prgn>dd</prgn> mo¿e utworzyæ wiêkszy obraz
p³yty ze &ldquor;¶mieciami&rdquor; do³±czonymi na koñcu, je¶li rozmiar danych nie zosta³
podany. Tylko drugie uruchomienie <prgn>dd</prgn> wraz z podaniem poprawnego
rozmiaru danych, bez wyci±gania CD, po otrzymaniu komunikatu b³êdu wydaje siê
dzia³aæ poprawnie. Je¶li na przyk³ad rozmiar obrazu p³yty wy¶wietlony przez
<prgn>df</prgn> wynosi <tt>46301184</tt> bloki, u¿yj dwukrotnie nastêpuj±cego
polecenia aby otrzymaæ prawid³owy obraz (jest to informacja, uzyskana
przeze mnie empirycznie):
<example>
# dd if=/dev/cdrom of=cd.img bs=2048 count=$((46301184/2))
</example>
</sect1>

<sect1>Obrazy Debian CD
<p>
Aby otrzymaæ najnowsze informacje na temat p³yt z Debianem, odwied¼
<url id="&debian-cd;" name="stronê Debian CD">. 
<p>
Je¶li posiadasz szybkie po³±czenie internetowe, pomy¶l o instalacji poprzez
sieæ, u¿ywaj±c:
<list compact>
<item>kilku <url id="&debian-floppyinst;" name="obrazów dyskietek">.
<item><url id="&debian-netinst;" name="ma³ego startowego obrazu CD">.
</list>
<p>
Je¶li nie posiadasz szybkiego po³±czenia z Internetem, pomy¶l o zakupie p³yt
CD od <url id="&debian-venders;" name="dystrybutora CD">.
<p>
Proszê, nie zajmuj niepotrzebnie ³±cza ¶ci±gaj±c obraz standardowego CD,
chyba ¿e jeste¶ testerem p³yt (nawet now± metod± jigdo).
<p>
Jedn± z niewielu, godn± uwagi p³yt± jest <url id="&knoppix;" name="KNOPPIX - 
Live Linux Filesystem On CD">.
Z t± p³yt± uruchomisz w pe³ni dzia³aj±cego Debiana bez potrzeby instalowania
go na twardym dysku.

<!-- old document section
$ export CVSROOT=anonymous@cvs.debian.org:/cvs/debian-boot
$ cvs co debian-cd
</example>
Following is a summary of CD image creation. 
<example>
# apt-get install debian-cd
# cd /etc/debian-cd
# vim CONF.sh
$ . CONF.sh
$ make distclean
$ make status
$ make list COMPLETE=1 SIZELIMIT1=555000000 SRCSIZELIMIT=665000000
$ make official_images
 or if you want only binary images :
$ make bin-official_images
-->
</sect1>

<sect1>Wykonywanie kopii systemu na p³ytach CD-R
<p>
Aby skopiowaæ kluczowe pliki konfiguracyjne i dane na p³yty CD-R, u¿yj
przyk³adowego skryptu backup <file><url id="examples/"
name="backup"></file>.
Zobacz tak¿e <ref id="archiving"> i <ref id="diff-backup">.
</sect1>

<sect1>Kopiowanie CD z muzyk±
<p>
Nie testowane przeze mnie:
<example>
# apt-get install cdrecord cdparanoia
# cdparanoia -s -B
# cdrecord dev=0,0,0 speed=2 -v -dao -eject defpregap=1 -audio *.wav
</example>
albo,
<example>
# apt-get install cdrdao #disk at once
# cdrdao read-cd --device /dev/cdrom --paranoia-mode 3 my_cd # read cd
# cdrdao write --device /dev/cdrom --speed 8 my_cd    # wypal nowy CD
</example>
<prgn>cdrdao</prgn> wykonuje prawdziw± kopiê (¿adnych przerw, itp...)
</sect1>
</sect>

<sect id="x">X
<p>
X Window System jest zapewnione dziêki <url id="&xfree86home;" name="Xfree86">.
Istniej± dwie g³ówne wersje serwera X dostêpne dla Debiana:
XFree86 Version 3.3 (XF3) i XFree86 Version serii 4.x (XF4), obie
oparte o specyfikacjê X11R6 wg. <url id="&xorghome;" name="X.Org">.
<p>
Podstawowe informacje nt. X mo¿esz uzyskaæ z <manref name="X" section="7">,
LDP <url id="&xwindowuser-howto;" name="XWindow-User-HOWTO">, oraz 
<url id="&remote-xapps-howto;" name="Remote X Apps mini-HOWTO">.  
Informacje specyficzne dla Debiana, przeznaczone dla jego u¿ytkowników, 
przeczytaj w <file>&f-x-deb-faq;</file> dostarczanym w pakiecie 
<package>xfree86-common</package>.
Zawiera interesuj±ce uwagi na temat przypisywania ró¿nych funkcji do
klawiszy autorstwa Brandena Robinsona.
<p>
<taglist>
<tag><ref id="xsrvr">
<item>program na lokalnym ho¶cie, zajmuj±cy siê wy¶wietlaniem X-ów na
monitorze u¿ytkownika, jest tak¿e odpowiedzialny za obs³ugê poleceñ z klawiatury
i myszy.
<tag><ref id="xclnt">
<item>program na (zdalnym lub lokalnym) ho¶cie, który uruchamia
oprogramowanie zgodne z X.
</taglist>
Zauwa¿, ¿e jest to odwrócenie rozumienia s³owa serwer i klient przyjêtego w
innych kontekstach.
<p>
Istnieje kilka dróg, aby &ldquor;X serwer&rdquor; (strona wy¶wietlaj±ca) przyj±³ zdalne
po³±czenie od &ldquor;klienta X&rdquor; (strona oprogramowania).

<list>
<item>Wykorzystanie <prgn>xhost</prgn> 
<list compact>
<item>mechanizm listy hostów (bardzo niebezpieczny).
<item>niezaszyfrowany protokó³ (nara¿ony na pods³uchiwanie).
<item>Nie u¿ywaj go, je¶li mo¿esz.
<item>Zobacz <ref id="xhost"> i <manref name="xhost" section="1x">.
</list>
<item>Wykorzystanie <strong><prgn>xauth</prgn></strong>
<list compact>
<item>mechanizm cookies (niebezpieczny, ale lepszy ni¿ <prgn>xhost</prgn>).
<item>niezaszyfrowany protokó³ (nara¿ony na pods³uchiwanie).
<item>u¿ywaj go jedynie dla po³±czeñ lokalnych, gdy¿ nie obci±¿a procesora
tak jak <prgn>ssh -X</prgn>.
<item>Zobacz <ref id="ss-xsu"> i <manref name="xauth" section="1x">.
</list>
<item>Wykorzystanie <prgn>xdm</prgn>, <prgn>wdm</prgn>, <prgn>gdm</prgn>, 
 <prgn>kdm</prgn>, ...
<list compact>
<item>mechanizm cookies (równie niebezpieczny jak <prgn>xauth</prgn>).
<item>Zobacz <manref name="xdm" section="1x"> i
 <manref name="Xsecurity" section="7">, aby zdobyæ podstawowe informacje nt.
kontroli dostêpu do X.
<item>Zobacz <manref name="wdm" section="1x">, <manref name="gdm" section="8">, 
i <manref name="kdm.options" section="5"> dla dalszych informacji, je¶li te
programy s± zainstalowane.
<item>Zobacz <ref id="sys-v"> aby zorientowaæ siê jak wy³±czyæ
<prgn>xdm</prgn>, by logowaæ siê w trybie tekstowym bez usuwania pakietu
<prgn>xdm</prgn>.
</list>
<item>Wykorzystanie <strong><prgn>ssh -X</prgn></strong>
<list compact>
<item>mechanizm pod³±czania portów poprzez secure shell (<strong>bezpieczne</strong>).
<item>zaszyfrowany protokó³ (strata zasobów, gdy u¿ywane lokalnie).
<item>u¿ywaj w po³±czeniach zdalnych.
<item>Zobacz <ref id="xssh">.
</list>
</list>
Wszystkie metody po³±czeñ zdalnych, za wyj±tkiem wykorzystywania
<prgn>ssh</prgn>, wymagaj± w³±czonych po³±czeñ TCP/IP w X serwerze. Zobacz
<ref id="xtcp">.

<sect1 id="x-system">Pakiety zwi±zane z X
<p>
Istnieje kilka (meta)pakietów, które zapewniaj± prost± instalacjê X Window
System w Woodym. 
<taglist>
<tag><package>x-window-system-core</package>
<item>
Ten metapakiet dostarcza kluczowe sk³adniki dla pojedynczej stacji roboczej,
na której uruchomiony ma byæ X Window System. Dostarcza biblioteki, X serwer
(<package>xserver-xfree86</package>), zestaw czcionek, jak równie¿ 
kilka podstawowych klientów X i programów u¿ytkowych.

<tag><package>x-window-system</package> 
<item>
Ten metapakiet dostarcza praktycznie wszystkich sk³adników X Window System
rozwijanych przez XFree86 Project, jak równie¿ zbiór popularnych kiedy¶
dodatkowych programów. (Zauwa¿, ¿e ten pakiet zale¿y od 
<package>x-window-system-core</package>, <package>twm</package> oraz 
<package>xdm</package>, tak wiêc w przypadku jego instalacji
<package>x-window-system-core</package> nie musi zostaæ oddzielnie
wyznaczony do zainstalowania)

<tag><package>xserver-common-v3</package> 
<item>
Pliki i programy u¿ytkowe wspólne dla serwerów X XFree86 3.x (XF3)

<tag><package>xserver-*</package> 
<item>
Dodano pakiety serwera XF3, aby obs³u¿yæ sprzêt z ró¿nych powodów 
nie obs³ugiwany przez nowy serwer XF4 (<package>xserver-xfree86</package>). 
Niektóre stare karty ATI mach64 nie s±
obs³ugiwane przez XF4, za¶ inne karty graficzne zawieszaj± siê w wersji XF4
dostêpnej wraz z Woodym, itp. (Aby obejrzeæ dostêpne pakiety wykonaj
<tt>apt-cache search xserver-|less</tt>.
Wszystkie z tych serwerów XF3 zale¿± od pakietu <package>xserver-common-v3</package>.)
</taglist>
<p>
W wiêkszo¶ci przypadków <package>x-window-system</package> jest odpowiednim
pakietem do zainstalowania.
(Je¶li chcesz logowaæ siê w trybie tekstowym, upewnij siê ¿e wy³±czy³e¶
us³ugê <package>xdm</package> tak, jak opisano to w czê¶ci <ref id="no-x-start">.)

<sect1 id="hdetect-x">Wykrywanie sprzêtu dla X 
<p>
Aby wykryæ swój sprzêt podczas konfiguracji X-ów, zainstaluj nastêpuj±ce
pakiety przed instalacj± X Window System:
<list>
<item><package>discover</package> &ndash; narzêdzie identyfikacji sprzêtu.
<item><package>mdetect</package> &ndash; autodetekcja myszy.
<item><package>read-edid</package> &ndash; gromadzenie informacji sprzêtowej
o monitorach VESA PnP.
</list>

<sect1 id="xsrvr">X serwer
<p>
Zobacz <manref name="XFree86" section="1x"> aby uzyskaæ informacjê o X
serwerze.
<p>
Uruchom X serwer z lokalnej konsoli:
<example>
$ startx -- :&lt;display&gt; <var>vtXX</var>
e.g.:
$ startx -- :1 vt8 -bpp 16
... uruchom na vt8 pod³±czonym do localhost:1 w trybie 16 bpp
</example>
Argumenty podane po <tt>--</tt> s± przekazywane X serwerowi.
<p>
Je¶li u¿ywasz skryptu <file>~/.xserverrc</file> do konfigurowania uruchomienia X,
pamiêtaj aby wykonaæ <tt>exec</tt> na prawid³owym X serwerze.
W przeciwnym wypadku mo¿e on wolno siê uruchamiaæ i zamykaæ. Na przyk³ad:
<example>
#!/bin/sh
exec /usr/bin/X11/X -dpi 100 -nolisten tcp
</example>

<sect2 id="config-x4">Konfiguracja serwera X (wersja 4)
<p>
Aby skonfigurowaæ (lub przekonfigurowaæ) serwer XF4,
<example>
# dpkg-reconfigure --priority=low xserver-common
# dpkg-reconfigure --priority=low xserver-xfree86
</example>
co utworzy plik <file>/etc/X11/XF86Config-4</file>, po czym skonfiguruj
X-y u¿ywaj±c skryptu <prgn>dexconf</prgn>.

<sect2 id="config-x3">Konfiguracja serwera X (wersja 3)
<p>
Aby skonfigurowaæ (lub przekonfigurowaæ) serwer XF3 na przyk³ad dla karty
ATI mach64,
<example>
# dpkg-reconfigure --priority=low xserver-common-v3
# dpkg-reconfigure --priority=low xserver-mach64
</example>
co utworzy plik <file>/etc/X11/XF86Config</file>, po czym skonfiguruj
X-y u¿ywaj±c skryptu <prgn>xf86config-v3</prgn>.

<sect2 id="manual-config-x">Rêczna konfiguracja serwera X,
<p>
Dla Woodiego modyfikuj±c ustawienia w <file>/etc/X11/XF86Config-4</file> 
<strong>nie zmieniaj
zawarto¶ci pliku konfiguracyjnego pomiêdzy liniami</strong>:
<!-- FIXME for XF3 -->
<example>
### BEGIN DEBCONF SECTION
[ciach]
### END DEBCONF SECTION
</example>
<p>
Zamiast tego <strong>dodaj w³asne opcje przed tym tekstem</strong>. Na
przyk³ad, aby u¿yæ innej karty graficznej dodaj podobne linie na
<em>pocz±tku</em> pliku:
<example>
Section "Device"
  Identifier        "Moje Urzadzenie"
  Driver            "ati"
  Option            "NoAccel"
EndSection

Section "Screen"
  Identifier  "Mój Ekran"
  Device      "Moje Urz±dzenie"
  Monitor     "Generic Monitor"
  DefaultDepth 24
  Subsection "Display"
    Depth       8
    Modes       "1280x960" "1152x864" "1024x768" "800x600" "640x480"
  EndSubsection
  Subsection "Display"
    Depth       16
    Modes       "1280x960" "1152x864" "1024x768" "800x600" "640x480"
  EndSubsection
  Subsection "Display"
    Depth       24
    Modes       "1280x960" "1152x864" "1024x768" "800x600" "640x480"
  EndSubsection
EndSection

Section "ServerLayout"
    Identifier        "Custom"
    Screen            "Mój Ekran"
    InputDevice       "Generic Keyboard" "CoreKeyboard"
    InputDevice       "Configured Mouse" "CorePointer"
EndSection
</example>

<p>
Dla Sarge (<tt>testing</tt> w momencie pisania tych s³ów), je¶li chcesz
wraz z aktualizacj± zatrzymaæ w³asne modyfikacje pliku
<file>/etc/X11/XF86Config</file>, uruchom nastêpuj±ce polecenia jako root:
<example>
# cp /etc/X11/XF86Config-4 /etc/X11/XF86Config-4.custom
# md5sum /etc/X11/XF86Config-4 &gt; /var/lib/xfree86/XF86Config-4.md5sum
# dpkg-reconfigure xserver-xfree86
</example>
By poprawiæ <strong>wygl±d czcionek</strong>, musisz przeedytowaæ
plik <file>/etc/X11/XF86Config-4</file> tak jak opisano to w <ref id="xfs-tt">.
<!--
<p>
For XF3, in order to achieve <strong>font de-uglification</strong>,
you need to edit the order of <tt>FontPath</tt> in
<file>/etc/X11/XF86Config</file>
while adding <tt>:unscaled</tt> as follows.
<example>
FontPath        "/usr/X11R6/lib/X11/fonts/misc:unscaled"
FontPath        "/usr/X11R6/lib/X11/fonts/100dpi:unscaled"
FontPath        "/usr/X11R6/lib/X11/fonts/75dpi:unscaled"
FontPath        "/usr/X11R6/lib/X11/fonts/Type1"
FontPath        "/usr/X11R6/lib/X11/fonts/Speedo"
FontPath        "/usr/X11R6/lib/X11/fonts/misc"
FontPath        "/usr/X11R6/lib/X11/fonts/100dpi"
FontPath        "/usr/X11R6/lib/X11/fonts/75dpi"
</example>
<p>
If you use xfs serves fonts via a Unix Domain Socket, you may also edit
<tt>catalogue</tt> entry of <file>/etc/X11/fs/config</file> as:
<example>
catalogue = /usr/X11R6/lib/X11/fonts/misc:unscaled,
            /usr/X11R6/lib/X11/fonts/100dpi:unscaled,
            /usr/X11R6/lib/X11/fonts/75dpi:unscaled,
            /usr/X11R6/lib/X11/fonts/Type1,
            /usr/X11R6/lib/X11/fonts/Speedo,
            /usr/X11R6/lib/X11/fonts/misc,
            /usr/X11R6/lib/X11/fonts/100dpi,
            /usr/X11R6/lib/X11/fonts/75dpi,
</example>
<p>
These <tt>:unscaled</tt> tricks are depreciated in new XF4 and no longer
needed.
-->
<!-- per /usr/share/doc/xfree86-common/README.fonts.gz in 4.2.1 -->
<p>
Sprawd¼ równie¿ inne czê¶ci konfiguracji X. Z³e ustawienia monitora mog±
byæ istotniejsz± przyczyn± bólu g³owy ni¿ z³e czcionki, wiêc upewnij siê,
¿e od¶wie¿anie jest ustawione na tak wysokie jakie potrafi obs³u¿yæ monitor
(85 Hz jest wspania³e, 75 Hz jest OK, a 60 Hz to tragedia).

<sect1 id="xclnt">Klienty X
<p>
Wiêkszo¶æ klientów X mo¿e byæ uruchomiona poleceniem podobnym do:
<example>
client $ xterm -geometry 80x24+30+200 -fn 6x10 -display <var>hostname</var>:0 &amp;
</example>
Dodatkowe argumenty oznaczaj±:
<list>
<item><tt>-geometry <var>SZER</var>x<var>WYS</var>+<var>XOFF</var>+<var>YOFF</var></tt>: 
pocz±tkowy rozmiar i pozycjê okna programu.

<item><tt>-fn <var>NAZWAFONTU</var></tt>: czcionkê s³u¿±c± do wy¶wietlania
tekstu.
 <tt><var>NAZWAFONTU</var></tt> mo¿e przyjmowaæ warto¶æ:
<list compact>
<item>a14: Normalny rozmiar
<item>a24: Du¿y rozmiar czcionki
<item>... (sprawd¼ dostêpne czcionki za pomoc± <tt>xlsfont</tt>.)
</list>
<item><tt>-display <var>displayname</var></tt>: nazwa X serwera, który ma zostaæ u¿yty. 
 <tt><var>displayname</var></tt> mo¿e przyjmowaæ warto¶æ:
<list compact>
<item><tt><var>hostname</var>:<var>D.S</var></tt> oznacza ekran
<tt><var>S</var></tt> na monitorze  <tt><var>D</var></tt> komputera
<tt><var>hostname</var></tt>; X serwer dla tego
monitora nas³uchuje na porcie TCP 6000+D

<item><tt><var>host</var>/unix:<var>D.S</var></tt> oznacza ekran
<tt><var>S</var></tt> na monitorze <var>D</var> hosta <tt><var>host</var></tt>;
X-serwer dla tego monitora nas³uchuje na porcie typu UNIX.
<file>/tmp/.X11-unix/XD</file> (wiêc jest dostêpny tylko z <tt><var>host</var></tt>).

<item><tt><var>:D.S</var></tt> jest równowa¿ne do
<tt><var>host</var>/unix:<var>D.S</var></tt>, gdzie <tt><var>host</var></tt>
to nazwa lokalnego hosta.
</list>
</list>
<p>
Domy¶lna warto¶æ zmiennej <tt><var>displayname</var></tt> dla klientów X 
(oprogramowanie), mo¿e byæ ustawiona poprzez zmienn± ¶rodowiskow± DISPLAY.
Mo¿na to osi±gn±æ przez np. uruchomienie nastêpuj±cych skryptów przed
klientem X:
<example>
$ export DISPLAY=:0
   # Domy¶lne ustawienie, lokalna maszyna, pierwszy screen
$ export DISPLAY=<var>hostname.fulldomain.name</var>:0.2
$ export DISPLAY=localhost:0
</example>
Start Xów mo¿e byæ dostosowany do w³asnych potrzeb za pomoc±
<file>~/.xinitrc</file>. Np:
<example>
xrdb -load $HOME/.Xresources
xsetroot -solid gray &amp;
xclock -g 50x50-0+0 -bw 0 &amp;
xload -g 50x50-50+0 -bw 0 &amp;
xterm -g 80x24+0+0 &amp;
xterm -g 80x24+0-0 &amp;
twm
</example>
Tak jak opisano to w <ref id="custom-x">, zastêpuje to wszystko, co dzieje
siê podczas uruchomienia <prgn>Xsession</prgn> przez <prgn>startx</prgn>. 
U¿ywaj <file>~/.xsession</file>, a z powy¿szego sposobu korzystaj jedynie w
ostateczno¶ci.
Zobacz <manref name="xsetroot" section="1x">,
<manref name="xset" section="1x"> i <ref id="xresources">.
</sect1>

<sect1 id="x-session">Sesje X
<p>
Sesja X (X-serwer + klient X) mo¿e byæ rozpoczêta poprzez:
<list compact>
<item><prgn>startx</prgn>: skrypt obudowuj±cy <prgn>xinit</prgn>, s³u¿±cy do
       uruchomienia sesji z terminala tekstowego. Je¶li plik
       <file>~/.xinitrc</file> nie istnieje, <file>/etc/X11/Xsession</file>
       jest wywo³ywany przez <file>/etc/X11/xinit/xinitrc</file>.
<item><prgn>xdm</prgn>, <prgn>gdm</prgn>, <prgn>kdm</prgn>, lub
      <prgn>wdm</prgn>: demon uruchamiaj±cy X-serwer i klientów,
       umo¿liwiaj±cy logowanie w GUI.
      <file>/etc/X11/Xsession</file> jest uruchamiany bezpo¶rednio.
</list>
Tryb tekstowy mo¿e byæ udostêpniony, jak to opisano w <ref id="no-x-start">.

<sect2 id="custom-x">Personalizowane sesje X.
<p>
Domy¶lny skrypt startowy <file>/etc/X11/Xsession</file> jest kombinacj±
<file>/etc/X11/Xsession.d/50xfree86-common_determine-startup</file> oraz
<file>/etc/X11/Xsession.d/99xfree86-common_start</file>.
<p>
Na przebieg wykonania <file>/etc/X11/Xsession</file> wp³ywaj± ustawienia z
<file>/etc/X11/Xsession.options</file>. Jego g³ównym zadaniem jest
uruchomienie za pomoc± <prgn>exec</prgn> pierwszego istniej±cego programu
znajduj±cego siê na nastêpuj±cej li¶cie:
<enumlist compact>
<item><file>~/.xsession</file> lub <file>~/.Xsession</file>, je¶li istnieje.
<item><file>/usr/bin/x-session-manager</file>, je¶li istnieje.
<item><file>/usr/bin/x-window-manager</file>, je¶li istnieje.
<item><file>/usr/bin/x-terminal-emulator</file>, je¶li istnieje.
</enumlist>
<p>
Dok³adne znaczenie tych poleceñ jest uzale¿nione od alternatywnych ustawieñ
systemu &debian;, opisanych w <ref id="alternatives">.
Na przyk³ad:
<example>
# update-alternatives --config x-session-manager
... lub
# update-alternatives --config x-window-manager
</example>
Aby wybraæ domy¶lny mened¿er okien X, jednocze¶nie zachowuj±c GNOME i KDE,
zamieñ plik <file>/etc/X11/Xsession.d/50xfree86-common_determine-startup</file>
z plikiem dostarczonym w drugim raporcie o b³êdzie na 
<url id="&bug-xfree;"> (mam nadziejê, ¿e zostanie to szybko naprawione)
i wyedytuj <file>/etc/X11/Xsession.options</file> jak nastêpuje:
<example>
# /etc/X11/Xsession.options
#
# opcje konfiguracyjne dla /etc/X11/Xsession
# Wyja¶nienie dostêpnych opcji znajdziesz w Xsession.options(5)
# Default enabled
allow-failsafe
allow-user-resources
allow-user-xsession
use-ssh-agent
# Domy¶lnie wy³±czone (w³±cz odkomentowuj±c)
do-not-use-x-session-manager
#do-not-use-x-window-manager
</example>
<p>
Bez wspomnianych powy¿ej zmian w systemie pakiety
<package>gnome-session</package> i <package>kdebase</package> zapewniaj±
funkcjonalno¶æ mened¿era sesji. Usuniêcie ich, umo¿liwia ustawienie jako 
domy¶lnego innego mened¿era okien. 
<p>
W systemie, gdzie <file>/etc/X11/Xsession.options</file> zawiera liniê
<tt>allow-user-xsession</tt> bez poprzedzaj±cych jej znaków, ka¿dy
u¿ytkownik, który stworzy <file>~/.xsession</file> lub
<file>~/.Xsession</file> bêdzie móg³ dostosowaæ dzia³anie
<file>/etc/X11/Xsession</file>.
<p>
Ostatnie polecenie w pliku <file>~/.xsession</file> powinno przyjmowaæ
formê: <tt>exec <var>some-window/session-manager</var></tt>, aby
uruchomiæ ulubiony mened¿er sesji.
<p>
Dobry przyk³ad skryptu  <file>~/.xsession</file> jest podany w
<file>&f-xsession;</file>.
<p>
U¿ywam tego skryptu do wybierania mened¿era okien, dostêpu do ekranu i
obs³ugiwanego jêzyka dla poszczególnych u¿ytkowników. Przeczytaj tak¿e
<ref id="s-w-manager">, <ref id="ss-xsu"> i <ref id="x-cjk">.
<p>
Je¶li chcesz by kilka klientów X startowa³o automatycznie, zobacz przyk³ady
z <ref id="xclnt"> i wywo³uj je z <file>~/.xsession</file> zamiast
<file>~/.xinitrc</file>.
<p>
Dodatkowe zasoby X dla poszczególnych u¿ytkowników s± przechowywane w
<file>~/.Xresources</file>. Przeczytaj <ref id="xresources">.
<p>
Dostosowania mapy klawiatury i funkcji klawiszy myszy równie¿ mo¿na dokonaæ
w skryptach startowych u¿ytkownika. Przeczytaj <ref id="xmodmap">.

<sect2 id="s-w-manager">Startowanie sesji X dla u¿ytkownika.
<p>
Pod±¿aj±c za wytycznymi, opisanymi w <ref id="custom-x">,
wybrany przez u¿ytkownika mened¿er sesji/okien mo¿e byæ uaktywniony
poprzez zainstalowanie odpowiedniego pakietu i odpowiednie zmiany pod
koniec pliku <file>~/.xsession</file>.
(Osobi¶cie lubiê <package>blackbox</package>/<package>fluxbox</package>
z powodu ich prostego stylu i szybko¶ci.):

<list>
<item>domy¶lny mened¿er sesji X 
<list compact>
<item>Przeczytaj <ref id="alternatives">
<item><tt>exec /usr/bin/x-session-manager</tt>
</list>
<item>domy¶lny mened¿er okien X 
<list compact>
<item>Przeczytaj <ref id="alternatives">.
<item><tt>exec /usr/bin/x-window-manager</tt>
</list>

<item>Menad¿er sesji GNOME (prze³adowany)
<list compact>
<item>Zainstaluj pakiet: <package>gnome-session</package>
<item><tt>exec /usr/bin/gnome-session</tt>
</list>

<item>Menad¿er sesji KDE (prze³adowany)
<list compact>
<item>Zainstaluj pakiet: <package>kdebase</package> (lub 
<package>kdebase3</package> dla KDE3)
<item><tt>exec /usr/bin/kde2</tt>
</list>

<item>Blackbox window manager (lekki, szybki).
<list compact>
<item>Zainstaluj pakiet: <package>blackbox</package>
<item><tt>exec /usr/bin/blackbox</tt>
</list>

<item>Fluxbox window manager (lekki, nowy blackbox).
<list compact>
<item>Zainstaluj pakiet: <package>fluxbox</package>
<item><tt>exec /usr/bin/fluxbox</tt>
</list>

<item>Xfce window manager (podobny do Mac OS-X, SUN CDE).
<list compact>
<item>Zainstaluj pakiet: <package>xfce</package>
<item><tt>exec /usr/bin/xfwm</tt>
</list>

<item>IceWM window manager (ma³y, alternatywa dla GNOME)
<list compact>
<item>Zainstaluj pakiet: <package>icewm</package>
<item><tt>exec /usr/bin/X11/icewm</tt>
</list>

<item>FVWM2 virtual window manager (ma³y, podobny do Win95)
<list compact>
<item>Zainstaluj pakiet: <package>fvwm</package>
<item><tt>exec /usr/bin/fvwm2</tt>
</list>

<item>Windowmaker window manager (trochê jak NexT)
<list compact>
<item>Zainstaluj pakiet: <package>wmaker</package>
<item><tt>exec /usr/bin/wmaker</tt>
</list>

<item>Enlightenment window manager (prze³adowany)
<list compact>
<item>Zainstaluj pakiet: <package>enlightenment</package>
<item><tt>exec /usr/bin/enlightenment</tt>
</list>

</list>
Przeczytaj <url id="&windomanagerhome;" name="Window Managers for X">.


<sect2 id="kde-gnome">Ustawianie KDE i GNOME
<p>
Aby otrzymaæ w pe³ni funkcjonalne ¶rodowiska KDE lub GNOME, przydatne s±
poni¿sze metapakiety:
<list compact>
<item>KDE: zainstaluj pakiet <package>kde</package>
<item>GNOME: zainstaluj pakiet <package>gnome</package>
</list>
Instalacja tych pakietów za pomoc± narzêdzi korzystaj±cych ze zmiennych
<tt>recommends</tt>, takich jak <prgn>dselect</prgn> i <prgn>aptitude</prgn>,
zaopatrzy Ciê w wiêkszy wybór oprogramowania ni¿ instalacja tylko za
pomoc± <prgn>apt-get</prgn>.
<p>
Je¶li chcesz logowaæ siê w trybie tekstowym wy³±cz mened¿era
wy¶wietlania X, takiego jak <package>kdm</package>, <package>gdm</package>,
i <package>wdm</package>, które mog± zostaæ zainstalowane poprzez
zale¿no¶ci, jak opisano to w <ref id="no-x-start">.
<p>
Je¶li GNOME ma siê uruchamiaæ domy¶lnie, zamiast KDE, upewnij siê jak
w³a¶ciwie skonfigurowaæ <prgn>x-session-manager</prgn>, co opisano w
<ref id="alternatives">.

<sect1 id="xtcp">U¿ywanie X'ów poprzez TCP/IP
<p>
Poniewa¿ zdalne po³±czenie TCP/IP bez szyfrowania mo¿na stosunkowo ³atwo
pods³uchiwaæ, domy¶lne ustawienia X w aktualnej wersji systemu &debian;
nie udostêpnia gniazda TCP/IP. Rozwa¿ u¿ycie <prgn>ssh</prgn>, je¶li
zale¿y Ci na zdalnym po³±czeniu ( zobacz <ref id="xssh">). 
<p>
Metoda opisana tutaj nie jest zalecana, chyba ¿e stosowana jest w bardzo
bezpiecznym ¶rodowisku, za dobrym firewallem i tylko wtedy je¶li wszyscy
u¿ytkownicy s± godni zaufania. U¿yj tego polecenia, aby sprawdziæ obecne
ustawienia X serwera dotycz±ce gniazd TCP/IP:
<example>
# find /etc/X11 -type f -print0 | xargs -0 grep nolisten
/etc/X11/xinit/xserverrc:exec /usr/bin/X11/X -dpi 100 -nolisten tcp
</example>
Usuñ <tt>-nolisten</tt> aby przywróciæ nas³uch poprzez TCP/IP.
</sect1>
 
<sect1 id="xhost">Zdalne po³±czenie z X &ndash; <prgn>xhost</prgn>
<p>
<prgn>xhost</prgn> umo¿liwia dostêp wyznaczonym hostom. Jest to bardzo
niebezpieczne. Poni¿sza linia wy³±cza sprawdzanie hostów i pozwala na
po³±czenie sk±dkolwiek, je¶li dozwolone s± po³±czenia TCP/IP ( przeczytaj
 <ref id="xtcp">):
<example>
$ xhost +
</example>
Mo¿esz ponownie uaktywniæ sprawdzanie hostów poprzez:
<example>
$ xhost -
</example>
<p>
<prgn>xhost</prgn> nie rozró¿nia u¿ytkowników na zdalnych maszynach.
Oprócz tego adresy hostów mog± byæ oszukane (spoofing).
<p>
Powinno unikaæ siê tej metody, szczególnie je¶li jeste¶ pod³±czony do
sieci niegodnej zaufania (np. PPP dialup ). Przeczytaj
<manref name="xhost" section="1x">.
</sect1>

<sect1 id="xssh">Zdalne po³±czenie z X &ndash; <prgn>ssh</prgn>
<p>
<prgn>ssh</prgn> zapewnia bezpieczny sposób po³±czenia lokalnego X
serwera z programem uruchomionym na zdalnej maszynie.
<list>
<item>Ustaw pozycje <tt>X11Forwarding</tt> i <tt>AllowTcpForwarding</tt>
na <tt>yes</tt> w pliku <file>/etc/ssh/sshd_config</file> zdalnego hosta,
je¶li chcesz unikn±æ podawania tych opcji w lini poleceñ.
<item>Uruchom X serwer na zdalnej maszynie.
<item>Otwórz <prgn>xterm</prgn> na lokalnym komputerze.
<item>Uruchom <prgn>ssh</prgn>, aby ustanowiæ po³±czenie ze stron± zdaln±.  
<example>
localname @ localhost $ ssh -q -X -l loginname remotehost.domain
Password:
.....
</example>
<item>Uruchom aplikacje X po stronie zdalnej.
<example>
loginname @ remotehost $ gimp &
</example>
</list>
Metoda ta umo¿liwia wy¶wietlanie wyj¶cia zdalnego klienta X, jak gdyby
komunikowa³ siê on lokalnie poprzez gniazda UNIX.
</sect1>

<sect1 id="xtermfaq">Emulator terminala X &ndash; <prgn>xterm</prgn>
<p>
Dowiedz siê wszystkiego o <prgn>xterm</prgn>: <url id="&xtermfaq;">.
</sect1>

<sect1 id="xresources">Zasoby X
<p>
Du¿o starszych programów dla X, jak <prgn>xterm</prgn>, u¿ywa bazy danych 
zasobów X do konfiguracji w³asnego wygl±du. Plik <file>~/.Xresources</file> 
jest u¿ywany do przechowywania specyfikacji zasobów u¿ytkownika. Jego
zawarto¶æ jest automatycznie do³±czana do domy¶lnych zasobów X podczas
logowania. Zasoby dla ca³ego systemu przechowywane s±
w <file>/etc/X11/Xresources/*</file> i domy¶lne ustawienia aplikacji
w <file>/etc/X11/app-defaults/*</file>. U¿yj tych ustawieñ jako
wyj¶ciowych.
<p>
Oto parê przydatnych ustawieñ dla twojego pliku
<file>~/.Xresources</file>:
<example>
! Ustaw czcionkê do bardziej czytelnego rozmiaru 9x15
XTerm*font: 9x15

! Wy¶wietl pasek przewijania
XTerm*scrollBar: true

! Ustaw rozmiar bufora na 1000 linii
XTerm*saveLines: 1000

! Du¿y ekran kterm
KTerm*VT100*fontList: -*-fixed-medium-r-normal--24-*,\
 -*-gothic-medium-r-normal--24-*,\
 -*-mincho-medium-r-normal--24-*

</example>
Aby zmiany te wesz³y w ¿ycie natychmiast, dodaj je do bazy danych zasobów
poleceniem:
<example>
xrdb -merge ~/.Xresources
</example>
Zobacz <manref name="xrdb" section="1x">.

<sect1 id="xmodmap">Mapy klawiatury i mapowanie myszy w X
<p>
Program <prgn>xmodmap</prgn> jest u¿ywany do edycji i wy¶wietlania mapê
modyfikacji klawiatury i tablicê klawiszy, które s± u¿ywane przez aplikacje
klienckie do zamiany zdarzeñ klawiaturowych na funkcje w X.
<example>
$ xmodmap -pm
 ... wy¶wietla aktualn± mapê modyfikacji
$ xmodmap -pk | pager
 ... wy¶wietla aktualn± tablicê mapy klawiszy
$ xmodmap -e "pointer = 3 2 1" # ustawia myszkê dla leworêcznych.
$ xmodmap ~/.xmodmaprc # ustawia klawiaturê korzystaj±c z ~/.xmodmaprc
</example>
Jest to najczê¶ciej ³adowane ze skryptu startowego sesji u¿ytkownika, 
<file>~/.xsession</file>.
<!--
User-customized keymaps and pointer button mappings in X can be
specified in <file>~/.xmodmaprc</file>.
-->
<p>
By zobaczyæ kody klawiszy (<tt>keycode</tt>), u¿yj <prgn>xev</prgn>
i naciskaj klawisze.
By znale¼æ znaczenie klawiszy <tt>keysym</tt>, spójrz do definicji z pliku 
<file>/usr/include/X11/keysymdef.h</file>.  Wszystkie definicje 
nazywane s± jako <tt>XK_</tt> poprzedzaj±ce nazwy funkcji.
<p>
Zobacz <manref name="xmodmap" section="1x">.

<sect1 id="ss-xsu">Zdobywanie uprawnieñ administratora w X
<p>
Je¶li program z GUI musi byæ uruchomiony z uprawnieniami administratora u¿yj
nastêpuj±cej procedury.<strong>Nigdy nie uruchamiaj X serwera
bezpo¶rednio z konta roota</strong>, aby unikn±æ problemów z
bezpieczeñstwem.
<p>
Uruchom X serwer jako zwyk³y u¿ytkownik i otwórz okno programu
<prgn>xterm</prgn>.
Potem:
<example>
$ XAUTHORITY=$HOME/.Xauthority
$ export XAUTHORITY
$ su root
Password:*****
# printtool &
</example>
U¿ywaj±c tego sposobu by zyskaæ prawa u¿ytkownika innego ni¿ root,
upewnij siê, ¿e <file>~/.Xauthority</file> jest dostêpny do odczytu dla
grupy tego u¿ytkownika.
<p>

<!-- this section moved up -->

Aby zautomatyzowaæ te sekwencje poleceñ, utwórz plik
<file>~/.xsession</file> na koncie u¿ytkownika zawieraj±cy linie:
<example>
# To sprawia, ¿e X-y dzia³aj±, kiedy za pomoc± su stajê siê root'em.
if [ -z "$XAUTHORITY" ]; then
        XAUTHORITY=$HOME/.Xauthority
        export XAUTHORITY
fi
unset XSTARTUP
# Je¶li jakie¶ mened¿ery okien/sesji s± wybrane, odkomentuj nastêpuj±ce
# linie i dostosuj je do swoich potrzeb.
#XSTARTUP=/usr/bin/blackbox
# To uruchomi program x-window/session-manager
if [ -z "$XSTARTUP" ]; then
  if [ -x /usr/bin/x-session-manager ]; then
    XSTARTUP=x-session-manager
  elif [ -x /usr/bin/x-window-manager ]; then
    XSTARTUP=x-window-manager
  elif [ -x /usr/bin/x-terminal-emulator ]; then
    XSTARTUP=x-terminal-emulator
  fi
fi
# Uruchom automatycznie wybrany mened¿er okien/sesji X
exec $XSTARTUP
</example>
Nastêpnie uruchom <prgn>su</prgn> (nie <tt>su -</tt>) w oknie programu
<prgn>xterm</prgn>.  Teraz programy uruchamiane z tego
<prgn>xterma</prgn> bêd± wy¶wietlaæ siê temu u¿ytkownikowi, podczas
gdy pracowaæ bêd± z prawami administratora. 
Dzia³a to tak d³ugo, jak d³ugo domy¶lny plik
<file>/etc/X11/Xsession</file> jest wykonywany. Je¶li u¿ytkownik zmieni³
swoje ¶rodowisko edytuj±c <file>~/.xinit</file> lub <file>~/.xsession</file>,
to wymieniona zmienna ¶rodowiskowa <tt>XAUTHORITY</tt> musi byæ w nich
odpowiednio zmieniona.

<p>Opcjonalnie, <package>sudo</package> mo¿e byæ wykorzystane dla
zautomatyzowania tej sekwencji poleceñ:
<example>
$ sudo xterm
... lub
$ sudo -H -s
</example>
W tym wypadku plik <file>/root/.bashrc</file> powinien zawieraæ:
<example>
if [ $SUDO_USER ]; then
    sudo -H -u $SUDO_USER xauth extract - $DISPLAY | xauth merge -
fi
</example>
Dzia³a to poprawnie nawet gdy katalog domowy u¿ytkownika jest na NFS,
poniewa¿ root nie odczytuje jego <file>.Xauthority</file>.
<p>
Jest kilka pakietów przeznaczonych specjalnie dla tego celu:
<package>kdesu</package>, <package>gksu</package>, <package>gksudo</package>,
<package>gnome-sudo</package>, i <package>xsu</package>.  Parê
innych metod mo¿e byæ u¿ytych do osi±gniêcia podobnych rezultatów:
utworzenie dowi±zania symbolicznego z pliku <file>/root/.Xauthority</file> do
u¿ytkownika, u¿ycie skryptu <url id="&suxhome;" name="sux">; lub
wpisanie &ldquor;<tt>xauth merge ~<var>USER_RUNNING_X</var>/.Xauthority</tt>&rdquor; w
plikach startowych administratora.
<p>
Przeczytaj wiêcej na <url id="&deb-dev-su;" name="debian-devel mailing list">.
</sect1>

<sect1 id="xfs-tt">Czcionki TrueType dla X
<p>
Standardowy <prgn>xfs</prgn> z XFree86-4 poprawnie wspó³pracuje z
czcionkami TrueType. Je¶li natomiast korzystasz z XFree86-3 musisz
zainstalowaæ osobny pakiet, taki jak <prgn>xfs-xtt</prgn>.
<p>
Musisz upewniæ siê, ¿e wszystkie programy, które maj± korzystaæ z
czcionek TrueType zosta³y po³±czone z libXft
lub libfreetype (prawdopobnie nie musisz siê o to martwiæ, je¶li korzystasz
z prekompilowanych pakietów .deb).
<p>
Na pocz±tku przygotuj obs³ugê czcionek:
<list compact>
<item>Zainstaluj pakiety <package>x-ttcidfont-conf</package> i
<package>defoma</package>. To pozwoli zautomatyzowaæ tworzenie plików 
<file>fonts.scale</file> i <file>fonts.dir</file>.
<example>
# apt-get install x-ttcidfont-conf
</example>
<item>Zmieñ czê¶æ <tt>Section "Files"</tt> w pliku 
<file>/etc/X11/XF86Config-4</file> tak jak podano poni¿ej:
<example>
Section "Files"
    FontPath  "/var/lib/defoma/x-ttcidfont-conf.d/dirs/TrueType"
    FontPath  "/usr/share/fonts/truetype"
    FontPath  "/usr/lib/X11/fonts/CID"
    FontPath  "/usr/lib/X11/fonts/Speedo"
    FontPath  "/usr/lib/X11/fonts/misc"
    FontPath  "/usr/lib/X11/fonts/cyrillic"
    FontPath  "/usr/lib/X11/fonts/100dpi:unscaled"
    FontPath  "/usr/lib/X11/fonts/75dpi:unscaled"
    FontPath  "/usr/lib/X11/fonts/Type1"
EndSection
</example>
Pierwsza linia ustawi XFree86 by korzysta³o z czcionek TrueType, które
zainstalujesz z pakietów systemu &debian;.
Wpisz z Type1 jest przesuniêty na dó³, gdy¿ XFree86 wy¶wietla je do¶æ
s³abo.
Opcja <tt>:unscaled</tt> dla czcionek bitmapowych powinna byæ zbêdna
w nowszych XF4, ale zostawi³em j± dla pewno¶ci.
<!-- per /usr/share/doc/xfree86-common/README.fonts.gz in 4.2.1 -->
<p>
By zachowaæ w³asne modyfikacje <file>/etc/X11/XF86Config-4</file> postêpuj
zgodnie z instrukcjami z <ref id="manual-config-x">.
</list>
<p>
Nastêpnie zainstaluj pakiety z fontami (DFSG):
<list compact>
<item>Zachodnie czcionki TrueType:
<list compact>
<item><package>ttf-bitstream-vera</package>: A set of high-quality
TrueType fonts created by Bitstream, Inc.
<footnote>
Dostêpne od dystrybucji Sarge.
</footnote>
<item><package>ttf-freefont</package>: A set of free high-quality
TrueType fonts covering the UCS character set.
<item><package>ttf-thryomanes</package>: A TrueType Unicode font
covering Latin, Greek, Cyrillic and IPA.
</list>
<item>Czcionki azjatyckie:
<list compact>
<item><package>tfm-arphic-bsmi00lp</package>: Chinese Arphic "AR PL
Mingti2L Big5" TrueType font TeX font metric data
<item><package>tfm-arphic-bkai00mp</package>: Chinese Arphic "AR PL
KaitiM Big5" TrueType font TeX font metric data
<item><package>tfm-arphic-gbsn00lp</package>: Chinese Arphic "AR PL
SungtiL GB" TrueType font TeX font metric data
<item><package>tfm-arphic-gkai00mp</package>: Chinese Arphic "AR PL
KaitiM GB" TrueType font TeX font metric data
<item><package>ttf-baekmuk</package>: Korean Baekmuk series TrueType fonts
<item><package>hbf-jfs56</package>: Chinese Jianti Fangsong 56x56 bitmap
font (GB2312) for CJK
<item><package>hbf-cns40-b5</package>: Chinese Fanti Song 40x40 bitmap
font (Big5) for CJK
<item><package>hbf-kanji48</package>: Japanese Kanji 48x48 bitmap font
(JIS X-0208) for CJK
</list>
</list>
 <!-- Need to watch Japanese font issue -->

<p>
Poniewa¿ wybór <strong>Wolnych</strong> czcionek jest dosyæ
ograniczony, dobrym rozwi±zaniem mo¿e byæ równoczesna instalacja
ich komercyjnych odpowiedników.
Aby uczyniæ ich instalacjê ³atwiejsz±, stworzono kilka pakietów:
<list compact>
<item><package>ttf-commercial</package>
<item><package>msttcorefonts (>1.1.0)</package> 
<footnote>Pakiet w Woodym nie dzia³a z powodu zmiany strony 
internetowej Microsoftu w sierpniu 2002 roku. U¿yj wersji z Sarge, nawet
gdy u¿ywasz Woodiego.
</footnote>
</list>
Bêdziesz mia³ naprawdê du¿y wybór czcionek, je¶li po³±czysz u¿ycie
swoich <strong>Wolnych</strong> czcionek z innymi, komercyjnymi.
<p>
Wszystkie te pakiety czcionek powinny dzia³aæ bez ¿adnych dodatkowych
poleceñ i powinny byæ dostêpne dla wszystkich programów X, które u¿ywaj±
czcionek systemowych. W ich sk³ad wchodz± Xterm, Emacs i wiêkszo¶æ
aplikacji spoza KDE i GNOME.
<p>
Teraz uruchom <prgn>xfontsel</prgn> i wybierz jak±kolwiek czcionkê TrueType
z menu fndry. W menu "fmly" powiniene¶ zobaczyæ wiele aktywnych wpisów.
<p>
Dla KDE2.2 i GNOME1.4 (z libgdxft0, które jest pewnym obej¶ciem by czcionki
w GTK 1.2 by³y antyaliasowane), potrzeba ustawienia dodatkowo Xft1.
Xft1 jest bardzo przestarza³e i praktycznie potrzebne tylko dla GNOME1.4
i KDE2.2. W pliku <file>/etc/X11/XftConfig</file> dodaj nastêpuj±c± liniê
<example>
    dir "/var/lib/defoma/x-ttcidfont-conf.d/dirs/TrueType"
</example>
<p>
przed innymi katalogami.
<footnote>
Nie posiadam ¿adnego oprogramowania korzystaj±cego z xft1 wiêc nie jestem
pewien czy potrzeba zrestartowaæ X by te zmiany odnios³y skutek. Pamiêtam,
¿e bodaj¿e "xftcache" powinien uaktualniæ bufor Xft1, ale by³oby dobrze
jakby kto¶ to potwierdzi³.
</footnote>
<p>
Dla GNOME2 i KDE3 (wszystkie wydania po Sarge), musisz ustawiæ 
<package>fontconfig</package>, który jest wykorzystywany przez Xft2 do
odnajdywania czcionek.
<footnote>
<package>Fontconfig</package> <strong>nie</strong> istnieje w Woodym.
</footnote>
Nie powinno byæ potrzeby instalacji ¿adnych dodatków do tego, poniewa¿
wszystkie pakiety u¿ywaj±ce <package>fontconfig</package> ju¿ od niego 
zale¿± (po¶rednio).
<p>
Na pocz±tek zajrzyj do <file>/etc/fonts/fonts.conf</file>.  Powinna tam byæ
linia taka jak poni¿ej.  Je¶li jej nie ma, otwórz 
<file>/etc/fonts/local.conf</file> i dodaj 
<example>
    &lt;dir&gt;/var/lib/defoma/x-ttcidfont-conf.d/dirs/TrueType&lt;/dir&gt;
</example>
zaraz po linii &lt;fontconfig&gt;.
<p>
<package>Fontconfig</package> powinien wykryæ to od razu i 
"fc-list" powinien wy¶wietlaæ nowe czcionki. Kolejn± przyjemn± mo¿liwo¶ci± 
<package>fontconfig</package>, jest fakt, ¿e mo¿esz umie¶ciæ czcionki w 
<file>~/.fonts/</file> i wszystkie programy powinny od razu mieæ do nich
dostêp.
<p>
Je¶li rêcznie doinstalujesz nowy zestaw czcionek bez u¿ywania pakietu
z systemu &debian;, uruchom
<example>
# xset fp rehash
</example>
by XFree86 przegl±dnê³o zawarto¶æ katalogu ponownie i doda³o nowe czcionki.

<sect1 id="ss-browser">Przegl±darka WWW w X
<p>
Jest kilka graficznych przegl±darek stron WWW w Woodym:
<list compact>
<item><package>mozilla</package> The Mozilla (nowa)
<item><package>galeon</package> przegl±darka oparta o Mozillê z Gnome UI (nowa)
<item><package>konqueror</package> przegl±darka dla KDE
<item><package>dillo</package> przegl±darka w GTK
<item><package>amaya-gtk</package> przegl±darka wzorcowa W3C
<item><package>amaya-lesstif</package> przegl±darka wzorcowa W3C
<item><package>netscape-...</package> (du¿o, stare)
<item><package>communicator-...</package> (du¿o, stare)
<item>...
</list>
Wersja pakietu <package>mozilla</package> musi odpowiadaæ wersji
wymaganej przez pakiet <package>galeon</package>.  Chocia¿ ró¿ni± siê
one interfejsem u¿ytkownika, to korzystaj± z tego samego mechanizmu
renderowania stron HTML Gecko.
<p>
Wtyczki dla przegl±darek takich, jak <package>mozilla</package> i
<package>galeon</package> mog± byæ uaktywnione poprzez rêczn± instalacjê
odpowiednich plikow &ldquor;<tt>*.so</tt>&rdquor; w katalogu z wtyczkami i ponowne
uruchomienie przegl±darki.
<p>
Popularne wtyczki:
<list compact>
<item>wtyczka Javy: zaistaluj &ldquor;J2SE&rdquor; z <url id="&javasunhome;">.
<item>wtyczka Flash: zainstaluj &ldquor;Macromedia Flash Player 5&rdquor; z
 <url id="&flashhome;">.
<item><package>freewrl</package>: przegl±darka VRML i wtyczka dla
Netscape'a
<item>...
</list>
</sect1>

<!-- CJK and X moved to bottom with different name to locale section -->

</sect>

<sect id="ssh">SSH
<p>
SSH (Secure SHell) zapewnia bezpieczny sposób po³±czeñ internetowych.
Wersja SSH stanowi±ca wolne oprogramowanie nazywa siê OpenSSH i jest dostêpna
w systemie &debian; jako pakiet <package>ssh</package>.

<sect1 id="ssh-basics">Podstawy SSH
<p>
Najpierw zainstaluj serwer i klienta OpenSSH.
<example>
# apt-get update && apt-get install ssh
</example>
Je¶li serwer
OpenSSH ma byæ uruchamiany, to nie mo¿e istnieæ plik
<file>/etc/ssh/sshd_not_to_be_run</file>.
<p>
SSH zapewnia dwa protoko³y identyfikacji:
<list>
<item>Pierwszy protokó³ SSH: 
 <list compact>
<item>Jedynie Potato obs³uguje ten protokó³.
<item>dostêpne metody identyfikacji:
  <list compact>
<item>RSAAuthentication: oparta na kluczu RSA u¿ytkownika
<item>RhostsAuthentication: oparta na .rhosts (niebezpieczna, wy³±czona)
<item>RhostsRSAAuthentication: oparta na kombinacji .rhosts i kluczy RSA (wy³±czona) 
<item>ChallengeResponseAuthentication: oparta o mechanizm RSA challenge-response
<item>PasswordAuthentication: oparta na has³ach
  </list>
 </list>
<item>Drugi protokó³ SSH: 
 <list compact>
<item>podstawowy dla systemów post-Woody 
<item>dostêpne metody identyfikacji:
  <list compact>
<item>PubkeyAuthentication: oparta o klucz publiczny
<item>HostbasedAuthentication: oparta o <file>.rhosts</file> lub
 <file>/etc/hosts.equiv</file>, w po³±czeniu z metod± klucza publicznego (wy³±czona).
<item>ChallengeResponseAuthentication: oparta o mechanizm challenge-response
<item>PasswordAuthentication: oparta na has³ach
  </list>
 </list>
</list>

<p>
Je¶li u¿ywasz Woodiego lub systemu innego ni¿ &debian;, to zwróæ uwagê na te
ró¿nice.
<p>
Przeczytaj <file>/usr/share/doc/ssh/README.Debian.gz</file>,
<manref name="ssh" section="1">, 
<manref name="sshd" section="8">,
<manref name="ssh-agent" section="1">, i
<manref name="ssh-keygen" section="1"> dla dalszych informacji.

<p>
G³ówne pliki konfiguracyjne to:

<list>

<item><file>/etc/ssh/ssh_config</file>: Ustawienia domy¶lne klienta SSH.
Przeczytaj <manref name="ssh" section="1">.  Wa¿ne uwagi, pozycje:

 <list compact>
<item><tt>Host</tt>: Ogranicza nastêpuj±ce po nim deklaracje ( a¿ do
nastêpnego wyst±pienia Host) jedynie do komputerów pasuj±cych do wzorca
podanego po danym s³owie kluczowym.
<item><tt>Protocol</tt>: Okre¶la wersje protoko³u SSH.
Domy¶lnie to &ldquor;2,1&rdquor;.
<item><tt>PreferredAuthentications</tt>: Okre¶la metodê identyfikacji
klienta SSH2. Domy¶lna warto¶æ to
&ldquor;hostbased,publickkey,keyboard-interactive,password&rdquor;.
<item><tt>PasswordAuthentication</tt>: Je¶li chcesz logowaæ siê u¿ywaj±c
has³a, upewnij siê, ¿e pole to nie jest ustawione na <tt>no</tt>.
<item><tt>ForwardX11</tt>: Domy¶lnie wy³±czone. Nadrzêdna wobec tego
ustawienia jest opcja wiersza poleceñ &ldquor;<tt>-X</tt>&rdquor;.
 </list>

<item><file>/etc/ssh/sshd_config</file>: Domy¶lne ustawienia serwera SSH.
Przejrzyj te¿ <manref name="sshd" section="8">.  Pozycje godne uwagi:

 <list compact>
<item><tt>ListenAddress</tt>: okre¶la lokalny adres, na którym <prgn>sshd</prgn>
powinien nas³uchiwaæ. Dozwolona jest wiêcej ni¿ jedna opcja.
<item><tt>AllowTcpForwarding</tt>: Domy¶lnie wy³±czone.  
<item><tt>X11Forwarding</tt>: Domy¶lnie wy³±czone.  
 </list>

<item><file>$HOME/.ssh/authorized_keys</file>: lista domy¶lnych kluczy
publicznych, które zosta³y u¿yte przez klientów do po³±czenia na dane konto
na tym komputerze.
Zobacz <manref name="ssh-keygen" section="1">.

<item><file>$HOME/.ssh/identity</file>: 
Zobacz <manref name="ssh-add" section="1">
oraz <manref name="ssh-agent" section="1">.
</list>

<p>
Rozpoczêcie po³±czenia przez klienta <prgn>ssh</prgn>.
<example>
$ ssh username@hostname.domain.ext
$ ssh -1 username@hostname.domain.ext # Wymusza u¿ywanie SSH w wersji 1  
$ ssh -1 -o RSAAuthentication=no -l username foo.host
    # wymusza u¿ywanie hase³ SSH1
$ ssh -o PreferredAuthentications=password -l username foo.host
    # wumusza u¿ywanie hase³ SSH2
</example>
Z punktu widzenia u¿ytkownika <prgn>ssh</prgn> dzia³a jako sprytniejszy i
bezpieczniejszy odpowiednik programu <prgn>telnet</prgn> ( nie zarzuci nas
np. ^]).

</sect1>

<sect1 id="ssh-forward">Przekierowywanie portów dla tuneli SMTP/POP3
<p>
Aby utworzyæ potok ³±cz±cy port 25 komputera <var>zdalny-serwer</var> i port
4025 na komputerze lokalnym, oraz potok ³±cz±cy port 110 komputera
<var>zdalny-serwer</var> z portem 4110 lokalnej maszyny, poprzez
<prgn>ssh</prgn>, wykonaj na lokalnej maszynie:
<example>
# ssh -q -L 4025:zdalny-serwer:25 4110:zdalny-serwer:110 \
           u¿ytkownik@zdalny-serwer
</example>
Jest to bezpieczny sposób na nawi±zywanie po³±czenia z serwerami SMTP/POP3 w
Internecie. Ustaw <tt>AllowTcpForwarding</tt> na <tt>yes</tt> w pliku
<file>/etc/ssh/sshd_config</file> zdalnego komputera.
</sect1>

<sect1 id="ssh-rsa">Po³±czenia z mniejsz± ilo¶ci± hase³ &ndash; RSA
<p>
Mo¿na unikn±c konieczno¶ci pamiêtania has³a dla ka¿dego u¿ywanego zdalnego
komputera u¿ywaj±c RSAAuthentication (protokó³ SSH1) lub
PubkeyAuthentication (protokó³ SSH2).
<p>
Na zdalnym systemie ustaw odpowiednio pozycje
&ldquor;RSAAuthentication yes&rdquor; lub &ldquor;PubkeyAuthentication yes&rdquor;, w
<file>/etc/ssh/sshd_config</file>.
<p>
Nastêpnie wygeneruj klucze identyfikacyjne lokalnie i zainstaluj klucz
publiczny na zdalnym systemie:
<example>
$ ssh-keygen          # RSAAuthentication: klucz RSA1 dla SSH1
$ cat .ssh/identity.pub   | ssh u¿ytkownik1@zdalny \
        "cat - &gt;&gt;.ssh/authorized_keys"
...
$ ssh-keygen -t rsa   # PubkeyAuthentication: Klucz RSA dla SSH2
$ cat .ssh/id_rsa.pub | ssh u¿ytkownik1@zdalny \
        "cat - &gt;&gt;.ssh/authorized_keys"
...
$ ssh-keygen -t dsa   # PubkeyAuthentication: klucz DSA dla SSH2
$ cat .ssh/id_dsa.pub | ssh u¿ytkownik1@zdalny \
        "cat - &gt;&gt;.ssh/authorized_keys"
</example>
Mo¿na pó¼niej zmieniæ has³o za pomoc± polecenia &ldquor;<tt>ssh-keygen -p</tt>&rdquor;.
Sprawd¼ ustawienia testuj±c po³±czenie. W razie nieprawid³owo¶ci skorzystaj
z polecenia &ldquor;<tt>ssh -v</tt>&rdquor;.
<p>
Mo¿esz dodaæ opcje do pozycji w <prgn>authorized_keys</prgn>, aby ograniczyæ
uprawnienia hostów i u¿yæ odpowiedniego polecenia. Po dalsze informacje
siêgnij do <manref name="sshd" section="8">.
<p>
Zauwa¿, ¿e SSH2 obs³uguje <tt>HostbasedAuthentication</tt>. Aby uaktywniæ
ten mechanizm, musisz zmieniæ warto¶æ zmiennej
<tt>HostbasedAuthentication</tt> na <tt>yes</tt> zarówno w pliku
<file>/etc/ssh/sshd_config</file> po stronie serwera, jak i w plikach
<file>/etc/ssh/ssh_config</file> lub <file>$HOME/.ssh/config</file> na
komputerze klienta.
</sect1>

<sect1 id="ssh-client">Radzenie sobie z innymi klientami SSH
<p>
Istnieje parê klientów SSH na platformy inne ni¿ Unix.
<taglist>
<tag>Windows
<item><url id="&puttyhome;" name="puTTY"> (GPL)
<tag>Windows (cygwin)
<item>SSH w <url id="&cygwinhome;" name="cygwin"> (GPL)
<tag>Macintosh Classic
<item><url id="&macsshhome;" name="macSSH"> (GPL) [Zauwa¿, ¿e Mac OS X
zawiera OpenSSH; u¿yj <tt>ssh</tt> w aplikacji Terminala]
</taglist>
Zobacz tak¿e <url id="&sfdochome;" name="SourceForge.net, site documentation">, 
&ldquor;6. CVS Instructions&rdquor;.

<sect1 id="ssh-agent">Ustawianie <prgn>ssh-agent</prgn>
<p>
Bezpieczniej jest chroniæ swój klucz SSH has³em. Je¶li nie zosta³o ono
ustawione, u¿yj polecenia <tt>ssh-keygen -p</tt> aby to zmieniæ.
<p>
Umie¶æ swój klucz publiczny (np <file>~/.ssh/id_rsa.pub</file>) w pliku
<file>~/.ssh/authorized_keys</file> na zdalnym ho¶cie, u¿ywaj±c po³±czenia
opartego o has³a, tak jak to opisano w <ref id="ssh-rsa">.
<example>
$ ssh-agent bash # lub uruchom zamiast tego  zsh/tcsh/pdksh
$ ssh-add ~/.ssh/id_rsa
Enter passphrase for /home/osamu/.ssh/id_rsa:
Identity added: /home/osamu/.ssh/id_rsa (/home/osamu/.ssh/id_rsa)
$ scp <var>foo</var> <var>user@remote.host:foo</var>
 ... nie potrzebne tu jest moje has³o :-)
$^D
 ... przerywanie sesji ssh-agent
</example>
Dla X-serwera, standardowe skrypty startowe systemu &debian; uruchamiaj±
<prgn>ssh-agent</prgn> jako proces macierzysty. Musisz wiêc jedynie
uruchomiæ jednokrotnie <prgn>ssh-add</prgn>.
<p>
Dla dalszych informacji przeczytaj <manref name="ssh-agent" section="1"> i
<manref name="ssh-add" section="1">.
</sect1>

<sect1 id="ssh-trouble">Rozwi±zywanie problemów z SSH
<p>
Je¶li masz problemy, sprawd¼ prawa dostêpu do plików konfiguracyjnych i
uruchom <prgn>ssh</prgn> z opcj± &ldquor;<tt>-v</tt>&rdquor;.
<p>
U¿yj parametru &ldquor;<tt>-P</tt>&rdquor; je¶li jeste¶ rootem i masz problem z
firewallem; pozwala to unikn±æ korzystania z portów 1&ndash;1023.
<p>
Je¶li zdalne po³±czenie <prgn>ssh</prgn> nagle przestaje dzia³aæ, mo¿e byæ
to spowodowane dzia³aniami administratora, a najbardziej, prawdopodobn± zmian±
w <prgn>host_key</prgn>. Po upewnieniu siê, ¿e nie jest to jednak sprytna
próba w³amania poprzez podszywanie siê za zdalnej maszyny, mo¿esz odzyskaæ
po³±czenie usuwaj±c pozycje <prgn>host_key</prgn>
z <file>$HOME/.ssh/known_hosts</file> na lokalnej maszynie.
</sect1>

</sect>

<sect id="mail">Poczta
<p>
Konfiguracja poczty dzieli siê na 3 kategorie:
<list>
<item>mail transfer agent (program przesy³aj±cy pocztê - MTA): 
 <prgn>exim</prgn>, <prgn>postfix</prgn>, 
 <prgn>sendmail</prgn>, <prgn>qmail</prgn>, <prgn>ssmtp</prgn>,
 <prgn>nullmailer</prgn>, ...
<item>pocztowe programy u¿ytkowe: <prgn>procmail</prgn>, <prgn>fetchmail</prgn>,
<prgn>mailx</prgn>, ...
<item>mail user agent (klient poczty - MUA): <prgn>mutt</prgn>,
<prgn>emacs</prgn>+<prgn>gnus</prgn>,...
</list>

<sect1>Agenci transportu poczty (MTA)
<p>
Aby mieæ w pe³ni wyposa¿ony MTA u¿yj <package>exim</package>. Zasoby:
<list compact>
<item>pakiety <package>exim-doc</package> i <package>exim-doc-html</package>
<item><url id="&eximhome;">
</list>
Je¶li troszczysz siê o bezpieczeñstwo, to jedyn± rozs±dn± alternatyw± jest
<package>postfix</package>. <package>sendmail</package> i
<package>qmail</package>, s± równie¿ dostêpne jako pakiety systemu &debian;,
ale ich u¿ywanie nie jest polecane.
<p>
Je¶li nie potrzebujesz &ldquor;relay capability&rdquor; MTA, jak to jest w przypadku np.
laptopów, mo¿esz rozwa¿yæ u¿ycie rozwi±zañ mniejszego kalibru:
<list compact>
<item><prgn>ssmtp</prgn>: wymaga po³±czenia SMTP i obs³uguje aliasy, lub
<item><prgn>nullmailer</prgn>: potrafi kolejkowaæ, ale nie obs³uguje aliasów.
</list>
Obecnie uwa¿am, ¿e <prgn>exim</prgn> jest bardziej odpowiedni nawet dla
mojej stacji roboczej, bêd±cej w³a¶nie laptopem.
<p>
Musisz usun±æ <prgn>exim</prgn> aby zainstalowaæ w/w pakiety, gdy¿
zachodzi pomiêdzy nimi konflikt:
<example>
# dpkg -P --force-depends exim
# apt-get install nullmailer         # lub ssmtp
</example> 

<sect2 id="exim-smart">Smarthost
<p>
Je¶li u¿ywasz <prgn>exim</prgn>a na komputerze, który jest pod³±czony
poprzez jakie¶ ³±cze konsumenckie, upewnij siê, ¿e wysy³asz pocztê przez
tak zwany smarthost oferowany przez Twojego dostawcê lub innych.
<footnote>
Musisz przestrzegaæ tej regu³y dla ka¿dego komputera pod³±czonego przez
³±cze wdzwaniane, DSL, telewizjê kablow± czy sieæ lokaln± z routerem.
Nawet je¶li posiadasz publiczne IP od swojego dostawcy, nadal powiniene¶
przestrzegaæ tej regu³y. Wiêkszo¶æ stacji i serwerów domowych podpada pod
tê kategoriê.
</footnote>
Jest kilka dobrych powodów by tak robiæ:
<list compact>
<item>by upewniæ siê, ¿e list doszed³, poniewa¿ serwer Twojego dostawcy
najczê¶ciej posiada lepsze po³±czenie.
<item>by zapobiec przesy³ania wiadomo¶ci bezpo¶rednio
z <strong>dynamicznego adresu IP</strong>, który prawdopodobnie zostanie
zablokowany przez listy spamerskie po³±czeñ wdzwanianych.
<item>by zaoszczêdziæ przepustowo¶æ po³±czenia lokalnego w przypadku
wysy³ania wiadomo¶ci do wielu odbiorców.
</list>
<p>
Jedynymi dopuszczalnymi wyj±tkami s±:
<list compact>
<item>sytuacje awaryjne, je¶li us³uga SMTP Twojego dostawcy nie dzia³a.
<item>eksperymenty w celach edukacyjnych.
<item>posiadanie komputera z profesjonalnym hostingiem.
</list>

<sect2 id="exim-base">Podstawowa konfiguracja Exima
<p>
Aby u¿ywaæ <prgn>exim</prgn> jako MTA, ustaw odpowiednie opcje w:
<example>
/etc/exim/exim.conf     &ldquor;eximconfig&rdquor;  tworzenie i edycja
/etc/inetd.conf         zakomentuj smtp by u¿ywaæ serwera exim w trybie demon
/etc/email-addresses    Dodawanie listy fa³szywych adresów
sprawd¼ filtry, u¿ywaj±c exim -brw, -bf, -bF, -bV, ... etc.
</example>

<sect2 id="addr-catchall">Wy³apywanie poczty dla nieistniej±cych adresów w Eximie
<p>
W <file>/etc/exim/exim.conf</file> (Woody lub pó¼niej),
w czê¶ci DIRECTORS, pod koniec (za 'lokalny u¿ytkownik: przekierowanie')
dodaj przekierowanie pasuj±ce do wszystkich adresów, które poprzednie
przekierowania nie mog³y obj±æ (przez Miquela van Smoorenburga):
<example>
catchall:
  driver = smartuser
    new_address = <var>webmaster@mydomain.com</var>
</example>
<p>
Je¶li chce siê mieæ bardziej szczegó³owy opis ka¿dej wirtualnej domeny itp.
dodaj nastêpuj±ce linie pod koniec pliku <file>/etc/exim/exim.conf</file> (nie
sprawdzone).
<example>
*@yourdomain.com ${lookup{$1}lsearch*{/etc/email-addresses} \
        {$value}fail} T
</example>
Nastêpnie umie¶æ pozycje &ldquor;*&rdquor; w pliku <file>/etc/email-addresses</file>.
</sect2>

<sect2 id="addr-rewrite">Zamiana adresów dla poczty wychodz±cej poczty w Eximie
<p>
<!-- Derrick 'dman' Hudson dman@dman.ddts.net -->
Selektywna zamiana adresów dla wychodz±cej poczty, aby otrzymaæ poprawnie
nag³ówki &ldquor;From: &rdquor;, mo¿e byæ osi±gniêta w programie <prgn>exim</prgn> dziêki
odpowiedniej konfiguracji pod koniec pliku <file>/etc/exim/exim.conf</file>:
<example>
*@komp1.gdzie¶.dyndns.org \
  "${if eq {${lookup{$1}lsearch{/etc/passwd}{1}{0}}} {1}  \
   {$0}{$1@gdzie¶.dyndns.org}}"  frFs
</example>
Ta regu³ka zamienia wszystkie adresy pasuj±ce do <tt>*@komp1.gdzie¶.dyndns.org</tt>.
<enumlist>
<item>Najpierw sprawdza w pliku <file>/etc/password</file> czy czê¶æ lokalna ($1)
jest u¿ytkownikiem czy nie.
<item>Je¶li to lokalny u¿ytkownik, przepisuje adres w takiej postaci w
jakiej wystêpowa³.
<item>Je¶li nie, podmienia nazwê domeny.
</enumlist>

<sect2 id="smtp-aauth">Konfigurowanie autoryzacji SMTP w Eximie
<p>
Niektórzy us³ugodawcy SMTP, jak np. yahoo.com, wymagaj± autoryzacji SMTP.
Skonfiguruj <file>/etc/exim/exim.conf</file> nastêpuj±co:
<example>
remote_smtp:
  driver = smtp
  authenticate_hosts = smtp.mail.yahoo.com
...

smarthost:
  driver = domainlist
  transport = remote_smtp
  route_list = "* smtp.mail.yahoo.com bydns_a"
...

plain:
  driver = plaintext
  public_name = PLAIN
  client_send = "^cmatheson3^this_is_my_password"
</example>
Nie zapomnij o dwóch znakach cudzys³owia w ostatniej lini

<sect1 id="fetchmail">Pobieranie poczty &ndash; Fetchmail
<p>
<prgn>fetchmail</prgn> jest uruchamiany w trybie demona, aby pobraæ pocztê
z konta POP3 u ISP do lokalnego systemu pocztowego. Konfiguracja:
<example>
/etc/init.d/fetchmail   
/etc/rc?.d/???fetchmail uruchom update-rc.d fetchmail default priority 30
/etc/fetchmailrc        plik konfiguracyjny (chown 600, w³asno¶æ fetchmaila)
</example>
<p>
Uruchomienie <prgn>fetchmaila</prgn> jako demona wywo³ywanego 
ze skryptu <prgn>init.d</prgn> w Potato mo¿e byæ k³opotliwe 
(w Woodym jest ju¿ inaczej). Zobacz
<url id="&examples;" name="przyk³adowe skrypty">.
<p>
Je¶li nag³ówki poczty elektronicznej s± zanieczyszczone znakiem ^M z 
winy Twojego ISP,
dodaj &ldquor;stripcr&rdquor; do opcji w pliku <file>$HOME/.fetchmailrc</file>:
<example>
options fetchall no keep stripcr
</example>
</sect1>

<sect1 id="procmail">Przetwarzanie poczty &ndash; Procmail
<p>
<prgn>procmail</prgn> spe³nia rolê lokalnego MDA oraz programu filtruj±cego.
Nale¿y stworzyæ plik <file>$HOME/.procmailrc</file> dla ka¿dego konta, które z
niego korzysta. Przyk³ady <url id="&examples;" name="_procmailrc">
</sect1>

<sect1 id="mutt">Odczytywanie poczty &ndash; Mutt
<p>
U¿yj <prgn>mutt</prgn> jako czytnika poczty ( mail user agent (MUA)) w
po³±czeniu z <prgn>vim</prgn>.
Dostosuj do w³asnych potrzeb edytuj±c plik<file>~/.muttrc</file>; na przyk³ad:

<example>
# u¿ywaj trybu wizualnego i &ldquor;gq&rdquor; do formatowania cytatów
set editor="vim -c 'set tw=72 et ft=mail'"
#
# usuwanie nag³ówków wziête z podrêcznika (Sven's Draconian header weeding)
#
ignore *
unignore from: date subject to cc
unignore user-agent x-mailer
hdr_order from subject to cc date user-agent x-mailer
auto_view application/msword
....
</example>
<p>
U¿yj nastêpuj±cych wpisów w plikach <file>/etc/mailcap</file> lub
<file>$HOME/.mailcap</file>, aby przegl±daæ za³±czniki w formatach HTML i MS
Word.
<example>
text/html; lynx -force_html &percnt;s; needsterminal;
application/msword; /usr/bin/antiword '&percnt;s'; copiousoutput;
description="Microsoft Word Text"; nametemplate=&percnt;s.doc
</example>

</sect1>

</sect>

<sect id="l10n">Lokalizacja
<p>
&debian; jest projektem miêdzynarodowym, obs³uguj±cym rosn±c± ilo¶æ jêzyków
itp. Ta czê¶æ wymieni kilka obszarów ró¿nic jêzykowych, które &debian;
obecnie obs³uguje. Nastêpne za¶ skupi± siê na <strong>lokalizacji</strong>,
procesie uzyskania wej¶cia i wyj¶cia programów w wybranym jêzyku, jak
równie¿ stosowania wybranych konwencji drukowania daty, liczb i symboli
monetarnych, jak równie¿ innych ró¿nic, jakie mog± wystêpowaæ na skutek
stosowania systemu &debian; w Twoim regionie.

<sect1 id="languages">Podstawy lokalizacji
<p>
Jest kilka aspektów lokalizowania systemu &debian; i obs³ugi jêzyków
narodowych.

<sect2 id="keyboard">Lokalizacja klawiatury
<p>
&debian; jest rozpowszechniany z blisko dwoma tuzinami map klawiatur. 
W Woodym mo¿esz zmieniæ ustawienia klawiatury poprzez:

<list compact>
<item><tt>dpkg-reconfigure --priority=low console-data # console</tt>
<item><tt>dpkg-reconfigure --priority=low xserver-xfree86   # XF4</tt>
<item><tt>dpkg-reconfigure --priority=low xserver-common-v3 # XF3</tt>
</list>
</sect2>

<sect2 id="data-stream">Lokalizacja danych
<p>
Szeroka gama oprogramowania dostêpnego jako pakiety Debiana wspiera obs³ugê
znaków graficznych ró¿nych od standardu US-ASCII poprzez zmienn±
¶rodowiskow± LC_CTYPE, udostêpnian± przez mechanizm <strong>locale</strong>
w glibc
   
    <list compact>
    <item>8-bit clean: praktycznie wszystkie programy
     <item>inne zestawy znaków Latin (np. ISO-8859-1 lub ISO-8859-2):
     wiêkszo¶æ programów
     <item>wielobajtowe jêzyki, jak Chiñski, Japoñski czy Koreañski: wiele
     nowych programów
    </list>
</sect2>

<sect2 id="display">Lokalizacja wy¶wietlania
<p>
X-y mog± wy¶wietlaæ ka¿de kodowanie, w³±czaj±c UTF-8, i obs³uguj± wszystkie
czcionki. Zawieraj± siê w tym nie tylko wszystkie czcionki 8-bitowe, ale tak¿e
16-bitowe - np. chiñska, japoñska czy koreañska. Obs³uga wielobajtowych
zestawów znaków przy wprowadzaniu danych jest zapewniona przez mechanizm
<ref id="x-input">. Zobacz <ref id="x-cjk"> i <ref id="x-utf-8">.
<p>
Wy¶wietlanie japoñskiego kodu EUC jest tak¿e mo¿liwe w konsoli graficznej,
poprzez pakiet <package>kon2</package>. Jest tak¿e alternatywny program,
u¿ywaj±cy konsoli framebuffera, pakiet <package>jfbterm</package>. W tych
¶rodowiskach sposób zapewnienia wej¶cia kompatybilnego z jêzykiem japoñskim
musi byæ zapewniony przez programy u¿ytkowe. U¿yj pakietu
<package>egg</package> dla Emacsa lub <package>jvim</package> dla Vima.
<p>
Instalacja czcionek innych ni¿ Unicode dla X pomo¿e wy¶wietlaæ dokumenty
z jakimkolwiek kodowaniem. Wiêc nie przejmuj siê zbytnio kodowaniem
czcionek.
</sect2>

<sect2 id="translation">Lokalizacja komunikatów i dokumentacji


<p>
Dostêpne s± t³umaczenia wielu komunikatów i dokumentów wy¶wietlanych w
systemie &debian; takich, jak komunikaty b³êdów, standardowe wyj¶cie
programów, menu oraz strony podrêcznika systemowego. Obecnie istniej± strony
podrêcznika w jêzyku  niemieckim, hiszpañskim, fiñskim, francuskim,
wêgierskim, w³oskim, japoñskim, koreañskim, polskim, portugalskim, chiñskim
oraz rosyjskim - wszystkie one s± dostêpne w pakietach
<tt>manpages-<var>LANG</var></tt> (gdzie <var>LANG</var> jest dwuliterowym
kodem ISO kraju. U¿yj <tt>apt-cache search manpages-|less</tt> aby otrzymaæ
listê dostêpnych pakietów.)
<p>
Aby korzystaæ z przet³umaczonych stron podrêcznika, u¿ytkownik musi ustawiæ
zmienn± ¶rodowiskow± LC_MESSAGES na odpowiedni± warto¶æ. W przypadku 
jêzyka w³oskiego LC_MESSAGES musi zostaæ ustawione na <tt>it</tt>. Wtedy
<prgn>man</prgn> bêdzie szuka³ w³oskiego t³umaczenia w pliku
<file>/usr/share/man/it/</file>.
</sect2>
</sect1>

<sect1 id="locales">Locales
<p>
Debian oferuje mechanizm <strong>locale</strong>. Pozwala on programom na
dostosowanie wyj¶cia i mo¿liwo¶ci w zale¿no¶ci od ustawieñ systemowych
takich, jak u¿ywany zestaw znaków, format wy¶wietlania daty i godziny,
symbol waluty itp. Na przyk³ad, zak³adaj±c wystêpowanie zarówno
angielskich (amerykañskich) jak i niemieckich locales w Twoim systemie, 
komunikat b³êdu mo¿e byæ wy¶wietlany w wielu jêzykach:
<example>
$ LANG="en_US" cat foo
cat: foo: No such file or directory
$ LANG="de_DE" cat foo
cat: foo: Datei oder Verzeichnis nicht gefunden
</example>
Glibc oferuje t± funkcjonalno¶æ dla programów jako bibliotekê.
Zobacz <manref name="locale" section="7">.

<sect1 id="base-locale">Wprowadzenie do locales
<p>
Pe³ny opis locale sk³ada siê z trzech czê¶ci: <tt>xx_YY.ZZZZ</tt>.
<list compact>
<item><strong><tt>xx</tt></strong>: kod jêzyka w ISO 639 (ma³e litery)
<item><strong><tt>YY</tt></strong>: kod kraju w ISO 3166 (wielkie litery)
<item><strong><tt>ZZZZ</tt></strong>: zestaw kodów, np. ustawienia znaków
lub identyfikator kodowania.
</list>
<p>
Kody jêzyków i krajów mo¿esz znale¼æ w opisie w <tt>info gettext</tt>.
<p>
Zwróæ uwagê, ¿e czê¶æ opisuj±ca kody mo¿e zostaæ wewnêtrznie znormalizowana
poprzez usuniêcie wszystkich znaków <tt>-</tt> i zamianê liter na ma³e
w celu wiêkszej kompatybilno¶ci,
Typowe zestawy kodów to:
<list compact>
  <item><strong>UTF-8</strong>: Unikod (Unicode) dla wszystkich regionów,
  g³ównie w 1-3 oktetach (de facto nowy standard)
  <item><strong>ISO-8859-1</strong>: zachodnia Europa (de facto stary standard) 
  <item><strong>ISO-8859-2</strong>: wschodnia Europa (bo¶niacki,
  chorwacki, czeski, wêgierski, polski, rumuñski, serbski, s³owacki, s³oweñski)
  <item><strong>ISO-8859-3</strong>: maltañski
  <item><strong>ISO-8859-5</strong>: macedoñski i serbski
  <item><strong>ISO-8859-6</strong>: arabski
  <item><strong>ISO-8859-7</strong>: grecki
  <item><strong>ISO-8859-8</strong>: hebrajski
  <item><strong>ISO-8859-9</strong>: turecki
  <item><strong>ISO-8859-11</strong>: tajski (=TIS-620)
  <item><strong>ISO-8859-13</strong>: ³otewski, litewski, maori
  <item><strong>ISO-8859-14</strong>: walijski
  <item><strong>ISO-8859-15</strong>: zachodnia Europa z obs³ug± euro
  <item><strong>KOI8-R</strong>: rosyjski
  <item><strong>KOI8-U</strong>: ukraiñski
  <item><strong>CP1250</strong>: czeski, wêgierski, polski (MS Windows)
  <item><strong>CP1251</strong>: bu³garski, bia³oruski (MS Windows)
  <item><strong>eucJP</strong>: japoñski w stylu Unix (=ujis)
  <item><strong>eucKR</strong>: koreañski w stylu Unix 
  <item><strong>GB2312</strong>: uproszczony chiñski w stylu Unix 
  (=GB, =eucCN) dla zh_CN
  <item><strong>Big5</strong>: tradycyjny chiñski dla zh_TW  
  <item><strong>sjis</strong>: japoñski w stylu Microsoft (Shift-JIS)
</list>
Znaczenie podstawowych systemów kodowania:
<list compact>
<item><strong>ASCII</strong>: 7 bitów (0-0x7f)
<item><strong>ISO-8859-?</strong>: 8 bitów (0-0xff)
<item><strong>ISO-10646-1</strong>: Universal Character Set (UCS) 
(31 bitów, 0-0x7fffffff)
<item><strong>UCS-2</strong>: Pierwsze 16 bitów UCS jako proste 2 oktety
(Unicode: 0-0xffff)
<item><strong>UCS-4</strong>: UCS jako proste 4 oktety (UCS: 0-0x7fffffff)
<item><strong>UTF-8</strong>: UCS zakodowany w 1-6 oktetach 
(g³ównie w 3 oktetach)
<item><strong>ISO-2022</strong>: 7 bitów (0-0xff) z sekwencjami escape.
ISO-2022-JP jest najpopularniejszym kodowaniem dla japoñskich wiadomo¶ci.
<item><strong>EUC</strong>: 8 bitów + 16 bitów kombinacji (0-0xff), 
styl Unix
<item><strong>Shift-JIS</strong>: 8 bitów + 16 bitów kombinacji
(0-0xff), styl Microsoft.
</list>
ISO-8859-?, EUC, ISO-10646-1, UCS-2, UCS-4 i UTF-8 dla znaków 7 bitowych 
wspóldziel± te same kody wraz z ASCII.  EUC i Shift-JIS u¿ywa znaków
wysokich bitów (0x80-0xff) dla zaznaczenia, ¿e czê¶æ kodowania jest 16
bitowa. UTF-8 równie¿ u¿ywa znaków wysokich bitów (0x80-0xff) by zaznaczyæ
sekwencje znaków spoza 7 bitów i jest to najbardziej powszechny system
kodowania znaków spoza ASCII.
<p>
Zwróæ uwagê na ró¿nicê w kolejno¶ci bajtów w implementacjach Unikodu:
<list compact>
<item><strong>Standard  UCS-2, UCS-4</strong>: big endian
<item><strong>Microsoft UCS-2, UCS-4</strong>: little endian dla ix86 
(zale¿ne od komputera)
</list>
Wiêcej mo¿esz dowiedzieæ siê we
<url id="&intro-i18n;" name="Wprowadzeniu do i18n">.
  	

<sect1 id="activate-locales">Aktywacja wsparcia locale
<p>
&debian; <strong>nie</strong> jest instalowany z wszystkimi mo¿liwymi
prekompilowanymi wersjami locales . Sprawd¼ plik <file>/usr/lib/locale</file>,
aby zobaczyæ, które locale (poza domy¶lnym &ldquor;C&rdquor;), s± obecne w Twoim systemie.
Je¶li potrzebujesz takiego, który nie jest dostêpny masz dwie mo¿liwo¶ci:
<list compact>
<item>Dodaj po¿±dane locale do pliku <file>/etc/locale.gen</file>, nastêpnie
uruchom <prgn>locale-gen</prgn> jako root aby je skompilowaæ. Przeczytaj
<manref name="locale-gen" section="8"> i strony wymienione w jego czê¶ci
&ldquor;SEE ALSO&rdquor;.
<item>Uruchom <tt>dpkg-reconfigure locales</tt>, aby ponownie skonfigurowaæ
pakiet <package>locales</package>. A je¶li nie jest jeszcze zainstalowany,
to instalacja wywo³a interfejs programu debconf, aby pozwoliæ Ci wybraæ
potrzebne locale i skompilowaæ bazê danych.

<!--  XXX FIXME XXX
 <item>Run <prgn>localedef</prgn> manually from user account to compile
   the locale database and use it by setting
   <tt>LOC_PATH</tt>
   environment variable.  For example for <tt>en_GB.UTF-8</tt>:
   <example>
$ localedef -v -c -i en_GB -f UTF-8 <var>somewhere/</var>en_GB.UTF-8
$ export LOC_PATH=<var>somewhere/</var>
   </example>
 -->
</list>

<sect1 id="env-locale">Uaktywnienie okre¶lonego locale.
<p>
Nastêpuj±ce zmienne ¶rodowiskowe s± u¿ywane, aby dostarczyæ ustawieñ
locale dla programów:
<enumlist>
<item>LANGUAGE: Ta zmienna sk³ada siê z oddzielonej dwukropkami listy locale
w porz±dku wa¿no¶ci. U¿ywaj wy³±cznie, je¶li POSIX locale jest ustawione do
warto¶ci innej ni¿ &ldquor;C&rdquor; [w Woodym; wersja Potato jest zawsze wa¿niejsza od
POSIX locale]. (rozszerzenie GNU)
<item>LC_ALL: Je¶li nie przyjmuje warto¶ci NULL, warto¶æ ta jest u¿yta dla
      categories. (POSIX.1) Zwykle &ldquor;&rdquor; (null).
<item>LC_*: Je¶li nie przyjmuje warto¶ci NULL, warto¶æ ta jest u¿yta dla
odpowiedniej kategorii (POSIX.1). Zwykle &ldquor;C&rdquor;.
<p>
Dostêpne zmienne LC_*:
 <list compact>
<item>LC_CTYPE: Konwersja czcionki i wielko¶ci liter.
<item>LC_COLLATE: Porz±dek sortowania.
<item>LC_TIME: Format wy¶wietlania daty i godziny.
<item>LC_NUMERIC: Wy¶wietlanie liczb nie zwi±zanych z walut±
<item>LC_MONETARY: Formaty walutowe.
<item>LC_MESSAGES: Format wiadomo¶ci informacyjnych, diagnostycznych oraz
okre¶laj±cych interakcje programu.
<item>LC_PAPER: Rozmiar papieru.
<item>LC_NAME: Format nazw.
<item>LC_ADDRESS: Format wy¶wietlania adresu i lokalizacji.
<item>LC_TELEPHONE: Format wy¶wietlania numeru telefonu.
<item>LC_MEASUREMENT: Jednostki miary (metryczna lub inna)
<item>LC_IDENTIFICATION: Metadata o ustawieniach locale.
 </list>
<item>LANG: Je¶li nie przyjmuje warto¶ci NULL i LC_ALL jest niezdefiniowane,
warto¶æ wszystkich niezdefiniowanych kategorii LC_* jest ustawiana na t±
warto¶æ. (POSIX.1) Zwykle &ldquor;C&rdquor;.

</enumlist>
Zauwa¿, ¿e niektóre programy (np. Netscape 4) ignoruj± ustawienia LC_*.
<p>
Program <prgn>locale</prgn> mo¿e wy¶wietlaæ ustawienia locale i dostêpne
locale; przeczytaj <manref name="locale" section="1">. (Zapamiêtaj: <tt>locale
-a</tt> podaje wszystkie locale, o których istnieniu wie; <em>nie</em>
oznacza to, ¿e wszystkie s± dostêpne! Zobacz <ref id="activate-locales">.)

<sect1 id="ISO-locale">Format daty ISO 8601
<p>
Locale obs³uguje miêdzynarodowy standard formatu daty
<tt>yyyy-mm-dd</tt> (ISO 8601) poprzez locale <tt>en_DK</tt>, &mdash;
Angielski w Danii, co jest ¿artem :-)
Wydaje siê dzia³aæ jedynie w trybie tekstowym w <prgn>ls</prgn>.

<!-- beyond locale moved to below -->

<sect1 id="iso-8859-1">Przyk³ad dla US (ISO-8859-2)
<p>
Dodaj poni¿sze linie do pliku <file>~/.bash_profile</file>:
<example>
LC_CTYPE=en_US.ISO-8859-1
export LC_CTYPE
</example>

<sect1 id="france">Przyk³ad dla Francji, z walut± Euro (ISO-8859-15)
<p>
Dodaj poni¿sze linie do pliku <file>~/.bash_profile</file>:
<example>
LANG=fr_FR@euro
export LANG
LC_CTYPE=fr_FR@euro
export LC_CTYPE
</example>
<p>
Skonfiguruj klawiaturê jako francuskie &ldquor;AZERTY&rdquor;, jak to opisano w <ref
id="keyboard"> i dodaj francuskie strony podrêcznika systemowego
instaluj±c <package>manpages-fr</package>. Prawy Alt w US to
Alt-Gr w Europie. Naci¶niêcie tych klawiszy razem z innymi
tworzy liczne znaki diakrytyczne oraz znaki specjalne. Np Alt-Gr+E 
odpowiada za znak Euro.
<p>
Wiêkszo¶æ jêzyków zachodnio-europejskich mo¿e byæ skonfigurowana
podobnie.
<p>
Zobacz <url id="&debian-euro-support;" name="Debian Euro HOWTO">, jak
dodaæ obs³ugê nowej waluty Euro oraz
<url id="&debian-fr-howto;" 
name="Utiliser et configurer Debian pour le français"> 
po wiêcej informacji w jêzyku francuskim.

<sect1 id="x-cjk">Przyk³ad wielojêzykowego systemu X window
<p>
Ustawmy wielojêzykowy system X window, który bêdzie jednocze¶nie obs³ugiwa³
japoñski, angielski, niemiecki i francuski z kodowaniami EUC, UTF-8 i 
ISO-8859-1 w ró¿nych konsolach.
<p>
Poka¿ê sposób dostosowania z u¿yciem systemu menu Debiana. Szczegó³y tego
systemu mo¿esz znale¼æ w <url id="&f-menu;">. W przyk³adzie stworzê równie¿ 
skrót do przegl±darki <prgn>mozilla</prgn>.
 <footnote>
W tym przyk³adzie zosta³y wykorzystane dwa obej¶cia b³êdów sytêpuj±cych
w mened¿erze okien <prgn>blackbox</prgn> w roku 2003. U¿ywam <tt>sh -c</tt> 
w poleceniu. Równie¿ wpis <file>~/.menu/*</file> jest nieu¿ywany,
a w zamian wykorzystane zosta³o <file>/etc/menu/*</file>.
 </footnote>

<list>
<item>dodaj obs³ugê japoñskiego ja_JP.eucJP oraz reszty potrzebnych locale 
metod± opisan± w <ref id="l10n"> (dla wszystkich).

<item>zainstaluj system konwersji oraz s³ownik Kana-to-Kanji (dla japoñskiego):
  <list compact>
  <item><package>canna</package> &ndash; lokalny serwer (licencja &ldquor;free
beer&rdquor;), lub
  <item><package>freewnn-jserver</package> &ndash; sieciowy serwer
  (Public Domain)
  </list>

 <item>zainstaluj mechanizmy japoñskiego wej¶cia (dla japoñskiego):
  <list compact>
  <item><package>kinput2-canna</package>&ndash; dla X-ów, lub
  <item><package>kinput2-canna-wnn</package>&ndash; dla X-ów, i
  <item><package>egg</package>&ndash; dzia³a bezpo¶rednio z Emacsem
  nawet w trybie tekstowym (opcjonalnie).
  </list>

 <item>terminale odpowiednio przystosowane (dla wszystkich):
  <list compact>
  <item><package>xterm</package> &ndash; X (dla ISO-8859-1 i UTF-8),
  <item><package>kterm</package> &ndash; X (dla japoñskiego EUC) i
  <item><package>mlterm</package> &ndash; X (wielojêzykowy).
  </list>

 <item>dodaj wszystkie wymagane czcionki (dla wszystkich)
 
 <item>stwórz plik <file>~/.xsession</file> dla ustawieñ zale¿nych od
 u¿ytkownika tak jak to opisano w <ref id="custom-x"> (dla wszystkich):

<example>
#!/bin/sh
# To sprawia, ¿e X-y dzia³aj± gdy przelogujê siê na roota za pomoc± su.
if [ -z "$XAUTHORITY" ]; then
        XAUTHORITY=$HOME/.Xauthority
        export XAUTHORITY
fi

# Ustawianie odpowiedniego ¶rodowiska przez system menu Debiana.
# Resetowanie locale
unset LC_CTYPE LC_NUMERIC LC_TIME LC_COLLATE LC_MONETARY LC_MESSAGES
unset LC_PAPER LC_NAME LC_ADDRESS LC_TELEPHONE LC_MEASUREMENT
unset LC_IDENTIFICATION LC_ALL LANG LANGUAGE PAGER
# ustawienie domy¶lnego locale w X
LANG=C
# eksportowanie locale
export LC_CTYPE LC_NUMERIC LC_TIME LC_COLLATE LC_MONETARY LC_MESSAGES
export LC_PAPER LC_NAME LC_ADDRESS LC_TELEPHONE LC_MEASUREMENT
export LC_IDENTIFICATION LC_ALL LANG LANGUAGE PAGER
###
# uaktywnianie japoñskiej metody wej¶ciowej z kinput2
kinput2 &
XMODIFIERS="@im=kinput2"
export XMODIFIERS
# A mo¿e blackbox window manager (leciutki)
exec /usr/bin/blackbox
#exec xfwm
#exec wmaker
</example>

<item>ustaw locale dla konsoli w <file>~/.bash_profile</file> (dla
wszystkich)
<item>je¶li istniej± to usuñ ustawienia locale z <file>~/.bashrc</file>
(dla wszystkich)

<item>utwórz kilka plików w <file>/etc/menu/</file> (dla wszystkich).
 <list compact>
 <item><file>/etc/menu/xterm-local</file>: (dodaj nowe wpisy do menu)
 <footnote>
U¿yj nazwy pliku, która nie konfliktuje z ¿adn± nazw± pakiety.
 </footnote>
<example>
?package(xterm):\
 needs=x11\
 section=XShells\
 longtitle="XTerm: terminal emulator (en_US.ISO-8859-1)"\
 title="XTerm (en_US.ISO-8859-1)"\
 command="sh -c 'LC_ALL=en_US.ISO-8859-1 xterm'"
?package(xterm):\
 needs=x11\
 section=XShells\
 longtitle="XTerm: terminal emulator (de_DE.ISO-8859-1)"\
 title="XTerm (de_DE.ISO-8859-1)"\
 command="sh -c 'LC_ALL=de_DE.ISO-8859-1 xterm -T xterm-de'"
?package(xterm):\
 needs=x11\
 section=XShells\
 longtitle="XTerm: terminal emulator for X with Unicode support (Japanese)"\
 title="UXTerm (ja_JP.UTF-8)"\
 command="sh -c 'LC_ALL=ja_JP.UTF-8 uxterm'"
</example>
 <item><file>/etc/menu/kterm</file>: (nadpisanie domy¶lnych ustawieñ)
 <footnote>
U¿yj nazwy pliku konfliktuj±cej z nazw± pakietu.
 </footnote>
<example>
?package(kterm):\
 needs="x11"\
 section="XShells"\
 command="sh -c 'LC_ALL=ja_JP.eucJP PAGER=w3m /usr/X11R6/bin/kterm -xim'" \
 title="Kanji Terminal"
?package(kterm):\
 needs="x11"\
 section="XShells"\
 command="sh -c 'LANG=ja_JP.eucJP \
      LC_MESSAGES=en_US.ISO-8859-1 PAGER=w3m /usr/X11R6/bin/kterm -xim'" \
      title="Kanji Terminal (bilingal)"
</example>
 <item><file>/etc/menu/mozilla-local</file>: (dodaj nowy skrót)
 <footnote>
Uko¶nik w <tt>section="/"</tt> uaktywnia wpis w menu g³ównym, a pocz±tkowa
spacja w <tt>title=" Mozilla Navigator"</tt> sprawia, ¿e wpis znajduje siê
na górze listy.
 </footnote>
<example>
?package(mozilla-browser):needs="x11" section="/" \
 title=" Mozilla Navigator" command="mozilla-1.5" hints="Web browsers" \
  icon=/usr/share/pixmaps/mozilla.xpm
</example>
 <item>uruchom <prgn>update-menus</prgn> z konta administratora.
 </list>
 <item>dodaj nastêpuj±ce linie do <file>~/.muttrc</file> (dla japoñskiego):

<example>
# Obs³uga UTF-8 nie jest popularna w powszechnym japoñskim ¶rodowisku EMACS
# 7 bitowe kodowanie iso-2002-jp jest prostsze dla wszystkich.
# domy¶lna kolejno¶æ kodowañ = us-ascii --&gt; iso-8859-1 --&gt; iso-2022-jp
set send_charset="us-ascii:iso-8859-1:iso-2022-jp"
set allow_8bit=no
</example>
 <item>uaktywnij XIM <prgn>kinput2</prgn> dla aplikacji w X-ach (dla japoñskiego) 
  <list compact>
  <item>dodaj <tt>*inputMethod: kinput2</tt> i 
  <tt>KTerm*VT100*OpenIm: true</tt> do Twojego pliku <file>~/.Xresources</file>
  (wygl±da na to, ¿e Debian za³atwia to jako¶ automatycznie).

  <item>Niektóre programy, jak np. <prgn>mlterm</prgn> pozwalaj± tak¿e na
  ustawianie <tt>*inputMethod:</tt> i innych informacji dynamicznie,
  podczas dzia³ania (naci¶nij <strong>Ctrl-MouseButton-3</strong> w <prgn>mlterm</prgn>).
  </list>
 <item>uruchom X poprzez <tt>startx</tt> lub mened¿er wy¶wietlania
  (<prgn>xdm</prgn>, <prgn>gdm</prgn>, <prgn>kdm</prgn>, 
   <prgn>wdm</prgn>, ...) (dla wszystkich).
 <item>uruchom program kompatybilne z jêzykiem japoñskim takie, jak
  VIM6, (x)emacs21, mc-4.5, mutt-1.4, ... w <prgn>kterm</prgn> (dla
  japoñskiego).
  (Emacs wydaje siê najpopularniejszy, aczkolwiek osobi¶cie go nie
  u¿ywam).
 <item>naci¶nij <strong>Shift+Space</strong> aby w³±czyæ/wy³±czyæ japoñski
 tryb wej¶cia (dla japoñskiego).
 <item>przeczytaj przet³umaczone strony podrêcznika systemowego
 wprowadzaj±c polecenie w zlokalizowanej konsoli (dla wszystkich).
</list>
Obs³uga innych jêzyków CJK opisana jest w nastêpnych rozdzia³ach oraz pod
adresem <url id="&suse-cjk;" name="SuSE pages for CJK">.

<sect1 id="x-input">Alternatywne metody wej¶cia X
<!-- I need feed back from Chinese and Korean people for here -->
<p>
Jest wiele innych pakietów oferuj±cych alternatywne metody wej¶cia dla X:
<example>
Jêzyk      LC_CTYPE     XIM serwer XMODIFIERS              klawisz startowy
japoñski   ja_JP*       kinput2    "@im=kinput2"           Shift-Space
koreañski  ko_KR*       ami        "@im=Ami"               Shift-Space
chiñski(T) zh_TW.Big5   xcin       "@im=xcin-zh_TW.big5"   Ctrl-Space
chiñski(S) zh_CN.GB2312 xcin       "@im=xcin-zh_CN.GB2312" Ctrl-Space
</example>
<p>
Japoñska metoda wej¶ciowa <prgn>kinput2</prgn> jest dostarczana przez
pakiety <package>kinput2-canna-wnn</package>, <package>kinput2-canna</package>
i <package>kinput2-wnn</package>. By by³y u¿yteczne wymagaj± serwerów
s³ownikowych takich jak <package>canna</package> oraz 
<package>freewnn-jserver</package>.

<!--
<p>
Korean and Chinese may also use dictionary server such as
<package>freewnn-kserver</package> and
<package>freewnn-cserver</package> too.
-->

<sect1 id="x-term">Emulatory terminali X
<p>
Jest wiele konsoli X wspieraj±cych zwyk³e kodowanie 8-bitowe je¶li
odpowiednie pakiety z czcionkami s± zainstalowane.
<list compact>
  <item><package>xterm</package> &ndash; The X terminal emulator
  <item><package>gnome-terminal</package> &ndash; <package>xterm</package>
   dla Gnome
  <item><package>konsole</package> &ndash; <package>xterm</package>
   dla KDE
  <item><package>rxvt</package> &ndash; VT102 terminal (l¿ejszy)
  <item><package>aterm</package> &ndash; VT102 dla Afterstep WM
  <item><package>eterm</package> &ndash; VT102 dla Enlightment WM
  <item><package>wterm</package> &ndash; VT102 dla WindowMaker WM
</list>
<p>
Wielobajtowe kodowania dla konsol X wspiera
<package>xterm</package> poprzez kodowanie UTF-8 (<ref id="x-utf-8">).
Nad wsparciem dla innych tradycyjnych kodowañ trwaj± prace (2003).
Nastêpuj±ce pakiety oferuj± wsparcie dla tradycyjnych kodowañ:
<list compact>
  <item><package>aterm-ml</package> &ndash; wielojêzykowy
  <item><package>kterm</package> &ndash; wielojêzykowy (japoñski, ...)
  <item><package>rxvt-ml</package> &ndash; wielojêzykowy
  <item><package>wterm-ml</package> &ndash; wielojêzykowy
  <item><package>cxterm-big5</package> &ndash; chiñski (Trad., Big5)
  <item><package>cxterm-gb</package> &ndash; chiñski (Simp., GB)
  <item><package>cxterm-ks</package> &ndash; chiñski (KS)
  <item><package>cxterm-jis</package> &ndash; japoñski
  <item><package>hanterm-classic</package> &ndash; koreañski (Hangul)
  <item><package>hanterm-xf</package> &ndash; koreañski (Hangul)
  <item><package>hztty</package> &ndash; chiñski (GB, Big5, zW/HZ)
</list>
Dla <prgn>kterm</prgn> (i prawdopodobnie innych), mo¿esz uaktywniæ 
XIM poprzez menu klikaj±c ¶rodkowy klawisz myszy.

<sect1 id="x-utf-8">Obs³uga UTF-8 w emulatorach terminali X
<p>
Dla XFree86 4.x obs³uga UTF-8 w emulatorze terminala X dostarczana jest
przez program <prgn>uxterm</prgn> z pakietu <package>xterm</package>. 
Uaktywnia wsparcie dla wszystkich jêzyków. Jest on swego rodzaju nak³adk±
nad <manref name="xterm" section="1">, która wywo³uje go z odpowiednio
ustawionym zasobem X "UXTerm".
<p>
Przyk³adowo by uaktywniæ wy¶wietlanie ³adnych, du¿ych znaków angielskich,
rosyjskich, japoñskich, chiñskich oraz koreañskich, po zainstalowaniu
odpowiednich czcionek dodaj do swojego <file>~/.Xresources</file> 
nastêpuj±ce linie:
<example>
! set large font
UXTerm*font: -misc-fixed-medium-r-normal-*-18-120-100-100-c-90-iso10646-1
! Use XIM for Japanese
*inputMethod: kinput2
</example>
Nastêpnie tak jak to opisano w <ref id="xresources">, uruchom 
<tt>xrdb -merge ~/.Xresources</tt> by uaktualniæ swoje zasoby X.
<p>
Wiêkszo¶æ popularnych programów konsolowych takich jak 
<package>vim</package>, <package>mutt</package> i 
<package>emacs</package> zosta³y ostatnio dostosowane do kodowania UTF-8 
(Woody-Sarge). Jednak¿e program <package>mc</package> nadal nie jest zgodny
z UTF-8, a tylko czysty 8-bitowo. Je¶li edytujesz 7-bitow± czê¶æ ASCII
pliku o nieznanym lub mieszanym kodowaniu, to bezpieczniej jest u¿ywaæ
oprogramowania niewspieraj±cego locale.
<p>
Zobacz <url id="&unicode-howto;" name="The Unicode HOWTO">.

<sect1 id="fb-utf-8">Przyk³ad UTF-8 w terminalu framebuffer
<p>
Wsparcie UTF-8 na terminalu FB jest zapewnione przez <package>bterm</package>
u¿ywany w <package>debian-installer</package>.

<sect1 id="beyond-locale">Poza locales
<p>
Kiedy po raz pierwszy starasz siê skonfigurowaæ <strong>narodowe
¶rodowisko jêzykowe</strong> zastanów siê nad u¿yciem <prgn>tasksel</prgn>
lub <prgn>aptitude</prgn>, aby dowiedzieæ siê jakie pakiety s±
instalowane, wybieraj±c odpowiadaj±ce im funkcje lokalizacyjne.
Wybór pakietów jest przydatny nawet w systemie wielojêzycznym. Je¶li
napotkasz konflikty podczas instalacji z Twoim ostro¿nie skonfigurowanym
systemem, unikaj instalowania pakietu powoduj±cego konflikt. Mo¿liwe, ¿e
bêdziesz musia³ u¿yæ <prgn>update-alternative</prgn> aby przywróciæ
oryginalny stan dla niektórych poleceñ, gdy¿ instalowane mog³y mieæ
wy¿szy priorytet od istniej±cych.
<p>
Wa¿ne nowe programy u¿ywaj± glibc 2.2 i przewa¿nie s±
umiêdzynarodowione. Wiêc specjalnie zlokalizowane wersje, jak
<prgn>jvim</prgn> dla VIM, mog± nie byæ potrzebne, gdy¿ wymagana
funkcjonalno¶æ jest oferowana przez wersjê 6.0 <prgn>vima</prgn> w X-ach.
Chocia¿ z tym ró¿nie bywa. Np. <prgn>jvim</prgn> posiada wersjê
skompilowan± z bezpo¶rednim wsparciem dla japoñskiej metody wej¶ciowej
(<prgn>canna</prgn>) nawet w terminalu tekstowym i lepiej rozwi±zuje
niektóre problemy specyficzne dla japoñskiego, wiêc wci±¿ mo¿esz na 
niego reflektowaæ :-)
<p>
Programy mog± potrzebowaæ konfiguracji wykraczaj±cej poza
<tt>locale</tt> aby zapewniæ komfortowe ¶rodowisko pracy. Pakiet
<package>language-env</package> i jego polecenie
<prgn>set-language-env</prgn> w istotny sposób u³atwiaj± ten proces.
<p>
Zobacz tak¿e dokument o internacjonalizacji, <url id="&intro-i18n;" 
name="Introduction to i18n">. Przeznaczony jest g³ównie dla programistów,
ale przydatny mo¿e byæ równie¿ dla administratorów.
</sect1>

</sect>
</chapt>

