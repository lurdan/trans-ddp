<!-- CVS revision of this document "$Revision: 1.6 $"  -->
<!-- CVS revision of original english document "1.119"  -->

<chapt id="tune"> Dostrajanie systemu &debian;
<p>
Ten rozdzia³ opisuje tylko podstawy konfiguracji systemu, z u¿yciem narzêdzi
tekstowych. Warunkiem wstêpnym zrozumienia tego rozdzia³u jest przeczytanie
<ref id="install">.  
<p>
Maj±c na uwadze bezpieczeñstwo, wysoce wskazane jest przeczytanie
<url id="&securing-debian-howto;" name="Securing Debian Manual">,
który mo¿e byæ tak¿e znaleziony w pakiecie
<package>&p-securing-debian-howto;</package>.

<sect id="init-hints">Wskazówki dotycz±ce inicjalizacji systemu.
<p>
Przeczytaj <ref id="init"> aby uzyskaæ podstawowe informacje o skryptach
startowych systemu &debian;.

<sect1 id="init-defaults">Dostosowywanie skryptów startowych do w³asnych
potrzeb.
<p>
&debian; wykorzystuje skrypty startowe System V. Chocia¿ wszystkie
skrypty startowe znajduj±ce siê w <file>/etc/init.d/*</file> s± okre¶lane
jako pliki konfiguracyjne i administrator mo¿e je modyfikowaæ, to jednak
zalecanym podej¶ciem jest modyfikacja plików <file>/etc/default/*</file>.
<p>
Na przyk³ad, <file>/etc/init.d/rcS</file> mo¿e byæ u¿yty do zmodyfikowania
ustawieñ dla <prgn>motd</prgn>, <prgn>sulogin</prgn>, itp. podczas startu
systemu.

<sect1 id="syslogd">Logowanie komunikatów systemowych
<p>
Zachowanie programu loguj±cego mo¿e byæ modyfikowane poprzez
<file>/etc/syslog.conf</file>.
Sprawd¼ pakiet <package>colorize</package> je¶li szukasz programu do
kolorowania logów systemowych. 
Zobacz tak¿e <manref name="syslogd" section="8"> oraz
<manref name="syslog.conf" section="5">.
</sect1>

<sect1 id="hdtune">Optymalizacja ustawieñ sprzêtowych
<p>
Istnieje kilka ustawieñ sprzêtowych, których optymalizacjê &debian;
pozostawia w gestii administratora.
<list>
<item><package>hdparm</package>
 <list compact>
<item>Optymalizacja dostêpu dysku twardego. Bardzo skuteczna.
<item>Niebezpieczne. Przeczytaj <manref name="hdparm" section="8"> przed
u¿yciem.
<item><tt>hdparm -tT <var>/dev/hda</var></tt>, aby sprawdziæ szybko¶æ dostêpu
do dysku.
<item><tt>hdparm -q -c3 -d1 -u1 -m16 <var>/dev/hda</var></tt>, aby
przyspieszyæ dzia³anie nowoczesnego dysku IDE. (Mo¿e byæ niebezpieczne.)
</list>

<item><package>setcd</package>
 <list compact>
<item>Optymalizacja dostêpu napêdu p³yt kompaktowych.
<item><tt>setcd -x <var>2</var></tt>, aby zmniejszyæ prêdko¶æ do <var>2</var>x.
<item>Zobacz <manref name="setcd" section="1">.
 </list>

<item><package>setserial</package>
 <list compact>
<item>Zbiór narzêdzi do konfiguracji portu szeregowego.
 </list>

<item><package>scsitools</package>
 <list compact>
<item>Zbiór narzêdzi do konfiguracji urz±dzeñ SCSI.
 </list>

<item><package>memtest86</package>
 <list compact>
<item>Zbiór narzêdzi do testowania pamiêci RAM.
 </list>

<item><package>hwtools</package>
 <list compact>
<item>Zbiór narzêdzi do niskopoziomowej konfiguracji sprzêtu.
  <list compact>
   <item><prgn>irqtune</prgn>: zmienia priorytet IRQ, aby zapewniæ go tym urz±dzeniom,
   które wymagaj± wy¿szego priorytetu i szybkiego obs³u¿enia ( np. porty
   szeregowe, modemy). Mo¿liwe jest nawet trzykrotne zwiêkszenie
   przepustowo¶ci modemu/portu szeregowego.
   <item><prgn>scanport</prgn>: skanuje adresy I/O od 0x100 do 0x3ff w celu znalezienia
   zainstalowanych urz±dzeñ ISA.
   <item><prgn>inb</prgn>: narzêdzie odczytuj±ce porty I/O i wy¶wietlaj±ce otrzymane
   wyniki w formacie binarnym i szesnastkowym.
  </list>

 </list>

<item><package>schedutils</package>
 <list compact>
<item> Narzêdzie do zmiany ustawieñ programu szereguj±cego j±dra Linuksa
(scheduler).
<item>Zawiera <prgn>taskset</prgn>, <prgn>irqset</prgn>, <prgn>lsrt</prgn>, 
 oraz <prgn>rt</prgn>.
<item>W po³±czeniu z <prgn>nice</prgn> i <prgn>renice</prgn> 
 (nie bêd±cymi czê¶ci± tego pakietu), pozwalaj± na pe³n± kontrolê parametrów
 programu szereguj±cego.
 </list>
</list>
<p>
Montowanie systemu plików z opcj± <tt>noatime</tt> jest tak¿e bardzo skutecznym
rozwi±zaniem w przyspieszaniu odczytu plików. Zobacz
<manref name="fstab" section="5"> i <manref name="mount" section="8">.
<p>
Niektóre urz±dzenia mog± byæ konfigurowane bezpo¶rednio przez j±dro Linuksa,
poprzez system plików proc. Zobacz <ref id="proc-sys">.
<p>
W Debianie istnieje wiele narzêdzi przeznaczonych dla konkretnego sprzêtu.
Wiele z nich zwi±zanych jest z laptopami. Oto lista interesuj±cych pakietów
dostêpnych w Debianie:
<list compact>
<item><package>tpconfig</package> - Program do konfiguracji urz±dzeñ typu touchpad
<item><package>apmd</package> - Konfiguracja zaawansowanego zarz±dzania energi±  (APM)
<item><package>acpi</package> - Wy¶wietla informacje o urz±dzeniach z ACPI
<item><package>acpid</package> - Narzêdzie konfiguracji ACPI
<item><package>lphdisk</package> - Przygotowuje partycjê hibernacyjn± dla
Phoenix NoteBIOS
<item><package>sleepd</package> - Usypia laptopa, gdy jest nieu¿ywany
<item><package>noflushd</package> - Pozwala bezczynnym dyskom na wolniejszy obrót
<item><package>big-cursor</package> - Wiêkszy kursor w X-ach
<item><package>acme</package> - Obs³uga &ldquor;multimedialnych przycisków&rdquor; w
laptopie
<item><package>tpctl</package> - Narzêdzie konfiguracji IBM ThinkPad
<item><package>mwavem</package> - Obs³uga modemów Mwave/ACP
<item><package>toshset</package> - Umo¿liwia dostêp do wiêkszo¶ci ustawieñ
sprzêtowych laptopów Toshiba
<item><package>toshutils</package> - Narzêdzia dla laptopów Toshiba
<item><package>sjog</package> - Program do obs³ugi &ldquor;Jog Dial&rdquor; na laptopach
Sony Vaio
<item><package>spicctrl</package> - Program do ustawiania parametrów ekranu LCD
w laptopach Sony Vaio
</list>
ACPI jest nowszym systemem zarz±dzania energi± ni¿ APM.
<p>
Niektóre z wymienionych pakietów wymagaj± specjalnych modu³ów j±dra. W
wiêkszo¶ci wypadków s± one do³±czone do najnowszych ¼róde³ j±dra. Jednak w razie
problemów bêdziesz musia³ zainstalowaæ najnowsz± ³atkê dla j±dra.

<sect>Kontrola dostêpu

<sect1 id="loginctrl">Kontrola dostêpu poprzez PAM oraz login
<p>
PAM (Pluggable Authentication Modules) udostêpnia kontrolê logowania.  
<example>
/etc/pam.d/*             # pliki konfiguracyjne PAM
/etc/pam.d/login         # plik konfiguracyjny PAM dla programu login
/etc/security/*          # ustawienia modu³ów PAM
/etc/securetty           # terminale, na których mo¿e pracowaæ root (login)
/etc/login.defs          # ustawienia programu login (login)
</example>
<p>
Zmieñ zawarto¶æ <file>/etc/pam.d/login</file> tak, jak poni¿ej, je¶li chcesz
aby dostêp do terminala (równie¿ konsoli) nie by³ warunkowany has³em.
U¿ywaj na w³asn± odpowiedzialno¶æ.
<example>
#auth       required   pam_unix.so nullok
auth       required   pam_permit.so
</example>
Podobne sztuczki mog± byæ zastosowane dla <prgn>xdm</prgn>,
<prgn>gdm</prgn>, ... , aby uzyskaæ analogiczn± funkcjonalno¶æ w X-ach.
<p>
Z drugiej strony, je¶li chcesz wymusiæ na u¿ytkownikach politykê wyboru
bezpiecznych hase³, zainstaluj <package>cracklib2</package> i ustaw parametry
w pliku <file>/etc/pam.d/passwd</file> nastêpuj±co:
<example>
password required       pam_cracklib.so retry=3 minlen=6 difok=3
</example>
Mo¿esz tak¿e, podczas aktywacji konta, ustawiæ has³o jednokrotnego u¿ytku, co
zmusi u¿ytkownika do jego zmiany przy pierwszym logowaniu.
Aby uzyskaæ taki efekt, u¿yj polecenia <prgn>passwd</prgn> z opcj±
<tt>-e</tt>. Zobacz <manref name="passwd" section="1">.
<p>
Maksymalna ilo¶æ procesów mo¿e byæ ustalona poprzez 
<tt>ulimit -u 1000</tt> w pow³oce Bash albo poprzez edycjê
<file>/etc/security/limits.conf</file>, elementu PAM. Inne limity, jak np
<tt>core</tt> mog± byæ ustawione w sposób analogiczny. Pocz±tkowa warto¶æ
zmiennej <prgn>PATH</prgn> mo¿e byæ ustawiona w pliku <file>/etc/login.defs</file>
zanim jeszcze zostan± uruchomione skrypty startowe danej pow³oki.
<p>
Dokumentacja dla PAM jest dostêpna w pakiecie
<package>libpam-doc</package>.<em>Linux-PAM System
Administrator's Guide</em> zawiera informacje dotycz±ce konfiguracji PAM,
dostêpnych modu³ów itp. Dokumentacja zawiera tak¿e <em>The Linux-PAM
Application Developers' Guide</em> oraz <em>The Linux-PAM Module Writers'
Guide.</em>
</sect1>

<sect1 id="wheel">&ldquor;Dlaczego GNU <prgn>su</prgn> nie obs³uguje grupy <tt>wheel</tt>&rdquor;
<p>
Jest to s³ynne zdanie w dokumentacji <tt>info su</tt> , napisane przez
Richarda M. Stallmana. Ale nie obawiaj siê, obecne <prgn>su</prgn> w
Debianie u¿ywa PAM, wiêc mo¿na ograniczyæ mo¿liwo¶æ u¿ywania
<prgn>su</prgn> do dowolnej grupy u¿ywaj±c <prgn>pam_wheel.so</prgn> w pliku
<file>/etc/pam.d/su</file>. Poni¿szy przyk³ad ilustruje ustawienie grupy
<tt>adm</tt> analogicznie do <tt>wheel</tt> z systemów BSD oraz umo¿liwia
u¿ywanie <prgn>su</prgn> bez podawania has³a dla cz³onków tej grupy.
<example>
# konfiguracja anty-RMS w /etc/pam.d/su
auth       required   pam_wheel.so group=adm

# Cz³onkowie grupy wheel mog± wywo³ywaæ su bez podawania has³a
auth       sufficient pam_wheel.so trust group=adm
</example>

<sect1>Znaczenie ró¿nych grup
<p>
Oto kilka interesuj±cych grup:
<list compact>
<item><tt>root</tt> grupa jest domy¶lnym odpowiednikiem grupy wheel dla
<prgn>su</prgn>, je¶li <prgn>pam_wheel.so</prgn> jest u¿yte bez podania
argumentu <tt>group=</tt>.
<item><tt>adm</tt> cz³onkowie grupy mog± czytaæ logi systemowe. 
<item><tt>cdrom</tt> grupa mo¿e zostaæ u¿yta, aby nadaæ u¿ytkownikom 
          prawa dostêpu do napêdu CD-ROM.  
<item><tt>floppy</tt> grupa mo¿e zostaæ u¿yta, aby nadaæ u¿ytkownikom
        prawa dostêpu do napêdu dyskietek.
<item><tt>audio</tt> grupa mo¿e zostaæ u¿yta, aby nadaæ u¿ytkownikom 
        prawa dostêpu do urz±dzeñ audio.
<item><tt>src</tt> grupa jest w³a¶cicielem kodu ¼ród³owego umieszczonego w 
        <file>/usr/src</file>. Mo¿e byæ u¿yta, aby nadaæ u¿ytkownikom
          mo¿liwo¶æ zarz±dzania kodem ¼ród³owym systemu.
<item><tt>staff</tt> grupa s³u¿±ca do nauki administracji systemem.
</list>
<p>
Aby uzyskaæ kompletn± listê zobacz czê¶æ FAQ w 
<url id="&securing-debian-howto;" name="Securing Debian Manual">,
który w Woodym mo¿e byæ tak¿e znaleziony w pakiecie
<package>&p-securing-debian-howto;</package>.
Tak¿e nowe <package>&p-base-passwd;</package> (>3.4.6) zawieraj±
wiarygodn± listê: <file>&f-users-and-groups;</file>.

<sect1 id="sudo"><prgn>sudo</prgn> &ndash; bezpieczniejsze ¶rodowisko pracy
<p>
U¿ywam <prgn>sudo</prgn> do ochrony przed w³asn± g³upot±.
Osobi¶cie uwa¿am, ¿e u¿ywanie <prgn>sudo</prgn> jest lepsz± alternatyw± 
ni¿ ci±g³a praca w systemie na koncie u¿ytkownika root.
<p>
Zainstaluj <prgn>sudo</prgn> i skonfiguruj go poprzez edycjê <file>
<url id="&examples;" name="/etc/sudoers"></file>.
Zapoznaj siê tak¿e z mo¿liwo¶ciami <tt>sudo</tt> w pliku 
<file>&dochome;sudo/OPTIONS</file>.
<p>
Przyk³adowa konfiguracja zapewnia cz³onkom grupy staff uprawnienia do
wykonywania dowolnych poleceñ jako root poprzez <prgn>sudo</prgn>, natomiast
cz³onkom grupy src prawo do wykonywania jedynie niektórych poleceñ z takimi
uprawnieniami.
<p>
Zalet± <prgn>sudo</prgn> jest to, ¿e do zalogowania potrzebuje jedynie
podania has³a u¿ytkownika, a dodatkowo monitoruje aktywno¶æ u¿ytkownika. Jest to dobry
sposób, aby daæ pewn± w³adzê m³odym administratorom. Na przyk³ad:
<example>
$ sudo chown -R <var>myself</var>:<var>mygrp</var> .
</example>
<p>
Oczywi¶cie, je¿eli znasz has³o root-a (jak wiêkszo¶æ domowych u¿ytkowników),
dowolne polecenie mo¿e zostaæ wydane jako root z Twojego konta u¿ytkownika:
<example>
$ su -c "shutdown -h now"
Password:
</example>
(Wiem, ¿e powinienem ograniczyæ przywileje <prgn>sudo</prgn> konta admin, ale
poniewa¿ jest to mój domowy serwer, jeszcze siê tym nie przejmowa³em.)
<p>
Inny program umo¿liwiaj±cy zwyk³ym u¿ytkownikom uruchamianie poleceñ z
uprawnieniami root-a mo¿esz znale¼æ w pakiecie <package>super</package>.
</sect1>
    
<sect1 id="tcpd">Kontrola dostêpu do demonów
<p>
Internetowy <em>super-serwer</em>, <prgn>inetd</prgn>, jest uruchamiany
podczas startu systemu z <file>/etc/rc2.d/S20inetd</file> (dla RUNLEVEL=2),
który jest dowi±zaniem symbolicznym do pliku <file>/etc/init.d/inetd</file>.
W skrócie, <prgn>inetd</prgn> umo¿liwia uruchomienie jednego demona, który
w razie potrzeby uruchamia inne, zmniejszaj±c w ten sposób obci±¿enie systemu.
<p>
Gdy <prgn>inetd</prgn> przyjmuje zg³oszenie, sprawdza protokó³ i nazwê
¿±danej us³ugi przeszukuj±c bazê danych w plikach <file>/etc/protocols</file> 
oraz <file>/etc/services</file>. Nastêpnie, wyszukuje odpowiedzialn± za obs³ugê
zg³oszenia us³ugê w <file>/etc/inetd.conf</file> je¶li jest to zwyczajna
us³uga internetowa, natomiast w <file>/etc/rpc.conf</file> je¶li jest to
us³uga Sun-RPC.
<p>
Maj±c na wzglêdzie bezpieczeñstwo, wy³±cz zbêdne us³ugi w pliku
<file>/etc/inetd.conf</file>.
Us³ugi Sun-RPC s± wykorzystywane przez NFS oraz inne programy oparte na RPC.
<p>
Czasami <prgn>inetd</prgn> nie przekazuje kontroli do ¿±danej us³ugi
bezpo¶rednio, lecz uruchamia demona TCP/IP <prgn>tcpd</prgn> przekazuj±c
mu nazwê us³ugi jako argument. W tym wypadku <prgn>tcpd</prgn> uruchomi
¿±dan± us³ugê dopiero po zg³oszeniu tego do logów systemowych oraz
zanalizowaniu plików <file>/etc/host.deny</file> i
<file>/etc/host.allow</file>.
<p>
Je¶li masz problemy ze zdalnym dostêpem w aktualnej dystrybucji &debian;,
skomentuj zapis &ldquor;ALL: PARANOID&rdquor; w <file>/etc/host.deny</file>, je¶li taki zapis
siê tam znajduje.
<p>
Aby uzyskaæ bardziej szczegó³owe informacje zobacz
<manref name="inetd" section="8">,  
<manref name="inetd.conf" section="5">, 
<manref name="protocols" section="5">,  
<manref name="services" section="5">,  
<manref name="tcpd" section="8">,  
<manref name="hosts_access" section="5">, i
<manref name="hosts_options" section="5">. 
<p>
Aby uzyskaæ informacje o Sun-RPC zobacz
<manref name="rpcinfo" section="8"> , 
<manref name="portmap" section="8">, i
<file>&f-portmap;</file>.

<sect1 id="ldap">Lightweight Directory Access Protocol
<p>
Zasoby:
<list compact>
<item><url id="&openldaphome;" name="OpenLDAP">
<item>OpenLDAP Admin Guide w pakiecie <package>openldap-guide</package>
<item>LDP: <url id="&ldap-linux-howto;" name="LDAP Linux HOWTO">
<item>LDP: <url id="&ldap-implementation-howto;" name="LDAP Implementation HOWTO">
<item><url id="&ldap-use1;" name="OpenLDAP, extensive use reports">
<item><url id="&ldap-use2;" name="Open LDAP with Courier IMAP and Postfix">
</list>
</sect>


<sect id="cdrw">Nagrywarki CD
<p>
Nagrywarki CD z interfejsem ATAPI/IDE sta³y siê w ostatnim czasie bardzo
popularne. S± mi³ym rozwi±zaniem archiwizowania danych i wykonywania kopii
zapasowych w sytuacji, gdy wystarcza &lt; 640MB pojemno¶ci no¶nika. Aby
uzyskaæ najbardziej wiarygodne informacje, zobacz LDP <url id="&cd-writing-howto;
" name="CD-Writing-HOWTO">.

<sect1>Wstêp
<p>
Po pierwsze, ka¿de zak³ócenie danych wys³anych do nagrywarki mo¿e spowodowaæ
nieodwracalne uszkodzenie p³yty CD. Zaopatrz siê w nagrywarkê z jak
najwiêkszym rozmiarem bufora. Je¶li pieni±dze nie s± problemem, zamiast
wersji ATAPI/IDE zdecyduj siê na wersjê SCSI. Je¶li mo¿esz wybieraæ pomiêdzy
IDE, zdecyduj siê na wersjê pod³±czan± do slotu PCI (na p³ycie g³ównej)
zamiast do slotu ISA (jak karta SB16 itp.).
<p>
W j±drach Linuksa 2.2 i 2.4 nagrywarka IDE musi byæ uzupe³niona sterownikami
IDE-SCSI, zamiast zwyk³ego sterownika IDE dla napêdów CD.
Równie¿ ogólny sterownik SCSI ( SCSI generic driver) musi zostaæ
uaktywniony. S± na to dwa sposoby, zak³adaj±c ¿e j±dra rozpowszechniane by³y z
aktualnymi dystrybucjami (jak te z marca 2001).
</sect1>

<sect1>Sposób 1: modu³y j±dra + <prgn>lilo</prgn>
<p>
Dodaj poni¿sze linie do pliku <file>/etc/lilo.conf</file> je¶li u¿ywasz
standardowego j±dra rozpowszechnianego z systemem Debian. Je¶li u¿ytych jest
kilka opcji, pozostaw miêdzy nimi znak spacji.
<example>
append="hd<var>x</var>=ide-scsi ignore=hd<var>x</var>"
</example>
W tym przyk³adzie nagrywarka jest dostêpna poprzez sterownik ide-scsi, a
oznaczony parametrem <tt>hd<var>x</var></tt>, gdzie 
<var>x</var> oznacza jedno z poni¿szych:
<example>
hda          master na pierwszym porcie IDE
hdb          slave na pierwszym porcie IDE
hdc          master na drugim porcie IDE
hdd          slave na drugim porcie IDE
hde ... hdh  napêd na zewnêtrznym porcie IDE lub ATA66/100 IDE
</example>
Wpisz nastêpuj±ce polecenia jako root po zakoñczeniu konfiguracji.
<example>
# lilo
# shutdown -r now
</example>
</sect1>


<sect1>Sposób 2: ponowna kompilacja j±dra
<p>
Debian u¿ywa <prgn>make-kpkg</prgn> do tworzenia j±dra. U¿yj ró¿nych
<tt>--append_to_version</tt> z <prgn>make-kpkg</prgn> aby zbudowaæ 
wiele obrazów j±dra. Zobacz <ref id="kernel">.
<p>
U¿yj nastêpuj±cych ustawieñ podczas <tt>make menuconfig</tt>:
<list>
<item>bzImage
<item>Wy³±cz sterownik IDE CD, (niekoniecznie, ale to prostsze rozwi±zanie)
<item>Do³±cz do j±dra obs³ugê ide-scsi i sg lub ustaw je jako modu³y
</list>
</sect1>

<sect1>Czynno¶ci po konfiguracji
<p>
Wsparcie j±dra dla nagrywarki mo¿e byæ uaktywnione podczas startu systemu
poprzez nastêpuj±ce polecenia:
<example>
# echo ide-scsi &gt;&gt;/etc/modules
# echo sg       &gt;&gt;/etc/modules
# cd /dev; ln -sf scd0 cdrom
</example>
Rêczna inicjalizacja mo¿e byæ wykonana przez:
<example>
# modprobe ide-scsi
# modprobe sg
</example>
Po restarcie mo¿esz sprawdziæ swoj± konfiguracjê:
<example>
$ dmesg|less
# apt-get install cdrecord
# cdrecord -scanbus
</example>
<p>
[Per Warren Dodge] Czasami mo¿e wyst±piæ konflikt miêdzy <tt>ide-scsi</tt> i
<tt>ide-cd</tt>, je¶li masz zarówno CD-ROM jak i napêd CD-R/RW. Mo¿esz
wtedy spróbowaæ dodaæ poni¿sz± liniê do swojego <file>/etc/modutils/aliases</file>,
uruchomiæ <prgn>update-modules</prgn> i zrestartowaæ system.
<example>
pre-install      ide-scsi      modprobe ide-cd
</example>
Polecenie to nakazuje za³adowanie sterownika IDE przed <tt>ide-scsi</tt>. Sterownik
IDE <tt>ide-cd</tt> przejmuje kontrolê nad urz±dzeniem ATAPI CD-ROM &mdash;
wszystkim, co nie zosta³o mu nakazane do <strong>zignorowania</strong>. W ten
sposób <tt>ide-scsi</tt> przejmuje kontrolê tylko nad zignorowanymi
urz±dzeniami.
</sect1>

<sect1>Obrazy startowe p³yt CD
<p>
Aby nagraæ katalog <file>target-directory</file> jako <file>cd-image.raw</file>
(startowy, Joliet z TRANS.TBL; je¶li p³yta nie ma byæ bootowalna, usuñ opcje
<tt>-b</tt> i <tt>-c</tt>), w³ó¿ dyskietkê startow± do stacji dyskietek i:
<example>
# dd if=<var>/dev/fd0</var> <var>target-directory/boot.img</var> 
# mkisofs -r -V <var>volume_id</var> -b <var>boot.img</var> -c <var>bootcatalog</var> 
-J -T \ -o <var>cd-image.raw</var> <var>target_directory/</var>
</example>
<p>
¦miesznym kruczkiem mo¿e byæ zrobienie startowego CD-ROM z systemem DOS. 
Je¶li obraz zwyczajnej dyskietki startowej jest we wspomnianym pliku 
<file><var>boot.img</var></file>,
przy restarcie p³yta zadzia³a jak gdyby dosowa dyskietka startowa by³a w
napêdzie dyskietek. Mo¿e byæ to jeszcze ciekawsze, je¶li wykorzystasz
freeDOS.
<p>
Zawarto¶æ obrazu tej p³yty mo¿e byæ sprawdzona poprzez zamontowanie jej jako
urz±dzenie loop.
<example>
# mount -t iso9660 -o ro,loop <var>cd-image.raw</var> /cdrom
# cd /cdrom
# mc
# umount /cdrom
</example>
</sect1>

<sect1>Wypalanie p³yty (R, RW):
<p>
Najpierw porównajmy (zak³adaj±c podwójn± prêdko¶æ napêdu) z:
<example>
# nice --10 cdrecord -dummy speed=2 dev=0,0 <var>disk.img</var>
</example>
Nastêpnie, je¶li wszystko posz³o OK, wypalimy p³ytê CD-R:
<example>
# nice --10 cdrecord -v -eject speed=2 dev=0,0 <var>disk.img</var>
</example>
Albo CD-RW:
<example>
# nice --10 cdrecord -v -eject blank=fast speed=2 dev=0,0 <var>disk.img</var>
</example>
Niektóre napêdy CD-RW dzia³aj± lepiej z:
<example>
# nice --10 cdrecord -v blank=all speed=2 dev=0,0 <var>disk.img</var>
</example>
i nastêpnie:
<example>
# nice --10 cdrecord -v -eject speed=2 dev=0,0 <var>disk.img</var>
</example>
Te dwa kroki s± niezbêdne, aby zapobiec pokrywaniu siê faz zerowania p³yty i
wypalania. Warto¶æ argumentów dla <prgn>nice</prgn> mo¿e tak¿e wymagaæ
pewnej regulacji.
</sect1>

<sect1>Wykonanie obrazu z posiadanej p³yty CD
<p>
Niektóre p³yty CD-R i komercyjne CD zawieraj± specjalne, b³êdne sektory,
które uniemo¿liwiaj± ich kopiowanie przez <prgn>dd</prgn> (p³yta Windows 98
jest jedn± z nich). Pakiet <package>cdrecord</package> udostêpnia polecenie
<prgn>readcd</prgn>. U¿yj go do skopiowania zawarto¶ci p³yty do pliku. Je¶li
to plik z danymi, zamontuj go i wykonaj <prgn>df</prgn> aby uzyskaæ jego
rzeczywisty rozmiar. Podziel liczbê bloków przez 2 ( 1 blok = 1024 bajty)
aby uzyskaæ ilo¶æ sektorów na CD ( 1 sektor = 2048 bajty). Uruchom
<prgn>readcd</prgn> z niezbêdnymi opcjami i u¿yj obrazu p³yty do wypalenia
nastêpnej.
<example>
# readcd dev=<var>target</var>,<var>lun</var>,<var>scsibusno</var> # select function 11
</example> 
Zwykle mo¿na ustawiæ wszystkie trzy parametry jako 0. Ilo¶æ sektorów podana
przez <prgn>readcd</prgn> jest zazwyczaj zbyt du¿a, u¿yj podanej powy¿ej
metody aby uzyskaæ dok³adniejsze wyniki.
<p>
Powinno zostaæ zauwa¿one, ¿e u¿ycie <prgn>dd</prgn> z p³ytami CD-ROM 
stwarza pewne problemy. Pierwsze uruchomienie <prgn>dd</prgn> spowoduje
komunikat b³êdu i mo¿e wytworzyæ krótszy obraz dysku, utraciwszy koñcow±
jego czê¶æ. Drugie uruchomienie <prgn>dd</prgn> mo¿e utworzyæ wiêkszy obraz
p³yty ze &ldquor;¶mieciami&rdquor; do³±czonymi na koñcu, je¶li rozmiar danych nie zosta³
podany. Tylko drugie uruchomienie <prgn>dd</prgn> wraz z podaniem poprawnego
rozmiaru danych, bez wyci±gania CD, po otrzymaniu komunikatu b³êdu wydaje siê
dzia³aæ poprawnie. Je¶li na przyk³ad rozmiar obrazu p³yty wy¶wietlony przez
<prgn>df</prgn> wynosi <tt>46301184</tt> bloki, u¿yj dwukrotnie nastêpuj±cego
polecenia aby otrzymaæ prawid³owy obraz (jest to informacja, uzyskana
przeze mnie empirycznie):
<example>
# dd if=/dev/cdrom of=cd.img bs=2048 count=$((46301184/2))
</example>
</sect1>

<sect1>Obrazy Debian CD
<p>
Aby otrzymaæ najnowsze informacje na temat p³yt z Debianem, odwied¼
<url id="&debian-cd;" name="stronê Debian CD">. 
<p>
Je¶li posiadasz szybkie po³±czenie internetowe, pomy¶l o instalacji poprzez
sieæ, u¿ywaj±c:
<list compact>
<item>kilku <url id="&debian-floppyinst;" name="obrazów dyskietek">.
<item><url id="&debian-netinst;" name="ma³ego startowego obrazu CD">.
</list>
<p>
Je¶li nie posiadasz szybkiego po³±czenia z Internetem, pomy¶l o zakupie p³yt
CD od <url id="&debian-venders;" name="dystrybutora CD">.
<p>
Proszê, nie zajmuj niepotrzebnie ³±cza ¶ci±gaj±c obraz standardowego CD,
chyba ¿e jeste¶ testerem p³yt (nawet now± metod± jigdo).
<p>
Jedn± z niewielu, godn± uwagi p³yt± jest <url id="&knoppix;" name="KNOPPIX - 
Live Linux Filesystem On CD">.
Z t± p³yt± uruchomisz w pe³ni dzia³aj±cego Debiana bez potrzeby instalowania
go na twardym dysku.

<!-- old document section
$ export CVSROOT=anonymous@cvs.debian.org:/cvs/debian-boot
$ cvs co debian-cd
</example>
Following is a summary of CD image creation. 
<example>
# apt-get install debian-cd
# cd /etc/debian-cd
# vim CONF.sh
$ . CONF.sh
$ make distclean
$ make status
$ make list COMPLETE=1 SIZELIMIT1=555000000 SRCSIZELIMIT=665000000
$ make official_images
 or if you want only binary images :
$ make bin-official_images
-->
</sect1>

<sect1>Wykonywanie kopii systemu na p³ytach CD-R
<p>
Aby skopiowaæ kluczowe pliki konfiguracyjne i dane na p³yty CD-R, u¿yj
przyk³adowego skryptu backup <file><url id="examples/"
name="backup"></file>.
Zobacz tak¿e <ref id="archiving"> i <ref id="diff-backup">.
</sect1>

<sect1>Kopiowanie CD z muzyk±
<p>
Nie testowane przeze mnie:
<example>
# apt-get install cdrecord cdparanoia
# cdparanoia -s -B
# cdrecord dev=0,0,0 speed=2 -v -dao -eject defpregap=1 -audio *.wav
</example>
albo,
<example>
# apt-get install cdrdao #disk at once
# cdrdao read-cd --device /dev/cdrom --paranoia-mode 3 my_cd # read cd
# cdrdao write --device /dev/cdrom --speed 8 my_cd    # wypal nowy CD
</example>
<prgn>cdrdao</prgn> wykonuje prawdziw± kopiê (¿adnych przerw, itp...)
</sect1>
</sect>

<sect id="x">X Window System
<p>
¦rodowisko X jest zapewnione dziêki <url id="&xfree86home;" name="Xfree86">.
Istniej± dwie g³ówne wersje serwera X dostêpne dla Debiana:
Xfree86 Version 3.3 (XF3) i XFree86 Version serii 4.x (XF4), obie
oparte o specyfikacjê X11R6 wg. <url id="&xorghome;" name="X.Org">.
<p>
Podstawowe informacje nt. X mo¿esz uzyskaæ z <manref name="X" section="7">,
LDP <url id="&xwindowuser-howto;" name="XWindow-User-HOWTO">, oraz 
<url id="&remote-xapps-howto;" name="Remote X Apps mini-HOWTO">.  
Informacje specyficzne dla Debiana, przeznaczone dla jego u¿ytkowników, 
przeczytaj w <file>&f-x-deb-faq;</file> dostarczanym w pakiecie 
<package>xfree86-common</package>.
Zawiera interesuj±ce uwagi na temat przypisywania ró¿nych funkcji do
klawiszy autorstwa Brandena Robinsona.
<p>
<taglist>
<tag><ref id="xsrvr">
<item>program na lokalnym ho¶cie, zajmuj±cy siê wy¶wietlaniem X-ów na
monitorze u¿ytkownika, jest tak¿e odpowiedzialny za obs³ugê poleceñ z klawiatury
i myszy.
<tag><ref id="xclnt">
<item>program na (zdalnym lub lokalnym) ho¶cie, który uruchamia
oprogramowanie zgodne z X.
</taglist>
Zauwa¿, ¿e jest to odwrócenie rozumienia s³owa serwer i klient przyjêtego w
innych kontekstach.
<p>
Istnieje kilka dróg, aby &ldquor;X serwer&rdquor; (strona wy¶wietlaj±ca) przyj±³ zdalne
po³±czenie od &ldquor;klienta X&rdquor; (strona oprogramowania).

<list>
<item>Wykorzystanie <prgn>xhost</prgn> 
<list compact>
<item>mechanizm listy hostów (bardzo niebezpieczny).
<item>niezaszyfrowany protokó³ (nara¿ony na pods³uchiwanie).
<item>Nie u¿ywaj go, je¶li mo¿esz.
<item>Zobacz <ref id="xhost"> i <manref name="xhost" section="1x">.
</list>
<item>Wykorzystanie <strong><prgn>xauth</prgn></strong>
<list compact>
<item>mechanizm cookies (niebezpieczny, ale lepszy ni¿ <prgn>xhost</prgn>).
<item>niezaszyfrowany protokó³ (nara¿ony na pods³uchiwanie).
<item>u¿ywaj go jedynie dla po³±czeñ lokalnych, gdy¿ nie obci±¿a procesora
tak jak <prgn>ssh -X</prgn>.
<item>Zobacz <ref id="ss-xsu"> i <manref name="xauth" section="1x">.
</list>
<item>Wykorzystanie <prgn>xdm</prgn>, <prgn>wdm</prgn>, <prgn>gdm</prgn>, 
 <prgn>kdm</prgn>, ...
<list compact>
<item>mechanizm cookies (równie niebezpieczny jak <prgn>xauth</prgn>).
<item>Zobacz <manref name="xdm" section="1x"> i
 <manref name="Xsecurity" section="7">, aby zdobyæ podstawowe informacje nt.
kontroli dostêpu do X.
<item>Zobacz <manref name="wdm" section="1x">, <manref name="gdm" section="8">, 
i <manref name="kdm.options" section="5"> dla dalszych informacji, je¶li te
programy s± zainstalowane.
<item>Zobacz <ref id="sys-v"> aby zorientowaæ siê jak wy³±czyæ
<prgn>xdm</prgn>, by logowaæ siê w trybie tekstowym bez usuwania pakietu
<prgn>xdm</prgn>.
</list>
<item>Wykorzystanie <strong><prgn>ssh -X</prgn></strong>
<list compact>
<item>mechanizm pod³±czania portów poprzez secure shell (<strong>bezpieczne</strong>).
<item>zaszyfrowany protokó³ (strata zasobów, gdy u¿ywane lokalnie).
<item>u¿ywaj w po³±czeniach zdalnych.
<item>Zobacz <ref id="xssh">.
</list>
</list>
Wszystkie metody po³±czeñ zdalnych, za wyj±tkiem wykorzystywania
<prgn>ssh</prgn>, wymagaj± w³±czonych po³±czeñ TCP/IP w X serwerze. Zobacz
<ref id="xtcp">.

<sect1 id="x-system">Pakiety zwi±zane z X system
<p>
Istnieje kilka (meta)pakietów, które zapewniaj± prost± instalacjê X Window
System w Woodym. 
<taglist>
<tag><package>x-window-system-core</package>
<item>
Ten metapakiet dostarcza kluczowe sk³adniki dla pojedynczej stacji roboczej,
na której uruchomiony ma byæ X Window System. Dostarcza biblioteki, X serwer
(<package>xserver-xfree86</package>), zestaw czcionek, jak równie¿ 
kilka podstawowych klientów X i programów u¿ytkowych.

<tag><package>x-window-system</package> 
<item>
Ten metapakiet dostarcza praktycznie wszystkich sk³adników X Window System
rozwijanych przez XFree86 Project, jak równie¿ zbiór popularnych kiedy¶
dodatkowych programów. (Zauwa¿, ¿e ten pakiet zale¿y od 
<package>x-window-system-core</package>, <package>twm</package> oraz 
<package>xdm</package>, tak wiêc w przypadku jego instalacji
<package>x-window-system-core</package> nie musi zostaæ oddzielnie
wyznaczony do zainstalowania)

<tag><package>xserver-common-v3</package> 
<item>
Pliki i programy u¿ytkowe wspólne dla serwerów X XFree86 3.x (XF3)

<tag><package>xserver-*</package> 
<item>
Dodano pakiety serwera XF3, aby obs³u¿yæ sprzêt z ró¿nych powodów 
nie obs³ugiwany przez nowy serwer XF4. Niektóre stare karty ATI mach64 nie s±
obs³ugiwane przez XF4, za¶ inne karty graficzne zawieszaj± siê w wersji XF4
dostêpnej wraz z Woodym, itp. (Aby obejrzeæ dostêpne pakiety wykonaj
<tt>apt-cache search xserver-|less</tt>.
Wszystkie z tych serwerów XF3 zale¿± od pakietu <package>xserver-common-v3</package>.)
</taglist>
<p>
W wiêkszo¶ci przypadków <package>x-window-system</package> jest odpowiednim
pakietem do zainstalowania.
(Je¶li chcesz logowaæ siê w trybie tekstowym, upewnij siê ¿e wy³±czy³e¶
us³ugê <package>xdm</package> tak, jak opisano to w czê¶ci <ref id="no-x-start">.)

<sect1 id="hdetect-x">Pakiety u³atwiaj±ce wykrywanie sprzêtu dla X Window 
<p>
Aby wykryæ swój sprzêt podczas konfiguracji X-ów, zainstaluj nastêpuj±ce
pakiety przed instalacj± X Window System:
<list>
<item><package>discover</package> &ndash; narzêdzie identyfikacji sprzêtu.
<item><package>mdetect</package> &ndash; autodetekcja myszy.
<item><package>read-edid</package> &ndash; gromadzenie informacji sprzêtowej
o monitorach VESA PnP.
</list>

<sect1 id="xsrvr">X serwer
<p>
Zobacz <manref name="XFree86" section="1x"> aby uzyskaæ informacjê o X
serwerze.
<p>
Uruchom X serwer z lokalnej konsoli:
<example>
$ startx -- :&lt;display&gt; <var>vtXX</var>
e.g.:
$ startx -- :1 vt8 -bpp 16
... uruchom na vt8 pod³±czonym do localhost:1 w trybie 16 bpp
</example>
Argumenty podane po <tt>--</tt> s± przekazywane X serwerowi.
<p>
Je¶li u¿ywasz skryptu <file>~/.xserverrc</file> do konfigurowania uruchomienia X,
pamiêtaj aby wykonaæ <tt>exec</tt> na prawid³owym X serwerze.
W przeciwnym wypadku mo¿e on wolno siê uruchamiaæ i zamykaæ. Na przyk³ad:
<example>
#!/bin/sh
exec /usr/bin/X11/X -dpi 100 -nolisten tcp
</example>

<sect2 id="config-x4">Konfiguracja serwera XF4
<p>
Aby z(re)konfigurowaæ serwer XF4,
<example>
# dpkg-reconfigure --priority=low xserver-common
# dpkg-reconfigure --priority=low xserver-xfree86
</example>
co utworzy plik <file>/etc/X11/XF86Config-4</file>, po czym skonfiguruj
X-y u¿ywaj±c skryptu <prgn>dexconf</prgn>.

<sect2 id="config-x3">Konfiguracja serwera XF3
<p>
Aby z(re)konfigurowaæ serwer XF3,
<example>
# dpkg-reconfigure --priority=low xserver-common-v3
# dpkg-reconfigure --priority=low xserver-mach64
</example>
co utworzy plik <file>/etc/X11/XF86Config</file>, po czym skonfiguruj
X-y u¿ywaj±c skryptu <prgn>xf86config-v3</prgn>.

<sect2 id="manual-config-x">Rêczna konfiguracja X serwera.
<p>
Modyfikuj±c ustawienia w zale¿no¶ci od swoich potrzeb <strong> nie zmieniaj
zawarto¶ci pliku konfiguracyjnego pomiêdzy liniami</strong> (XF4):
<!-- FIXME for XF3 -->
<example>
### BEGIN DEBCONF SECTION
[ciach]
### END DEBCONF SECTION
</example>
<p>
Zamiast tego <strong>dodaj w³asne opcje przed tym tekstem</strong>. Na
przyk³ad, aby u¿yæ innej karty graficznej dodaj podobne linie na
<em>pocz±tku</em> pliku:
<example>
Section "Device"
  Identifier        "Moje Urzadzenie"
  Driver            "ati"
  Option            "NoAccel"
EndSection

Section "Screen"
  Identifier  "Mój Ekran"
  Device      "Moje Urz±dzenie"
  Monitor     "Generic Monitor"
  DefaultDepth 24
  Subsection "Display"
    Depth       8
    Modes       "1280x960" "1152x864" "1024x768" "800x600" "640x480"
  EndSubsection
  Subsection "Display"
    Depth       16
    Modes       "1280x960" "1152x864" "1024x768" "800x600" "640x480"
  EndSubsection
  Subsection "Display"
    Depth       24
    Modes       "1280x960" "1152x864" "1024x768" "800x600" "640x480"
  EndSubsection
EndSection

Section "ServerLayout"
    Identifier        "Custom"
    Screen            "Mój Ekran"
    InputDevice       "Generic Keyboard" "CoreKeyboard"
    InputDevice       "Configured Mouse" "CorePointer"
EndSection
</example>

<sect1 id="xclnt">Klient X
<p>
Wiêkszo¶æ klientów X mo¿e byæ uruchomiona poleceniem podobnym do:
<example>
client $ xterm -geometry 80x24+30+200 -fn 6x10 -display <var>hostname</var>:0 &amp;
</example>
Dodatkowe argumenty oznaczaj±:
<list>
<item><tt>-geometry <var>SZER</var>x<var>WYS</var>+<var>XOFF</var>+<var>YOFF</var></tt>: 
pocz±tkowy rozmiar i pozycjê okna programu.

<item><tt>-fn <var>NAZWAFONTU</var></tt>: czcionkê s³u¿±c± do wy¶wietlania
tekstu.
 <tt><var>NAZWAFONTU</var></tt> mo¿e przyjmowaæ warto¶æ:
<list compact>
<item>a14: Normalny rozmiar
<item>a24: Du¿y rozmiar czcionki
<item>... (sprawd¼ dostêpne czcionki za pomoc± <tt>xlsfont</tt>.)
</list>
<item><tt>-display <var>displayname</var></tt>: nazwa X serwera, który ma zostaæ u¿yty. 
 <tt><var>displayname</var></tt> mo¿e przyjmowaæ warto¶æ:
<list compact>
<item><tt><var>hostname</var>:<var>D.S</var></tt> oznacza ekran
<tt><var>S</var></tt> na monitorze  <tt><var>D</var></tt> komputera
<tt><var>hostname</var></tt>; X serwer dla tego
monitora nas³uchuje na porcie TCP 6000+D

<item><tt><var>host</var>/unix:<var>D.S</var></tt> oznacza ekran
<tt><var>S</var></tt> na monitorze <var>D</var> hosta <tt><var>host</var></tt>;
X-serwer dla tego monitora nas³uchuje na porcie typu UNIX.
<file>/tmp/.X11-unix/XD</file> (wiêc jest dostêpny tylko z <tt><var>host</var></tt>).

<item><tt><var>:D.S</var></tt> jest równowa¿ne do
<tt><var>host</var>/unix:<var>D.S</var></tt>, gdzie <tt><var>host</var></tt>
to nazwa lokalnego hosta.
</list>
</list>
<p>
Domy¶lna warto¶æ zmiennej <tt><var>displayname</var></tt> dla klientów X 
(oprogramowanie), mo¿e byæ ustawiona poprzez zmienn± ¶rodowiskow± DISPLAY.
Mo¿na to osi±gn±æ przez np. uruchomienie nastêpuj±cych skryptów przed
klientem X:
<example>
$ export DISPLAY=:0
   # Domy¶lne ustawienie, lokalna maszyna, pierwszy screen
$ export DISPLAY=<var>hostname.fulldomain.name</var>:0.2
$ export DISPLAY=localhost:0
</example>
Start Xów mo¿e byæ dostosowany do w³asnych potrzeb za pomoc±
<file>~/.xinitrc</file>. Np:
<example>
xrdb -load $HOME/.Xresources
xsetroot -solid gray &amp;
xclock -g 50x50-0+0 -bw 0 &amp;
xload -g 50x50-50+0 -bw 0 &amp;
xterm -g 80x24+0+0 &amp;
xterm -g 80x24+0-0 &amp;
twm
</example>
Tak jak opisano to w <ref id="custom-x">, zastêpuje to wszystko, co dzieje
siê podczas uruchomienia <prgn>Xsession</prgn> przez <prgn>startx</prgn>. 
U¿ywaj <file>~/.xsession</file>, a z powy¿szego sposobu korzystaj jedynie w
ostateczno¶ci.
</sect1>

<sect1 id="x-session">X session
<p>
Sesja X (X-serwer + klient X) mo¿e byæ rozpoczêta poprzez:
<list compact>
<item><prgn>startx</prgn>: skrypt obudowuj±cy <prgn>xinit</prgn>, s³u¿±cy do
       uruchomienia sesji z terminala tekstowego. Je¶li plik
       <file>~/.xinitrc</file> nie istnieje, <file>/etc/X11/Xsession</file>
       jest wywo³ywany przez <file>/etc/X11/xinit/xinitrc</file>.
<item><prgn>xdm</prgn>, <prgn>gdm</prgn>, <prgn>kdm</prgn>, lub
      <prgn>wdm</prgn>: demon uruchamiaj±cy X-serwer i klientów,
       umo¿liwiaj±cy logowanie w GUI.
      <file>/etc/X11/Xsession</file> jest uruchamiany bezpo¶rednio.
</list>
Tryb tekstowy mo¿e byæ udostêpniony, jak to opisano w <ref id="no-x-start">.

<sect2 id="custom-x">Personalizowanie sesji X.
<p>
Domy¶lny skrypt startowy <file>/etc/X11/Xsession</file> jest kombinacj±
<file>/etc/X11/Xsession.d/50xfree86-common_determine-startup</file> oraz
<file>/etc/X11/Xsession.d/99xfree86-common_start</file>.
<p>
Na przebieg wykonania <file>/etc/X11/Xsession</file> wp³ywaj± ustawienia z
<file>/etc/X11/Xsession.options</file>. Jego g³ównym zadaniem jest
uruchomienie za pomoc± <prgn>exec</prgn> pierwszego istniej±cego programu
znajduj±cego siê na nastêpuj±cej li¶cie:
<enumlist compact>
<item><file>~/.xsession</file> lub <file>~/.Xsession</file>, je¶li istnieje.
<item><file>/usr/bin/x-session-manager</file>, je¶li istnieje.
<item><file>/usr/bin/x-window-manager</file>, je¶li istnieje.
<item><file>/usr/bin/x-terminal-emulator</file>, je¶li istnieje.
</enumlist>
<p>
Dok³adne znaczenie tych poleceñ jest uzale¿nione od alternatywnych ustawieñ
systemu &debian;, opisanych w <ref id="alternatives">.
Na przyk³ad:
<example>
# update-alternatives --config x-session-manager
... lub
# update-alternatives --config x-window-manager
</example>
Aby wybraæ domy¶lny mened¿er okien X, jednocze¶nie zachowuj±c GNOME i KDE,
zamieñ plik <file>/etc/X11/Xsession.d/50xfree86-common_determine-startup</file>
z plikiem dostarczonym w drugim raporcie o b³êdzie na 
<url id="&bug-xfree;"> (mam nadziejê, ¿e zostanie to szybko naprawione)
i wyedytuj <file>/etc/X11/Xsession.options</file> jak nastêpuje:
<example>
# /etc/X11/Xsession.options
#
# opcje konfiguracyjne dla /etc/X11/Xsession
# Wyja¶nienie dostêpnych opcji znajdziesz w Xsession.options(5)
# Default enabled
allow-failsafe
allow-user-resources
allow-user-xsession
use-ssh-agent
# Domy¶lnie wy³±czone (w³±cz odkomentowuj±c)
do-not-use-x-session-manager
#do-not-use-x-window-manager
</example>
<p>
Bez wspomnianych powy¿ej zmian w systemie pakiety
<package>gnome-session</package> i <package>kdebase</package> zapewniaj±
funkcjonalno¶æ mened¿era sesji. Usuniêcie ich, umo¿liwia ustawienie jako 
domy¶lnego innego mened¿era okien. 
<p>
W systemie, gdzie <file>/etc/X11/Xsession.options</file> zawiera liniê
<tt>allow-user-xsession</tt> bez poprzedzaj±cych jej znaków, ka¿dy
u¿ytkownik, który stworzy <file>~/.xsession</file> lub
<file>~/.Xsession</file> bêdzie móg³ dostosowaæ dzia³anie
<file>/etc/X11/Xsession</file>.
<p>
Ostatnie polecenie w pliku <file>~/.xsession</file> powinno przyjmowaæ
formê: <tt>exec <var>some-window/session-manager</var></tt>, aby
uruchomiæ ulubiony mened¿er sesji.
<p>
Dobry przyk³ad skryptu  <file>~/.xsession</file> jest podany w
<file>&f-xsession;</file>.
<p>
U¿ywam tego skryptu do wybierania mened¿era okien, dostêpu do ekranu i
obs³ugiwanego jêzyka dla poszczególnych u¿ytkowników. Przeczytaj tak¿e
<ref id="s-w-manager">, <ref id="ss-xsu"> i <ref id="x-cjk">.
<p>
Dodatkowe zasoby X dla poszczególnych u¿ytkowników s± przechowywane w
<file>~/.Xresources</file>. Przeczytaj <ref id="xresources">.
<p>
Chc±c dostosowaæ do swoich upodobañ mapê klawiatury i funkcje klawiszy
myszy w Xach, edytuj <file>~/.xmodmaprc</file>. Przeczytaj
<manref name="xmodmap" section="1x">.

<sect2 id="s-w-manager">Uruchamianie konkretnych mened¿erów
okien/sesji.
<p>
Pod±¿aj±c za wytycznymi, opisanymi w <ref id="custom-x">,
wybrany przez u¿ytkownika mened¿er sesji/okien mo¿e byæ uaktywniony
poprzez zainstalowanie odpowiedniego pakietu i odpowiednie zmiany pod
koniec pliku <file>~/.xsession</file>.
(Osobi¶cie lubiê <package>blackbox</package>/<package>fluxbox</package>
z powodu ich prostego stylu i szybko¶ci.):

<list>
<item>domy¶lny mened¿er sesji X 
<list compact>
<item>Przeczytaj <ref id="alternatives">
<item><tt>exec /usr/bin/x-session-manager</tt>
</list>
<item>domy¶lny mened¿er okien X 
<list compact>
<item>Przeczytaj <ref id="alternatives">.
<item><tt>exec /usr/bin/x-window-manager</tt>
</list>

<item>Menad¿er sesji GNOME (prze³adowany)
<list compact>
<item>Zainstaluj pakiet: <package>gnome-session</package>
<item><tt>exec /usr/bin/gnome-session</tt>
</list>

<item>Menad¿er sesji KDE (prze³adowany)
<list compact>
<item>Zainstaluj pakiet: <package>kdebase</package> (lub 
<package>kdebase3</package> dla KDE3)
<item><tt>exec /usr/bin/kde2</tt>
</list>

<item>Blackbox window manager (lekki, szybki).
<list compact>
<item>Zainstaluj pakiet: <package>blackbox</package>
<item><tt>exec /usr/bin/blackbox</tt>
</list>

<item>Fluxbox window manager (lekki, nowy blackbox).
<list compact>
<item>Zainstaluj pakiet: <package>fluxbox</package>
<item><tt>exec /usr/bin/fluxbox</tt>
</list>

<item>Xfce window manager (podobny do Mac OS-X, SUN CDE).
<list compact>
<item>Zainstaluj pakiet: <package>xfce</package>
<item><tt>exec /usr/bin/xfwm</tt>
</list>

<item>IceWM window manager (ma³y, alternatywa dla GNOME)
<list compact>
<item>Zainstaluj pakiet: <package>icewm</package>
<item><tt>exec /usr/bin/X11/icewm</tt>
</list>

<item>FVWM2 virtual window manager (ma³y, podobny do Win95)
<list compact>
<item>Zainstaluj pakiet: <package>fvwm</package>
<item><tt>exec /usr/bin/fvwm2</tt>
</list>

<item>Windowmaker window manager (trochê jak NexT)
<list compact>
<item>Zainstaluj pakiet: <package>wmaker</package>
<item><tt>exec /usr/bin/wmaker</tt>
</list>

<item>Enlightenment window manager (prze³adowany)
<list compact>
<item>Zainstaluj pakiet: <package>enlightenment</package>
<item><tt>exec /usr/bin/enlightenment</tt>
</list>

</list>
Przeczytaj <url id="&windomanagerhome;" name="Window Managers for X">.


<sect2 id="kde-gnome">Ustawianie ¶rodowisk KDE/GNOME
<p>
Aby otrzymaæ w pe³ni funkcjonalne ¶rodowiska KDE lub GNOME, przydatne s±
poni¿sze metapakiety:
<list>
<item>KDE: zainstaluj pakiet <package>kde</package>
<item>GNOME: zainstaluj pakiet <package>gnome</package>
</list>
Instalacja tych pakietów za pomoc± narzêdzi korzystaj±cych ze zmiennych
<tt>recommends</tt>, takich jak <prgn>dselect</prgn> i <prgn>aptitude</prgn>,
zaopatrzy Ciê w wiêkszy wybór oprogramowania ni¿ instalacja tylko za
pomoc± <prgn>apt-get</prgn>.
<p>
Je¶li chcesz logowaæ siê w trybie tekstowym wy³±cz mened¿era
wy¶wietlania X, takiego jak <package>kdm</package>, <package>gdm</package>,
i <package>wdm</package>, które mog± zostaæ zainstalowane poprzez
zale¿no¶ci, jak opisano to w <ref id="no-x-start">.
<p>
Je¶li GNOME ma siê uruchamiaæ domy¶lnie, zamiast KDE, upewnij siê jak
w³a¶ciwie skonfigurowaæ <prgn>x-session-manager</prgn>, co opisano w
<ref id="alternatives">.

<sect1 id="xtcp">Po³±czenie TCP/IP z X
<p>
Poniewa¿ zdalne po³±czenie TCP/IP bez szyfrowania mo¿na stosunkowo ³atwo
pods³uchiwaæ, domy¶lne ustawienia X w aktualnej wersji systemu &debian;
nie udostêpnia gniazda TCP/IP. Rozwa¿ u¿ycie <prgn>ssh</prgn>, je¶li
zale¿y Ci na zdalnym po³±czeniu ( zobacz <ref id="xssh">). 
<p>
Metoda opisana tutaj nie jest zalecana, chyba ¿e stosowana jest w bardzo
bezpiecznym ¶rodowisku, za dobrym firewallem i tylko wtedy je¶li wszyscy
u¿ytkownicy s± godni zaufania. U¿yj tego polecenia, aby sprawdziæ obecne
ustawienia X serwera dotycz±ce gniazd TCP/IP:
<example>
# find /etc/X11 -type f -print0 | xargs -0 grep nolisten
/etc/X11/xinit/xserverrc:exec /usr/bin/X11/X -dpi 100 -nolisten tcp
</example>
Usuñ <tt>-nolisten</tt> aby przywróciæ nas³uch poprzez TCP/IP.
</sect1>
 
<sect1 id="xhost">Zdalne po³±czenie z X: <prgn>xhost</prgn>
<p>
<prgn>xhost</prgn> umo¿liwia dostêp wyznaczonym hostom. Jest to bardzo
niebezpieczne. Poni¿sza linia wy³±cza sprawdzanie hostów i pozwala na
po³±czenie sk±dkolwiek, je¶li dozwolone s± po³±czenia TCP/IP ( przeczytaj
 <ref id="xtcp">):
<example>
$ xhost +
</example>
Mo¿esz ponownie uaktywniæ sprawdzanie hostów poprzez:
<example>
$ xhost -
</example>
<p>
<prgn>xhost</prgn> nie rozró¿nia u¿ytkowników na zdalnych maszynach.
Oprócz tego adresy hostów mog± byæ oszukane (spoofing).
<p>
Powinno unikaæ siê tej metody, szczególnie je¶li jeste¶ pod³±czony do
sieci niegodnej zaufania (np. PPP dialup ). Przeczytaj
<manref name="xhost" section="1x">.
</sect1>

<sect1 id="xssh">Zdalne po³±czenie z X: <prgn>ssh</prgn>
<p>
<prgn>ssh</prgn> zapewnia bezpieczny sposób po³±czenia lokalnego X
serwera z programem uruchomionym na zdalnej maszynie.
<list>
<item>Ustaw pozycje <tt>X11Forwarding</tt> i <tt>AllowTcpForwarding</tt>
na <tt>yes</tt> w pliku <file>/etc/ssh/sshd_config</file> zdalnego hosta,
je¶li chcesz unikn±æ podawania tych opcji w lini poleceñ.
<item>Uruchom X serwer na zdalnej maszynie.
<item>Otwórz <prgn>xterm</prgn> na lokalnym komputerze.
<item>Uruchom <prgn>ssh</prgn>, aby ustanowiæ po³±czenie ze stron± zdaln±.  
<example>
localname @ localhost $ ssh -q -X -l loginname remotehost.domain
Password:
.....
</example>
<item>Uruchom aplikacje X po stronie zdalnej.
<example>
loginname @ remotehost $ gimp &
</example>
</list>
Metoda ta umo¿liwia wy¶wietlanie wyj¶cia zdalnego klienta X, jak gdyby
komunikowa³ siê on lokalnie poprzez gniazda UNIX.
</sect1>

<sect1 id="xtermfaq"><prgn>xterm</prgn>
<p>
Dowiedz siê wszystkiego o <prgn>xterm</prgn>: <url id="&xtermfaq;">.
</sect1>

<sect1 id="xresources">Baza danych zasobów X
<p>
Du¿o starszych programów dla X, jak <prgn>xterm</prgn>, u¿ywa bazy danych 
zasobów X do konfiguracji w³asnego wygl±du. Plik <file>~/.Xresources</file> 
jest u¿ywany do przechowywania specyfikacji zasobów u¿ytkownika. Jego
zawarto¶æ jest automatycznie do³±czana do domy¶lnych zasobów X podczas
logowania. Zasoby dla ca³ego systemu przechowywane s±
w <file>/etc/X11/Xresources/*</file> i domy¶lne ustawienia aplikacji
w <file>/etc/X11/app-defaults/*</file>. U¿yj tych ustawieñ jako
wyj¶ciowych.
<p>
Oto parê przydatnych ustawieñ dla twojego pliku
<file>~/.Xresources</file>:
<example>
! Ustaw czcionkê do bardziej czytelnego rozmiaru 9x15
XTerm*font: 9x15

! Wy¶wietl pasek przewijania
XTerm*scrollBar: true

! Ustaw rozmiar bufora na 1000 linii
XTerm*saveLines: 1000
</example>
Aby zmiany te wesz³y w ¿ycie natychmiast, dodaj je do bazy danych zasobów
poleceniem:
<example>
xrdb -merge ~/.Xresources
</example>
Zobacz <manref name="xrdb" section="1x">.

<sect1 id="ss-xsu">Uprawnienia administratora w X
<p>
Je¶li program z GUI musi byæ uruchomiony z uprawnieniami administratora u¿yj
nastêpuj±cej procedury.<strong>Nigdy nie uruchamiaj X serwera
bezpo¶rednio z konta roota</strong>, aby unikn±æ problemów z
bezpieczeñstwem.
<p>
Uruchom X serwer jako zwyk³y u¿ytkownik i otwórz okno programu
<prgn>xterm</prgn>.
Potem:
<example>
$ XAUTHORITY=$HOME/.Xauthority
$ export XAUTHORITY
$ su root
Password:*****
# printtool &
</example>
U¿ywaj±c tego sposobu by zyskaæ prawa u¿ytkownika innego ni¿ root,
upewnij siê, ¿e <file>~/.Xauthority</file> jest dostêpny do odczytu dla
grupy tego u¿ytkownika.
<p>

<!-- this section moved up -->

Aby zautomatyzowaæ te sekwencje poleceñ, utwórz plik
<file>~/.xsession</file> na koncie u¿ytkownika zawieraj±cy linie:
<example>
# To sprawia, ¿e X-y dzia³aj±, kiedy za pomoc± su stajê siê root'em.
if [ -z "$XAUTHORITY" ]; then
        XAUTHORITY=$HOME/.Xauthority
        export XAUTHORITY
fi
unset XSTARTUP
# Je¶li jakie¶ mened¿ery okien/sesji s± wybrane, odkomentuj nastêpuj±ce
# linie i dostosuj je do swoich potrzeb.
#XSTARTUP=/usr/bin/blackbox
# To uruchomi program x-window/session-manager
if [ -z "$XSTARTUP" ]; then
  if [ -x /usr/bin/x-session-manager ]; then
    XSTARTUP=x-session-manager
  elif [ -x /usr/bin/x-window-manager ]; then
    XSTARTUP=x-window-manager
  elif [ -x /usr/bin/x-terminal-emulator ]; then
    XSTARTUP=x-terminal-emulator
  fi
fi
# Uruchom automatycznie wybrany mened¿er okien/sesji X
exec $XSTARTUP
</example>
Nastêpnie uruchom <prgn>su</prgn> (nie <tt>su -</tt>) w oknie programu
<prgn>xterm</prgn>.  Teraz programy uruchamiane z tego
<prgn>xterma</prgn> bêd± wy¶wietlaæ siê temu u¿ytkownikowi, podczas
gdy pracowaæ bêd± z prawami administratora. 
Dzia³a to tak d³ugo, jak d³ugo domy¶lny plik
<file>/etc/X11/Xsession</file> jest wykonywany. Je¶li u¿ytkownik zmieni³
swoje ¶rodowisko edytuj±c <file>~/.xinit</file> lub <file>~/.xsession</file>,
to wymieniona zmienna ¶rodowiskowa <tt>XAUTHORITY</tt> musi byæ w nich
odpowiednio zmieniona.

<p>Opcjonalnie, <package>sudo</package> mo¿e byæ wykorzystane dla
zautomatyzowania tej sekwencji poleceñ:
<example>
$ sudo xterm
... lub
$ sudo -H -s
</example>
W tym wypadku plik <file>/root/.bashrc</file> powinien zawieraæ:
<example>
if [ $SUDO_USER ]; then
    sudo -H -u $SUDO_USER xauth extract - $DISPLAY | xauth merge -
fi
</example>
Dzia³a to poprawnie nawet gdy katalog domowy u¿ytkownika jest na NFS,
poniewa¿ root nie odczytuje jego <file>.Xauthority</file>.
<p>
Jest kilka pakietów przeznaczonych specjalnie dla tego celu:
<package>kdesu</package>, <package>gksu</package>, <package>gksudo</package>,
<package>gnome-sudo</package>, i <package>xsu</package>.  Parê
innych metod mo¿e byæ u¿ytych do osi±gniêcia podobnych rezultatów:
utworzenie dowi±zania symbolicznego z pliku <file>/root/.Xauthority</file> do
u¿ytkownika, u¿ycie skryptu <url id="&suxhome;" name="sux">; lub
wpisanie &ldquor;<tt>xauth merge ~<var>USER_RUNNING_X</var>/.Xauthority</tt>&rdquor; w
plikach startowych administratora.
<p>
Przeczytaj wiêcej na <url id="&deb-dev-su;" name="debian-devel mailing list">.
</sect1>

<sect1 id="xfs-tt">Czcionki TrueType dla X
<p>
Standardowy <prgn>xfs</prgn> z XFree86-4 poprawnie wspó³pracuje z
czcionkami TrueType. Je¶li natomiast korzystasz z XFree86-3 musisz
zainstalowaæ osobny pakiet, taki jak <prgn>xfs-xtt</prgn>.
<p>
Musisz upewniæ siê, ¿e wszystkie programy, które maj± korzystaæ z
czcionek TrueType zosta³y po³±czone z libXft
lub libfreetype (prawdopobnie nie musisz siê o to martwiæ, je¶li korzystasz
z prekompilowanych pakietów .deb).
<p>
Pamiêtaj aby zainstalowaæ wymagane czcionki i wygenerowaæ pliki
<file>fonts.{scale,dir}</file>, aby mog³y zostaæ zaindeksowane i u¿yte.
<p>
Poniewa¿ wybór <strong>Wolnych</strong> czcionek jest dosyæ
ograniczony, dobrym rozwi±zaniem mo¿e byæ równoczesna instalacja
ich komercyjnych odpowiedników.
Aby uczyniæ ich instalacjê ³atwiejsz±, stworzono kilka pakietów:
<list compact>
<item><package>ttf-commercial</package>
<item><package>msttcorefonts (>1.1.0)</package> (Pakiet w Woodym nie 
 dzia³a z powodu zmiany w dniu 8/2002 strony internetowej Microsoftu.)
</list>
Bêdziesz mia³ naprawdê du¿y wybór czcionek, je¶li po³±czysz u¿ycie
swoich <strong>Wolnych</strong> czcionek z innymi, komercyjnymi.

<sect1 id="ss-browser">Przegl±darka WWW (graficzna)
<p>
Jest kilka graficznych przegl±darek stron WWW w Woodym:
<list compact>
<item><package>mozilla</package> The Mozilla (nowa)
<item><package>galeon</package> przegl±darka oparta o Mozillê z Gnome UI (nowa)
<item><package>konqueror</package> przegl±darka dla KDE
<item><package>dillo</package> przegl±darka w GTK
<item><package>amaya-gtk</package> przegl±darka wzorcowa W3C
<item><package>amaya-lesstif</package> przegl±darka wzorcowa W3C
<item><package>netscape-...</package> (du¿o, stare)
<item><package>communicator-...</package> (du¿o, stare)
<item>...
</list>
Wersja pakietu <package>mozilla</package> musi odpowiadaæ wersji
wymaganej przez pakiet <package>galeon</package>.  Chocia¿ ró¿ni± siê
one interfejsem u¿ytkownika, to korzystaj± z tego samego mechanizmu
renderowania stron HTML Gecko.
<p>
Wtyczki dla przegl±darek takich, jak <package>mozilla</package> i
<package>galeon</package> mog± byæ uaktywnione poprzez rêczn± instalacjê
odpowiednich plikow &ldquor;<tt>*.so</tt>&rdquor; w katalogu z wtyczkami i ponowne
uruchomienie przegl±darki.
<p>
Popularne wtyczki:
<list compact>
<item>wtyczka Javy: zaistaluj &ldquor;J2SE&rdquor; z <url id="&javasunhome;">.
<item>wtyczka Flash: zainstaluj &ldquor;Macromedia Flash Player 5&rdquor; z
 <url id="&flashhome;">.
<item><package>freewrl</package>: przegl±darka VRML i wtyczka dla
Netscape'a
<item>...
</list>
</sect1>

<!-- CJK and X moved to bottom with different name to locale section -->

</sect>

<sect id="ssh">SSH
<p>
SSH (Secure SHell) zapewnia bezpieczny sposób po³±czeñ internetowych.
Wersja SSH stanowi±ca wolne oprogramowanie nazywa siê OpenSSH i jest dostêpna
w systemie &debian; jako pakiet <package>ssh</package>.

<sect1 id="ssh-basics">Podstawy.
<p>
Najpierw zainstaluj serwer i klienta OpenSSH.
<example>
# apt-get update && apt-get install ssh
</example>
Wymagany jest wpis non-US w <file>/etc/apt/source.list</file>. Je¶li serwer
OpenSSH ma byæ uruchamiany, to nie mo¿e istnieæ plik
<file>/etc/ssh/sshd_not_to_be_run</file>.
<p>
SSH zapewnia dwa protoko³y identyfikacji:
<list>
<item>Pierwszy protokó³ SSH: 
 <list compact>
<item>Jedynie Potato obs³uguje ten protokó³.
<item>dostêpne metody identyfikacji:
  <list compact>
<item>RSAAuthentication: oparta na kluczu RSA u¿ytkownika
<item>RhostsAuthentication: oparta na .rhosts (niebezpieczna, wy³±czona)
<item>RhostsRSAAuthentication: oparta na kombinacji .rhosts i kluczy RSA (wy³±czona) 
<item>ChallengeResponseAuthentication: oparta o mechanizm RSA challenge-response
<item>PasswordAuthentication: oparta na has³ach
  </list>
 </list>
<item>Drugi protokó³ SSH: 
 <list compact>
<item>podstawowy dla systemów post-Woody 
<item>dostêpne metody identyfikacji:
  <list compact>
<item>PubkeyAuthentication: oparta o klucz publiczny
<item>HostbasedAuthentication: oparta o <file>.rhosts</file> lub
 <file>/etc/hosts.equiv</file>, w po³±czeniu z metod± klucza publicznego (wy³±czona).
<item>ChallengeResponseAuthentication: oparta o mechanizm challenge-response
<item>PasswordAuthentication: oparta na has³ach
  </list>
 </list>
</list>

<p>
Je¶li u¿ywasz Woodiego lub systemu innego ni¿ &debian;, to zwróæ uwagê na te
ró¿nice.
<p>
Przeczytaj <file>/usr/share/doc/ssh/README.Debian.gz</file>,
<manref name="ssh" section="1">, 
<manref name="sshd" section="8">,
<manref name="ssh-agent" section="1">, i
<manref name="ssh-keygen" section="1"> dla dalszych informacji.

<p>
G³ówne pliki konfiguracyjne to:

<list>

<item><file>/etc/ssh/ssh_config</file>: Ustawienia domy¶lne klienta SSH.
Przeczytaj <manref name="ssh" section="1">.  Wa¿ne uwagi, pozycje:

 <list compact>
<item><tt>Host</tt>: Ogranicza nastêpuj±ce po nim deklaracje ( a¿ do
nastêpnego wyst±pienia Host) jedynie do komputerów pasuj±cych do wzorca
podanego po danym s³owie kluczowym.
<item><tt>Protocol</tt>: Okre¶la wersje protoko³u SSH.
Domy¶lnie to &ldquor;2,1&rdquor;.
<item><tt>PreferredAuthentications</tt>: Okre¶la metodê identyfikacji
klienta SSH2. Domy¶lna warto¶æ to
&ldquor;hostbased,publickkey,keyboard-interactive,password&rdquor;.
<item><tt>PasswordAuthentication</tt>: Je¶li chcesz logowaæ siê u¿ywaj±c
has³a, upewnij siê, ¿e pole to nie jest ustawione na <tt>no</tt>.
<item><tt>ForwardX11</tt>: Domy¶lnie wy³±czone. Nadrzêdna wobec tego
ustawienia jest opcja wiersza poleceñ &ldquor;<tt>-X</tt>&rdquor;.
 </list>

<item><file>/etc/ssh/sshd_config</file>: Domy¶lne ustawienia serwera SSH.
Przejrzyj te¿ <manref name="sshd" section="8">.  Pozycje godne uwagi:

 <list compact>
<item><tt>ListenAddress</tt>: okre¶la lokalny adres, na którym <prgn>sshd</prgn>
powinien nas³uchiwaæ. Dozwolona jest wiêcej ni¿ jedna opcja.
<item><tt>AllowTcpForwarding</tt>: Domy¶lnie wy³±czone.  
<item><tt>X11Forwarding</tt>: Domy¶lnie wy³±czone.  
 </list>

<item><file>$HOME/.ssh/authorized_keys</file>: lista domy¶lnych kluczy
publicznych, które zosta³y u¿yte przez klientów do po³±czenia na dane konto
na tym komputerze.
Zobacz <manref name="ssh-keygen" section="1">.

<item><file>$HOME/.ssh/identity</file>: 
Zobacz <manref name="ssh-add" section="1">
oraz <manref name="ssh-agent" section="1">.
</list>

<p>
Rozpoczêcie po³±czenia przez klienta <prgn>ssh</prgn>.
<example>
$ ssh username@hostname.domain.ext
$ ssh -1 username@hostname.domain.ext # Wymusza u¿ywanie SSH w wersji 1  
$ ssh -1 -o RSAAuthentication=no -l username foo.host
    # wymusza u¿ywanie hase³ SSH1
$ ssh -o PreferredAuthentications=password -l username foo.host
    # wumusza u¿ywanie hase³ SSH2
</example>
Z punktu widzenia u¿ytkownika <prgn>ssh</prgn> dzia³a jako sprytniejszy i
bezpieczniejszy odpowiednik programu <prgn>telnet</prgn> ( nie zarzuci nas
np. ^]).

</sect1>

<sect1 id="ssh-forward">Przekierowywanie portów &ndash; tunelowanie dla SMTP/POP3
<p>
Aby utworzyæ potok ³±cz±cy port 25 komputera <var>zdalny-serwer</var> i port
4025 na komputerze lokalnym, oraz potok ³±cz±cy port 110 komputera
<var>zdalny-serwer</var> z portem 4110 lokalnej maszyny, poprzez
<prgn>ssh</prgn>, wykonaj na lokalnej maszynie:
<example>
# ssh -q -L 4025:zdalny-serwer:25 4110:zdalny-serwer:110 \
           u¿ytkownik@zdalny-serwer
</example>
Jest to bezpieczny sposób na nawi±zywanie po³±czenia z serwerami SMTP/POP3 w
Internecie. Ustaw <tt>AllowTcpForwarding</tt> na <tt>yes</tt> w pliku
<file>/etc/ssh/sshd_config</file> zdalnego komputera.
</sect1>

<sect1 id="ssh-rsa">Po³±czenia z mniejsz± ilo¶ci± hase³
<p>
Mo¿na unikn±c konieczno¶ci pamiêtania has³a dla ka¿dego u¿ywanego zdalnego
komputera u¿ywaj±c RSAAuthentication (protokó³ SSH1) lub
PubkeyAuthentication (protokó³ SSH2).
<p>
Na zdalnym systemie ustaw odpowiednio pozycje
&ldquor;RSAAuthentication yes&rdquor; lub &ldquor;PubkeyAuthentication yes&rdquor;, w
<file>/etc/ssh/sshd_config</file>.
<p>
Nastêpnie wygeneruj klucze identyfikacyjne lokalnie i zainstaluj klucz
publiczny na zdalnym systemie:
<example>
$ ssh-keygen          # RSAAuthentication: klucz RSA1 dla SSH1
$ cat .ssh/identity   | ssh u¿ytkownik1@zdalny \
        "cat - &gt;&gt;.ssh/authorized_keys"
...
$ ssh-keygen -t rsa   # PubkeyAuthentication: Klucz RSA dla SSH2
$ cat .ssh/id_rsa.pub | ssh u¿ytkownik1@zdalny \
        "cat - &gt;&gt;.ssh/authorized_keys"
...
$ ssh-keygen -t dsa   # PubkeyAuthentication: klucz DSA dla SSH2
$ cat .ssh/id_dsa.pub | ssh u¿ytkownik1@zdalny \
        "cat - &gt;&gt;.ssh/authorized_keys"
</example>
Mo¿na pó¼niej zmieniæ has³o za pomoc± polecenia &ldquor;<tt>ssh-keygen -p</tt>&rdquor;.
Sprawd¼ ustawienia testuj±c po³±czenie. W razie nieprawid³owo¶ci skorzystaj
z polecenia &ldquor;<tt>ssh -v</tt>&rdquor;.
<p>
Mo¿esz dodaæ opcje do pozycji w <prgn>authorized_keys</prgn>, aby ograniczyæ
uprawnienia hostów i u¿yæ odpowiedniego polecenia. Po dalsze informacje
siêgnij do <manref name="sshd" section="8">.
<p>
Zauwa¿, ¿e SSH2 obs³uguje <tt>HostbasedAuthentication</tt>. Aby uaktywniæ
ten mechanizm, musisz zmieniæ warto¶æ zmiennej
<tt>HostbasedAuthentication</tt> na <tt>yes</tt> zarówno w pliku
<file>/etc/ssh/sshd_config</file> po stronie serwera, jak i w plikach
<file>/etc/ssh/ssh_config</file> lub <file>$HOME/.ssh/config</file> na
komputerze klienta.
</sect1>

<sect1 id="ssh-client">Inne klienty SSH
<p>
Istnieje parê klientów SSH na platformy inne ni¿ Unix.
<taglist>
<tag>Windows
<item><url id="&puttyhome;" name="puTTY"> (GPL)
<tag>Windows (cygwin)
<item>SSH w <url id="&cygwinhome;" name="cygwin"> (GPL)
<tag>Macintosh Classic
<item><url id="&macsshhome;" name="macSSH"> (GPL) [Zauwa¿, ¿e Mac OS X
zawiera OpenSSH; u¿yj <tt>ssh</tt> w aplikacji Terminala]
</taglist>
Zobacz tak¿e <url id="&sfdochome;" name="SourceForge.net, site documentation">, 
&ldquor;6. CVS Instructions&rdquor;.

<sect1 id="ssh-agent">SSH agent
<p>
Bezpieczniej jest chroniæ swój klucz SSH has³em. Je¶li nie zosta³o ono
ustawione, u¿yj polecenia <tt>ssh-keygen -p</tt> aby to zmieniæ.
<p>
Umie¶æ swój klucz publiczny (np <file>~/.ssh/id_rsa.pub</file>) w pliku
<file>~/.ssh/authorized_keys</file> na zdalnym ho¶cie, u¿ywaj±c po³±czenia
opartego o has³a, tak jak to opisano w <ref id="ssh-rsa">.
<example>
$ ssh-agent bash # lub uruchom zamiast tego  zsh/tcsh/pdksh
$ ssh-add ~/.ssh/id_rsa
Enter passphrase for /home/osamu/.ssh/id_rsa:
Identity added: /home/osamu/.ssh/id_rsa (/home/osamu/.ssh/id_rsa)
$ scp <var>foo</var> <var>user@remote.host:foo</var>
 ... nie potrzebne tu jest moje has³o :-)
$^D
 ... przerywanie sesji ssh-agent
</example>
Dla X-serwera, standardowe skrypty startowe systemu &debian; uruchamiaj±
<prgn>ssh-agent</prgn> jako proces macierzysty. Musisz wiêc jedynie
uruchomiæ jednokrotnie <prgn>ssh-add</prgn>.
<p>
Dla dalszych informacji przeczytaj <manref name="ssh-agent" section="1"> i
<manref name="ssh-add" section="1">.
</sect1>

<sect1 id="ssh-trouble">Problemy
<p>
Je¶li masz problemy, sprawd¼ prawa dostêpu do plików konfiguracyjnych i
uruchom <prgn>ssh</prgn> z opcj± &ldquor;<tt>-v</tt>&rdquor;.
<p>
U¿yj parametru &ldquor;<tt>-P</tt>&rdquor; je¶li jeste¶ rootem i masz problem z
firewallem; pozwala to unikn±æ korzystania z portów 1&ndash;1023.
<p>
Je¶li zdalne po³±czenie <prgn>ssh</prgn> nagle przestaje dzia³aæ, mo¿e byæ
to spowodowane dzia³aniami administratora, a najbardziej, prawdopodobn± zmian±
w <prgn>host_key</prgn>. Po upewnieniu siê, ¿e nie jest to jednak sprytna
próba w³amania poprzez podszywanie siê za zdalnej maszyny, mo¿esz odzyskaæ
po³±czenie usuwaj±c pozycje <prgn>host_key</prgn>
z <file>$HOME/.ssh/known_hosts</file> na lokalnej maszynie.
</sect1>

</sect>

<sect id="mail">Programy pocztowe
<p>
Konfiguracja poczty dzieli siê na 3 kategorie:
<list>
<item>mail transfer agent (program przesy³aj±cy pocztê - MTA): 
 <prgn>exim</prgn>, <prgn>postfix</prgn>, 
 <prgn>sendmail</prgn>, <prgn>qmail</prgn>, <prgn>ssmtp</prgn>,
 <prgn>nullmailer</prgn>, ...
<item>pocztowe programy u¿ytkowe: <prgn>procmail</prgn>, <prgn>fetchmail</prgn>,
<prgn>mailx</prgn>, ...
<item>mail user agent (klient poczty - MUA): <prgn>mutt</prgn>,
<prgn>emacs</prgn>+<prgn>gnus</prgn>,...
</list>

<sect1>Mail transport agent (MTA)
<p>
Aby mieæ w pe³ni wyposa¿ony MTA u¿yj <package>exim</package>. Zasoby:
<list compact>
<item>pakiety <package>exim-doc</package> i <package>exim-doc-html</package>
<item><url id="&eximhome;">
</list>
Je¶li troszczysz siê o bezpieczeñstwo, to jedyn± rozs±dn± alternatyw± jest
<package>postfix</package>. <package>sendmail</package> i
<package>qmail</package>, s± równie¿ dostêpne jako pakiety systemu &debian;,
ale ich u¿ywanie nie jest polecane.
<p>
Je¶li nie potrzebujesz &ldquor;relay capability&rdquor; MTA, jak to jest w przypadku np.
laptopów, mo¿esz rozwa¿yæ u¿ycie rozwi±zañ mniejszego kalibru:
<list compact>
<item><prgn>ssmtp</prgn>: wymaga po³±czenia SMTP i obs³uguje aliasy, lub
<item><prgn>nullmailer</prgn>: potrafi kolejkowaæ, ale nie obs³uguje aliasów.
</list>
Obecnie uwa¿am, ¿e <prgn>exim</prgn> jest bardziej odpowiedni nawet dla
mojej stacji roboczej, bêd±cej w³a¶nie laptopem.
<p>
Musisz usun±æ <prgn>exim</prgn> aby zainstalowaæ w/w pakiety, gdy¿
zachodzi pomiêdzy nimi konflikt:
<example>
# dpkg -P --force-depends exim
# apt-get install nullmailer         # lub ssmtp
</example> 

<sect2>Podstawowa konfiguracja Exima
<p>
Aby u¿ywaæ <prgn>exim</prgn> jako MTA, ustaw odpowiednie opcje w:
<example>
/etc/exim/exim.conf     &ldquor;eximconfig&rdquor;  tworzenie i edycja
/etc/inetd.conf         zakomentuj smtp by u¿ywaæ serwera exim w trybie demon
/etc/email-addresses    Dodawanie listy fa³szywych adresów
sprawd¼ filtry, u¿ywaj±c exim -brw, -bf, -bF, -bV, ... etc.
</example>

<sect2>Wy³apywanie poczty adresowanej do nie istniej±cych adresów (Exim)
<p>
W <file>/etc/exim/exim.conf</file> (Woody lub pó¼niej),
w czê¶ci DIRECTORS, pod koniec (za 'lokalny u¿ytkownik: przekierowanie')
dodaj przekierowanie pasuj±ce do wszystkich adresów, które poprzednie
przekierowania nie mog³y obj±æ (przez Miquela van Smoorenburga):
<example>
catchall:
  driver = smartuser
    new_address = <var>webmaster@mydomain.com</var>
</example>
<p>
Je¶li chce siê mieæ bardziej szczegó³owy opis ka¿dej wirtualnej domeny itp.
dodaj nastêpuj±ce linie pod koniec pliku <file>/etc/exim/exim.conf</file> (nie
sprawdzone).
<example>
*@yourdomain.com ${lookup{$1}lsearch*{/etc/email-addresses} \
        {$value}fail} T
</example>
Nastêpnie umie¶æ pozycje &ldquor;*&rdquor; w pliku <file>/etc/email-addresses</file>.
</sect2>

<sect2>Zamiana adresów dla wychodz±cej poczty (Exim)
<p>
<!-- Derrick 'dman' Hudson dman@dman.ddts.net -->
Selektywna zamiana adresów dla wychodz±cej poczty, aby otrzymaæ poprawnie
nag³ówki &ldquor;From: &rdquor;, mo¿e byæ osi±gniêta w programie <prgn>exim</prgn> dziêki
odpowiedniej konfiguracji pod koniec pliku <file>/etc/exim/exim.conf</file>:
<example>
*@komp1.gdzie¶.dyndns.org \
  "${if eq {${lookup{$1}lsearch{/etc/passwd}{1}{0}}} {1}  \
   {$0}{$1@gdzie¶.dyndns.org}}"  frFs
</example>
Ta regu³ka zamienia wszystkie adresy pasuj±ce do <tt>*@komp1.gdzie¶.dyndns.org</tt>.
<enumlist>
<item>Najpierw sprawdza w pliku <file>/etc/password</file> czy czê¶æ lokalna ($1)
jest u¿ytkownikiem czy nie.
<item>Je¶li to lokalny u¿ytkownik, przepisuje adres w takiej postaci w
jakiej wystêpowa³.
<item>Je¶li nie, podmienia nazwê domeny.
</enumlist>

<sect2>Autoryzacja SMTP w Eximie
<p>
Niektórzy us³ugodawcy SMTP, jak np. yahoo.com, wymagaj± autoryzacji SMTP.
Skonfiguruj <file>/etc/exim/exim.conf</file> nastêpuj±co:
<example>
remote_smtp:
  driver = smtp
  authenticate_hosts = smtp.mail.yahoo.com
...

smarthost:
  driver = domainlist
  transport = remote_smtp
  route_list = "* smtp.mail.yahoo.com bydns_a"
...

plain:
  driver = plaintext
  public_name = PLAIN
  client_send = "^cmatheson3^this_is_my_password"
</example>
Nie zapomnij o dwóch znakach cudzys³owia w ostatniej lini

<sect1>Fetchmail
<p>
<prgn>fetchmail</prgn> jest uruchamiany w trybie demona, aby pobraæ pocztê
z konta POP3 u ISP do lokalnego systemu pocztowego. Konfiguracja:
<example>
/etc/init.d/fetchmail   
/etc/rc?.d/???fetchmail uruchom update-rc.d fetchmail default priority 30
/etc/fetchmailrc        plik konfiguracyjny (chown 600, w³asno¶æ fetchmaila)
</example>
<p>
Uruchomienie <prgn>fetchmaila</prgn> jako demona wywo³ywanego 
ze skryptu <prgn>init.d</prgn> w Potato mo¿e byæ k³opotliwe 
(w Woodym jest ju¿ inaczej). Zobacz
<url id="&examples;" name="przyk³adowe skrypty">.
<p>
Je¶li nag³ówki poczty elektronicznej s± zanieczyszczone znakiem ^M z 
winy Twojego ISP,
dodaj &ldquor;stripcr&rdquor; do opcji w pliku <file>$HOME/.fetchmailrc</file>:
<example>
options fetchall no keep stripcr
</example>
</sect1>

<sect1>Procmail
<p>
<prgn>procmail</prgn> spe³nia rolê lokalnego MDA oraz programu filtruj±cego.
Nale¿y stworzyæ plik <file>$HOME/.procmailrc</file> dla ka¿dego konta, które z
niego korzysta. Przyk³ady <url id="&examples;" name="_procmailrc">
</sect1>

<sect1>Mutt
<p>
U¿yj <prgn>mutt</prgn> jako czytnika poczty ( mail user agent (MUA)) w
po³±czeniu z <prgn>vim</prgn>.
Dostosuj do w³asnych potrzeb edytuj±c plik<file>~/.muttrc</file>; na przyk³ad:

<example>
# u¿ywaj trybu wizualnego i &ldquor;gq&rdquor; do formatowania cytatów
set editor="vim -c 'set tw=72 et ft=mail'"
#
# usuwanie nag³ówków wziête z podrêcznika (Sven's Draconian header weeding)
#
ignore *
unignore from: date subject to cc
unignore user-agent x-mailer
hdr_order from subject to cc date user-agent x-mailer
auto_view application/msword
....
</example>
<p>
U¿yj nastêpuj±cych wpisów w plikach <file>/etc/mailcap</file> lub
<file>$HOME/.mailcap</file>, aby przegl±daæ za³±czniki w formatach HTML i MS
Word.
<example>
text/html; lynx -force_html &percnt;s; needsterminal;
application/msword; /usr/bin/antiword '&percnt;s'; copiousoutput;
description="Microsoft Word Text"; nametemplate=&percnt;s.doc
</example>

</sect1>

</sect>

<sect id="l10n">Lokalizacja i obs³uga obcych jêzyków.
<p>
&debian; jest projektem miêdzynarodowym, obs³uguj±cym rosn±c± ilo¶æ jêzyków
itp. Ta czê¶æ wymieni kilka obszarów ró¿nic jêzykowych, które &debian;
obecnie obs³uguje. Nastêpne za¶ skupi± siê na <strong>lokalizacji</strong>,
procesie uzyskania wej¶cia i wyj¶cia programów w wybranym jêzyku, jak
równie¿ stosowania wybranych konwencji drukowania daty, liczb i symboli
monetarnych, jak równie¿ innych ró¿nic, jakie mog± wystêpowaæ na skutek
stosowania systemu &debian; w Twoim regionie.

<sect1 id="languages">Podstawy
<p>
Jest kilka aspektów lokalizowania systemu &debian; i obs³ugi jêzyków
narodowych.

<sect2 id="keyboard">Klawiatura
<p>
&debian; jest rozpowszechniany z blisko dwoma tuzinami map klawiatur. 
W Woodym mo¿esz zmieniæ ustawienia klawiatury poprzez:

<list compact>
<item><tt>dpkg-reconfigure --priority=low console-data # console</tt>
<item><tt>dpkg-reconfigure --priority=low xserver-xfree86   # XF4</tt>
<item><tt>dpkg-reconfigure --priority=low xserver-common-v3 # XF3</tt>
</list>
</sect2>

<sect2 id="data-stream">Dane
<p>
Szeroka gama oprogramowania dostêpnego jako pakiety Debiana wspiera obs³ugê
znaków graficznych ró¿nych od standardu US-ASCII poprzez zmienn±
¶rodowiskow± LC_CTYPE, udostêpnian± przez mechanizm <strong>locale</strong>
w glibc
   
    <list compact>
    <item>8-bit clean: praktycznie wszystkie programy
     <item>inne zestawy znaków Latin (np. ISO-8859-1 lub ISO-8859-2):
     wiêkszo¶æ programów
     <item>wielobajtowe jêzyki, jak Chiñski, Japoñski czy Koreañski: wiele
     nowych programów
    </list>
</sect2>

<sect2 id="display">Wy¶wietlanie
<p>
X-y mog± wy¶wietlaæ ka¿de kodowanie, w³±czaj±c UTF-8, i obs³uguj± wszystkie
czcionki. Zawieraj± siê w tym nie tylko wszystkie czcionki 8-bitowe, ale tak¿e
16-bitowe - np. chiñska, japoñska czy koreañska. Obs³uga wielobajtowych
zestawów znaków przy wprowadzaniu danych jest zapewniona przez mechanizm
XIM. Zobacz <ref id="x-cjk">.
<p>
Wy¶wietlanie japoñskiego kodu EUC jest tak¿e mo¿liwe w konsoli graficznej,
poprzez pakiet <package>kon2</package>. Jest tak¿e alternatywny program,
u¿ywaj±cy konsoli framebuffera, pakiet <package>jfbterm</package>. W tych
¶rodowiskach sposób zapewnienia wej¶cia kompatybilnego z jêzykiem japoñskim
musi byæ zapewniony przez programy u¿ytkowe. U¿yj pakietu
<package>egg</package> dla Emacsa lub <package>jvim</package> dla Vima.
</sect2>

<sect2 id="translation">T³umaczenie
<p>
Dostêpne s± t³umaczenia wielu komunikatów i dokumentów wy¶wietlanych w
systemie &debian; takich, jak komunikaty b³êdów, standardowe wyj¶cie
programów, menu oraz strony podrêcznika systemowego. Obecnie istniej± strony
podrêcznika w jêzyku  niemieckim, hiszpañskim, fiñskim, francuskim,
wêgierskim, w³oskim, japoñskim, koreañskim, polskim, portugalskim, chiñskim
oraz rosyjskim - wszystkie one s± dostêpne w pakietach
<tt>manpages-<var>LANG</var></tt> (gdzie <var>LANG</var> jest dwuliterowym
kodem ISO kraju. U¿yj <tt>apt-cache search manpages-|less</tt> aby otrzymaæ
listê dostêpnych pakietów.)
<p>
Aby korzystaæ z przet³umaczonych stron podrêcznika, u¿ytkownik musi ustawiæ
zmienn± ¶rodowiskow± LC_MESSAGES na odpowiedni± warto¶æ. W przypadku 
jêzyka w³oskiego LC_MESSAGES musi zostaæ ustawione na <tt>it</tt>. Wtedy
<prgn>man</prgn> bêdzie szuka³ w³oskiego t³umaczenia w pliku
<file>/usr/share/man/it/</file>.
</sect2>
</sect1>

<sect1 id="locales">Locales
<p>
Debian oferuje mechanizm <strong>locale</strong>. Pozwala on programom na
dostosowanie wyj¶cia i mo¿liwo¶ci w zale¿no¶ci od ustawieñ systemowych
takich, jak u¿ywany zestaw znaków, format wy¶wietlania daty i godziny,
symbol waluty itp. Na przyk³ad, zak³adaj±c wystêpowanie zarówno American
English oraz French locales w Twoim systemie, komunikat b³êdu mo¿e byæ
wy¶wietlany w wielu jêzykach:
<example>
$ LANG="en_US" cat foo
cat: foo: No such file or directory
$ LANG="fr_FR" cat foo
cat: foo: Aucun fichier ou répertoire de ce type
</example>
Glibc oferuje t± funkcjonalno¶æ dla programów jako bibliotekê.
Zobacz <manref name="locale" section="7">.

<sect1 id="activate-locales">Aktywacja wsparcia locale
<p>
&debian; <strong>nie</strong> jest instalowany z wszystkimi mo¿liwymi
prekompilowanymi wersjami locales . Sprawd¼ plik <file>/usr/lib/locale</file>,
aby zobaczyæ, które locale (poza domy¶lnym &ldquor;C&rdquor;), s± obecne w Twoim systemie.
Je¶li potrzebujesz takiego, który nie jest dostêpny masz dwie mo¿liwo¶ci:
<list compact>
<item>Dodaj po¿±dane locale do pliku <file>/etc/locale.gen</file>, nastêpnie
uruchom <prgn>locale-gen</prgn> jako root aby je skompilowaæ. Przeczytaj
<manref name="locale-gen" section="8"> i strony wymienione w jego czê¶ci
&ldquor;SEE ALSO&rdquor;.
<item>Uruchom <tt>dpkg-reconfigure locales</tt>, aby ponownie skonfigurowaæ
pakiet <package>locales</package>. A je¶li nie jest jeszcze zainstalowany,
to instalacja wywo³a interfejs programu debconf, aby pozwoliæ Ci wybraæ
potrzebne locale i skompilowaæ bazê danych.
</list>

<sect1 id="env-locale">Uaktywnienie okre¶lonego locale.
<p>
Nastêpuj±ce zmienne ¶rodowiskowe s± u¿ywane, aby dostarczyæ ustawieñ
locale dla programów:
<enumlist>
<item>LANGUAGE: Ta zmienna sk³ada siê z oddzielonej dwukropkami listy locale
w porz±dku wa¿no¶ci. U¿ywaj wy³±cznie, je¶li POSIX locale jest ustawione do
warto¶ci innej ni¿ &ldquor;C&rdquor; [w Woodym; wersja Potato jest zawsze wa¿niejsza od
POSIX locale]. (rozszerzenie GNU)
<item>LC_ALL: Je¶li nie przyjmuje warto¶ci NULL, warto¶æ ta jest u¿yta dla
      categories. (POSIX.1) Zwykle &ldquor;&rdquor; (null).
<item>LC_*: Je¶li nie przyjmuje warto¶ci NULL, warto¶æ ta jest u¿yta dla
odpowiedniej kategorii (POSIX.1). Zwykle &ldquor;C&rdquor;.
<p>
Dostêpne zmienne LC_*:
 <list compact>
<item>LC_CTYPE: Konwersja czcionki i wielko¶ci liter.
<item>LC_COLLATE: Porz±dek sortowania.
<item>LC_TIME: Format wy¶wietlania daty i godziny.
<item>LC_NUMERIC: Wy¶wietlanie liczb nie zwi±zanych z walut±
<item>LC_MONETARY: Formaty walutowe.
<item>LC_MESSAGES: Format wiadomo¶ci informacyjnych, diagnostycznych oraz
okre¶laj±cych interakcje programu.
<item>LC_PAPER: Rozmiar papieru.
<item>LC_NAME: Format nazw.
<item>LC_ADDRESS: Format wy¶wietlania adresu i lokalizacji.
<item>LC_TELEPHONE: Format wy¶wietlania numeru telefonu.
<item>LC_MEASUREMENT: Jednostki miary (metryczna lub inna)
<item>LC_IDENTIFICATION: Metadata o ustawieniach locale.
 </list>
<item>LANG: Je¶li nie przyjmuje warto¶ci NULL i LC_ALL jest niezdefiniowane,
warto¶æ wszystkich niezdefiniowanych kategorii LC_* jest ustawiana na t±
warto¶æ. (POSIX.1) Zwykle &ldquor;C&rdquor;.

</enumlist>
Zauwa¿, ¿e niektóre programy (np. Netscape 4) ignoruj± ustawienia LC_*.
<p>
Program <prgn>locale</prgn> mo¿e wy¶wietlaæ ustawienia locale i dostêpne
locale; przeczytaj <manref name="locale" section="1">. (Zapamiêtaj: <tt>locale
-a</tt> podaje wszystkie locale, o których istnieniu wie; <em>nie</em>
oznacza to, ¿e wszystkie s± dostêpne! Zobacz <ref id="activate-locales">.)

<sect1 id="ISO-locale">Format daty ISO 8601
<p>
Locale obs³uguje miêdzynarodowy standard formatu daty
<tt>yyyy-mm-dd</tt> (ISO 8601) poprzez locale <tt>en_DK</tt>, &mdash;
Angielski w Danii, co jest ¿artem :-)
Wydaje siê dzia³aæ jedynie w trybie tekstowym w <prgn>ls</prgn>.

<!-- beyond locale moved to below -->

<sect1 id="iso-8859-1">Przyk³ad dla US (ISO-8859-2)
<p>
Dodaj poni¿sze linie do pliku <file>~/.bash_profile</file>:
<example>
LC_CTYPE=en_US.ISO-8859-1
export LC_CTYPE
</example>

<sect1 id="france">Przyk³ad dla Francji, z walut± Euro (ISO-8859-15)
<p>
Dodaj poni¿sze linie do pliku <file>~/.bash_profile</file>:
<example>
LANG=fr_FR@euro
export LANG
LC_CTYPE=fr_FR@euro
export LC_CTYPE
</example>
<p>
Skonfiguruj klawiaturê jako francuskie &ldquor;AZERTY&rdquor;, jak to opisano w <ref
id="keyboard"> i dodaj francuskie strony podrêcznika systemowego
instaluj±c <package>manpages-fr</package>. Prawy Alt w US to
Alt-Gr w Europie. Naci¶niêcie tych klawiszy razem z innymi
tworzy liczne znaki diakrytyczne oraz znaki specjalne. Np Alt-Gr+E 
odpowiada za znak Euro.
<p>
Wiêkszo¶æ jêzyków zachodnio-europejskich mo¿e byæ skonfigurowana
podobnie.
<p>
Zobacz <url id="&debian-euro-support;" name="Debian Euro HOWTO">, jak
dodaæ obs³ugê nowej waluty Euro oraz
<url id="&debian-fr-howto;" 
name="Utiliser et configurer Debian pour le français"> 
po wiêcej informacji w jêzyku francuskim.

<sect1 id="x-cjk">Przyk³ad systemu dwujêzycznego (japoñski EUC i
ISO-8859-1)
<p>
Postawmy system dwujêzyczny: ja_JP.eucJP (japoñski EUC, tradycyjne
japoñskie ¶rodowisko uniksowe) w X-ach z angielskimi komunikatami oraz
datami w formacie ISO, oraz en_US.ISO-8859-1 (prawie wszystkie ASCII z
obs³ug± akcentowanych znaków) w trybie tekstowym.
<list>
<item>dodaj obs³ugê japoñskiego locale ja_JP.eucJP metod± opisan± w <ref id="l10n">.

<item>zainstaluj system konwersji oraz s³ownik Kana-to-Kanji:
  <list compact>
  <item><package>canna</package> &mdash; lokalny serwer (licencja &ldquor;free
beer&rdquor;), lub
  <item><package>freewnn-jserver</package> &mdash; sieciowy serwer
  (Public Domain)
  </list>

 <item>zainstaluj mechanizmy japoñskiego wej¶cia:
  <list compact>
  <item><package>kinput2-canna</package>&mdash; dla X-ów, lub
  <item><package>kinput2-canna-wnn</package>&mdash; dla X-ów, i
  <item><package>egg</package>&mdash; dzia³a bezpo¶rednio z Emacsem
  nawet w trybie tekstowym (opcjonalnie).
  </list>

 <item>terminal przystosowany do japoñskiego:
  <list compact>
  <item><package>kterm</package>&mdash; X (klasyczny),
  <item><package>mlterm</package>&mdash; X (³adny, czcionki zmiennej
  wielko¶ci), oraz
  </list>

 <item>dodaj wszystkie japoñskie czcionki
 
 <item>Skonfiguruj, jak opisano w <ref id="custom-x">. Pozwoli to na
 ¶rodowisko X, niezale¿ne od sposobu uruchamiania X
 (<prgn>startx</prgn>, <prgn>xdm</prgn>, ...)
  
 <item>stwórz plik <file>~/.xsession</file> dla ustawieñ zale¿nych od
 u¿ytkownika:

<example>
#!/bin/sh
# To sprawia, ¿e X-y dzia³aj± gdy przelogujê siê na roota za pomoc± su.
if [ -z "$XAUTHORITY" ]; then
        XAUTHORITY=$HOME/.Xauthority
        export XAUTHORITY
fi

# japoñskie ustawienia jako domy¶lne, locale C jako zapasowe
export LANG=ja_JP.eucJP     
# upewnij siê, ¿e nadpisujesz en_US.ISO-8859-1 u¿ywane w konsoli
export LC_CTYPE=ja_JP.eucJP
# chcê, by opisy menu by³y w jêzyku angielskim w ASCII :-)
export LC_MESSAGES=C
# aktywuj metodê wej¶ciow±
kinput2 &        
XMODIFIERS=@im=kinput2
export XMODIFIERS
# A mo¿e blackbox window manager (leciutki)
exec /usr/bin/blackbox
</example>

 <item>dodaj nastêpuj±ce linie w pliku <file>~/.bashrc</file>:
<example>
# Zmieñ ¶rodowisko jêzykowe w zale¿no¶ci od programu do emulacji konsoli.
# Pow³oki dostêpne w X-ach uruchamiaj± jedynie .bashrc (nie s± pow³okami
# logowania). Ogólne ustawienia ¶rodowiska dla X znajduj± siê w .xsession
if [ $TERM = kterm ] || [ $TERM = mlterm ]; then
     unset LC_ALL
     export LANG=C
     #export LANG=ja_JP.eucJP
# Dla formatu wy¶wietlania daty ISO rrrr-mm-dd, bardziej naturalnego dla
# Japoñczyków :-)
     export LC_TIME=en_DK.ISO-8859-1
     export LC_MESSAGES=C
     export LANGUAGE=ja_JP.eucJP:en_US.ISO-8859-1:C
     export LC_CTYPE=ja_JP.eucJP
else
     unset LC_ALL
     export LANG=C
     export LC_TIME=en_DK.ISO-8859-1
     export LANGUAGE=en_US.ISO-8859-1:C
     export LC_CTYPE=en_US.ISO-8859-1
fi
</example>

 <item>dodaj nastêpuj±ce linie w pliku <file>~/.muttrc</file>:
<example>
# Obs³uga UTF-8 nie jest popularna w powszechnym japoñskim ¶rodowisku EMACS
# 7 bitowe kodowanie iso-2002-jp jest prostsze dla wszystkich
# domy¶lna kolejno¶æ kodowañ = us-ascii --&gt; iso-8859-1 --&gt; utf-8
#set send_charset="us-ascii:iso-8859-1:utf-8"
#set allow_8bit=yes
set send_charset="us-ascii:iso-8859-1:iso-2022-jp"
set allow_8bit=no
</example>
 <item>uaktywnij XIM <prgn>kinput2</prgn> dla aplikacji w X-ach
  <list compact>
  <item>dodaj <tt>*inputMethod: kinput2</tt> do Twojego pliku <file>~/.Xresources</file>
  (wygl±da na to, ¿e Debian za³atwia to jako¶ automatycznie).
  <item>Niektóre programy, jak np. <prgn>mlterm</prgn> pozwalaj± tak¿e na
  ustawianie <tt>*inputMethod:</tt> i innych informacji dynamicznie,
  podczas dzia³ania (naci¶nij <strong>Ctrl-MouseButton-3</strong> w <prgn>mlterm</prgn>).
  </list>
 <item>uruchom X poprzez <tt>startx</tt> lub mened¿er wy¶wietlania
  (<prgn>xdm</prgn>, <prgn>gdm</prgn>, <prgn>kdm</prgn>, <prgn>wdm</prgn>, ...)
 <item>uruchom program kompatybilne z jêzykiem japoñskim takie, jak
  VIM6, (x)emacs21, mc-4.5, mutt-1.4, ...
  (Emacs wydaje siê najpopularniejszy, aczkolwiek osobi¶cie go nie
  u¿ywam).
 <item>naci¶nij <strong>Shift+Space</strong> aby w³±czyæ/wy³±czyæ japoñski
 tryb wej¶cia.
</list>
Zobacz tak¿e <url id="&suse-cjk;" name="SuSE pages for CJK">.

<sect1 id="x-utf-8">Przyk³ad UTF-8 w X
<p>
Ka¿dy bêdzie tego potrzebowa³ w przysz³o¶ci.
Zobacz <url id="&unicode-howto;" name="The Unicode HOWTO">.

<sect1 id="fb-utf-8">Przyk³ad UTF-8 w terminalu framebuffer
<p>
Wsparcie UTF-8 na terminalu FB jest zapewnione przez <package>bterm</package>
u¿ywany w <package>debian-installer</package>.

<sect1 id="beyond-locale">Poza locale
<p>
Kiedy po raz pierwszy starasz siê skonfigurowaæ <strong>narodowe
¶rodowisko jêzykowe</strong> zastanów siê nad u¿yciem <prgn>tasksel</prgn>
lub <prgn>aptitude</prgn>, aby dowiedzieæ siê jakie pakiety s±
instalowane, wybieraj±c odpowiadaj±ce im funkcje lokalizacyjne.
Wybór pakietów jest przydatny nawet w systemie wielojêzycznym. Je¶li
napotkasz konflikty podczas instalacji z Twoim ostro¿nie skonfigurowanym
systemem, unikaj instalowania pakietu powoduj±cego konflikt. Mo¿liwe, ¿e
bêdziesz musia³ u¿yæ <prgn>update-alternative</prgn> aby przywróciæ
oryginalny stan dla niektórych poleceñ, gdy¿ instalowane mog³y mieæ
wy¿szy priorytet od istniej±cych.
<p>
Wa¿ne nowe programy u¿ywaj± glibc 2.2 i przewa¿nie s±
umiêdzynarodowione. Wiêc specjalnie zlokalizowane wersje, jak
<prgn>jvim</prgn> dla VIM, mog± nie byæ potrzebne, gdy¿ wymagana
funkcjonalno¶æ jest oferowana przez wersjê 6.0 <prgn>vima</prgn> w X-ach.
Chocia¿ z tym ró¿nie bywa. Np. <prgn>jvim</prgn> posiada wersjê
skompilowan± z bezpo¶rednim wsparciem dla japoñskiej metody wej¶ciowej
(<prgn>canna</prgn>) nawet w terminalu tekstowym i lepiej rozwi±zuje
niektóre problemy specyficzne dla japoñskiego, wiêc wci±¿ mo¿esz na 
niego reflektowaæ :-)
<p>
Programy mog± potrzebowaæ konfiguracji wykraczaj±cej poza
<tt>locale</tt> aby zapewniæ komfortowe ¶rodowisko pracy. Pakiet
<package>language-env</package> i jego polecenie
<prgn>set-language-env</prgn> w istotny sposób u³atwiaj± ten proces.
<p>
Zobacz tak¿e dokument o internacjonalizacji, <url id="&intro-i18n;" 
name="Introduction to i18n">. Przeznaczony jest g³ównie dla programistów,
ale przydatny mo¿e byæ równie¿ dla administratorów.
</sect1>

</sect>
</chapt>

