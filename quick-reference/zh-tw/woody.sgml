<!-- CVS revision of this document "$Revision: 1.4 $"  -->
<!-- CVS revision of original english document "1.42" -->

<chapt id="woody">將 distribution 升級至 <tt>stable</tt>, <tt>testing</tt> 或 <tt>unstable</tt>

<![%f-ref;[
<p>
官方的升級通知發佈於 <url id="&stable-release;"> 和 <url id="&testing-release;"> (正在進行中)。

<p>
將系統升級到 <tt>stable</tt>, <tt>testing</tt> 或 <tt>unstable</tt> 必須依照以下步驟一一完成：
<list>
 <item> 升級到 Woody (如果您的系統比 Woody 更早)
 <item> 升級到 stable
 <item> 升級到 testing
 <item> 升級到 unstable
</list> 

如果跳過中間的版本，Debian無法保證能升級成功。

]]>

<sect id="woody-transition">從 Potato 到 Woody
<p>
以下的步驟是獨立出來介紹的，因為 Potato 的 APT 並不支援<manref name="apt_preferences" section="5">文件中的功能。
<p>
編輯<file>/etc/apt/sources.list</file>只留下 Woody 的來源之後，請依照下列步驟升級 APT 以及核心程式到 Woody 的版本：
<example>
# apt-get update
# apt-get install libc6 perl libdb2 debconf
# apt-get install apt apt-utils dselect dpkg
</example>
接下來請升級系統到 Woody。
<example>
# apt-get upgrade
# apt-get dist-upgrade
</example>

<sect id="testing-transition">升級前的準備
<p>
您可以透過網路安裝來升級目前的發行版本到另外一個。以下說明完成的方法。
<p>
首先取得 <tt>stable</tt> 的 repositories：
<example>
# cd /etc/apt
# cp -f sources.list sources.list.old 
# :&gt;sources.list  
# apt-setup noprobe 
</example>
如果您想升級到 <tt>testing</tt>，請加入 <tt>testing</tt> 的來源到該檔。如果您想升級到 <tt>unstable</tt>，請加入 <tt>unstable</tt> 的來源到該檔。
<example>
# cd /etc/apt
# grep -e "^deb " sources.list  &gt;srcs
# :&gt;sources.list  
# cp -f srcs sources.list
# sed -e "s/stable/testing/" srcs &gt;&gt;sources.list
# sed -e "s/stable/unstable/" srcs &gt;&gt;sources.list
# apt-get update
# apt-get install apt apt-utils
</example>
請看 <ref id="apt-install"> 中說明調效 <file>/etc/apt/sources.list</file> 和 <file>/etc/apt/preferences</file> 的藝術。
<p>
</sect>

<sect id="upgrade-system">升級
<p>
當您按照上述的說明設定好 <file>/etc/apt/sources.list</file> 和 <file>/etc/apt/preferences</file> 之後，您就可以進行升級的動作了。
<p>
值得注意的地方，從套件上載到<tt>unstable</tt>並移植到<tt>testing</tt>的這段時間內，會造成 &debian; <tt>testing</tt>延遲安裝含有安全性修正的軟體。
<p>
參閱 <ref id="package"> 了解套件處理基礎，遇到問題時請參閱 <ref id="apt-trouble">。

<sect1>使用 <prgn>dselect</prgn>
<p>
如果系統裝了許多套件的 <tt>-dev</tt> 等套件，推薦下面使用 <prgn>dselect</prgn> 的操作方法來進行套件的精細操作 (fine-grained package control)。
<example>
# dselect update  # 在升級前要先執行這一步
# dselect select  # 選擇附加的套件
</example>
當執行 <prgn>dselect</prgn> 時，所有你目前的套件都會被選擇， <prgn>dselect</prgn> 會基於 <tt>Depends</tt> ， <tt>Suggests</tt> 和 <tt>Recommends</tt> 來提示你附加的套件，如果不想添加任何套件，只需輸入 <tt>Q</tt> 退出 <prgn>dselect</prgn> 。
<example>
# dselect install
</example>
在安裝過程中，必須回答一些有關套件設定的問題，準備好你的筆記本花點時間處理它們。參閱 <ref id="dselect"> 。
<p>
使用 <prgn>dselect</prgn>看看，<strong>他做得還不錯 :)</strong>

<![%f-ref;[
<sect1>使用 <prgn>apt-get</prgn> 
<p>
]]>

<![%f-ref;[
<example>
# apt-get update
# apt-get -t stable upgrade
# apt-get -t stable dist-upgrade
# apt-get -t testing upgrade
# apt-get -t testing dist-upgrade
# apt-get -t unstable upgrade
# apt-get -t unstable dist-upgrade
</example>
當您將系統升級到 Sarge 時，建議用<prgn>aptitude</prgn>來取代<prgn>apt-get</prgn>。(<prgn>aptitude</prgn> 接受 <prgn>apt-get</prgn> 許多的功能和參數，甚至包含了上述的所有功能。)
<p>
利用目前 dselect 的設定來升級的方法：
<example>
# apt-get dselect-upgrade
</example>
<p>
請參閱 <ref id="depends"> 。
]]>
</sect>


</chapt>
