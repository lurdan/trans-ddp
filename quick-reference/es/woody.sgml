<!-- CVS revision of original english document "1.37"  -->
<chapt id="woody">Actualizando una distribución

<![%f-ref;[
<p>
Las notas de versión oficiales para actualizar están en
<url id="&stable-release;">
y
<url id="&testing-release;"> (en preparación).
<p>
Los pasos para actualizar el sistema a la versión <tt>de prueba/inestable</tt>
son:
<list>
 <item> actualizar el APT del sistema a la versión de Woody si su sistema es Potato 
 ya que el APT de Potato no posee las características descriptas en
 <manref name="apt_preferences" section="5"> de Woody.
 <item> modificar los archivos <file>/etc/apt/sources.list</file> y
 <file>/etc/apt/preferences</file>, para incluir referencias a la sección
 "testing" ("de prueba") de los repositorios que utiliza. Si lo desea, también
 puede incluir referencias a la sección "unstable" ("inestable")
 <item> actualizar la lista de paquetes e instalar aquellos paquetes que se
 pueden actualizar.
</list> 
]]>


<sect id="woody-transition">Transición a la versión Woody de APT
<p>
La actualización a través de la red del sistema APT y de algunos paquetes fundamentales a la
versión se puede realizar de la siguiente manera luego de incluir repositorios
de la rama  <tt>estable</tt> en el <file>/etc/apt/sources.list</file> 
si aún desea usar Potato.
<example>
# apt-get update
# apt-get install libc6 perl libdb2 debconf
# apt-get install apt apt-utils dselect dpkg
</example>

<sect id="testing-transition">Preparación para la transición (<tt>stable</tt>
a <tt>testing</tt>)
<p>
Utilizar la versión <tt>de prueba</tt> de &debian; tiene como efecto colateral
la lenta solución de los fallos de seguridad.  Por lo tanto, tenga cuidado.
<p>
La actualización a la versión <tt>de prueba</tt> (<tt>testing</tt>) se puede realizar de la
siguiente manera (ejecute el guión 
<url id="&examples;" name="go-woody"> para hacerlo todo mediante un sólo
comando):
<p>
Vacie el archivo <file>sources.list</file> actual:

<example>
# cd /etc/apt
# cp -f sources.list sources.anterior 
# :&gt;sources.list  
</example>
<p>
Obtenga una lista reciente de repositorios para la versión <tt>estable</tt>
(<tt>stable</tt>)
<example>

# cd /
# apt-setup noprobe 
    ... seleccione los repositorios, accesibles mediante HTTP o FTP
</example>
Añada la sección <tt>testing</tt> a la lista nueva.
Las líneas <tt>deb-src</tt> están comentadas.
<example>
# cd /etc/apt
# grep -e "^deb " sources.list  &gt;sources.deb
# grep -e "^deb-" sources.list  &gt;sources.src
# sed -e "s/stable/testing/"  sources.deb \
     &gt;&gt;sources.list
# sed -e "s/stable/testing/" sources.src | \
     sed -e "s/^deb-/#deb-/"  &gt;&gt;sources.list


# apt-get update
# apt-get install apt apt-utils
# cat &gt;preferences &lt;&lt;EOF
 Package: *
 Pin: release a=testing
 Pin-Priority: 600
 
 Package: *
 Pin: release a=unstable
 Pin-Priority: 50

 EOF
</example>
Opcionalmente, añada la sección "unstable" de los archivos.
<example>

# sed -e "s/stable/unstable/" sources.deb \
  &gt;&gt;sources.list
# sed -e "s/stable/unstable/" sources.src | \
 sed -e "s/^deb-/#deb-/"  &gt;&gt;sources.list
</example>
Véase <ref id="apt-install"> configurar inteligentemente  
<file>/etc/apt/sources.list</file> y <file>/etc/apt/preferences</file>.

<p>
Ahora puede actualizar el sistema, usando uno de los métodos de la siguiente
sección.
</sect>

<sect id="upgrade-system">Actualizar el sistema &debian;
<p>
Luego de configurar en forma adecuada los archivos
<file>/etc/apt/sources.list</file> y <file>/etc/apt/preferences</file>, el
sistema se puede actualizar a la versión <tt>de prueba</tt> (testing).
Véase <ref id="package"> para los fundamentos y  
<ref id="apt-trouble"> si tropieza con problemas.

<sect1>Mejor método de actualización usando <prgn>dselect</prgn>
<p>
Si un sistema tiene muchos paquetes que incluye paquetes <tt>-dev</tt>, etc.,
se recomienda el siguiente método usando <prgn>dselect</prgn> para un control
minucioso de paquetes.
<example>
# dselect update # siempre hacer esto antes de actualizar
# dselect select # seleccione los paquetes adicionales
</example>
Todos los paquetes actuales serán seleccionados al arrancar <prgn>dselect</prgn>.
<prgn>dselect</prgn> puede proponerle otros paquetes: <tt>dependientes</tt>,
<tt>sugeridos</tt> y <tt>recomendados</tt>.
Si no desea añadir ningún paquete, sólo pulse <tt>Q</tt>
para abandonar <prgn>dselect</prgn>.
<example>
# dselect install
</example>
Deberá responder algunas preguntas para la configuración para esta parte del
proceso, por lo tanto tome nota y dedique parte de su tiempo a esta parte.
Véase <ref id="dselect">.
<p>
Use <prgn>dselect</prgn>. <strong>Siempre funciona :)</strong>

<![%f-ref;[
<sect1>Método obsoleto de actualización usando <prgn>apt-get</prgn>
<p>
<strong>El uso de <prgn>apt-get</prgn> que se describe a continuación está muy
extendido pero <em>no</em>se recomienda para actualizaciones del
sistema.</strong>
]]>

Si necesita actualizar sin <prgn>dselect</prgn> a partir de Woody, considere
el uso de <prgn>aptitude</prgn> u otras opciones.

<![%f-ref;[
<p>
Si un sistema no posee muchos paquetes o el archivo &debian; no experimentó
mayores cambios, lo siguiente puede ser -a veces- suficiente.
<example>
# apt-get update     # siempre hacer esto antes de actualizar
 ... para actualizar el sistema con selecciones "depends": 
# apt-get upgrade    # siempre hacer esto antes de actualizar
 ... para actualizar todo el sistema con selecciones "depends": 
# apt-get -u dist-upgrade
 ... o para actualizar y conservar la configuración actual de dselect (mejor
 solución):
# apt-get -u dselect-upgrade # utiliza las selecciones de dselect
</example>
<p>
Puesto que este método de actualización utiliza <prgn>apt-get</prgn>, el
manejo de los paquetes <em>recomendados</em> y <em>sugeridos</em> es limitado.
Véase <ref id="depends">.
]]>

</sect>

</chapt>

