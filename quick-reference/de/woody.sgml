<!-- CVS revision of this document "$Revision: 1.5 $"  -->
<!-- CVS revision of original english document "1.34"  -->
<!-- Last complete proofreading (and comparing with the original english
     file) was done for rev. 1.32 (en). -->
<chapt id="woody">Aktualisieren einer Distribution auf testing

<![%f-ref;[
<p>
Offizielle Hinweise für die Aktualisierung finden sich unter 
<url id="&stable-release;">
und
<url id="&testing-release;"> (befindet sich in Arbeit).

<p>
Der Prozess zur Aktualisierung des Systems auf <tt>testing/unstable</tt> ist: 
<list>
 <item>Zunächst ist das APT System auf die Woody Version zu aktualisieren,
       wenn das aktuelle System Potato ist, da Potato's APT nicht über die
       in Woody's <manref name="apt_preferences" section="5"> beschriebenen
       Fähigkeiten verfügt.
 <item>Modifizierung der <file>/etc/apt/sources.list</file> und
       <file>/etc/apt/preferences</file> Dateien, um Verweise auf den
       "testing" Abschnitt der benutzten Repositories hinzuzufügen. Sollte
       es gewünscht sein, können auch Verweise auf den "unstable" Abschnitt
       hinzugefügt werden.
 <item>Aktualisierung der Paketlisten und Installation aller Pakete die sich
       nun upgraden lassen.
</list> 
]]>

<sect id="woody-transition">Übergang von APT auf die Woody Version
<p>
Ein Netzwerk Upgrade des APT Systems und einiger Kernpakete zur Woody Version 
kann wie folgt nach Einbinden von <tt>stable</tt> in
<file>/etc/apt/sources.list</file> erreicht werden, wenn Sie noch Potato
nutzen.
<example>
# apt-get update
# apt-get install libc6 perl libdb2 debconf
# apt-get install apt apt-utils dselect dpkg
</example>

<sect id="testing-transition">Vorbereitung des Übergangs ("stable" nach
                              "testing")
<p>
Das Verwenden der <tt>testing</tt> Ausgabe von &debian; hat den Nebeneffekt,
das Sicherheitsupdates nur langsam eingespielt werden. Seien Sie gewarnt.
<p>
Eine Aktualisierung auf "testing" über das Netzwerk kann folgendermaßen 
durchgeführt werden (starten Sie das Skript <url id="&examples;" 
name="go-woody">, um dies in einem Schritt zu erledigen):
<p>
Neuerstellung der existierenden sources.list Datei
<example>
# cd /etc/apt
# cp -f sources.list sources.old
# :&gt;sources.list
</example>
<p>
Erzeugen einer sauberen Liste von Repositories für "stable"
<example>
# cd /
# apt-setup noprobe 
  ... auswählen der Repositories, auf die mit http oder ftp
      Methoden zugegriffen wird
</example>
Hinzufügen des "testing" Abschnitts zu dieser neuen Liste. Die
<tt>deb-src</tt> Zeilen werden auskommentiert.
<example>
# cd /etc/apt
# grep -e "^deb " sources.list &gt;sources.deb
# grep -e "^deb-" sources.list &gt;sources.src
# sed -e "s/stable/testing/" sources.deb &gt;&gt;sources.list
# sed -e "s/stable/testing/" sources.src | \
     sed -e "s/^deb-/#deb-/" &gt;&gt;sources.list

# apt-get update
# apt-get install apt apt-utils
# cat &gt;preferences &lt;&lt;EOF
 Package: *
 Pin: release a=testing
 Pin-Priority: 600
 
 Package: *
 Pin: release a=unstable
 Pin-Priority: 50

 EOF
</example>
Optional kann "unstable" hinzugefügt werden.
<example>
# sed -e "s/stable/unstable/" sources.deb &gt;&gt;sources.list
# sed -e "s/stable/unstable/" sources.src | \
     sed -e "s/^deb-/#deb-/" &gt;&gt;sources.list
</example>
Vergleiche <ref id="apt-install"> für genaueres zum Tuning von
<file>/etc/apt/sources.list</file> und <file>/etc/apt/preferences</file>.
<p>
Nun kann ein Update und Upgrade wie im nächsten Abschnitt beschrieben
durchgeführt werden.
</sect>

<sect id="upgrade-system">Aktualisierung des &debian; Systems
<p>
Nach den korrekten Anpassungen von <file>/etc/apt/sources.list</file> und 
<file>/etc/apt/preferences</file>, kann eine Aktualisierung des Systems
auf <tt>testing</tt> durchgeführt werden. Vergleichen Sie mit
<ref id="package"> für die Grundlagen und sollten dabei Fehler auftreten,
schauen Sie in <ref id="apt-trouble">.

<sect1>Beste Upgrade Vorgehensweise mittels <prgn>dselect</prgn>
<p>
Wenn ein System zahlreiche Pakete enthält, die <tt>-dev</tt>-Pakete, etc.
nutzen, wird die im folgenden beschriebene Vorgehensweise mittels
<prgn>dselect</prgn> empfohlen, da hier eine feinere Kontrolle der Pakete
möglich ist.
<example>
# dselect update # muss vor jeder Aktualisierung ausgeführt werden
# dselect select # Auswahl zusätzlicher Pakete
</example>
All Ihre aktuellen Pakete werden ausgewählt, wenn <prgn>dselect</prgn>
startet. <prgn>dselect</prgn> verlangt dabei eventuell nach zusätzlichen
Paketen, basierend auf <tt>Abhängigkeiten</tt>, <tt>Vorschlägen</tt> und
<tt>Empfehlungen</tt>. Möchten Sie keine Pakete hinzufügen, drücken Sie
einfach <tt>Q</tt>, um <prgn>dselect</prgn> erneut zu beenden.
<example>
# dselect install
</example>
Sie werden einige Paket Konfigurationsfragen während dieses Teils des
Prozesses beantworten müssen, halten Sie also Ihre Notizen bereit und planen
Sie genug Zeit dafür ein. Vergleiche <ref id="dselect">.
<p>
Nutzen Sie <prgn>dselect</prgn>. <strong>Dies funktioniert immer :)</strong>

<![%f-ref;[
<sect1>Unerwünschte Vorgehensweise mittels <prgn>apt-get</prgn>
<p>
<strong>Von der unten beschriebenen Verwendung von <prgn>apt-get</prgn> für
die Aktualisierung des Systems wird abgeraten, auch wenn dies weit verbreitet
ist.</strong>
]]>

Wenn ein System ab Woody oder höher ohne <prgn>dselect</prgn> aktualisiert
werden muss, sollte <prgn>aptitude</prgn> und andere Alternativen in Erwägung
gezogen werden.

<![%f-ref;[
<p>
Wenn auf einem System nur wenige Pakete installiert sind oder im 
&debian;-Archiv keine größeren Änderungen vorhanden sind, kann die 
im folgenden beschriebene Vorgehensweise (manchmal) ausreichen.
<example>
# apt-get update  # muss vor jedem Upgrade ausgeführt werden
 ... aktualisieren des Systems einschließlich der Abhängigkeiten:
# apt-get upgrade # muss vor jedem Upgrade ausgeführt werden
 ... aktualisieren des gesamten Systems einschließlich der
     Abhängigkeiten:
# apt-get -u dist-upgrade
 ... aktualisieren und Beibehalten der aktuellen Einstellungen von
     dselect (neu, besser):
# apt-get -u dselect-upgrade   # verwenden des dselect Auswahl
</example>
<p>
Da diese Upgrade Methode <prgn>apt-get</prgn> nutzt, ist die Verwendung der
<em>Empfehlungen</em> ("recommends") und <em>Vorschläge</em> ("suggests") nur
eingeschränkt möglich. Siehe <ref id="depends">.
]]>
</sect>

</chapt>
