<!-- CVS revision of this document "$Revision: 1.3 $"  -->
<!-- CVS revision of original english document "1.22"  -->
<chapt id="woody">Aktualisieren einer Distribution

<![%f-ref;[
<p>
Offizielle Hinweise für die Aktualisierung finden sich unter 
<url id="&stable-release;"> (Distribution stable, stabile Version
und
<url id="&testing-release;"> (Distribution testing, Betaversion).

<sect>Vorbereitung der Migration von "stable" auf "testing"

<p>
Eine Aktualisierung auf "testing" über das Netzwerk kann folgendermassen 
durchgeführt werden (das Ausführen des Skriptes <url id="&examples;" 
name="go-woody"> erledigt diese Schritte automatisch durch ein Kommando):

<example>
# cd /etc/apt
# cp -f sources.list sources.old 
# :&gt;sources.list  
# cd /
# apt-setup noprobe 
 ... auswählen von http oder ftp
# cd /etc/apt
# grep -e "^deb " sources.list             &gt;sources.deb
# grep -e "^deb-" sources.list             &gt;sources.src
# sed -e "s/^d/#d/" \
  /usr/share/doc/apt/examples/sources.list &gt;sources.list
# sed -e "s/stable/testing/"  \
  sources.deb &gt;&gt;sources.list
# apt-get update
# apt-get install apt apt-utils
# cat &gt;preferences &lt;&lt;EOF
 Package: *
 Pin: release a=testing
 Pin-Priority: 700
 
 Package: *
 Pin: release a=unstable
 Pin-Priority: 70

 EOF
# sed -e "s/stable/unstable/" sources.deb \
  &gt;&gt;sources.list
# sed -e "s/stable/unstable/" sources.src | \
 sed -e "s/^deb-/#deb-/"  &gt;&gt;sources.list
</example>

Empfehlungen für <file>/etc/apt/preferences</file> (siehe <manref
name="apt_preferences" section="5">):
<example>
verfolgen von stable:            ändern der Pin-Priority von testing auf 80
verfolgen von testing:           beibehalten (installieren durch /unstable)
verfolgen von testing(unstable): ändern der Pin-Priority von unstable auf 600
verfolgen von unstable(testing): ändern der Pin-Priority von unstable auf 800
</example>

Es wird empfohlen, sich für die Auswahl der Pin-Priorität in der 
obenstehenden Tabelle von oben nach unten zu bewegen, entsprechend 
demZeitpunkt unmittelbar nach der Veröfentlichung einer Distribution bin zum 
Zeitpunkt des Einfrierens für die kommende Veröffentlichung.

<p>Beispiele für die <file>/etc/apt/preferences</file>, in denen bestimmte 
wichtige Pakete in stabileren Versionen beibehalten und weniger wichtige 
Pakete auf die aktuellsten Versionen aktualisiert werden im Verzeichnis <url 
id="&examples;" name="examples subdirectory"> 
als <file>preferences.testing</file> und <file>preferences.unstable</file> zu 
finden. Die exemplarische Konfigurationsdatei <file>preferences.stable</file> 
erzwingt ein Downgrade aller Pakete auf die Distribution "stable".

<p>Stellen Sie sicher, dass APT ggf. einen Prox nutzt, indem Sie die 
Umgebungsvariable <tt>http_proxy</tt> oder den http- Wert in der Datei  
<file>/etc/apt/apt.conf</file> setzen.

<p>Die hier beschriebene Vorgehensweise aktualisiert nur APT und eine 
geringe Anzahl an Paketen, um Probleme durch ungelöste 
Abhängigkeiten zu vermeiden.</sect>]]>

<sect>Aktualisieren auf "testing"

<p>Nachdem die Vorbereitungen aus dem obigen Abschnitt durchgeführt 
wurden, kann eine Aktualisierung des Systems durchgeführt werden.

<sect1>Empfohlene Vorgehensweise mittels <prgn>dselect</prgn>

<p>Wenn ein System zahlreiche <tt>-dev</tt>-Pakete enthält, wird die im 
folgenden beschriebene Vorgehensweise mittls <prgn>dselect</prgn> empfohlen, 
da hier eine feinere Kontrolle der Pakete möglich ist.

<example>
# dselect update  # Muss vor jeder Aktualisierung ausgeführt werden.
# dselect select  # Auswählen der vorgeschlagenen und empfohlenen Pakete.
# dselect install # Ausführen des Installationsvorgangs.
</example>

<prgn>dselect</prgn> funktioniert immer :)

<![%f-ref;[
<sect1>Unerwünschte Vorgehensweise mittels <prgn>apt-get</prgn>

<p><strong>von der Verwendung von <prgn>apt-get</prgn> für für 
Aktualisierung des Systems wird abgeraten, auch wenn dies weit verbreitet 
ist.</strong>]]> Wenn ein System ab Woody oder höher ohne 
<prgn>dselect</prgn> aktualisiert werden muss, sollte <prgn>aptitude</prgn> 
und andere Alternativen in Erwägung gezogen werden.

<![%f-ref;[
<p>Wenn auf einem System nur wenige Pakete installiert sind oder im 
&debian;-Archiv keine grösseren Änderungen vorhanden sind, kann die 
im folgenden beschriebene Vorgehensweise ausreichen.

<example>
# apt-get update  # Muss vor jeder Aktualisierung ausgeführt werden.

... Aktualisieren eines Systems einschliesslich der Abhängigkeiten:
# apt-get upgrade # Muss vor jeder Aktualisierung ausgeführt werden. 

... Aktualisieren des gesamten Systems einschliesslich der Abhängigkeiten:
# apt-get -u dist-upgrade

... Aktualisieren und Beibehalten der aktuellen Einstellungen von dselect
    (neu, besser):
# apt-get -u dselect-upgrade   # Verwenden des Ergebnisses von dselect setup.
</example>

<p>Da diese Vorgehensweise der Aktualisierung <prgn>apt-get</prgn> verwendet, 
ist die Verwendung der <em>Empfehlungen</em> ("recommends") und 
<em>Vorschläge</em> ("suggests") nur eingeschänkt möglich. Siehe <ref 
id="depends">.]]>
</sect>

<sect>Konfiguration von Woody ("Stable")

<p>Auf einem frisch installierten Woody-System sollten folgende 
Konfigurationsdateien nachbearbeitet werden: 
<file>/etc/apt/sources.list</file>,<file>/etc/apt/apt.conf</file> und 
<file>/etc/apt/preferences</file>; dadurch wird dieselbe Struktur erzielt, die 
in den obigen Abschnitten beschrieben wurde.

<p>In der letzten stabilen Debian-Version, Potato, verfügte APT allerdings 
noch nicht über die im Abschnitt <manref name="apt_preferences" section="5"> 
beschriebenen Leistungsmerkmale.</sect><![%f-ref;[<sect id="spy">Optimieren 
der <file>sources.list</file>

<p>Automatisches Erstellen der <file>sources.list</file> auf der Basis von 
Netzwerk-Latenz und -Bandbreite:

<example>
# apt-get install apt-spy
# cd /etc/apt ; mv sources.list sources.list.org
# apt-spy -d testing -l sources.apt
</example>

<prgn>netselect-apt</prgn> ähnelt <prgn>apt-spy</prgn>.
Es erstellt eine vollständigere <file>sources.list</file>, verwendet 
jedoch eine einfachere Methode um den besten Spiegel-Server auszuwählen 
(Vergleich der Ping-Zeiten).<prgn>apt-setup</prgn> ist die manuelle 
Methode, um Spiegel-Server in die <file>sources.list</file> einzutragen, es 
wird derzeit jedoch als die beste Möglichkeit zur Auswahl von Spiegel-Servern 
betrachtet, bis <prgn>apt-spy</prgn> verbessert wurde.

<p>Anmerkung: Diese Versuche zur Optimierung brachten für mich keine 
nennenswerten Verbesserungen. Die Auswahl nahegelegener Sites mittels  
<prgn>apt-setup</prgn> war ausreichend.</sect>]]>
</chapt>
