== The X window system

// vim: set sts=2 expandtab:
// Use ":set nowrap" to edit table

The http://en.wikipedia.org/wiki/X_Window_System[X window system] on the Debian system is based on the source from http://www.x.org/[X.Org]. As of January 2009, they are X11R7.1(etch), X11R7.3(lenny) and X11R7.3(sid).  

=== Key packages

There are a few (meta)packages provided to ease installation.

.List of key (meta)packages for X window.
[grid="all"]
`---------------------------`-------------`------------`----------------------------------------------------------------------------------------------------------------------------------------------------------------
(meta)package               popcon        size         description                                                                                                                                                      
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
`xorg`                      @@@popcon1@@@ @@@psize1@@@ This metapackage provides the X libraries, an X server, a set of fonts, and a group of basic X clients and utilities.                                            
`xserver-xorg`              @@@popcon1@@@ @@@psize1@@@ This package provides the full suits of the X server and its configuration.                                                                                      
`xbase-clients`             @@@popcon1@@@ @@@psize1@@@ This package provides a miscellaneous assortment of X clients.                                                                                                   
`x11-common`                @@@popcon1@@@ @@@psize1@@@ This package contains the filesystem infrastructure for the X window system.                                                                                     
`xorg-docs`                 @@@popcon1@@@ @@@psize1@@@ This package contains miscellaneous documentation for the X.Org software suite.                                                                                  
`xspecs`                    @@@popcon1@@@ @@@psize1@@@ This package contains X protocol, extension, and library technical specifications.                                                                               
`menu`                      @@@popcon1@@@ @@@psize1@@@ This package generates the Debian menu for all menu-aware applications.                                                                                          
`gksu`                      @@@popcon1@@@ @@@psize1@@@ This package provides a Gtk+ frontend to `su`(1) or `sudo`(8).
`menu-xdg`                  @@@popcon1@@@ @@@psize1@@@ This package converts the Debian menu structure to the http://en.wikipedia.org/wiki/Freedesktop.org[freedesktop.org] xdg menu structure.                         
`xdg-utils`                 @@@popcon1@@@ @@@psize1@@@ This package provides utilities to integrate desktop environment provided by the http://en.wikipedia.org/wiki/Freedesktop.org[freedesktop.org].                  
`gnome-desktop-environment` @@@popcon1@@@ @@@psize1@@@ metapackage for the stadard http://en.wikipedia.org/wiki/GNOME[GNOME] desktop environment.                                                                       
`kde-core`                  @@@popcon1@@@ @@@psize1@@@ metapackage for the core http://en.wikipedia.org/wiki/KDE[KDE] desktop environment.                                                                              
`xfce4`                     @@@popcon1@@@ @@@psize1@@@ metapackage for the http://en.wikipedia.org/wiki/Xfce[Xfce] lightweight desktop environment.                                                                     
`lxde-core`                 @@@popcon1@@@ @@@psize1@@@ metapackage for the http://en.wikipedia.org/wiki/LXDE[LXDE] lightweight desktop environment.                                                                     
`fluxbox`                   @@@popcon1@@@ @@@psize1@@@ http://en.wikipedia.org/wiki/Fluxbox[Fluxbox]: package for highly configurable and low resource http://en.wikipedia.org/wiki/X_window_manager[X window manager]. 
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

For the basics of X, refer to `X`(7), http://www.tldp.org/HOWTO/XWindow-User-HOWTO.html[the LDP XWindow-User-HOWTO].  

=== Setting up desktop environment

A http://en.wikipedia.org/wiki/Desktop_environment[desktop environment] is usually a combination of a http://en.wikipedia.org/wiki/X_window_manager[X window manager], a file manager, and a suite of compatible utility programs.

You can setup a full http://en.wikipedia.org/wiki/Desktop_environment[desktop environment] such as http://en.wikipedia.org/wiki/GNOME[GNOME], http://en.wikipedia.org/wiki/KDE[KDE], http://en.wikipedia.org/wiki/Xfce[Xfce], or http://en.wikipedia.org/wiki/LXDE[LXDE], from the `aptitude` under the task menu.

TIP: Task menu may be out of sync with the latest package transition state under Debian `unstable`/`testing` environment. In such situation, you need to deselect some (meta)packages listed under `aptitude`(8) task menu to avoid package conflicts.  When deselecting (meta)packages, you must select certain packages providing their dependencies if you need to keep them.

You may alternatively setup a simple environment manually just with a http://en.wikipedia.org/wiki/X_window_manager[X window manager] such as http://en.wikipedia.org/wiki/Fluxbox[Fluxbox].

See http://www.xwinman.org[Window Managers for X] for the guide to the X window manager and the desktop environment.

==== Debian menu

http://www.debian.org/doc/packaging-manuals/menu.html/[Debian menu system] provides a general interface for both text- and X-oriented programs with `update-menus`(1) from the `menu` package.  Each package installs its menu data in the "`/usr/share/menu/`" directory. See "`/usr/share/menu/README`".

==== Freedesktop.org menu

Each package which is compliant to Freedesktop.org\'s xdg menu system installs its menu data provided by "`\*.desktop`" under "`/usr/share/applications/`". Modern desktop environments which are compliant to Freedesktop.org standard use these data to generate their menu using the `xdg-utils` package.  See "`/usr/share/doc/xdg-utils/README`".

==== Debian menu under GNOME desktop environment

In order to obtain access to the traditional Debian menu under GNOME desktop environment, you must install the `menu-xdg` package, click "System" -> "Preference" -> "Main Menu", and check the box for "Debian".

TIP: You may need to do the similar for other modern desktop environments which are compliant to Freedesktop.org standard.

=== The server/client relationship

The X window system is activated as a combination of the server and client programs. The meaning for the words **server** and **client** with respect to the words **local** and **remote** requires attention here:


.List of server/client terminology.
[grid="all"]
`----------------------`-------------------------------------------------------------------------------------
type                   description                                                                           
-------------------------------------------------------------------------------------------------------------
**X server**           a program run on a **local host** connected to the user\'s display and input devices. 
**X client**           a program run on a **remote host** that processes data and talks to the X server.     
**application server** a program run on a **remote host** that processes data and talks to the clients.      
**application client** a program run on a **local host** connected to the user\'s display and input devices. 
-------------------------------------------------------------------------------------------------------------

=== The X server

See `xorg`(1) for X server information.

==== The (re)configuration of the X server

NOTE: X server (post-`lenny`) is rewitten to use more information from standardized OS services such as http://en.wikipedia.org/wiki/HAL_(software)[HAL] and http://en.wikipedia.org/wiki/D-Bus[D-bus], for its configuration than that from "`/etc/X11/xorg.conf`".  So contents in "`/etc/X11/xorg.conf`" are getting less.  You may need to http://wiki.debian.org/XStrikeForce/InputHotplugGuide[work around transitional problems of X server].

To (re)configure an X server,

--------------------
# dpkg-reconfigure --priority=low x11-common
# dpkg-reconfigure --priority=low xserver-xorg
--------------------

will generate a new "`/etc/X11/xorg.conf`" file using `dexconf`(1). 

If you have manually edited this "`/etc/X11/xorg.conf`" file but would like it to be automatically updated again, run the following command:

----- 
# sudo dpkg-reconfigure -phigh xserver-xorg                               
-----

Please check your X configuration  with respect to the specification of your monitor carefully.  For the large high resolution CRT monitor, it is a good idea to set the refresh rate as high as your monitor can handle (85 Hz is great, 75 Hz is OK) to reduce flicker.  For the LCD monitor, slower standard refresh rate (60Hz) is usually fine due to its slow response.

NOTE: Be careful not to use too high refresh rate which may cause fatal hardware failure of your monitor system.

==== The connection methods to the X server

There are several ways of getting the "X server" (**display** side) to accept connections from an "X client" (**application** side):

.List of connection methods to the X server.
[grid="all"]
`---------------------------------------------`----------------`-------------`------------`---------`----------`-----------------------------------------------
method                                        package          popcon        size         user      encryption pertinent use                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------
`xhost` command                               `xbase-clients`  @@@popcon2@@@ @@@psize2@@@ unchecked no         deprecated                                      
`xauth` command                               `xbase-clients`  @@@popcon2@@@ @@@psize2@@@ checked   no         for local connection via pipe                   
`ssh -X` command                              `openssh-client` @@@popcon2@@@ @@@psize2@@@ checked   yes        for remote network connection                   
GNOME display manager                         `gdm`            @@@popcon2@@@ @@@psize2@@@ checked   no(XDMCP)  for local connection via pipe                   
KDE display manager                           `kdm`            @@@popcon2@@@ @@@psize2@@@ checked   no(XDMCP)  for local connection via pipe                   
X display manager                             `xdm`            @@@popcon2@@@ @@@psize2@@@ checked   no(XDMCP)  for local connection via pipe                   
WindowMaker display manager                   `wdm`            @@@popcon2@@@ @@@psize2@@@ checked   no(XDMCP)  for local connection via pipe                   
LTSP display manager                          `ldm`            @@@popcon2@@@ @@@psize2@@@ checked   yes        for remote SSH network connection (thin client) 
---------------------------------------------------------------------------------------------------------------------------------------------------------------

// Secure display manager                        `sdm`            @@@popcon2@@@ @@@psize2@@@ checked   yes        for remote SSH network connection (thin client) 

WARNING:  Do not use remote http://en.wikipedia.org/wiki/Transmission_Control_Protocol[TCP]/http://en.wikipedia.org/wiki/Internet_Protocol[IP] connection over **unsecured** network for X connection unless you have very good reason such as use of encryption.  A remote TCP/IP socket connection without encryption is prone to the **eavesdropping attack** and is disabled by default on the Debian system.  Use "`ssh -X`".

WARNING:  Do not use http://en.wikipedia.org/wiki/X_display_manager[XDMCP connection] over **unsecured** network either.  It sends data via http://en.wikipedia.org/wiki/User_Datagram_Protocol[UDP]/http://en.wikipedia.org/wiki/Internet_Protocol[IP] without encryption and prone to the **eavesdropping attack**.

TIP: You can **dare** to enable remote TCP/IP connection by setting "`DisallowTCP=false`" in "`/etc/gdm/gdm.conf`" and by removing "`-nolisten`" from lines found by "`find /etc/X11 -type f -print0 | xargs -0 grep nolisten`", if you are in the fully **secured** environment.

TIP: LTSP stands for http://en.wikipedia.org/wiki/Linux_Terminal_Server_Project[Linux Terminal Server Project].

=== Starting the X window system

The X Window system is usually started as an X session which is the combination of an X server and connecting X clients.  For normal desktop system, both of them are executed on the workstation.

To start the X Window system,

- `startx` command started from the command line, or 
- one of the http://en.wikipedia.org/wiki/X_display_manager[X display manager] daemon programs `\*dm` started from the end of the start up script in "`/etc/rc?.d/`" directory ("`?`" corresponding to the runlevel)
are used to start the http://en.wikipedia.org/wiki/X_session_manager[X session]. (The start up script for the display manager daemons checks the content of the "`/etc/X11/default-display-manager`" file before actually executing themselves.)

TIP: See <<_specific_locale_only_under_x_window>> for initial environment variables of the X display manager.

Essentially, all these programs execute the "`/etc/X11/Xsession`" script.  Then the "`/etc/X11/Xsession`" script performs run-parts like action to execute scripts in the "`/etc/X11/Xsession.d/`" directory. This is essentially an execution of a first program which is found in the following order with the `exec` builtin command:

1. The script specified as the argument of "`/etc/X11/Xsession`" by the X display manager, if it is defined.
2. The "`\~/.xsession`" or "`\~/.Xsession`" script, if it is defined.
3. The "`/usr/bin/x-session-manager`" command, if it is defined.
4. The "`/usr/bin/x-window-manager`" command, if it is defined.
5. The "`/usr/bin/x-terminal-emulator`" command, if it is defined.

This process is affected by the content of "`/etc/X11/Xsession.options`".  The exact programs to which these "`/usr/bin/x-\*`" commands point, are determined by the Debian alternative system and changed by "`update-alternatives --config x-session-manager`", etc.

==== Starting X session with gdm

`gdm`(1) lets you select the session type (or desktop environment: <<_setting_up_desktop_environment>>), and language (or locale: <<_the_locale>>) of the X session from its menu.  It keeps the selected default value in "`\~/.dmrc`" as, e.g.:

--------------------
[Desktop]
Session=default
Language=ja_JP.UTF-8
--------------------

==== Customizing the X session (classic method)

On a system where "`/etc/X11/Xsession.options`" contains a line "`allow-user-xsession`" without preceding "`#`" characters, any user who defines "`\~/.xsession`" or "`\~/.Xsession`" will be able to customize the action of "`/etc/X11/Xsession`" by completely overiding the system code. The last command in the "`\~/.xsession`" file should use form of "`exec some-window/session-manager`" to start your favorite X window/session managers.

==== Customizing the X session (new method)

Here are new methods to customize the X session without completely overiding the system code as above.


- The display manager `gdm` can select a specific session and set it as the argument of "`/etc/X11/Xsession`".
- The "`\~/.xsessionrc`" file is executed as a part of start up process (desktop independent.)
- The "`\~/.gnomerc`" file is executed as a part of start up process. (GNOME desktop only)
- The GUI program based session management software can use the "`\~/.gnome2/session`" file etc..

==== Connecting a remote X client via SSH

The use of "`ssh -X`" enables a secure connection from a local X server to a remote application server.


- Set "`X11Forwarding`" entries to "`yes`" in "`/etc/ssh/sshd_config`" of the remote host, if you want to avoid "`-X`" command-line option.
- Start the X server on the local host.
- Open an `xterm` in the local host.
- Run `ssh`(1) to establish a connection with the remote site.
 +
--------------------
localname @ localhost $ ssh -q -X loginname@remotehost.domain
Password:
.....
--------------------

- Run an X application command, e.g. "`gimp`", on the remote site.
 +
--------------------
loginname @ remotehost $ gimp &
--------------------

This method allows the display of the remote X client output as if it were locally connected through a local UNIX domain socket.

==== Secure X terminal via Internet

Secure X terminal via Internet, which displays remotely run entire X desktop environment, can easily achieved by using specialized package such as `sdm` and `ldm`. Your local machine becomes a secure thin client to the remote application server connected via SSH.

If you want to add similar feature to your normal display manager `gdm`, create executable shell script at "`/usr/local/bin/ssh-session`" as:

--------------------
#!/bin/sh -e
# Based on gdm-ssh-session in gdm source (GPL)
ZENITY=$(type -p zenity)
TARGETHOST=$($ZENITY --width=600 \
--title "Host to connect to" --entry \
--text "Enter the name of the host you want to log in to as user@host.dom:")
TARGETSESSION=$($ZENITY --width=600 --height=400 \
--title "Remote session name" --list --radiolist --text "Select one" \
--column " " --column "Session" --column "description" --print-column 2 \
TRUE "/etc/X11/Xsession" "Debian" \
FALSE "/etc/X11/xinit/Xclients" "RH variants" \
FALSE "gnome-session" "GNOME session" \
FALSE "xterm" "Safe choice" \
FALSE "rxvt" "Safe choice" \
FALSE "gnome-terminal" "Safe choice")
echo "Connecting to "$TARGETHOST" with $TARGETSESSION"
/usr/bin/ssh -A -X -T -n "$TARGETHOST" "$TARGETSESSION"
#SSH_ASKPASS=/usr/bin/ssh-askpass /usr/bin/ssh -A -X -T -n "$TARGETHOST" "$TARGETSESSION"
--------------------
Then add followings to "`/etc/dm/Sessions/ssh.desktop`":

--------------------
[Desktop Entry]
Encoding=UTF-8
Name=SSH
Comment=This session logs you into a remote host using ssh
Exec=/usr/local/bin/ssh-session
Type=Application
--------------------

=== Fonts in the X window

X window on the Debian system support two mechanisms for font management: 

- server side font management: the original core X11 font system and
- client side font management: the new http://en.wikipedia.org/wiki/Xft[Xft] 2 font system.

The core X11 font system provides backward compatibility with older applications such as Xterm with bitmap fonts.  It is supported by installing pertinent font packages which trigger `defoma`(1) scripts to generate required files such as "`fonts.dir`".

The Xft2 font system is used by all modern applications such as ones from GNOME, KDE, OpenOffice.org, etc..  It supports all fonts listed below (<<_basic_fonts>>, <<_additional_fonts>>, and <<_cjk_fonts>>) with advanced features such as anti-aliasing.  It has no configuration mechanism itself, rather it relies upon the http://en.wikipedia.org/wiki/Fontconfig[fontconfig library] to configure and customize fonts as described in `fonts.conf`(5).  Actual rasterization is supported by the FreeType 2 font engine.  These new X clients using Xft2 font system can talk to modern X server via  http://en.wikipedia.org/wiki/XRender[the X Rendering Extension].


.Table of packages to support X window font systems.
[grid="all"]
`-------------------`-------------`------------`----------------------------------------------------------------------------------------------
package             popcon        size         description                                                                                    
----------------------------------------------------------------------------------------------------------------------------------------------
`xfonts-utils`      @@@popcon1@@@ @@@psize1@@@ X Window System font utility programs                                                          
`libxft2`           @@@popcon1@@@ @@@psize1@@@ Xft: FreeType-based font drawing library for X                                                 
`libfreetype6`      @@@popcon1@@@ @@@psize1@@@ http://freetype.sourceforge.net/index.html[FreeType] 2 font engine, shared library files       
`fontconfig`        @@@popcon1@@@ @@@psize1@@@ http://en.wikipedia.org/wiki/Fontconfig[generic font configuration library] - support binaries 
`fontconfig-config` @@@popcon1@@@ @@@psize1@@@ generic font configuration library - configuration                                             
`defoma`            @@@popcon1@@@ @@@psize1@@@ Debian Font Manager -- automatic font configuration framework                                  
`x-ttcidfont-conf`  @@@popcon1@@@ @@@psize1@@@ TrueType configuration for X (for CJK support)                                                 
----------------------------------------------------------------------------------------------------------------------------------------------

// I removed CID reference in x-ttcidfont-conf since I see no CID font used by X.  

You can check actual font path for:

- core X11 font path with "`xset q`"
- fontconfig font default: "`fc-match`" 

TIP: "http://unifont.org/iuc27/html/ICUPresentation.html[The Penguin and Unicode]" is a good overview of modern X Window system. Other documentations at http://unifont.org/[http://unifont.org/] should provide good information on Unicode fonts, Unicode-enabled software, internationalization, and Unicode usability issues on http://en.wikipedia.org/wiki/Free_and_open_source_software[free/libre/open source (FLOSS)] operating systems.

TIP: You should rely on http://en.wikipedia.org/wiki/Fontconfig[fontconfig] infrastructure to configure fonts on the Debian system.  Debian Font Manager (`defoma`(1)) is only useful as font installation such as http://en.wikipedia.org/wiki/X_logical_font_description[X logical font description (XLFD)] data.

==== Basic fonts

There are 2 major types of http://en.wikipedia.org/wiki/Computer_font[computer fonts]:

- bitmap fonts (good for low resolution rasterization)
- outline/stroke fonts (good for high resolution rasterization)

While scaling of bitmap fonts causes jugged image, scaling of outline/stroke
fonts produces smooth image.

Bitmap fonts on the Debian system are provided by compressed http://fontforge.sourceforge.net/pcf-format.html[X11 pcf bitmap font files] having their file extension "`.pcf.gz`".

Outline fonts on the Debian system are provided by:

- http://en.wikipedia.org/wiki/PostScript[PostScript] Type 1 font files having their file extension "`.pfb`" (binary font file) and "`.afm`" (font metrics file).
- http://en.wikipedia.org/wiki/TrueType[TrueType] font files having their file extension "`.ttf`".


.Table of corresponding http://en.wikipedia.org/wiki/PostScript[PostScript] Type 1 fonts.
[grid="all"]
`------------`-------------`------------`-------------------------------------------------`-----------------------------------------------`--------------------------------------------------------`--------------------------------------------------------------------------
font package popcon        size         sans-serif font                                   serif font                                      monospace font                                           source of font                                                             
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
PostScript   N/A           N/A          http://en.wikipedia.org/wiki/Helvetica[Helvetica] http://en.wikipedia.org/wiki/Times_Roman[Times] http://en.wikipedia.org/wiki/Courier_(typeface)[Courier] Adobe                                                                      
gsfonts      @@@popcon1@@@ @@@psize1@@@ Nimbus Sans L                                     Nimbus Roman No9 L                              Nimbus Mono L                                            http://www.math.utah.edu/~beebe/fonts/urw.html[URW] (Adobe compatible size)
gsfonts-x11  @@@popcon1@@@ @@@psize1@@@ Nimbus Sans L                                     Nimbus Roman No9 L                              Nimbus Mono L                                            X font support with PostScript Type 1 fonts.                               
t1-cyrillic  @@@popcon1@@@ @@@psize1@@@ Free Helvetian                                    Free Times                                      Free Courier                                             URW extended (Adobe compatible size)                                       
lmodern      @@@popcon1@@@ @@@psize1@@@ LMSans\*                                          LMRoman\*                                       LMTypewriter\*                                           scalable PostScript and OpenType fonts based on Computer Modern (from TeX) 
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


.Table of corresponding http://en.wikipedia.org/wiki/TrueType[TrueType] fonts.
[grid="all"]
`-------------------------`-------------`------------`-----------------------------------------`---------------------------------------------------------`------------------------------------------------------------`-----------------------------------------------------------------------------------------------------------------------
font package              popcon        size         sans-serif font                           serif font                                                monospace font                                               source of font                                                                                                          
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
ttf-mscorefonts-installer @@@popcon1@@@ @@@psize1@@@ http://en.wikipedia.org/wiki/Arial[Arial] http://en.wikipedia.org/wiki/Times_Roman[Times New Roman] http://en.wikipedia.org/wiki/Courier_(typeface)[Courier New] Microsoft (Adobe compatible size) (This installs non-free data)                                                         
ttf-liberation            @@@popcon1@@@ @@@psize1@@@ Liberation Sans                           Liberation Serif                                          Liberation Mono                                              http://en.wikipedia.org/wiki/Liberation_fonts[Liberation Fonts project] (Microsoft compatible size)                     
ttf-freefont              @@@popcon1@@@ @@@psize1@@@ FreeSans                                  FreeSerif                                                 FreeMono                                                     http://savannah.gnu.org/projects/freefont/[GNU freefont] (Microsoft compatible size)                                    
ttf-bitstream-vera        @@@popcon1@@@ @@@psize1@@@ Bitstream Vera Sans                       Bitstream Vera Serif                                      Bitstream Vera Sans Mono                                     http://www.gnome.org/fonts/[Bitstream, Inc.]                                                                            
ttf-dejavu                @@@popcon1@@@ @@@psize1@@@ DejaVu Sans                               DejaVu Serif                                              DejaVu Sans Mono                                             http://dejavu.sourceforge.net[DejaVu], Bitstream with extended character code support
ttf-dejavu-core           @@@popcon1@@@ @@@psize1@@@ DejaVu Sans                               DejaVu Serif                                              DejaVu Sans Mono                                             http://dejavu.sourceforge.net/[DejaVu], basic font style variants
ttf-dejavu-extra          @@@popcon1@@@ @@@psize1@@@ DejaVu Sans                               DejaVu Serif                                              DejaVu Sans Mono                                             http://dejavu.sourceforge.net/[DejaVu], extra font style variants                                                            
ttf-unifont               @@@popcon1@@@ @@@psize1@@@ N/A                                       N/A                                                       unifont                                                      http://Unifoundry.com[GNU Unifont], with all printable character code in Unicode 5.1 Basic Multilingual Plane (BMP)
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

==== Additional fonts

`aptitude`(8) will help you find additional fonts easily: 

- by the short package list under "Packages which depend on defoma" under the `defoma` package list,
- by the short package list under "Tasks" ->  "Localization",
- by the filtered flat package list of font data with regex on debtag: "`\~Gmade-of::data:font`",
- by the filtered flat package list of the BDF (bitmap) font packages with regex on package name: "`\~nxfonts-`", or
- by the filtered flat package list of the TrueType (outline) font packages with regex on package name: "`\~nttf-`".

Since **Free** fonts are sometimes limited, installing or sharing some commercial TrueType fonts is an option for a Debian users.  In order to make this process easy for the user, some convenience packages have been created:

- `ttf-mathematica4.1`
- `ttf-mscorefonts-installer`
You\'ll have a really good selection of TrueType fonts at the expense of contaminating your **Free** system with non-Free fonts.

==== CJK fonts

Here are some key points focused on CJK issues.


.Table of key words used in CJK font names to indicate font types.
[grid="all"]
`----------`--------------------`-----------------`--------------------
font type  Japanese font name   Chinese font name Korean font name     
-----------------------------------------------------------------------
sans-serif gothic, ゴチック     hei, gothic       dodum, gulim, gothic 
serif      mincho, 明朝         song, ming        batang               
-----------------------------------------------------------------------

Font name such as "VL PGothic" with "P" is a proportional font which corresponds to the fixed width "VL Gothic" font.

For example, Shift_JIS code table comprises 7070 characters.  They can be grouped into:

- JIS X 0201 single-byte characters (191 characters),
- JIS X 0208 double-byte characters (6879 characters).
Double-byte characters occupy double width on console terminals which uses CJK fixed width fonts.  In order to cope with such situation, http://www.ibiblio.org/pub/packages/ccic/software/info/HBF-1.1/[Hanzi Bitmap Font (HBF) File] with file extension "`.hbf`" may be deployed for fonts containing single-byte and double-byte characters.

In order to save space for http://en.wikipedia.org/wiki/TrueType[TrueType] font files, http://en.wikipedia.org/wiki/TrueType[TrueType] font collection file with file extension "`.ttc`" may be used.

I order to cover complicated code space of characters, CID keyed Type 1 http://en.wikipedia.org/wiki/PostScript[PostScript] font is used with CMap files starting themselves with "`%!PS-Adobe-3.0 Resource-CMap`".  This is rarely used for normal X display but used for PDF rendering etc. (see <<_x_utility_applications>>).

TIP: The multiple http://en.wikipedia.org/wiki/Glyph[glyphs] are expected for some http://en.wikipedia.org/wiki/Unicode[Unicode] code points due to http://en.wikipedia.org/wiki/Han_unification[Han unification].  One of the most annoying ones are  "U+3001 IDEOGRAPHIC COMMA" and "U+3002 IDEOGRAPHIC FULL STOP" whose character positions differ among CJK countries.  Configuring priority of Japanese centric fonts over Chinese ones using "`\~/.fonts.conf`" should give peace of minds to Japanese.

=== X applications

==== X office applications

Here is a list of basic office applications (OO is OpenOffice.org):


.List of basic X office applications
[grid="all"]
`------------------------`-------------`------------`------------------------------------`-----
package                  popcon        package size description                          type  
-----------------------------------------------------------------------------------------------
`openoffice.org-writer`  @@@popcon1@@@ @@@psize1@@@ word processor                       OO    
`openoffice.org-calc`    @@@popcon1@@@ @@@psize1@@@ spreadsheet                          OO    
`openoffice.org-impress` @@@popcon1@@@ @@@psize1@@@ presentation                         OO    
`openoffice.org-base`    @@@popcon1@@@ @@@psize1@@@ database management                  OO    
`openoffice.org-draw`    @@@popcon1@@@ @@@psize1@@@ vector graphics editor (draw)        OO    
`openoffice.org-math`    @@@popcon1@@@ @@@psize1@@@ mathematical equation/formula editor OO    
`abiword`                @@@popcon1@@@ @@@psize1@@@ word processor                       GNOME 
`gnumeric`               @@@popcon1@@@ @@@psize1@@@ spreadsheet                          GNOME 
`gimp`                   @@@popcon1@@@ @@@psize1@@@ bitmap graphics editor (paint)       GTK   
`inkscape`               @@@popcon1@@@ @@@psize1@@@ vector graphics editor (draw)        GNOME 
`dia-gnome`              @@@popcon1@@@ @@@psize1@@@ flowchart and diagram editor         GNOME 
`mergeant`               @@@popcon1@@@ @@@psize1@@@ database management                  GNOME 
`planner`                @@@popcon1@@@ @@@psize1@@@ project management                   GNOME 
`kword`                  @@@popcon1@@@ @@@psize1@@@ word processor                       KDE   
`kspread`                @@@popcon1@@@ @@@psize1@@@ spreadsheet                          KDE   
`kpresenter`             @@@popcon1@@@ @@@psize1@@@ presentation                         KDE   
`kexi`                   @@@popcon1@@@ @@@psize1@@@ database management                  KDE   
`kivio`                  @@@popcon1@@@ @@@psize1@@@ flowchart and diagram editor         KDE   
`karbon`                 @@@popcon1@@@ @@@psize1@@@ vector graphics editor (draw)        KDE   
`krita`                  @@@popcon1@@@ @@@psize1@@@ bitmap graphics editor (paint)       KDE   
`kplato`                 @@@popcon1@@@ @@@psize1@@@ project management                   KDE   
`kchart`                 @@@popcon1@@@ @@@psize1@@@ graph and chart drawing program      KDE   
`kformula`               @@@popcon1@@@ @@@psize1@@@ mathematical equation/formula editor KDE   
`kugar`                  @@@popcon1@@@ @@@psize1@@@ business quality report generator    KDE   
-----------------------------------------------------------------------------------------------

==== X utility applications

Here is a list of basic utility applications which caught my eyes:


.List of basic X utility applications
[grid="all"]
`-----------`-------------`------------`-----------------------------------------------------`-----
package     popcon        package size description                                           type  
---------------------------------------------------------------------------------------------------
`evince`    @@@popcon1@@@ @@@psize1@@@ document(pdf) viewer                                  GNOME 
`kpdf`      @@@popcon1@@@ @@@psize1@@@ document(pdf) viewer                                  KDE3   
`okular`    @@@popcon1@@@ @@@psize1@@@ document(pdf) viewer                                  KDE4  
`evolution` @@@popcon1@@@ @@@psize1@@@ Personal information Management (groupware and email) GNOME 
`kontact`   @@@popcon1@@@ @@@psize1@@@ Personal information Management (groupware and email) KDE   
`scribus`   @@@popcon1@@@ @@@psize1@@@ desktop page layout editor                            KDE   
`glabels`   @@@popcon1@@@ @@@psize1@@@ label editor                                          GNOME 
`kbarcode`  @@@popcon1@@@ @@@psize1@@@ barcode and label printing application                KDE   
`gnucash`   @@@popcon1@@@ @@@psize1@@@ personal accounting                                   GNOME 
`homebank`  @@@popcon1@@@ @@@psize1@@@ personal accounting                                   GTK   
`kmymoney2` @@@popcon1@@@ @@@psize1@@@ personal accounting                                   KDE   
`xsane`     @@@popcon1@@@ @@@psize1@@@ scanner frontend                                      GTK   
`kooka`     @@@popcon1@@@ @@@psize1@@@ scanner frontend                                      KDE   
---------------------------------------------------------------------------------------------------

CAUTION: The `poppler-data` package (non-free, see <<_ghostscript>>) needs to be installed for `evince` and `okular` to display CJK PDF documents using Cmap data (<<_cjk_fonts>>).

NOTE: Installing softwares such as `scribus` (KDE) on GNOME desktop environment are quite acceptable since corresponding functionality is not available under GNOME desktop environment.  But installing too many packages with duplicated functionalities will clutter your menu.

=== The X trivia

==== Keymaps and pointer button mappings in X

`xmodmap`(1) is a utility for modifying keymaps and pointer button mappings in the X window system. 
To get the **keycode**, run `xev`(1) in the X and press keys.  To get the meaning of **keysym**, look into the MACRO definition in "`/usr/include/X11/keysymdef.h`" file.  All "`#define`" statements in this file are named as "`XK_`" prepended to **keysym** names.

==== Classic X clients

Most traditional X client programs, such as `xterm`(1), can be started with a set of standard command line options to specify geometry, font, and display.  

They also use the X resource database to configure their appearance.  The system-wide defaults of X resources are stored in "`/etc/X11/Xresources/\*`" and application defaults of them are stored in "`/etc/X11/app-defaults/\*`".  Use these settings as the starting points.

The file "`\~/.Xresources`" is used to store user resource specifications.  This file is automatically merged into the default X resources upon login.  To make changes to these settings and make them effective immediately, merge them into the database using the command:

--------------------
$ xrdb -merge ~/.Xresources
--------------------

See `x`(7) and `xrdb`(1).

==== The X terminal emulator -- xterm

Learn everything about `xterm`(1) at http://dickey.his.com/xterm/xterm.faq.html[http://dickey.his.com/xterm/xterm.faq.html].

==== Running X clients as root

WARNING: Never start the X display/session manager under the root account by typing in `root` to the prompt of the display manager such as `gdm` because it is considered unsafe (insecure), even when you plan to perform administrative activities.  The entire X architecture is considered insecure if run as root.  You must always use the lowest privilege level possible, like a regular user account.

The easiest way to run a particular X client, e.g. "`foo`" as root is to use `sudo`(8):

--------------------
$ sudo foo &
--------------------
or

--------------------
$ sudo -s
# foo &
--------------------
or

--------------------
$ gksu foo &
--------------------
or

--------------------
$ ssh -X root@localhost
# foo &
--------------------

CAUTION: Use of `ssh`(1) just for this purpose as above is waste of resource.

Please note, in order for the X client to connect to the X server, 

- values of the old user\'s "`$XAUTHORITY`" and "`$DISPLAY`" environment variables must be copied to the new user\'s ones, and
- the file pointed by value of the "`$XAUTHORITY`" environment variable must be readable by the new user.

The `gksu` package (popcon: @@@pop-gksu@@@) is a specialized GTK+ GUI package for gaining the root privileges.  It can be configured to use `su`(1) or `sudo`(8) as its backend depending on the "`/apps/gksu/sudo-mode`" gconf key.  You can edit gconf key using `gconf-editor`(1) (menu: "Applications" -> "System Tools" -> "Configuration Editor").
