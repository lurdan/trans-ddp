#
# Simplified Chinese translation of Lenny release notes
# Copyright (C) 2008 Debian Chinese project
# This file is distributed under the same license as the lenny release
# notes.
#
# Authors:
# Dongsheng Song <dongsheng.song@gmail.com>, 2008.
# Deng Xiyue <dengxiyue@gmail.com>, 2008.
# Ji ZhengYu <zhengyuji@gmail.com>, 2008.
#
msgid ""
msgstr ""
"Project-Id-Version: release-notes 5.0\n"
"POT-Creation-Date: 2009-01-05 14:59+0800\n"
"PO-Revision-Date: 2008-12-19 13:55+0800\n"
"Last-Translator: Dongsheng Song <dongsheng.song@gmail.com>\n"
"Language-Team: i18n-zh <i18n-zh@googlegroups.com>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

# type: Attribute 'lang' of: <chapter>
#: en/upgrading.dbk:7
msgid "en"
msgstr "zh_CN"

# type: Content of: <chapter><title>
#: en/upgrading.dbk:8
msgid "Upgrades from previous releases"
msgstr "从先前的发行版本升级"

# type: Content of: <chapter><section><title>
#: en/upgrading.dbk:10
msgid "Preparing for the upgrade"
msgstr "升级前的准备"

# type: Content of: <chapter><section><para>
#: en/upgrading.dbk:12
msgid ""
"We suggest that before upgrading you also read the information in <xref "
"linkend=\"ch-information\"/>.  That chapter covers potential issues not "
"directly related to the upgrade process but which could still be important to "
"know about before you begin."
msgstr ""
"我们建议您在升级前阅读<xref linkend=\"ch-information\"/>中的信息。它描述了与升"
"级过程不直接相关的潜在问题，但在开始升级前了解这些信息对您还是很重要的。"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:18
msgid "Back up any data or configuration information"
msgstr "备份数据和配置文件"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:20
msgid ""
"Before upgrading your system, it is strongly recommended that you make a full "
"backup, or at least back up any data or configuration information you can't "
"afford to lose.  The upgrade tools and process are quite reliable, but a "
"hardware failure in the middle of an upgrade could result in a severely "
"damaged system."
msgstr ""
"在升级系统前，强烈建议你进行一次完整的备份，或者至少备份你不愿意丢失的数据和配"
"置信息。升级工具和流程是非常可信的，但升级过程中的硬件错误会对你的系统造成严重"
"损害。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:27
msgid ""
"The main things you'll want to back up are the contents of <filename>/etc</"
"filename>, <filename>/var/lib/dpkg</filename>, <filename>/var/lib/aptitude/"
"pkgstates</filename> and the output of <literal>dpkg --get-selections \"*\"</"
"literal> (the quotes are important)."
msgstr ""
"你需要备份的内容包括 <filename>/etc</filename>, <filename>/var/lib/dpkg</"
"filename>, <filename>/var/lib/aptitude/pkgstates</filename> 下的文件以及 "
"<literal>dpkg --get-selections \"*\"</literal> 的输出(命令行中的引号是必须"
"的)。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:33
msgid ""
"The upgrade process itself does not modify anything in the <filename>/home</"
"filename> directory.  However, some applications (e.g.  parts of the Mozilla "
"suite, and the GNOME and KDE desktop environments) are known to overwrite "
"existing user settings with new defaults when a new version of the "
"application is first started by a user.  As a precaution, you may want to "
"make a backup of the hidden files and directories (<quote>dotfiles</quote>) "
"in users' home directories.  This backup may help to restore or recreate the "
"old settings.  You may also want to inform users about this."
msgstr ""
"升级过程本身不会修改 <filename>/home</filename> 下的任何内容。但某些程序(比如"
"部分 Mozilla 套件，以及 GNOME 和 KDE 桌面环境) 会在新版本程序第一次启动时用新"
"的缺省值来覆盖现有的用户设置。做为预防，你也许希望备份用户目录下的隐藏文件和目"
"录(<quote>dotfiles</quote>)。该备份有助于你恢复或者重新创建旧设置。另外，你还"
"需把该事项通知给用户。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:43
msgid ""
"Any package installation operation must be run with superuser privileges, so "
"either login as root or use <command>su</command> or <command>sudo</command> "
"to gain the necessary access rights."
msgstr ""
"包安装过程需要超级用户权限，你可以用 root 登录, 使用 <command>su</command>, 或"
"使用 <command>sudo</command> 来获取必要的权限。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:48
msgid ""
"The upgrade has a few preconditions; you should check them before actually "
"executing the upgrade."
msgstr "升级需要几个前提条件，你应当在真正执行升级前检查它们。"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:54
msgid "Inform users in advance"
msgstr "提前告知用户"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:56
msgid ""
"It's wise to inform all users in advance of any upgrades you're planning, "
"although users accessing your system via an <command>ssh</command> connection "
"should notice little during the upgrade, and should be able to continue "
"working."
msgstr ""
"提前通知所有用户您正在计划的任何升级将是明智的决定，即便通过 <command>ssh</"
"command> 连接访问您系统的用户可能在升级过程中不会注意到什么，而且应该可以继续"
"工作。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:62
msgid ""
"If you wish to take extra precautions, back up or unmount users' partitions "
"(<filename>/home</filename>) before upgrading."
msgstr ""
"如果您希望采取更多的预防措施，请在升级前备份或者卸载用户的分区(<filename>/"
"home</filename>)。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:66
msgid ""
"You will probably have to do a kernel upgrade when upgrading to "
"&releasename;, so a reboot will normally be necessary.  Typically, this will "
"be done after the upgrade is finished."
msgstr ""
"当升级到 &releasename; 时您将可能需要进行内核升级，所以通常需要重启。一般说"
"来，这将在升级完成后进行。"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:73
msgid "Prepare for recovery"
msgstr "准备恢复"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:75
msgid ""
"Because of the many changes in the kernel between &oldreleasename; and "
"&releasename; regarding drivers, hardware discovery and the naming and "
"ordering of device files, there is a real risk that you may experience "
"problems rebooting your system after the upgrade.  A lot of known potential "
"issues are documented in this and the next chapters of these Release Notes."
msgstr ""
"由于 &oldreleasename; 和 &releasename; 的内核在驱动、硬件探测与命名以及设备文"
"件的命名和顺序等方面有很多变化，在更新后您将可能会在重启系统时遇到很大的问题。"
"本章和发行注记下一章记录了很多已知的潜在问题。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:82
msgid ""
"For that reason it makes sense to ensure that you will be able to recover if "
"your system should fail to reboot or, for remotely managed systems, fail to "
"bring up networking."
msgstr ""
"由于这个原因最好确保，如果您的系统重启失败，或者对于远程管理的系统，无法唤醒网"
"络时，您能够将其恢复。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:87
msgid ""
"If you are upgrading remotely via an <command>ssh</command> link it is highly "
"recommended that you take the necessary precautions to be able to access the "
"server through a remote serial terminal.  There is a chance that, after "
"upgrading the kernel and rebooting, some devices will be renamed (as "
"described in <xref linkend=\"device-reorder\"/> ) and you will have to fix "
"the system configuration through a local console.  Also, if the system is "
"rebooted accidentally in the middle of an upgrade there is a chance you will "
"need to recover using a local console."
msgstr ""
"如果你通过 <command>ssh</command> 远程连接进行升级，则强烈建议您采取必要的预防"
"措施以能够通过远程串行终端来访问该服务器。因为在升级内核并重启后，有些设备有可"
"能会被改名(如在 <xref linkend=\"device-reorder\"/> 中所描述的情况)而且您将需要"
"通过本地控制台修复系统配置。而且，如果系统在升级过程中意外重启您将可能需要使用"
"本地终端进行修复。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:97
msgid ""
"The most obvious thing to try first is to reboot with your old kernel.  "
"However, for various reasons documented elsewhere in this document, this is "
"not guaranteed to work."
msgstr ""
"很明显首先要做的就是重启到您的旧内核。然而，由于本文档其他地方记录的各种各样的"
"问题，这并不保证成功。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:102
msgid ""
"If that fails, you will need an alternative way to boot your system so you "
"can access and repair it.  One option is to use a special rescue image or a "
"Linux live CD.  After booting from that, you should be able to mount your "
"root file system and <literal>chroot</literal> into it to investigate and fix "
"the problem."
msgstr ""
"如果失败了，您将需要采取替代方案来启动您的系统以便访问和修复她。一个选择是使用"
"特制的急救盘或者 Linux live CD。从这些介质重启后，您应该可以挂载您的根文件系统"
"并 <literal>chroot</literal> 到它里面来检查并修复问题。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:109
msgid ""
"Another option we'd like to recommend is to use the <emphasis>rescue mode</"
"emphasis> of the &releasename; Debian Installer.  The advantage of using the "
"installer is that you can choose between its many installation methods for "
"one that best suits your situation.  For more information, please consult the "
"section <quote>Recovering a Broken System</quote> in chapter 8 of the <ulink "
"url=\"&url-install-manual;\">Installation Guide</ulink> and the <ulink url="
"\"&url-wiki;DebianInstaller/FAQ\">Debian Installer FAQ</ulink>."
msgstr ""
"我们推荐的另一个选择是使用 &releasename; Debian 安装程序的<emphasis>拯救模式</"
"emphasis>。使用安装程序的优点是您可以从它的很多安装方法中选择最适合您情况的一"
"种。更多信息请查询<ulink url=\"&url-install-manual;\">安装手册</ulink>第 8 章"
"的<quote>修复损坏的系统</quote>小节以及 <ulink url=\"&url-wiki;"
"DebianInstaller/FAQ\">Debian Installer FAQ</ulink>。"

# type: Content of: <chapter><section><section><section><title>
#: en/upgrading.dbk:119
msgid "Debug shell during boot using initrd"
msgstr "initrd 引导时使用调试环境"

# type: Content of: <chapter><section><section><section><para><footnote>
#: en/upgrading.dbk:121
msgid ""
"The <systemitem role=\"package\">initramfs-tools</systemitem> includes a "
"debug shell<footnote>"
msgstr ""
"<systemitem role=\"package\">initramfs-tools</systemitem> 在其生成的 initrd 中"
"包含一个调试 shell<footnote>"

# type: Content of: <chapter><section><section><section><para><footnote><para>
#: en/upgrading.dbk:122
msgid ""
"This feature can be disabled by adding the parameter <literal>panic=0</"
"literal> to your boot parameters."
msgstr ""
"此功能可以通过在您的启动参数中添加参数 <literal>panic=0</literal> 来禁用。"

# type: Content of: <chapter><section><section><section><para>
#: en/upgrading.dbk:123
msgid ""
"</footnote> in the initrds it generates.  If for example the initrd is unable "
"to mount your root file system, you will be dropped into this debug shell "
"which has basic commands available to help trace the problem and possibly fix "
"it."
msgstr ""
"</footnote> 。假如 initrd 无法挂载您的根文件系统，您将会进入此调试 shell，里面"
"可以使用基本的命令以帮助跟踪问题甚至有可能解决之。"

# type: Content of: <chapter><section><section><section><para>
#: en/upgrading.dbk:129
msgid ""
"Basic things to check are: presence of correct device files in <filename>/"
"dev</filename>; what modules are loaded (<literal>cat /proc/modules</"
"literal>); output of <command>dmesg</command> for errors loading drivers.  "
"The output of <command>dmesg</command> will also show what device files have "
"been assigned to which disks; you should check that against the output of "
"<literal>echo $ROOT</literal> to make sure that the root file system is on "
"the expected device."
msgstr ""
"需要检查的几个基本项目：<filename>/dev</filename> 下是否存在正确的设备文件；加"
"载了什么模块(<literal>cat /proc/modules</literal>)；<command>dmesg</command> "
"的输出中有关驱动加载的错误信息。<command>dmesg</command> 的输出还会显式哪个设"
"备文件被指定给哪个磁盘；您需要检查 <literal>echo $ROOT</literal> 的输出以确保"
"根文件系统在预想的设备上。"

# type: Content of: <chapter><section><section><section><para>
#: en/upgrading.dbk:138
msgid ""
"If you do manage to fix the problem, typing <literal>exit</literal> will quit "
"the debug shell and continue the boot process at the point it failed.  Of "
"course you will also need to fix the underlying problem and regenerate the "
"initrd so the next boot won't fail again."
msgstr ""
"如果您确实打算修复错误，输入 <literal>exit</literal> 会退出调试环境，并从这一"
"失败点开始继续启动过程。当然，您也需要修复后续的错误，并重新生成 initrd，这样"
"下一次启动时就不会再失败了。如果您确实修复了问题，键入 <literal>exit</"
"literal> 会退出调试 shell，并从先前失败的地方继续启动进程。当然您还需要修复先"
"前的问题，并重新生成 initrd，以使下次启动不再失败。"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:148
msgid "Prepare a safe environment for the upgrade"
msgstr "为升级准备安全环境"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:150
msgid ""
"The distribution upgrade should be done either locally from a textmode "
"virtual console (or a directly connected serial terminal), or remotely via an "
"<command>ssh</command> link."
msgstr ""
"发行版升级应该在本地从文本模式虚拟终端(或者直连串行终端)，或者通过 "
"<command>ssh</command> 远程连接进行。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:155
msgid ""
"In order to gain extra safety margin when upgrading remotely, we suggest that "
"you run upgrade processes in the virtual console provided by the "
"<command>screen</command> program, which enables safe reconnection and "
"ensures the upgrade process is not interrupted even if the remote connection "
"process fails."
msgstr ""
"为了在远程升级时获得额外的可靠性保障，我们建议您在由 <command>screen</"
"command> 程序生成的虚拟控制台中执行升级过程。它能进行可靠的重新连接并确保，即"
"使远程连接失败，升级过程也不会被打断。"

# type: Content of: <chapter><section><section><important><para>
#: en/upgrading.dbk:163
msgid ""
"You should <emphasis>not</emphasis> upgrade using <command>telnet</command>, "
"<command>rlogin</command>, <command>rsh</command>, or from an X session "
"managed by <command>xdm</command>, <command>gdm</command> or <command>kdm</"
"command> etc on the machine you are upgrading.  That is because each of those "
"services may well be terminated during the upgrade, which can result in an "
"<emphasis>inaccessible</emphasis> system that is only half-upgraded."
msgstr ""
"您<emphasis>不应该</emphasis>在您要升级的机器上使用 <command>telnet</"
"command>、<command>rlogin</command>、<command>rsh</command> 之类的东西，或者"
"从 <command>xdm</command>、<command>gdm</command>、<command>kdm</command> 之类"
"管理的 X 会话中升级。因为那些服务中的任意一个在升级中都有可能被中止，进而导致"
"出现一个<emphasis>不可访问</emphasis>的，只升级了一半的系统。"

# type: Content of: <chapter><section><section><programlisting>
#: en/upgrading.dbk:173
#, no-wrap
msgid ""
"\n"
"TODO: surely gdm/kdm are sane?\n"
"(vorlon) haha, no, gdm is not; I had that thought, and tested a gdm\n"
"         restart on my live session ;)\n"
msgstr ""
"\n"
"TODO: 你确认 gdm/kdm 没问题？\n"
"(vorlon) 哈哈，gdm 不是这样。我有过一个想法并在我的活动会话中测试过 gdm 重启 ;)\n"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:182
msgid ""
"Prepare initramfs for <acronym>LILO</acronym><indexterm><primary>LILO</"
"primary></indexterm>"
msgstr ""
"为 <acronym>LILO</acronym><indexterm><primary>LILO</primary></indexterm> 准备 "
"initramfs"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:184
msgid ""
"Users using the <acronym>LILO</acronym> bootloader should note that the "
"default settings for <systemitem role=\"package\">initramfs-tools</"
"systemitem> now generate an initramfs that is too large for <acronym>LILO</"
"acronym> to load. Such users should either switch to <systemitem role="
"\"package\">grub</systemitem>, or edit the file <filename>/etc/initramfs-"
"tools/initramfs.conf</filename>, changing the line"
msgstr ""
"使用 <acronym>LILO</acronym> 启动管理器的用户应该注意，<systemitem role="
"\"package\">initramfs-tools</systemitem> 目前的默认设置生成的 initramfs 对于 "
"<acronym>LILO</acronym> 来说太大而无法加载。这些用户要么把启动管理器换成 "
"<systemitem role=\"package\">grub</systemitem>，要么就编辑 <filename>/etc/"
"initramfs-tools/initramfs.conf</filename> 文件，更改这行"

# type: Content of: <chapter><section><section><para><programlisting>
#: en/upgrading.dbk:191 en/upgrading.dbk:201
#, no-wrap
msgid "MODULES=most"
msgstr "MODULES=most"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:191
msgid "to read"
msgstr "为"

# type: Content of: <chapter><section><section><para><programlisting>
#: en/upgrading.dbk:192
#, no-wrap
msgid "MODULES=dep"
msgstr "MODULES=dep"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:195
msgid ""
"Note, however, that doing this will cause <systemitem role=\"package"
"\">initramfs-tools</systemitem> to install only those modules that are "
"required for the particular hardware that it is run on, onto the initramfs; "
"as such, if you want to generate a boot medium that will work on more "
"hardware than just the one you're generating it on, you should leave the "
"setting to"
msgstr ""
"但是请注意，这么做会引起 <systemitem role=\"package\">initramfs-tools</"
"systemitem> 仅安装那些它运行在特定硬件上的模块至 initramfs；如此说来，如果您想"
"生成一个引导介质，它可以在更多的硬件上工作，而不是只在与您相同硬件的机器工作"
"时，您应该保存设置为"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:201
msgid "and make sure you do not use <acronym>LILO</acronym>."
msgstr "并保证不使用 <acronym>LILO</acronym>。"

# type: Content of: <chapter><section><title>
#: en/upgrading.dbk:209
msgid "Checking system status"
msgstr "检查系统状态"

# type: Content of: <chapter><section><para>
#: en/upgrading.dbk:211
msgid ""
"The upgrade process described in this chapter has been designed for upgrades "
"from <quote>pure</quote> &oldreleasename; systems without third-party "
"packages.  For the greatest reliability of the upgrade process, you may wish "
"to remove third-party packages from your system before you begin upgrading."
msgstr ""
"此章所述的升级过程是按从<quote>纯粹的</quote> &oldreleasename; 升级而安排的；"
"系统中没有第三方的包。为得到最可靠的升级过程，您可能会希望在升级前，从系统中移"
"除第三方的软件包。"

# type: Content of: <chapter><section><para>
#: en/upgrading.dbk:218
msgid ""
"This procedure also assumes your system has been updated to the latest point "
"release of &oldreleasename;.  If you have not done this or are unsure, follow "
"the instructions in <xref linkend=\"old-upgrade\"/>."
msgstr ""
"此过程也假定您的系统已经更新至 &oldreleasename; 的最新发行点。如果您还未做或是"
"不确定，请按照<xref linkend=\"old-upgrade\"/>中的说明做。"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:223
msgid "Review actions pending in package manager"
msgstr "复审包管理器中未决的的操作"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:225
msgid ""
"In some cases, the use of <command>apt-get</command> for installing packages "
"instead of <command>aptitude</command> might make <command>aptitude</command> "
"consider a package as <quote>unused</quote> and schedule it for removal.  In "
"general, you should make sure the system is fully up-to-date and "
"<quote>clean</quote> before proceeding with the upgrade."
msgstr ""
"在某些情况下，使用 <command>apt-get</command> 代替 <command>aptitude</"
"command> 安装软件包时，可能会让 <command>aptitude</command> 认为包<quote>未被"
"使用</quote>，并安排它被移除。一般来说，在正式升级前您应该确保系统是最新且"
"<quote>干净的</quote>。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:232
msgid ""
"Because of this you should review if there are any pending actions in the "
"package manager <command>aptitude</command>.  If a package is scheduled for "
"removal or update in the package manager, it might negatively impact the "
"upgrade procedure.  Note that correcting this is only possible if your "
"<filename>sources.list</filename> still points to <emphasis>&oldreleasename;</"
"emphasis>; and not to <emphasis>stable</emphasis> or <emphasis>&releasename;</"
"emphasis>; see <xref linkend=\"old-sources\"/>."
msgstr ""
"有鉴于此，您应该复查包管理器 <command>aptitude</command> 中是否有未决操作。如"
"果包管理器中有包被安排为移除或更新，那么这可能对升级过程有负面影响。注意，可能"
"改正这一错误的唯一情况是，您仍然在 <filename>sources.list</filename> 中指向 "
"<emphasis>&oldreleasename;</emphasis>，而非 <emphasis>stable</emphasis> 或是 "
"<emphasis>&releasename;</emphasis>。参看<xref linkend=\"old-sources\"/>。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:241
msgid ""
"To do this, you have to run <command>aptitude</command> in <quote>visual "
"mode</quote> and press <keycap>g</keycap> (<quote>Go</quote>).  If it shows "
"any actions, you should review them and either fix them or implement the "
"suggested actions.  If no actions are suggested you will be presented with a "
"message saying <quote>No packages are scheduled to be installed, removed, or "
"upgraded</quote>."
msgstr ""
"要复查的话，您必须以<quote>图形模式</quote>运行 <command>aptitude</command> 并"
"按下 <keycap>g</keycap>（<quote>Go</quote>）。如果显示有任何未决操作，您都应该"
"复查它们，然后要么修复，要么执行建议的操作。如果没有建议的操作，会有一条信息 "
"<quote>No package are scheduled to be installed, removed, or ugraded</quote> "
"出现。"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:250
msgid "Disabling APT pinning"
msgstr "禁用 APT pinning 操作"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:252
msgid ""
"If you have configured APT to install certain packages from a distribution "
"other than stable (e.g.  from testing), you may have to change your APT "
"pinning configuration (stored in <filename>/etc/apt/preferences</filename>) "
"to allow the upgrade of packages to the versions in the new stable release.  "
"Further information on APT pinning can be found in <citerefentry> "
"<refentrytitle>apt_preferences</refentrytitle> <manvolnum>5</manvolnum> </"
"citerefentry>."
msgstr ""
"如果已经设置 APT 从一个非 stable （如 testing）版安装特定包，您可能必须改变 "
"APT pinning 设置（保存在 <filename>/etc/apt/preferences</filename> 中）以允许"
"升级至新的 stable 版中的包。更多有关 APT pinning 的信息可以在 <citerefentry> "
"<refentrytitle>apt_preferences</refentrytitle> <manvolnum>5</manvolnum> </"
"citerefentry> 中找到。"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:263
msgid "Checking packages status"
msgstr "检查包状态"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:265
msgid ""
"Regardless of the method used for upgrading, it is recommended that you check "
"the status of all packages first, and verify that all packages are in an "
"upgradable state.  The following command will show any packages which have a "
"status of Half-Installed or Failed-Config, and those with any error status."
msgstr ""
"不管用什么方法升级，我们都建议您先检查所有包的状态，并验证所有包都处于可升级状"
"态。以下命令会显示任何半安装或是配置失败的包，还有那些有任何错误状态的包。"

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:270
#, no-wrap
msgid ""
"\n"
"# dpkg --audit\n"
msgstr ""
"\n"
"# dpkg --audit\n"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:274
msgid ""
"You could also inspect the state of all packages on your system using "
"<command>dselect</command>, <command>aptitude</command>, or with commands "
"such as"
msgstr ""
"您也可以用 <command>dselect</command>、<command>aptitude</command> 来审查系统"
"中的所有包的状态，也可以用如下的命令来审查"

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:278
#, no-wrap
msgid ""
"\n"
"# dpkg -l | pager\n"
msgstr ""
"\n"
"# dpkg -l | pager\n"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:282
msgid "or"
msgstr "或是"

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:284
#, no-wrap
msgid ""
"\n"
"# dpkg --get-selections \"*\" &gt; ~/curr-pkgs.txt\n"
msgstr ""
"\n"
"# dpkg --get-selections \"*\" &gt; ~/curr-pkgs.txt\n"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:288
msgid ""
"It is desirable to remove any holds before upgrading.  If any package that is "
"essential for the upgrade is on hold, the upgrade will fail."
msgstr ""
"在升级前移除所有的 hold 状态是很有必要的。如果有任何对升级而言有重要意义的包处"
"于 hold 状态，升级会失败。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:292
msgid ""
"Note that <command>aptitude</command> uses a different method for registering "
"packages that are on hold than <command>apt-get</command> and "
"<command>dselect</command>.  You can identify packages on hold for "
"<command>aptitude</command> with"
msgstr ""
"注意 <command>aptitude</command> 使用一种与 <command>apt-get</command> 及 "
"<command>dselect</command> 不同的方法来注册 hold 状态的包。您可以用以下命令来"
"确认 <command>aptitude</command> 中处于 hold 状态的包。"

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:297
#, no-wrap
msgid ""
"\n"
"# aptitude search \"~ahold\" | grep \"^.h\"\n"
msgstr ""
"\n"
"# aptitude search \"~ahold\" | grep \"^.h\"\n"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:301
msgid ""
"If you want to check which packages you had on hold for <command>apt-get</"
"command>, you should use"
msgstr ""
"如果您想检查 <command>apt-get</command> 中哪些包设置了 hold 状态，可以用"

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:304
#, no-wrap
msgid ""
"\n"
"# dpkg --get-selections | grep hold\n"
msgstr ""
"\n"
"# dpkg --get-selections | grep hold\n"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:308
msgid ""
"If you changed and recompiled a package locally, and didn't rename it or put "
"an epoch in the version, you must put it on hold to prevent it from being "
"upgraded."
msgstr ""
"如果您在本地更改并重编译了一个包，且并未重命名，或是在版本号中放入新的纪元号，"
"您就必须将它设为 hold 状态，以防止它被升级。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:313
msgid ""
"The <quote>hold</quote> package state for <command>aptitude</command> can be "
"changed using:"
msgstr ""
"<command>aptitude</command> 中的 <quote>hold</quote> 状态的包能用以下命令更"
"改："

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:315
#, no-wrap
msgid ""
"\n"
"# aptitude hold <replaceable>package_name</replaceable>\n"
msgstr ""
"\n"
"# aptitude hold <replaceable>package_name</replaceable>\n"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:319
msgid ""
"Replace <literal>hold</literal> with <literal>unhold</literal> to unset the "
"<quote>hold</quote> state."
msgstr ""
"用 <literal>unhold</literal> 代替 <literal>hold</literal> 可清除 <quote>hold</"
"quote> 状态。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:323
msgid ""
"If there is anything you need to fix, it is best to make sure your "
"<filename>sources.list</filename> still refers to &oldreleasename; as "
"explained in <xref linkend=\"old-sources\"/>."
msgstr ""
"如果有任何需要更正的东西，您最好确保 <filename>sources.list</filename> 仍然指"
"向 &oldreleasename; ，就像<xref linkend=\"old-sources\"/>中所说的那样。"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:330
msgid "Unofficial sources and backports"
msgstr "非官方源和 backports"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:332
msgid ""
"If you have any non-Debian packages on your system, you should be aware that "
"these may be removed during the upgrade because of conflicting dependencies.  "
"If these packages were installed by adding an extra package archive in your "
"<filename>/etc/apt/sources.list</filename>, you should check if that archive "
"also offers packages compiled for &releasename; and change the source line "
"accordingly at the same time as your source lines for Debian packages."
msgstr ""
"如果有任何非 Debian 的包装于您的系统，您应该意识到它们可能会在升级期间因为依赖"
"性冲突而被移除。如果这些包是通过在 <filename>/etc/apt/source.list</filename> "
"中添加一个额外的软件源而安装的，您应该检查那个软件源是否也提供 &releasename; "
"下编译好的包并同时像您的 Debian 软件源那样更改相应的源。"

# type: Content of: <chapter><section><section><para><footnote>
#: en/upgrading.dbk:340
msgid ""
"Some users may have unofficial backported <quote>newer</quote> versions of "
"packages that <emphasis>are</emphasis> in Debian installed on their "
"&oldreleasename; system.  Such packages are most likely to cause problems "
"during an upgrade as they may result in file conflicts<footnote>"
msgstr ""
"某些用户可能有非官方的 backported <quote>较新的</quote> 包版本<emphasis>存在</"
"emphasis>于他们安装的 Debian &oldreleasename; 系统中。升级期间那样的包是最可能"
"引起问题的，因为它们可能会导致文件冲突<footnote>"

# type: Content of: <chapter><section><section><para><footnote><para>
#: en/upgrading.dbk:343
msgid ""
"Debian's package management system normally does not allow a package to "
"remove or replace a file owned by another package unless it has been defined "
"to replace that package."
msgstr ""
"Debian 的包管理系统正常情况下不允许一个包移除或是替换另一个包所拥有的文件，除"
"非已经被设定为替换那个包。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:345
msgid ""
"</footnote>.  <xref linkend=\"trouble\"/> has some information on how to deal "
"with file conflicts if they should occur."
msgstr ""
"</footnote>。<xref linkend=\"trouble\"/> 已经有一些关于如何处理将会出现的文件"
"冲突的信息了。"

# type: Content of: <chapter><section><title>
#: en/upgrading.dbk:354
msgid "Manually unmarking packages"
msgstr "手工删除包标记"

# type: Content of: <chapter><section><para>
#: en/upgrading.dbk:356
msgid ""
"To prevent <command>aptitude</command> from removing some packages that were "
"pulled in through dependencies, you need to manually unmark them as "
"<emphasis>auto</emphasis> packages.  This includes OpenOffice and Vim for "
"desktop installs:"
msgstr ""
"要防止 <command>aptitude</command> 移除某些因依赖关系而安装的包，您需要手工删"
"除它们这些包上的 <emphasis>auto</emphasis> 标记。对于桌面安装来说，包括有 "
"OpenOffice 和 Vim："

# type: Content of: <chapter><section><screen>
#: en/upgrading.dbk:361
#, no-wrap
msgid ""
"\n"
"# aptitude unmarkauto openoffice.org vim\n"
msgstr ""
"\n"
"# aptitude unmarkauto openoffice.org vim\n"

# type: Content of: <chapter><section><para>
#: en/upgrading.dbk:365
msgid ""
"And 2.6 kernel images if you have installed them using a kernel metapackage:"
msgstr "如果您已经用内核元数据包安装了 2.6 内核镜像，那还要包括它："

# type: Content of: <chapter><section><screen>
#: en/upgrading.dbk:367
#, no-wrap
msgid ""
"\n"
"# aptitude unmarkauto $(dpkg-query -W 'kernel-image-2.6.*' | cut -f1)\n"
msgstr ""
"\n"
"# aptitude unmarkauto $(dpkg-query -W 'kernel-image-2.6.*' | cut -f1)\n"

# type: Content of: <chapter><section><note><para>
#: en/upgrading.dbk:372
msgid ""
"You can review which packages are marked as <emphasis>auto</emphasis> in "
"aptitude by running:"
msgstr ""
"您可以复查那些在 aptitude 中被标记为 <emphasis>auto</emphasis> 的包，执行："

# type: Content of: <chapter><section><note><screen>
#: en/upgrading.dbk:375
#, no-wrap
msgid "# aptitude search 'i~M <replaceable>package_name</replaceable>'"
msgstr "# aptitude search 'i~M <replaceable>package_name</replaceable>'"

# type: Content of: <chapter><section><title>
#: en/upgrading.dbk:380
msgid "Preparing sources for APT"
msgstr "为 APT 准备源"

# type: Content of: <chapter><section><para>
#: en/upgrading.dbk:382
msgid ""
"Before starting the upgrade you must set up <systemitem role=\"package\">apt</"
"systemitem>'s configuration file for package lists, <filename>/etc/apt/"
"sources.list</filename>."
msgstr ""
"在开始升级前，您必须在源列表 <filename>/etc/apt/sources.list</filename> 中设"
"定 <systemitem role=\"package\">apt</systemitem> 的配置文件。"

# type: Content of: <chapter><section><para>
#: en/upgrading.dbk:387
msgid ""
"<systemitem role=\"package\">apt</systemitem> will consider all packages that "
"can be found via any <quote><literal>deb</literal></quote> line, and install "
"the package with the highest version number, giving priority to the first "
"mentioned lines (that way, in case of multiple mirror locations, you'd "
"typically first name a local harddisk, then CD-ROMs, and then HTTP/FTP "
"mirrors)."
msgstr ""
"<systemitem role=\"package\">apt</systemitem> 会考虑所有通过任意 "
"<quote><literal>deb</literal></quote> 行找到的包，并安装带最高版本号的包，给予"
"第一个引用到的行以优先权（所以，如果有多个镜像地址，您最好先命名本地硬盘，然后"
"是 CD-ROM，最后是 HTTP/FTP 镜像）。"

# type: Content of: <chapter><section><para>
#: en/upgrading.dbk:394
msgid ""
"A release can often be referred to by both its codename (e.g.  "
"<literal>&oldreleasename;</literal>, <literal>&releasename;</literal>) and by "
"its status name (i.e.  <literal>oldstable</literal>, <literal>stable</"
"literal>, <literal>testing</literal>, <literal>unstable</literal>).  "
"Referring to a release by its codename has the advantage that you will never "
"be surprised by a new release and for this reason is the approach taken "
"here.  It does of course mean that you will have to watch out for release "
"announcements yourself.  If you use the status name instead, you will just "
"see loads of updates for packages available as soon as a release has happened."
msgstr ""
"一个发行版通常既能通过它的代码名（如：<literal>&oldreleasename;</literal>, "
"<literal>&releasename;</literal>）引用，也可以用它的状态名引用（如："
"<literal>oldstable</literal>, <literal>stable</literal>, <literal>testing</"
"literal>, <literal>unstable</literal>）。引用发行版的代码名的好处在于，您绝对"
"不会被新发行版问题困扰且被带至此处。当然，这绝对意味着您不得不自己关注新发行版"
"的发行。如果转而使用状态名，如果有新版发行，您将只会看到一堆可用的软件包的更"
"新。"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:405
msgid "Adding APT Internet sources"
msgstr "添加互联网 APT 源"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:407
msgid ""
"The default configuration is set up for installation from main Debian "
"Internet servers, but you may wish to modify <filename>/etc/apt/sources.list</"
"filename> to use other mirrors, preferably a mirror that is network-wise "
"closest to you."
msgstr ""
"默认配置用于从主 Debian 网络服务器上安装，但您可能希望修改 <filename>/etc/apt/"
"sources.list</filename> 以使用其它的镜像，离您最近的网络镜像是一个更佳的选择。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:412
msgid ""
"Debian HTTP or FTP mirror addresses can be found at <ulink url=\"&url-debian-"
"mirrors;\"></ulink> (look at the <quote>list of Debian mirrors</quote> "
"section).  HTTP mirrors are generally speedier than FTP mirrors."
msgstr ""
"Debian HTTP 或 FTP 镜像地址能在 <ulink url=\"&url-debian-mirrors;\"></ulink> "
"找到（参看<quote> Debian 镜像列表</quote>一节）。HTTP 镜像通常比 FTP 镜像快。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:417
msgid ""
"For example, suppose your closest Debian mirror is <literal>&url-debian-"
"mirror-eg;</literal>.  When inspecting that mirror with a web browser or FTP "
"program, you will notice that the main directories are organized like this:"
msgstr ""
"例如，假设离您最近的 Debian 镜像是 <literal>&url-debian-mirror-eg;</literal>。"
"当用网络浏览器或是 FTP 程序检查那个镜像时，您会注意到主目录组织成了如下情况："

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:422
#, no-wrap
msgid ""
"\n"
"&url-debian-mirror-eg;/dists/&releasename;/main/binary-i386/...\n"
"&url-debian-mirror-eg;/dists/&releasename;/contrib/binary-i386/...\n"
msgstr ""
"\n"
"&url-debian-mirror-eg;/dists/&releasename;/main/binary-i386/...\n"
"&url-debian-mirror-eg;/dists/&releasename;/contrib/binary-i386/...\n"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:427
msgid ""
"To use this mirror with <systemitem role=\"package\">apt</systemitem>, you "
"add this line to your <filename>sources.list</filename> file:"
msgstr ""
"要让 <systemitem role=\"package\">apt</systemitem> 使用这个镜像，您将此行添加"
"至 <filename>sources.list</filename> 文件："

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:430
#, no-wrap
msgid ""
"\n"
"deb &url-debian-mirror-eg; &releasename; main contrib\n"
msgstr ""
"\n"
"deb &url-debian-mirror-eg; &releasename; main contrib\n"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:434 en/upgrading.dbk:467
msgid ""
"Note that the `<literal>dists</literal>' is added implicitly, and the "
"arguments after the release name are used to expand the path into multiple "
"directories."
msgstr ""
"注意明显加上去的‘<literal>dists</literal>’，这个发行版名字后的参数被用于将路径"
"扩展成多个目录。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:438 en/upgrading.dbk:471
msgid ""
"After adding your new sources, disable the previously existing "
"<quote><literal>deb</literal></quote> lines in <filename>sources.list</"
"filename> by placing a hash sign (<literal>#</literal>) in front of them."
msgstr ""
"添加新源后，在 <filename>sources.list</filename> 中通过在以前存在的 "
"<quote><literal>deb</literal></quote> 行前加上一个井号（<literal>#</literal>）"
"来禁用它们。"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:445
msgid "Adding APT sources for a local mirror"
msgstr "添加本地镜像 APT 源"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:447
msgid ""
"Instead of using HTTP or FTP packages mirrors, you may wish to modify "
"<filename>/etc/apt/sources.list</filename> to use a mirror on a local disk "
"(possibly mounted over <acronym>NFS</acronym>)."
msgstr ""
"您可能希望通过修改 <filename>/etc/apt/sources.list</filename> 来使用一个本地磁"
"盘上的镜像（也许是通过 <acronym>NFS</acronym> 挂载的），来代替 HTTP 或 FTP 包"
"镜像。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:452
msgid ""
"For example, your packages mirror may be under <filename>/var/ftp/debian/</"
"filename>, and have main directories like this:"
msgstr ""
"例如，假设您的包镜像位于 <filename>/var/ftp/devian/</filename> 下，并且有如下"
"的主目录："

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:455
#, no-wrap
msgid ""
"\n"
"/var/ftp/debian/dists/&releasename;/main/binary-i386/...\n"
"/var/ftp/debian/dists/&releasename;/contrib/binary-i386/...\n"
msgstr ""
"\n"
"/var/ftp/debian/dists/&releasename;/main/binary-i386/...\n"
"/var/ftp/debian/dists/&releasename;/contrib/binary-i386/...\n"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:460
msgid ""
"To use this with <systemitem role=\"package\">apt</systemitem>, add this line "
"to your <filename>sources.list</filename> file:"
msgstr ""
"要让 <systemitem role=\"package\">apt</systemitem> 使用它，需要把这一行添加至 "
"<filename>sources.list</filename> 文件："

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:463
#, no-wrap
msgid ""
"\n"
"deb file:/var/ftp/debian &releasename; main contrib\n"
msgstr ""
"\n"
"deb file:/var/ftp/debian &releasename; main contrib\n"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:478
msgid "Adding APT source from CD-ROM or DVD"
msgstr "从 CD-ROM 或 DVD 添加 APT 源"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:480
msgid ""
"If you want to use CDs <emphasis>only</emphasis>, comment out the existing "
"<quote><literal>deb</literal></quote> lines in <filename>/etc/apt/sources."
"list</filename> by placing a hash sign (<literal>#</literal>) in front of "
"them."
msgstr ""
"如果您<emphasis>只</emphasis>想用 CD 安装，在 <filename>/etc/apt/sources."
"list</filename> 中的 <quote><literal>deb</literal></quote> 行前放上井号"
"（<literal>#</literal>）注释掉它们。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:485
msgid ""
"Make sure there is a line in <filename>/etc/fstab</filename> that enables "
"mounting your CD-ROM drive at the <filename>/cdrom</filename> mount point "
"(the exact <filename>/cdrom</filename> mount point is required for "
"<command>apt-cdrom</command>).  For example, if <filename>/dev/hdc</filename> "
"is your CD-ROM drive, <filename>/etc/fstab</filename> should contain a line "
"like:"
msgstr ""
"确保在 <filename>/etc/fstab</filename> 中有一行允许挂载您的 CD-ROM 于 "
"<filename>/cdrom</filename> 挂载点（<command>apt-cdrom</command> 需要准确的 "
"<filename>/cdrom</filename> 挂载点）。例如，假设 <filename>/dev/hdc</"
"filename> 就是您的 CD-ROM，<filename>/etc/fstab</filename> 中应该带有一行："

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:492
#, no-wrap
msgid ""
"\n"
"/dev/hdc /cdrom auto defaults,noauto,ro 0 0\n"
msgstr ""
"\n"
"/dev/hdc /cdrom auto defaults,noauto,ro 0 0\n"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:496
msgid ""
"Note that there must be <emphasis>no spaces</emphasis> between the words "
"<literal>defaults,noauto,ro</literal> in the fourth field."
msgstr ""
"注意在第四段 <literal>defaults,noauto,ro</literal> 之间不允许有<emphasis>空格"
"</emphasis>。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:500
msgid "To verify it works, insert a CD and try running"
msgstr "要验证它是否能正确工作，插入一片 CD，尝试运行"

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:502
#, no-wrap
msgid ""
"\n"
"# mount /cdrom    # this will mount the CD to the mount point\n"
"# ls -alF /cdrom  # this should show the CD's root directory\n"
"# umount /cdrom   # this will unmount the CD\n"
msgstr ""
"\n"
"# mount /cdrom    # 挂载 CD 至挂载点\n"
"# ls -alF /cdrom  # 显示 CD 的根目录\n"
"# umount /cdrom   # 卸载 CD\n"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:508
msgid "Next, run:"
msgstr "下一步，运行："

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:510
#, no-wrap
msgid ""
"\n"
"# apt-cdrom add\n"
msgstr ""
"\n"
"# apt-cdrom add\n"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:514
msgid ""
"for each Debian Binary CD-ROM you have, to add the data about each CD to "
"APT's database."
msgstr ""
"每片您所拥有的 Debian 二进制 CD-ROM 都要这么做，以便将每片 CD 的数据添加至 "
"APT 的数据库。"

# type: Content of: <chapter><section><title>
#: en/upgrading.dbk:522
msgid "Upgrading packages"
msgstr "升级包"

# type: Content of: <chapter><section><para>
#: en/upgrading.dbk:524
msgid ""
"The recommended way to upgrade from previous &debian; releases is to use the "
"package management tool <command>aptitude</command>.  This program makes "
"safer decisions about package installations than running <command>apt-get</"
"command> directly."
msgstr ""
"推荐的从以前 &debian; 发行版升级的方法是使用包管理器 <command>aptitude</"
"command>。此程序会对安装包采取比直接运行 <command>apt-get</command> 更保守的选"
"择。"

# type: Content of: <chapter><section><para>
#: en/upgrading.dbk:530
msgid ""
"Don't forget to mount all needed partitions (notably the root and <filename>/"
"usr</filename> partitions) read-write, with a command like:"
msgstr ""
"不要忘记挂载所有必需的分区（尤其是根分区和 <filename>/usr</filename> 分区）为"
"可读写状态，用以下命令："

# type: Content of: <chapter><section><screen>
#: en/upgrading.dbk:533
#, no-wrap
msgid ""
"\n"
"# mount -o remount,rw /<replaceable>mountpoint</replaceable>\n"
msgstr ""
"\n"
"# mount -o remount,rw /<replaceable>mountpoint</replaceable>\n"

# type: Content of: <chapter><section><para>
#: en/upgrading.dbk:537
msgid ""
"Next you should double-check that the APT source entries (in <filename>/etc/"
"apt/sources.list</filename>) refer either to <quote><literal>&releasename;</"
"literal></quote> or to <quote><literal>stable</literal></quote>.  There "
"should not be any sources entries pointing to &oldreleasename;."
msgstr ""
"下一步您应该详细检查 APT 源记录（<filename>/etc/apt/source.list</filename>）要"
"么指向 <quote><literal>&releasename;</literal></quote> 又或指向 "
"<quote><literal>stable</literal></quote>。不应该有任何指向 &oldreleasename; 的"
"源记录。"

# type: Content of: <chapter><section><para><note><para>
#: en/upgrading.dbk:543
msgid ""
"Source lines for a CD-ROM will often refer to <quote><literal>unstable</"
"literal></quote>; although this may be confusing, you should <emphasis>not</"
"emphasis> change it."
msgstr ""
"CD-ROM 的源通常会指向 <quote><literal>unstable</literal></quote>。尽管这令人困"
"惑，但您<emphasis>不应该</emphasis>改变它。"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:550
msgid "Recording the session"
msgstr "记录会话"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:552
msgid ""
"It is strongly recommended that you use the <command>/usr/bin/script</"
"command> program to record a transcript of the upgrade session.  Then if a "
"problem occurs, you will have a log of what happened, and if needed, can "
"provide exact information in a bug report.  To start the recording, type:"
msgstr ""
"强烈推荐您使用 <command>/usr/bin/script</command> 程序来记录升级会话中的交互信"
"息。这样如果有问题了，您就有一份问题报告。而且如果需要的话，您也可以在错误报告"
"中提供额外信息。要开始记录，输入："

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:557
#, no-wrap
msgid ""
"\n"
"# script -t 2&gt;~/upgrade-&releasename;.time -a ~/upgrade-&releasename;.script\n"
msgstr ""
"\n"
"# script -t 2&gt;~/upgrade-&releasename;.time -a ~/upgrade-&releasename;.script\n"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:561
msgid ""
"or similar.  Do not put the typescript file in a temporary directory such as "
"<filename>/tmp</filename> or <filename>/var/tmp</filename> (files in those "
"directories may be deleted during the upgrade or during any restart)."
msgstr ""
"或是类似命令。不要将输出文件放在临时目录下，如 <filename>/tmp</filename> 或 "
"<filename>/var/tmp</filename>（这些目录下的文件可能会在升级时或重启时被删除）"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:566
msgid ""
"The typescript will also allow you to review information that has scrolled "
"off-screen.  Just switch to VT2 (using <keycombo action='simul'><keycap>Alt</"
"keycap><keycap>F2</keycap></keycombo>)  and, after logging in, use "
"<literal>less -R ~root/upgrade-&releasename;.script</literal> to view the "
"file."
msgstr ""
"输出文件也可让您复查屏幕上滚动过去的信息。只要切换至虚拟终端 2（使用 "
"<keycombo action='simul'><keycap>Alt</keycap><keycap>F2</keycap></"
"keycombo>），在登入后，用 <literal>less -R ~root/upgrade-&releasename;."
"script</literal> 查看文件。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:574
msgid ""
"After you have completed the upgrade, you can stop <command>script</command> "
"by typing <literal>exit</literal> at the prompt."
msgstr ""
"在完成升级后，您可以在提示符下输入 <literal>exit</literal> 停止 "
"<command>script</command>。"

# type: Content of: <chapter><section><section><programlisting>
#: en/upgrading.dbk:578
#, no-wrap
msgid ""
"\n"
"TODO: Could mention the script I provided in 400725 which is useful if you \n"
"have not dumped the timing file\n"
msgstr ""
"\n"
"TODO：可以提一下我在 400725 中提到的脚本，如果您还未输出 timing 文件的话它是很有用的\n"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:584
msgid ""
"If you have used the <emphasis>-t</emphasis> switch for <command>script</"
"command> you can use the <command>scriptreplay</command> program to replay "
"the whole session:"
msgstr ""
"如果已经对 <command>script</command> 使用了 <emphasis>-t</emphasis> 选项，您就"
"可以用 <command>scriptplay</command> 程序来回放整个过程："

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:588
#, no-wrap
msgid ""
"\n"
"# scriptreplay ~/upgrade-&releasename;.time ~/upgrade-&releasename;.script\n"
msgstr ""
"\n"
"# scriptreplay ~/upgrade-&releasename;.time ~/upgrade-&releasename;.script\n"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:594
msgid "Updating the package list"
msgstr "更新包列表"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:596
msgid ""
"First the list of available packages for the new release needs to be "
"fetched.  This is done by executing:"
msgstr "首先，需要获取新发行版的可用包列表。执行："

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:599 en/upgrading.dbk:1020
#, no-wrap
msgid ""
"\n"
"# aptitude update\n"
msgstr ""
"\n"
"# aptitude update\n"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:603
msgid ""
"Running this the first time new sources are updated will print out some "
"warnings related to the availability of the sources.  These warnings are "
"harmless and will not appear if you rerun the command again."
msgstr ""
"首次执行这个对新源进行更新会打印出一些有关源可用性的警告信息。这些警告没关系而"
"且在您下一次执行时就没有了。"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:610
msgid "Make sure you have sufficient space for the upgrade"
msgstr "确保你有足够的空间升级"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:612
msgid ""
"You have to make sure before upgrading your system that you have sufficient "
"hard disk space when you start the full system upgrade described in <xref "
"linkend=\"upgrading-other\"/>.  First, any package needed for installation "
"that is fetched from the network is stored in <filename>/var/cache/apt/"
"archives</filename> (and the <filename>partial/</filename> subdirectory, "
"during download), so you must make sure you have enough space on the file "
"system partition that holds <filename>/var/</filename> to temporarily "
"download the packages that will be installed in your system.  After the "
"download, you will probably need more space in other file system partitions "
"in order to both install upgraded packages (which might contain bigger "
"binaries or more data) and new packages that will be pulled in for the "
"upgrade.  If your system does not have sufficient space you might end up with "
"an incomplete upgrade that might be difficult to recover from."
msgstr ""
"在升级系统前必须确保在进行如<xref linkend=\"upgrading-other\"/>中所述的完全系"
"统升级时，您有足够的磁盘空间。首先，安装所需的任何从网络上下载的包都被保存在 "
"<filename>/var/cache/apt/archives</filename>（下载期间还会放在 "
"<filename>partial/</filename> 子目录下），因此您必须确保在文件系统分区 "
"<filename>/var/</filename> 下有足够的空间，以便临时下载将会安装在系统中的包。"
"下载之后，您可能在其它文件系统分区中需要更多的空间来同时安装升级包（可能会包含"
"更大的二进制程序或更多数据）和升级中带入的新包。如果系统中没有足够的空间，您可"
"能以一个未完成的升级结束，而这可能难以恢复。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:628
msgid ""
"Both <command>aptitude</command> and <systemitem role=\"package\">apt</"
"systemitem> will show you detailed information of the disk space needed for "
"the installation.  Before executing the upgrade, you can see this estimate by "
"running:"
msgstr ""
"<command>aptitude</command> 和 <systemitem role=\"package\">apt</systemitem> "
"都会给你显示安装所需磁盘空间的详细信息。在执行升级操作前，您可以运行以下命令来"
"看到这个估计值："

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:632
#, no-wrap
msgid ""
"\n"
"# aptitude -y -s -f --with-recommends dist-upgrade\n"
"[ ... ]\n"
"XXX upgraded, XXX newly installed, XXX to remove and XXX not upgraded.\n"
"Need to get xx.xMB/yyyMB of archives. After unpacking AAAMB will be used.\n"
"Would download/install/remove packages.\n"
msgstr ""
"\n"
"# aptitude -y -s -f --with-recommends dist-upgrade\n"
"[ ... ]\n"
"XXX 个已升级，XXX 个刚装上，XXX 个待删除以及 XXX 个未升级。\n"
"需要获取 xx.xMB/yyyMB。解开后，将占用 AAAMB。\n"
"会下载/安装/删除包。\n"

# type: Content of: <chapter><section><section><para><footnote>
#: en/upgrading.dbk:640
msgid "<footnote>"
msgstr "<footnote>"

# type: Content of: <chapter><section><section><para><footnote><para>
#: en/upgrading.dbk:640
msgid ""
"Running this command at the beginning of the upgrade process may give an "
"error, for the reasons described in the next sections.  In that case you will "
"need to wait until you've done the minimal system upgrade as in <xref linkend="
"\"minimal-upgrade\"/> and upgraded your kernel as in <xref linkend="
"\"upgrading-kernel\"/> before running this command to estimate the disk space."
msgstr ""
"由于下一节将要谈到的问题，在开始更新时执行这条命令可能会给出一个错误。如果那样"
"的话，您需要等至已经如<xref linkend=\"minimal-upgrade\"/>所述的那样做过最小系"
"统升级并且如 <xref linkend=\"upgrading-kernel\"/>中所述的那样升级过内核后，这"
"样，您才可以运行这条命令来估计所需的磁盘空间。"

# type: Content of: <chapter><section><section><section><para>
#: en/upgrading.dbk:645 en/upgrading.dbk:911
msgid "</footnote>"
msgstr "</footnote>"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:648
msgid ""
"If you do not have enough space for the upgrade, make sure you free up space "
"beforehand.  You can:"
msgstr "如果没有足够空间来升级，确保您预先释放了空间。可以这样："

# type: Content of: <chapter><section><section><itemizedlist><listitem><para>
#: en/upgrading.dbk:654
msgid ""
"Remove packages that have been previously downloaded for installation (at "
"<filename>/var/cache/apt/archive</filename>).  Cleaning up the package cache "
"by running <command>apt-get clean</command> or <command>aptitude clean</"
"command> will remove all previously downloaded package files."
msgstr ""
"删除以前安装时下载的包（位于 <filename>/var/cache/apt/archive</filename>）。"
"用 <command>apt-get clean</command> 或是 <command>aptitude clean</command> 来"
"清理包缓存，这会删除所有以前下载过的包文件。"

# type: Content of: <chapter><section><section><itemizedlist><listitem><para>
#: en/upgrading.dbk:662
msgid ""
"Remove old packages you no longer use.  If you have <systemitem role=\"package"
"\">popularity-contest</systemitem> installed, you can use <command>popcon-"
"largest-unused</command> to list the packages you do not use in the system "
"that occupy the most space.  You can also use <command>deborphan</command> or "
"<command>debfoster</command> to find obsolete packages (see <xref linkend="
"\"obsolete\"/> ).  Alternatively you can start <command>aptitude</command> in "
"<quote>visual mode</quote> and find obsolete packages under <quote>Obsolete "
"and Locally Created Packages</quote>."
msgstr ""
"删除您从来不用的旧包。如果您安装过 <systemitem role=\"package\">popularity-"
"contest</systemitem>，可以用 <command>popcon-largest-unused</command> 来列出系"
"统中占用大量空间而又不用的那些包。您也可以用 <command>deborphan</command> 或"
"是 <command>debfoster</command> 来找出过时的包（参看<xref linkend=\"obsolete"
"\"/>）。另一可选方案您可以<quote>图形模式</quote>运行 <command>aptitude</"
"command> 在 <quote>Obsolete and Locally Created Packages</quote> 下找到过时的"
"包。"

# type: Content of: <chapter><section><section><itemizedlist><listitem><para>
#: en/upgrading.dbk:674
msgid ""
"Remove packages taking up too much space, which are not currently needed (you "
"can always reinstall them after the upgrade).  You can list the packages that "
"take up most of the disk space with <command>dpigs</command> (available in "
"the <systemitem role=\"package\">debian-goodies</systemitem> package) or with "
"<command>wajig</command> (running <literal>wajig size</literal>)."
msgstr ""
"删除占用太多空间，目前不需要的包（您总是可以在升级后重装它们的）。您可以用 "
"<command>dpigs</command>（可在 <systemitem role=\"package\">debian-goodies</"
"systemitem> 包中找到）或是用 <command>wajig</command>（运行 <literal>wajig "
"size</literal>）列出占用大量空间的包。"

# type: Content of: <chapter><section><section><itemizedlist><listitem><programlisting>
#: en/upgrading.dbk:680
#, no-wrap
msgid ""
"\n"
"TODO: consider this for lenny\n"
"You can list packages that take up most of the disk space with\n"
"       /aptitude/.  Start /aptitude/ into \"visual mode\", select\n"
"       \"Views\" and \"New Flat Package List\" (this menu entry is available only\n"
"       after etch version), press \"l\" and enter \"~i\", press \"S\" and enter\n"
"       \"~installsize\", then it will give you nice list to work with.  Doing\n"
"       this after partial upgrade described in ref id=\"upgrading_aptitude\"\n"
"       should give you access to this new feature.\n"
msgstr ""
"\n"
"TODO: 为 lenny 考虑这些\n"
"您可以用 /aptitude/ 列出占用大量空间的包。\n"
"       以\"图形模式\"运行 /aptitude/，选择\n"
"       \"Views\" 和 \"New Flat Package List\"（此菜单项仅在 etch 版后才可用\n"
"       按 \"l\" 并输入 \"~i\"，按 \"S\" 并输入\n"
"       \"~installsize\"，然后显示漂亮的列表。\n"
"       在按ref id=\"upgrading_aptitude\"中所述的内容部分升级后，\n"
"       aptitude 应该能让你访问这一新特性。\n"

# type: Content of: <chapter><section><section><itemizedlist><listitem><para>
#: en/upgrading.dbk:694
msgid ""
"Temporarily move to another system, or permanently remove, system logs "
"residing under <filename>/var/log/</filename>."
msgstr ""
"将 <filename>/var/log/</filename> 下的系统日志临时放到其它系统，或是永久删除。"

# type: Content of: <chapter><section><section><itemizedlist><listitem><para>
#: en/upgrading.dbk:700
msgid ""
"Use a temporary <filename>/var/cache/apt/archives</filename>: You can use a "
"temporary cache directory from another filesystem (<acronym>USB</acronym> "
"storage device, temporary hard disk, filesystem already in use, ...)"
msgstr ""
"使用临时目录 <filename>/var/cache/apt/archives</filename>：您可以使用来自另一"
"个系统的临时缓存目录（<acronym>USB</acronym> 存储设备，临时硬盘，使用中的文件"
"系统……）"

# type: Content of: <chapter><section><section><itemizedlist><listitem><note><para>
#: en/upgrading.dbk:707
msgid ""
"Do not use a <acronym>NFS</acronym> mount as the network connection could be "
"interrupted during the upgrade."
msgstr "不要使用 <acronym>NFS</acronym>，这是因为网络连接可能在升级期间被打断。"

# type: Content of: <chapter><section><section><itemizedlist><listitem><para>
#: en/upgrading.dbk:712
msgid ""
"For example, if you have a <acronym>USB</acronym> drive mounted on <filename>/"
"media/usbkey</filename>:"
msgstr ""
"例如，如果您将 <acronym>USB</acronym> 盘挂在 <filename>/media/usbkey</"
"filename> 下："

# type: Content of: <chapter><section><section><itemizedlist><listitem><para><orderedlist><listitem><para>
#: en/upgrading.dbk:716
msgid ""
"remove the packages that have been previously downloaded for installation:"
msgstr "删除以前安装时下载的包："

# type: Content of: <chapter><section><section><para><programlisting>
#: en/upgrading.dbk:719
#, no-wrap
msgid "# apt-get clean"
msgstr "# apt-get clean"

# type: Content of: <chapter><section><section><itemizedlist><listitem><para><orderedlist><listitem><para>
#: en/upgrading.dbk:724
msgid ""
"copy the directory <filename>/var/cache/apt/archives</filename> to the "
"<acronym>USB</acronym> drive:"
msgstr ""
"将 <filename>/var/cache/apt/archives</filename> 目录复制到 <acronym>USB</"
"acronym> 磁盘："

# type: Content of: <chapter><section><section><itemizedlist><listitem><para><orderedlist><listitem><para><programlisting>
#: en/upgrading.dbk:728
#, no-wrap
msgid "# cp -ax /var/cache/apt/archives /media/usbkey/"
msgstr "# cp -ax /var/cache/apt/archives /media/usbkey/"

# type: Content of: <chapter><section><section><itemizedlist><listitem><para><orderedlist><listitem><para>
#: en/upgrading.dbk:733
msgid "mount the temporary cache directory on the current one:"
msgstr "将临时缓存目录挂载至当前目录："

# type: Content of: <chapter><section><section><itemizedlist><listitem><para><orderedlist><listitem><para><programlisting>
#: en/upgrading.dbk:735
#, no-wrap
msgid "# mount --bind /media/usbkey/archives /var/cache/apt/archives"
msgstr "# mount --bind /media/usbkey/archives /var/cache/apt/archives"

# type: Content of: <chapter><section><section><itemizedlist><listitem><para><orderedlist><listitem><para>
#: en/upgrading.dbk:740
msgid ""
"after the upgrade, restore the original <filename>/var/cache/apt/archives</"
"filename> directory:"
msgstr "升级后，还原 <filename>/var/cache/apt/archives</filename> 目录："

# type: Content of: <chapter><section><section><itemizedlist><listitem><para><orderedlist><listitem><para><programlisting>
#: en/upgrading.dbk:743
#, no-wrap
msgid "# umount /media/usbkey/archives"
msgstr "# umount /media/usbkey/archives"

# type: Content of: <chapter><section><section><itemizedlist><listitem><para><orderedlist><listitem><para>
#: en/upgrading.dbk:748
msgid "remove the remaining <filename>/media/usbkey/archives</filename>."
msgstr "删除剩下的 <filename>/media/usbkey/archives</filename>。"

# type: Content of: <chapter><section><section><itemizedlist><listitem><para>
#: en/upgrading.dbk:752
msgid ""
"You can create the temporary cache directory on whatever filesystem that is "
"mounted on your system."
msgstr "您可以在挂载于系统中的任何文件系统上创建临时缓存目录。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:758
msgid ""
"Note that in order to safely remove packages, it is advisable to switch your "
"<filename>sources.list</filename> back to &oldreleasename; as described in "
"<xref linkend=\"old-sources\"/>."
msgstr ""
"注意为了安全的移除包，建议您换回 &oldreleasename; 的 <filename>sources.list</"
"filename>，就像 <xref linkend=\"old-sources\"/> 中描述的那样。"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:765
msgid "Upgrade apt and/or aptitude first"
msgstr "先升级 apt 和（或） aptitude"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:767
msgid ""
"Several bug reports have shown that the versions of the <systemitem role="
"\"package\">aptitude</systemitem> and <systemitem role=\"package\">apt</"
"systemitem> packages in etch are often unable to handle the upgrade to "
"&releasename;. In &releasename;, <systemitem role=\"package\">apt</"
"systemitem> better deals with complex chains of packages requiring immediate "
"configuration and <systemitem role=\"package\">aptitude</systemitem> is "
"smarter in searching solutions for satisfying the dependencies. As these two "
"features are heavily involved during the dist-upgrade to &releasename;, it is "
"then required to upgrade those two packages before upgrading anything else. "
"For <systemitem role=\"package\">apt</systemitem>, run:"
msgstr ""
"已经有几个错误报告说，etch 中的 <systemitem role=\"package\">aptitude</"
"systemitem> 和 <systemitem role=\"package\">apt</systemitem> 版本通常无法处理"
"升级至 &releasename;。在 &releasename; 中，<systemitem role=\"package\">apt</"
"systemitem> 会更好的处理需要即时配置的复杂的安装包链，而 <systemitem role="
"\"package\">aptitude</systemitem> 在搜索满足依赖关系的方案方面更智能。由于这两"
"个程序在完全升级至 &releasename; 时会深深地绞在一起，因此在升级其它任何东西之"
"前，都有必要先升级这两个包。对于 <systemitem role=\"package\">apt</"
"systemitem>，执行："

# type: Content of: <chapter><section><section><para><programlisting>
#: en/upgrading.dbk:778
#, no-wrap
msgid "# apt-get install apt"
msgstr "# apt-get install apt"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:779
msgid ""
"and for <systemitem role=\"package\">aptitude</systemitem> (if you have it "
"installed) run:"
msgstr ""
"对于 <systemitem role=\"package\">aptitude</systemitem>（如果您安装过的话）要"
"执行："

# type: Content of: <chapter><section><section><para><programlisting>
#: en/upgrading.dbk:781
#, no-wrap
msgid "# aptitude install aptitude"
msgstr "# aptitude install aptitude"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:784
msgid ""
"This step will automatically upgrade <systemitem role=\"package\">libc6</"
"systemitem> and <systemitem role=\"package\">locales</systemitem> and will "
"pull in SELinux support libraries (<systemitem role=\"package\">libselinux1</"
"systemitem>).  At this point, some running services will be restarted, "
"including <command>xdm</command>, <command>gdm</command> and <command>kdm</"
"command>.  As a consequence, local X11 sessions might be disconnected."
msgstr ""
"此步将自动升级 <systemitem role=\"package\">libc6</systemitem> 和 <systemitem "
"role=\"package\">locales</systemitem>，并将引入 SELinux 支持库（<systemitem "
"role=\"package\">libselinux1</systemitem>）。在此处，某些正在运行的服务会重"
"启。这些服务包括 <command>xdm</command>，<command>gdm</command> 和 "
"<command>kdm</command>。结果，本地 X11 会话可能会断开。"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:794
msgid "Using aptitude's list of automatically-installed packages with apt"
msgstr "使用 aptitudes 记录的 apt 自动安装的软件包列表"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:796
msgid ""
"<systemitem role=\"package\">aptitude</systemitem> maintains a list of "
"packages that were installed automatically (for instance, as dependencies of "
"another package). In &releasename;, <systemitem role=\"package\">apt</"
"systemitem> now has this feature as well."
msgstr ""
"<systemitem role=\"package\">aptitude</systemitem> 维护了一个自动安装的包列表"
"（就像另一个包的依赖一样）。在 &releasename; 中，<systemitem role=\"package"
"\">apt</systemitem> 现在也有这个功能了。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:802
msgid ""
"The first time the &releasename; version of <systemitem role=\"package"
"\">aptitude</systemitem> is run, it will read in its list of automatically "
"installed packages and convert it for use with the &releasename; version of "
"<systemitem role=\"package\">apt</systemitem>. If you have <systemitem role="
"\"package\">aptitude</systemitem> installed, you should at least issue one "
"<command>aptitude</command> command to do the conversion. One way to do this "
"is by searching for a non-existent package:"
msgstr ""
"首次运行 &releasename; 版本的 <systemitem role=\"package\">aptitude</"
"systemitem> 时，它会先自动读入安装包的列表，然后再转换成 &releasename; "
"<systemitem role=\"package\">apt</systemitem> 可用的版本。如果您安装了 "
"<systemitem role=\"package\">aptitude</systemitem>，您至少应该先发出一条 "
"<command>aptitude</command> 指令以便转换。一种方法是搜索一个不存在的包："

# type: Content of: <chapter><section><section><para><programlisting>
#: en/upgrading.dbk:811
#, no-wrap
msgid "# aptitude search \"?false\""
msgstr "# aptitude search \"?false\""

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:816
msgid "Minimal system upgrade"
msgstr "最小系统升级"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:818
msgid ""
"Because of certain necessary package conflicts between &oldreleasename; and "
"&releasename;, running <literal>aptitude dist-upgrade</literal> directly will "
"often remove large numbers of packages that you will want to keep.  We "
"therefore recommend a two-part upgrade process, first a minimal upgrade to "
"overcome these conflicts, then a full <literal>dist-upgrade</literal>."
msgstr ""
"由于在 &oldreleasename; 和 &releasename; 间有某些必需包存在冲突，因此直接运行 "
"<literal>aptitude dist-upgrade</literal> 通常会删除大量您要想保留的包。因此我"
"们推荐一种两步升级过程，首先做一次最小升级来解决这些冲突，然后做一次完全的 "
"<literal>dist-upgrade</literal> 升级。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:825
msgid "First, run:"
msgstr "首先，运行："

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:827
#, no-wrap
msgid ""
"\n"
"# aptitude upgrade\n"
msgstr ""
"\n"
"# aptitude upgrade\n"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:831
msgid ""
"This has the effect of upgrading those packages which can be upgraded without "
"requiring any other packages to be removed or installed."
msgstr "这会升级那些不需要删除或安装其它任何包的软件。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:835
msgid ""
"The next step will vary depending on the set of packages that you have "
"installed.  These release notes give general advice about which method should "
"be used, but if in doubt, it is recommended that you examine the package "
"removals proposed by each method before proceeding."
msgstr ""
"下一步会相当依赖于您安装过的包。这些发行注记会给出所用方法的通用建议，但如有疑"
"问，推荐您在继续操作前检查每种方法建议的需要删除的包。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:841
msgid ""
"Some common packages that are expected to be removed include <systemitem role="
"\"package\">base-config</systemitem>, <systemitem role=\"package\">hotplug</"
"systemitem>, <systemitem role=\"package\">xlibs</systemitem>, <systemitem "
"role=\"package\">netkit-inetd</systemitem>, <systemitem role=\"package"
"\">python2.3</systemitem>, <systemitem role=\"package\">xfree86-common</"
"systemitem>, and <systemitem role=\"package\">xserver-common</systemitem>.  "
"For a more complete list of packages obsoleted in &releasename;, see <xref "
"linkend=\"obsolete\"/>."
msgstr ""
"某些通用包要被删除，包括 <systemitem role=\"package\">base-config</"
"systemitem>，<systemitem role=\"package\">hotplug</systemitem>，<systemitem "
"role=\"package\">xlibs</systemitem>，<systemitem role=\"package\">netkit-"
"inetd</systemitem>，<systemitem role=\"package\">python2.3</systemitem>，"
"<systemitem role=\"package\">xfree86-common</systemitem> 和 <systemitem role="
"\"package\">xserver-common</systemitem>。要看 &releasename; 中的更完整的废弃包"
"列表，想参看 <xref linkend=\"obsolete\"/>。"

# type: Content of: <chapter><section><section><section><title>
#: en/upgrading.dbk:852
msgid "Upgrading a desktop system"
msgstr "升级桌面系统"

# type: Content of: <chapter><section><section><section><para>
#: en/upgrading.dbk:854
msgid ""
"This upgrade path has been verified to work on systems with the "
"&oldreleasename; <literal>desktop</literal> task installed.  It is probably "
"the method that will give the best results on systems with the "
"<literal>desktop</literal> task installed, or with the <literal>gnome</"
"literal> or <literal>kde</literal> packages installed."
msgstr ""
"这种升级方法已经被运行于 &oldreleasename; 中安装的<literal>桌面</literal>环境"
"验证过了。这可能是安装有<literal>桌面</literal>环境或是 <literal>gnome</"
"literal> 或 <literal>kde</literal> 包的系统所能给出的最佳方法。"

# type: Content of: <chapter><section><section><section><para>
#: en/upgrading.dbk:861
msgid ""
"It is probably <emphasis>not</emphasis> the correct method to use if you do "
"not already have the <systemitem role=\"package\">libfam0c102</systemitem> "
"and <systemitem role=\"package\">xlibmesa-glu</systemitem> packages installed:"
msgstr ""
"如果您还未安装 <systemitem role=\"package\">libfam0c102</systemitem> 和 "
"<systemitem role=\"package\">xlibmesa-glu</systemitem> 包的话，这可能"
"<emphasis>不是</emphasis>正确的用法："

# type: Content of: <chapter><section><section><section><screen>
#: en/upgrading.dbk:865 en/upgrading.dbk:897
#, no-wrap
msgid ""
"\n"
"# dpkg -l libfam0c102 | grep ^ii\n"
"# dpkg -l xlibmesa-glu | grep ^ii\n"
msgstr ""
"\n"
"# dpkg -l libfam0c102 | grep ^ii\n"
"# dpkg -l xlibmesa-glu | grep ^ii\n"

# type: Content of: <chapter><section><section><section><para>
#: en/upgrading.dbk:870
msgid "If you do have a full desktop system installed, run:"
msgstr "如果您确实已经安装了完整的桌面系统，那就运行："

# type: Content of: <chapter><section><section><section><screen>
#: en/upgrading.dbk:872
#, no-wrap
msgid ""
"\n"
"# aptitude install libfam0 xlibmesa-glu\n"
msgstr ""
"\n"
"# aptitude install libfam0 xlibmesa-glu\n"

# type: Content of: <chapter><section><section><section><title>
#: en/upgrading.dbk:878
msgid "Upgrading a system with some X packages installed"
msgstr "升级安装了部分 X 包的系统"

# type: Content of: <chapter><section><section><section><para>
#: en/upgrading.dbk:880
msgid ""
"Systems with some X packages installed, but not the full <literal>desktop</"
"literal> task, require a different method.  This method applies in general to "
"systems with <systemitem role=\"package\">xfree86-common</systemitem> "
"installed, including some server systems which have <systemitem role=\"package"
"\">tasksel</systemitem> server tasks installed as some of these tasks include "
"graphical management tools.  It is likely the correct method to use on "
"systems which run X, but do not have the full <literal>desktop</literal> task "
"installed."
msgstr ""
"装有某些 X 包但没有完整<literal>桌面</literal>环境的系统需要不同的方法。这个方"
"法通常应用于装有 <systemitem role=\"package\">xfree86-common</systemitem> 的系"
"统，包括某些服务系统，它们装有 <systemitem role=\"package\">tasksel</"
"systemitem> 管理组件，其中的一些带有图形管理工具。这可能是正确的方法，它适用于"
"运行 X 的，不带完整<literal>桌面</literal>环境的系统。"

# type: Content of: <chapter><section><section><section><screen>
#: en/upgrading.dbk:889
#, no-wrap
msgid ""
"\n"
"# dpkg -l xfree86-common | grep ^ii\n"
msgstr ""
"\n"
"# dpkg -l xfree86-common | grep ^ii\n"

# type: Content of: <chapter><section><section><section><para>
#: en/upgrading.dbk:893
msgid ""
"First, check whether you have the <systemitem role=\"package\">libfam0c102</"
"systemitem> and <systemitem role=\"package\">xlibmesa-glu</systemitem> "
"packages installed."
msgstr ""
"首先，检查您是否安装有 <systemitem role=\"package\">libfam0c102</systemitem> "
"和 <systemitem role=\"package\">xlibmesa-glu</systemitem> 包。"

# type: Content of: <chapter><section><section><section><para><footnote>
#: en/upgrading.dbk:902
msgid ""
"If you do not have <systemitem role=\"package\">libfam0c102</systemitem> "
"installed, do not include <systemitem role=\"package\">libfam0</systemitem> "
"in the following commandline.  If you do not have <systemitem role=\"package"
"\">xlibmesa-glu</systemitem> installed, do not include it in the following "
"commandline.  <footnote>"
msgstr ""
"如果您还没有安装 <systemitem role=\"package\">libfam0c102</systemitem>，下面命"
"令行中的 <systemitem role=\"package\">libfam0</systemitem> 要删除。如果您还没"
"有安装 <systemitem role=\"package\">xlibmesa-glu</systemitem>，不要将它包含在"
"下面的命令行中。<footnote>"

# type: Content of: <chapter><section><section><section><para>
#: en/upgrading.dbk:906
msgid ""
"This command will determine whether you need <systemitem role=\"package"
"\">libfam0</systemitem> and <systemitem role=\"package\">xlibmesa-glu</"
"systemitem> installed, and auto-select them for you:"
msgstr ""
"这个命令会检测你是否需要安装 <systemitem role=\"package\">libfam0</"
"systemitem> 和 <systemitem role=\"package\">xlibmesa-glu</systemitem>，并且为"
"你自动选择："

# type: Content of: <chapter><section><section><section><para><footnote><screen>
#: en/upgrading.dbk:909
#, no-wrap
msgid ""
" # aptitude install x11-common \\ $(dpkg-query --showformat\n"
"'${Package} ${Status}\\n' -W libfam0c102 xlibmesa-glu \\ | grep 'ok installed$' |\n"
"sed -e's/ .*//; s/c102//') "
msgstr ""
" # aptitude install x11-common \\ $(dpkg-query --showformat\n"
"'${Package} ${Status}\\n' -W libfam0c102 xlibmesa-glu \\ | grep 'ok installed$' |\n"
"sed -e's/ .*//; s/c102//') "

# type: Content of: <chapter><section><section><section><screen>
#: en/upgrading.dbk:913
#, no-wrap
msgid ""
"\n"
"# aptitude install x11-common <replaceable>libfam0</replaceable> <replaceable>xlibmesa-glu</replaceable>\n"
msgstr ""
"\n"
"# aptitude install x11-common <replaceable>libfam0</replaceable> <replaceable>xlibmesa-glu</replaceable>\n"

# type: Content of: <chapter><section><section><section><para>
#: en/upgrading.dbk:917
msgid ""
"Note that installing <systemitem role=\"package\">libfam0</systemitem> will "
"also install the File Alteration Monitor (<systemitem role=\"package\">fam</"
"systemitem>) as well as the RPC portmapper (<systemitem role=\"package"
"\">portmap</systemitem>) if not already available in your system.  Both "
"packages will enable a new network service in the system although they can "
"both be configured to be bound to the (internal) loopback network device."
msgstr ""
"注意如果您的系统还没有 fam 和 protmap 的话，安装 <systemitem role=\"package"
"\">libfam0</systemitem> 也会安装文件变化监视器（<systemitem role=\"package"
"\">fam</systemitem>），以及 RPC 端口映射器（<systemitem role=\"package"
"\">portmap</systemitem>）。尽管它们都能被绑定至（内部）回环（loopback）网络设"
"备，这两个包还是会在系统中开启一个新的网络服务。"

# type: Content of: <chapter><section><section><section><title>
#: en/upgrading.dbk:927
msgid "Upgrading a system with no X support installed"
msgstr "升级没有 X 支持的系统"

# type: Content of: <chapter><section><section><section><para>
#: en/upgrading.dbk:929
msgid ""
"On a system with no X, no additional <literal>aptitude install</literal> "
"command should be required, and you can move on to the next step."
msgstr ""
"在不带 X 的系统上，不需要额外的 <literal>aptitude install</literal> 命令，您可"
"以转入下一步。"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:937
msgid "Upgrading the kernel"
msgstr "升级内核"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:939
msgid ""
"The <systemitem role=\"package\">udev</systemitem> version in &releasename; "
"does not support kernel versions earlier than 2.6.15 (which includes "
"&oldreleasename; 2.6.8 kernels), and the <systemitem role=\"package\">udev</"
"systemitem> version in &oldreleasename; will not work properly with the "
"latest kernels.  In addition, installing the &releasename; version of "
"<systemitem role=\"package\">udev</systemitem> will force the removal of "
"<systemitem role=\"package\">hotplug</systemitem>, used by Linux 2.4 kernels."
msgstr ""
"&releasename; 中的 <systemitem role=\"package\">udev</systemitem> 版本不支持早"
"于 2.6.15（包括 &oldreleasename; 2.6.8 内核）版本的内核，且 &oldreleasename; "
"中的 <systemitem role=\"package\">udev</systemitem> 版本无法在最新内核中正常运"
"作。而且，安装 &releasename; 版的 <systemitem role=\"package\">udev</"
"systemitem> 会强制删除 Linux 2.4 内核所用 的 <systemitem role=\"package"
"\">hotplug</systemitem>。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:948
msgid ""
"As a consequence, the previous kernel package will probably not boot properly "
"after this upgrade.  Similarly, there is a time window during the upgrade in "
"which <systemitem role=\"package\">udev</systemitem> has been upgraded but "
"the latest kernel has not been installed.  If the system were to be rebooted "
"at this point, in the middle of the upgrade, it might not be bootable because "
"of drivers not being properly detected and loaded.  (See <xref linkend="
"\"upgrade-preparations\"/> for recommendations on preparing for this "
"possibility if you are upgrading remotely.)"
msgstr ""
"结果，以前的内核在此次升级后无法正常启动。类似的，在升级期间， <systemitem "
"role=\"package\">udev</systemitem> 已经升级过而未安装最新内核时，会有一个 "
"time window。假如系统要在此处重启的话（升级过程中），以后可能无法引导，因为未"
"正确检测并载入驱动。（如果您正在远程升级，参看 <xref linkend=\"upgrade-"
"preparations\"/> 找到用于处理此种可能性的推荐做法。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:958
msgid ""
"Unless your system has the <literal>desktop</literal> task installed, or "
"other packages that would cause an unacceptable number of package removals, "
"it is therefore recommended that you upgrade the kernel on its own at this "
"point."
msgstr ""
"除非您的系统中装有<literal>桌面</literal>环境，或是其它能引发大量不可接受的包"
"移除的软件，在此我们推荐您升级内核本身。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:963
msgid "To proceed with this kernel upgrade, run:"
msgstr "要进行此次内核升级，执行："

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:965 en/upgrading.dbk:1244
#, no-wrap
msgid ""
"\n"
"# aptitude install linux-image-2.6-<replaceable>flavor</replaceable>\n"
msgstr ""
"\n"
"# aptitude install linux-image-2.6-<replaceable>flavor</replaceable>\n"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:969
msgid ""
"See <xref linkend=\"kernel-metapackage\"/> for help in determining which "
"flavor of kernel package you should install."
msgstr ""
"参看 <xref linkend=\"kernel-metapackage\"/> 来帮助您决定您应该安装哪个修订号的"
"内核包。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:973
msgid ""
"In the desktop case, it is unfortunately not possible to ensure the new "
"kernel package is installed immediately after the new <systemitem role="
"\"package\">udev</systemitem> is installed, so there is a window of unknown "
"length when your system will have no kernel installed with full hotplug "
"support.  See <xref linkend=\"newkernel\"/> for information on configuring "
"your system to not depend on hotplug for booting."
msgstr ""
"在桌面环境下，很不幸地我们不可能保证在新 <systemitem role=\"package\">udev</"
"systemitem> 安装后，立即安装新内核包，因此有一段未知的时间您的系统没有安装带有"
"完整 hotplug 支持的内核。参看 <xref linkend=\"newkernel\"/> 来获取关于配置不依"
"赖于 hotplug 就能引导的系统的信息。"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:983
msgid "Upgrading the rest of the system"
msgstr "升级系统的其它部分"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:985
msgid ""
"You are now ready to continue with the main part of the upgrade.  Execute:"
msgstr "现在，您准备继续主要部分的升级。执行："

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:987
#, no-wrap
msgid ""
"\n"
"# aptitude dist-upgrade\n"
msgstr ""
"\n"
"# aptitude dist-upgrade\n"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:991
msgid ""
"This will perform a complete upgrade of the system, i.e.  install the newest "
"available versions of all packages, and resolve all possible dependency "
"changes between packages in different releases.  If necessary, it will "
"install some new packages (usually new library versions, or renamed "
"packages), and remove any conflicting obsoleted packages."
msgstr ""
"这将对系统进行一次全面的升级，例如：安装所有包的最新可用版本，解决不同发行版的"
"包之间所有潜在的依赖性变动。如有必要，它会安装一些新包（通常是新库，或是重命名"
"的包），并删除任何冲突的过时包。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:998
msgid ""
"When upgrading from a set of CD-ROMs, you will be asked to insert specific "
"CDs at several points during the upgrade.  You might have to insert the same "
"CD multiple times; this is due to inter-related packages that have been "
"spread out over the CDs."
msgstr ""
"当从一叠 CD-ROM 升级时，您会在升级期间的某几个地方被要求插入指定的 CD 盘片。您"
"可能不得不多次插入相同的盘片，这是因为互相依赖的包已经被分散到整个 CD 套件中去"
"了。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1004
msgid ""
"New versions of currently installed packages that cannot be upgraded without "
"changing the install status of another package will be left at their current "
"version (displayed as <quote>held back</quote>).  This can be resolved by "
"either using <command>aptitude</command> to choose these packages for "
"installation or by trying <literal>aptitude -f install <replaceable>package</"
"replaceable></literal>."
msgstr ""
"不改变被定位于当前安装状态（显示为 <quote>held back</quote>）的另一个包，当前"
"安装包的新版本无法升级。这个问题可以通过使用 <command>aptitude</command> 选择"
"安装这些包或是用 <literal>aptitude -f install <replaceable>package</"
"replaceable></literal> 来解决。"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:1014
msgid "Getting package signatures"
msgstr "取得包签名"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1016
msgid ""
"After the upgrade, with the new version of <systemitem role=\"package\">apt</"
"systemitem> you can now update your package information, which will include "
"the new package signature checking mechanism:"
msgstr ""
"升级后，您可以用新版的 <systemitem role=\"package\">apt</systemitem> 来更新您"
"的包信息，它含有新包的签名验证机制："

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1024
msgid ""
"The upgrade will have already retrieved and enabled the signing keys for "
"Debian's package archives.  If you add other (unofficial) package sources, "
"<systemitem role=\"package\">apt</systemitem> will print warnings related to "
"its inability to confirm that packages downloaded from them are legitimate "
"and have not been tampered with.  For more information please see <xref "
"linkend=\"pkgmgmt\"/>."
msgstr ""
"升级时已经取得并使用了 Debian 包的签名密钥。如果您添加其它（非官方）的包源， "
"<systemitem role=\"package\">apt</systemitem> 会打印出无法确认从其它源下载的包"
"是合法的，并还未被窜改过的警告信息。要想了解更多信息请参看 <xref linkend="
"\"pkgmgmt\"/>。"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:1033
msgid "Possible issues during upgrade"
msgstr "升级期间可能遇到的问题"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1035
msgid ""
"If an operation using <command>aptitude</command>, <command>apt-get</"
"command>, or <command>dpkg</command> fails with the error"
msgstr ""
"如果使用 <command>aptitude</command>, <command>apt-get</command> 或 "
"<command>dpkg</command> 操作时出现错误"

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:1038
#, no-wrap
msgid ""
"\n"
"E: Dynamic MMap ran out of room\n"
msgstr ""
"\n"
"E: Dynamic MMap ran out of room\n"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1042
msgid ""
"the default cache space is insufficient.  You can solve this by either "
"removing or commenting lines you don't need in <filename>/etc/apt/sources."
"list</filename> or by increasing the cache size.  The cache size can be "
"increased by setting <literal>APT::Cache-Limit</literal> in <filename>/etc/"
"apt/apt.conf</filename>.  The following command will set it to a value that "
"should be sufficient for the upgrade:"
msgstr ""
"默认的缓存区空间不足。您可以通过删除或注释掉 <filename>/etc/apt/sources.list</"
"filename> 中不需要的行，或是增加缓存大小来解决这个问题。缓存大小能通过在 "
"<filename>/etc/apt/apt.conf</filename> 中设置 <literal>APT::Cache-Limit</"
"literal> 来增加。下面的命令会将它设为一个足够升级大小的值："

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:1049
#, no-wrap
msgid ""
"\n"
"# echo 'APT::Cache-Limit \"12500000\";' &gt;&gt; /etc/apt/apt.conf\n"
msgstr ""
"\n"
"# echo 'APT::Cache-Limit \"12500000\";' &gt;&gt; /etc/apt/apt.conf\n"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1053
msgid "This assumes that you do not yet have this variable set in that file."
msgstr "这里假设您还未在那个文件中对该变量进行设置。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1056
msgid ""
"Sometimes it's necessary to enable the <literal>APT::Force-LoopBreak</"
"literal> option in APT to be able to temporarily remove an essential package "
"due to a Conflicts/Pre-Depends loop.  <command>aptitude</command> will alert "
"you of this and abort the upgrade.  You can work around that by specifying "
"<literal>-o APT::Force-LoopBreak=1</literal> option on <command>aptitude</"
"command> command line."
msgstr ""
"有时有必要在 APT 中开启 <literal>APT::Force-LoopBreak</literal> 选项使之能够临"
"时移除一个重要的包，这是为了满足冲突或是预依赖循环。 <command>aptitude</"
"command> 会警告您这一点并退出升级。您可以通过在 <command>aptitude</command> 命"
"令行上指定 <literal>-o APT::Force-LoopBreak=1</literal> 选项来绕过这个问题。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1064
msgid ""
"It is possible that a system's dependency structure can be so corrupt as to "
"require manual intervention.  Usually this means using <command>aptitude</"
"command> or"
msgstr ""
"有可能系统的依赖关系太乱了以至于需要手工干预。通常这意味着使用 "
"<command>aptitude</command> 或"

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:1068
#, no-wrap
msgid ""
"\n"
"# dpkg --remove <replaceable>package_name</replaceable>\n"
msgstr ""
"\n"
"# dpkg --remove <replaceable>package_name</replaceable>\n"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1072
msgid "to eliminate some of the offending packages, or"
msgstr "来消除某些引起问题的包，或是"

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:1074
#, no-wrap
msgid ""
"\n"
"# aptitude -f install\n"
"# dpkg --configure --pending\n"
msgstr ""
"\n"
"# aptitude -f install\n"
"# dpkg --configure --pending\n"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1079
msgid ""
"In extreme cases you might have to force re-installation with a command like"
msgstr "在极端情况下，您可能不得不像以下命令一样强制重新安装某个包"

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:1081
#, no-wrap
msgid ""
"\n"
"# dpkg --install <replaceable>/path/to/package_name.deb</replaceable>\n"
msgstr ""
"\n"
"# dpkg --install <replaceable>/path/to/package_name.deb</replaceable>\n"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1085
msgid ""
"File conflicts should not occur if you upgrade from a <quote>pure</quote> "
"&oldreleasename; system, but can occur if you have unofficial backports "
"installed.  A file conflict will result in an error like:"
msgstr ""
"如果您从<quote>干净的</quote> &oldreleasename; 系统升级就不会出现文件冲突，但"
"如果您装有非官方的 backport 包就可能出现冲突。文件冲突会导致像以下这样的错误："

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:1089
#, no-wrap
msgid ""
"\n"
"Unpacking <replaceable>&lt;package-foo&gt;</replaceable> (from <replaceable>&lt;package-foo-file&gt;</replaceable>) ...\n"
"dpkg: error processing <replaceable>&lt;package-foo&gt;</replaceable> (--install):\n"
" trying to overwrite `<replaceable>&lt;some-file-name&gt;</replaceable>',\n"
" which is also in package <replaceable>&lt;package-bar&gt;</replaceable>\n"
"dpkg-deb: subprocess paste killed by signal (Broken pipe)\n"
" Errors were encountered while processing:\n"
" <replaceable>&lt;package-foo&gt;</replaceable>\n"
msgstr ""
"\n"
"Unpacking <replaceable>&lt;package-foo&gt;</replaceable> (from <replaceable>&lt;package-foo-file&gt;</replaceable>) ...\n"
"dpkg: error processing <replaceable>&lt;package-foo&gt;</replaceable> (--install):\n"
" trying to overwrite `<replaceable>&lt;some-file-name&gt;</replaceable>',\n"
" which is also in package <replaceable>&lt;package-bar&gt;</replaceable>\n"
"dpkg-deb: subprocess paste killed by signal (Broken pipe)\n"
" Errors were encountered while processing:\n"
" <replaceable>&lt;package-foo&gt;</replaceable>\n"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1099
msgid ""
"You can try to solve a file conflict by forcibly removing the package "
"mentioned on the <emphasis>last</emphasis> line of the error message:"
msgstr ""
"您可以尝试用错误信息中的<emphasis>最后</emphasis>一行提示，强制删除包来解决文"
"件冲突："

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:1102
#, no-wrap
msgid ""
"\n"
"# dpkg -r --force-depends <replaceable>package_name</replaceable>\n"
msgstr ""
"\n"
"# dpkg -r --force-depends <replaceable>package_name</replaceable>\n"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1106
msgid ""
"After fixing things up, you should be able to resume the upgrade by repeating "
"the previously described <command>aptitude</command> commands."
msgstr ""
"在修复这些问题后，您应该可以通过重复前述的 <command>aptitude</command> 命令来"
"继续升级。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1110
msgid ""
"During the upgrade, you will be asked questions regarding the configuration "
"or re-configuration of several packages.  When you are asked if any file in "
"the <filename>/etc/init.d</filename> or <filename>/etc/terminfo</filename> "
"directories, or the <filename>/etc/manpath.config</filename> file should be "
"replaced by the package maintainer's version, it's usually necessary to "
"answer `yes' to ensure system consistency.  You can always revert to the old "
"versions, since they will be saved with a <literal>.dpkg-old</literal> "
"extension."
msgstr ""
"升级期间，您会被问到有关配置或是重新配置几个包的问题。如果您被问到是否任何存在"
"于 <filename>/etc/init.d</filename> 或 <filename>/etc/terminfo</filename> 目"
"录，或是 <filename>/etc/manpath.config</filename> 目录下的文件应该被包维护者的"
"版本所替换时，通常有必要回答‘yes’来确保系统一致性。由于它们会被以 <literal>."
"dpkg-old</literal> 为后缀的文件名保存，所以您总是可以恢复成老版本的配置文件。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1119
msgid ""
"If you're not sure what to do, write down the name of the package or file and "
"sort things out at a later time.  You can search in the typescript file to "
"review the information that was on the screen during the upgrade."
msgstr ""
"如果您不确定该做什么，那就记下包或文件的名称，并稍后排出它们的顺序。您可以通过"
"在记录文件（typescript file）中搜索来审查升级期间显示在屏幕上的信息。"

# type: Content of: <chapter><section><title>
#: en/upgrading.dbk:1128
msgid "Upgrading your kernel and related packages"
msgstr "升级内核与相关包"

# type: Content of: <chapter><section><para>
#: en/upgrading.dbk:1130
msgid ""
"This section explains how to upgrade your kernel and identifies potential "
"issues related to this upgrade.  You can either install one of the "
"<systemitem role=\"package\">linux-image-*</systemitem> packages provided by "
"Debian, or compile a customized kernel from source."
msgstr ""
"这一节解释了如何升级您的内核，以及明确有关此次升级的潜在问题。您可以安装由 "
"Debian 提供的 <systemitem role=\"package\">linux-image-*</systemitem> 包，或者"
"从源码编译一个自定义的内核。"

# type: Content of: <chapter><section><para>
#: en/upgrading.dbk:1136
msgid ""
"Note that a lot of information in this section is based on the assumption "
"that you will be using one of the modular Debian kernels, together with "
"<systemitem role=\"package\">initramfs-tools</systemitem> and <systemitem "
"role=\"package\">udev</systemitem>.  If you choose to use a custom kernel "
"that does not require an initrd or if you use a different initrd generator, "
"some of the information may not be relevant for you."
msgstr ""
"注意本节的很多信息基于假设，即您会使用一个模块化的 Debian 内核，以及"
"<systemitem role=\"package\">initramfs-tools</systemitem> 和 <systemitem role="
"\"package\">udev</systemitem>。如果您选择使用一个不需要 initrd 的自定义内核，"
"或是您使用了一种不同的 initrd 生成器，对您来说某些信息可能会不一样。 "

# type: Content of: <chapter><section><para>
#: en/upgrading.dbk:1144
msgid ""
"Note also that if <systemitem role=\"package\">udev</systemitem> is "
"<emphasis>not</emphasis> installed on your system, it is still possible to "
"use <systemitem role=\"package\">hotplug</systemitem> for hardware discovery."
msgstr ""
"同时注意，如果您的系统中<emphasis>没有</emphasis>安装 <systemitem role="
"\"package\">udev</systemitem>，仍然有可能使用 <systemitem role=\"package"
"\">hotplug</systemitem> 进行硬件查找。"

# type: Content of: <chapter><section><para>
#: en/upgrading.dbk:1149
msgid ""
"If you are currently using a 2.4 kernel, you should also read <xref linkend="
"\"upgrade-to-2.6\"/> carefully."
msgstr ""
"如果您目前正在使用 2.4 内核，您也应该仔细阅读 <xref linkend=\"upgrade-to-2.6"
"\"/>。"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:1153
msgid "Installing the kernel metapackage"
msgstr "安装内核元数据包"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1155
msgid ""
"When you dist-upgrade from &oldreleasename; to &releasename;, it is strongly "
"recommended that you install a new linux-image-2.6-* metapackage.  This "
"package may be installed automatically by the dist-upgrade process.  You can "
"verify this by running:"
msgstr ""
"当您从 &oldreleasename; 全面升级至 &releasename; 时，强烈推荐您安装新的 linux-"
"image-2.6-* 元数据包。此包可能由 dist-upgrade 自动安装了。您可以验证此步，执"
"行："

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:1159
#, no-wrap
msgid ""
"\n"
"# dpkg -l \"linux-image*\" | grep ^ii\n"
msgstr ""
"\n"
"# dpkg -l \"linux-image*\" | grep ^ii\n"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1163
msgid ""
"If you do not see any output, then you will need to install a new linux-image "
"package by hand.  To see a list of available linux-image-2.6 metapackages, "
"run:"
msgstr ""
"如果您没有看到任何输出，那么您需要手工安装一个新的 linux-image 包。要查看可用"
"的 linux-image-2.6 的元数据包列表，执行："

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:1166
#, no-wrap
msgid ""
"\n"
"# apt-cache search linux-image-2.6- | grep -v transition\n"
msgstr ""
"\n"
"# apt-cache search linux-image-2.6- | grep -v transition\n"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1170
msgid ""
"If you are unsure about which package to select, run <literal>uname -r</"
"literal> and look for a package with a similar name.  For example, if you see "
"'<literal>2.4.27-3-686</literal>', it is recommended that you install "
"<systemitem role=\"package\">linux-image-2.6-686</systemitem>.  (Note that "
"the 386 flavor no longer exists; if you are currently using the 386 kernel "
"flavor, you should install the 486 flavor instead.) You may also use "
"<command>apt-cache</command> to see a long description of each package in "
"order to help choose the best one available.  For example:"
msgstr ""
"如果您不确定要选哪个包，那就运行 <literal>uname -r</literal> 并查找带有类似名"
"称的包。例如，如果您看到‘<literal>2.4.27-3-686</literal>’，那推荐您安装 "
"<systemitem role=\"package\">linux-image-2.6-686</systemitem>。（注意不再有 "
"386 版本；如果您当前正在用 386 内核，您应该安装 486 内核替换。）您也可以使用 "
"<command>apt-cache</command> 来查看每个包的长长的描述，以帮助您选择最好用的那"
"个。例如："

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:1179
#, no-wrap
msgid ""
"\n"
"# apt-cache show linux-image-2.6-686\n"
msgstr ""
"\n"
"# apt-cache show linux-image-2.6-686\n"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1183
msgid ""
"You should then use <literal>aptitude install</literal> to install it.  Once "
"this new kernel is installed you should reboot at the next available "
"opportunity to get the benefits provided by the new kernel version."
msgstr ""
"然后您应该使用 <literal>aptitude install</literal> 来安装。一旦安装了这个新内"
"核，您应该在下一次可行处重启机器以获取新内核所提供的优势。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1188
msgid ""
"For the more adventurous there is an easy way to compile your own custom "
"kernel on &debian;.  Install the <systemitem role=\"package\">kernel-package</"
"systemitem> tool and read the documentation in <filename>/usr/share/doc/"
"kernel-package</filename>."
msgstr ""
"对于爱冒险的人，这里有个简单方法来编译您自己的自定义 &debian; 内核。安装 "
"<systemitem role=\"package\">kernel-package</systemitem> 工具，然后阅读 "
"<filename>/usr/share/doc/kernel-package</filename> 下的文档。"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:1196
msgid "Upgrading from a 2.6 kernel"
msgstr "从 2.6 内核升级"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1198
msgid ""
"If you are currently running a 2.6 series kernel from &oldreleasename; this "
"upgrade will take place automatically after you do a full upgrade of the "
"system packages (as described in <xref linkend=\"upgradingpackages\"/> )."
msgstr ""
"如果您目前运行来自 &oldreleasename; 的 2.6 系列的内核，在您做了一次完整的系统"
"包升级后，会自动发生这个升级（就像 <xref linkend=\"upgradingpackages\"/> 所描"
"述的那样）。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1203
msgid ""
"If possible, it is to your advantage to upgrade the kernel package separately "
"from the main <literal>dist-upgrade</literal> to reduce the chances of a "
"temporarily non-bootable system.  See <xref linkend=\"upgrading-kernel\"/> "
"for a description of this process.  Note that this should only be done after "
"the minimal upgrade process described in <xref linkend=\"minimal-upgrade\"/>."
msgstr ""
"如果有可能，把内核包的升级从主 <literal>dist-upgrade</literal> 中独立出来是有"
"利的，这能减少出现一个不可引导的系统的机会。参看 <xref linkend=\"upgrading-"
"kernel\"/> 获取此过程的描述。注意，这只能在最小升级 <xref linkend=\"minimal-"
"upgrade\"/> 结束后才能做。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1210
msgid ""
"You can also take this step if you are using your own custom kernel and want "
"to use the kernel available in &releasename;.  If your kernel version is not "
"supported by <systemitem role=\"package\">udev</systemitem> then it is "
"recommended that you upgrade after the minimal upgrade.  If your version is "
"supported by <systemitem role=\"package\">udev</systemitem> you can safely "
"wait until after the full system upgrade."
msgstr ""
"如果您正使用您自定义的内核并想使用 &releasename; 中可用的内核，您也可以进行此"
"步操作。如果您的内核版本 <systemitem role=\"package\">udev</systemitem> 不支"
"持，您可以安稳地等等直至整个系统升级完成。"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:1220
msgid "Upgrading from a 2.4 kernel"
msgstr "从 2.4 内核升级"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1222
msgid ""
"If you have a 2.4 kernel installed, and your system relies on <systemitem "
"role=\"package\">hotplug</systemitem> for its hardware detection you should "
"first upgrade to a 2.6 series kernel from &oldreleasename; before attempting "
"the upgrade.  Make sure that the 2.6 series kernel boots your system and all "
"your hardware is properly detected before you perform the upgrade.  The "
"<systemitem role=\"package\">hotplug</systemitem> package is removed from the "
"system (in favor of <systemitem role=\"package\">udev</systemitem>) when you "
"do a full system upgrade.  If you do not do the kernel upgrade before this "
"your system might not boot up properly from this point on.  Once you have "
"done an upgrade to a 2.6 series kernel in &oldreleasename; you can do a "
"kernel upgrade as described in <xref linkend=\"upgrade-from-2.6\"/>."
msgstr ""
"如果您装有 2.4 内核，且您的系统依赖于 <systemitem role=\"package\">hotplug</"
"systemitem> 探测硬件，那在您尝试升级前应该先从 &oldreleasename; 升级至 2.6 系"
"列的内核。确保 2.6 系列内核可引导您的系统，且您所有的硬件都能在进行升级前被正"
"常检测到。"

# type: Content of: <chapter><section><section><para><footnote>
#: en/upgrading.dbk:1235
msgid ""
"If your system does not rely on <systemitem role=\"package\">hotplug</"
"systemitem><footnote>"
msgstr ""
"如您的系统不依赖于 <systemitem role=\"package\">hotplug</systemitem><footnote>"

# type: Content of: <chapter><section><section><para><footnote><para>
#: en/upgrading.dbk:1236
msgid ""
"You can have the kernel modules needed by your system loaded statically "
"through proper configuration of <filename>/etc/modules</filename>."
msgstr ""
"您可以通过合理地配置 <filename>/etc/modules</filename> 来静态载入系统所需的内"
"核模块。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1238
msgid ""
"</footnote> you can delay the kernel upgrade to after you have done a full "
"system upgrade, as described in <xref linkend=\"upgrading-other\"/>.  Once "
"your system has been upgraded you can then do the following (changing the "
"kernel package name to the one most suited to your system by substituting "
"<varname>flavor</varname>):"
msgstr ""
"</footnote>，按 <xref linkend=\"upgrading-other\"/> 中所说，您可以在系统全面升"
"级后再升级内核。一旦系统已经升级，您就可以做以下事情（通过替换 "
"<varname>flavor</varname> 将内核包的名字改成最适合您系统的那个）："

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:1250
msgid "Device enumeration reordering"
msgstr "设备枚举的顺序"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1252
msgid ""
"&releasename; features a more robust mechanism for hardware discovery than "
"previous releases.  However, this may cause changes in the order devices are "
"discovered on your system, affecting the order in which device names are "
"assigned.  For example, if you have two network adapters that are associated "
"with two different drivers, the devices eth0 and eth1 refer to may be "
"swapped.  Please note that the new mechanism means that if you e.g.  exchange "
"ethernet adapters in a running &releasename; system, the new adapter will "
"also get a new interface name."
msgstr ""
"&releasename; 带来一个比上一发行版更健全的硬件探测机制。但是，这会引起系统中所"
"探测到的设备顺序变化，即影响设备名的分配顺序。例如，如果您有两张驱动不同的网"
"卡，eth0 和 eth1 设备名可能被互换了。请注意，新机制意味着假设您在运行的 "
"&releasename; 系统中交换以太网适配器，新的适配器也会获得一个新的接口名。"

# type: Content of: <chapter><section><section><para><footnote>
#: en/upgrading.dbk:1261
msgid ""
"For network devices, you can avoid this reordering by using <systemitem role="
"\"package\">udev</systemitem> rules, more specifically, through the "
"definitions at <filename>/etc/udev/rules.d/z25_persistent-net.rules</"
"filename><footnote>"
msgstr ""
"对于网络设备，您可以通过使用 <systemitem role=\"package\">udev</systemitem> 机"
"制避免此重排，更明确点，通过在 <filename>/etc/udev/rules.d/z25_persistent-net."
"rules</filename> 中指定<footnote>"

# type: Content of: <chapter><section><section><para><footnote><para>
#: en/upgrading.dbk:1265
msgid ""
"The rules there are automatically generated by the script <filename>/etc/udev/"
"rules.d/z45_persistent-net-generator.rules</filename> to have persistent "
"names for network interfaces.  Delete this symlink to disable persistent "
"device naming for <acronym>NIC</acronym>s by <systemitem role=\"package"
"\">udev</systemitem>."
msgstr ""
"脚本 <filename>/etc/udev/rules.d/z45_persistent-net-generator.rules</"
"filename> 自动生成的规则让网卡拥有固定的名字。删除此符号链接可以关闭 "
"<systemitem role=\"package\">udev</systemitem> 对 <acronym>NIC</acronym> 设备"
"的固定命名。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1269
msgid ""
"</footnote>.  Alternatively you can use the <command>ifrename</command> "
"utility to bind physical devices to specific names at boot time.  See "
"<citerefentry> <refentrytitle>ifrename</refentrytitle> <manvolnum>8</"
"manvolnum> </citerefentry> and <citerefentry> <refentrytitle>iftab</"
"refentrytitle> <manvolnum>5</manvolnum> </citerefentry> for more "
"information.  The two alternatives (<systemitem role=\"package\">udev</"
"systemitem> and <command>ifrename</command>) should not be used at the same "
"time."
msgstr ""
"</footnote>。另一种方法，您可以在引导时用 <command>ifrename</command> 工具将物"
"理设备绑定至指定的名字。参看 <citerefentry> <refentrytitle>ifrename</"
"refentrytitle> <manvolnum>8</manvolnum> </citerefentry> 和 <citerefentry> "
"<refentrytitle>iftab</refentrytitle> <manvolnum>5</manvolnum> </citerefentry> "
"获取更多信息。两个可选方法（<systemitem role=\"package\">udev</systemitem> 和 "
"<command>ifrename</command>）不应该同时使用。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1279
msgid ""
"For storage devices, you can avoid this reordering by using <systemitem role="
"\"package\">initramfs-tools</systemitem> and configuring it to load storage "
"device driver modules in the same order they are currently loaded.  To do "
"this, identify the order the storage modules on your system were loaded by "
"looking at the output of <command>lsmod</command>.  <command>lsmod</command> "
"lists modules in the reverse order that they were loaded in, i.e., the first "
"module in the list was the last one loaded.  Note that this will only work "
"for devices which the kernel enumerates in a stable order (like PCI devices)."
msgstr ""
"对于存储设备，通过使用 <systemitem role=\"package\">initramfs-tools</"
"systemitem> 并配置它以当前载入的顺序载入存储设备，这样您就可以避免这个顺序重"
"排。要这么做的话，通过查看 <command>lsmod</command> 命令的输出来明确您系统中载"
"入的存储模块的顺序。<command>lsmod</command> 以它们载入的反序显示，即列表中的"
"第一个模块是最后一个被载入的。注意这只对内核以固定顺序枚举出的设备有效（类似 "
"PCI 设备）。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1289
msgid ""
"However, removing and reloading modules after initial boot will affect this "
"order.  Also, your kernel may have some drivers linked statically, and these "
"names will not appear in the output of <command>lsmod</command>.  You may be "
"able to decipher these driver names and load order from looking at <filename>/"
"var/log/kern.log</filename>, or the output of <command>dmesg</command>."
msgstr ""
"但是，在首次引导后删除并重新载入模块会影响这个顺序。还有，您的内核可能有些静态"
"链接的驱动，而且这些模块名称不会出现在 <command>lsmod</command> 的输出中。您可"
"能会解读这些驱动名并从 <filename>/var/log/kern.log</filename> 或是 "
"<command>dmesg</command> 的输出中载入引导顺序。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1297
msgid ""
"Add these module names to <filename>/etc/initramfs-tools/modules</filename> "
"in the order they should be loaded at boot time.  Some module names may have "
"changed between &oldreleasename; and &releasename;.  For example, sym53c8xx_2 "
"has become sym53c8xx."
msgstr ""
"将这些模块名按它们引导时载入的顺序添加至 <filename>/etc/initramfs-tools/"
"modules</filename>。某些模块名可能在 &oldreleasename; 和 &releasename; 有所变"
"动。例如，sym53c8xx_2 已经变成了 sym53c8xx。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1302
msgid ""
"You will then need to regenerate your initramfs image(s) by executing "
"<literal>update-initramfs -u -k all</literal>."
msgstr ""
"然后您需要运行 <literal>update-initramfs -u -k all</literal> 重新生成 "
"initramfs 镜像。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1306
msgid ""
"Once you are running a &releasename; kernel and <systemitem role=\"package"
"\">udev</systemitem>, you may reconfigure your system to access disks by an "
"alias that is not dependent upon driver load order.  These aliases reside in "
"the <filename>/dev/disk/</filename> hierarchy."
msgstr ""
"一旦您正运行一个 &releasename; 内核和 <systemitem role=\"package\">udev</"
"systemitem>，您可以重新配置系统以通过一个不依赖于驱动载入顺序的别名来访问磁"
"盘。这些别名存在于 <filename>/dev/disk/</filename> 目录结构下。"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:1314
msgid "Boot timing issues"
msgstr "引导期间的问题"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1316
msgid ""
"If an initrd created with <systemitem role=\"package\">initramfs-tools</"
"systemitem> is used to boot the system, in some cases the creation of device "
"files by <systemitem role=\"package\">udev</systemitem> can happen too late "
"for the boot scripts to act on."
msgstr ""
"如果用 <systemitem role=\"package\">initramfs-tools</systemitem> 创建的 "
"initrd 引导系统，在某些情况下由 <systemitem role=\"package\">udev</"
"systemitem> 创建的设备文件可能对于启动脚本的执行来讲太慢了点。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1323
msgid ""
"The usual symptoms are that the boot will fail because the root file system "
"cannot be mounted and you are dropped into a debug shell, but that when you "
"check afterwards, all devices that are needed are present in <filename>/dev</"
"filename>.  This has been observed in cases where the root file system is on "
"a <acronym>USB</acronym> disk or on <acronym>RAID</acronym>, especially if "
"lilo is used."
msgstr ""
"通常表现为引导失败，由于根文件系统无法挂载，您会进入调试环境。但当您回头检查"
"时，所需的所有设备都存在于 <filename>/dev</filename> 下。这种情况已经被发现"
"了，只要根文件系统存在于 <acronym>USB</acronym> 磁盘或是 <acronym>RAID</"
"acronym>上，尤其是使用了 lilo。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1330
msgid ""
"A workaround for this issue is to use the boot parameter "
"<literal>rootdelay=<replaceable>9</replaceable></literal>.  The value for the "
"timeout (in seconds) may need to be adjusted."
msgstr ""
"绕过此问题的方法就是用引导参数 <literal>rootdelay=<replaceable>9</"
"replaceable></literal>。这个超时值（秒）可能需要调整一下。"

# type: Content of: <chapter><section><title>
#: en/upgrading.dbk:1339
msgid "Things to do before rebooting"
msgstr "在重启之前要做的事情"

# type: Content of: <chapter><section><para>
#: en/upgrading.dbk:1341
msgid ""
"When <literal>aptitude dist-upgrade</literal> has finished, the "
"<quote>formal</quote> upgrade is complete, but there are some other things "
"that should be taken care of <emphasis>before</emphasis> the next reboot."
msgstr ""
"当 <literal>aptitude dist-upgrade</literal> 完成时，<quote>正式的</quote>升级"
"就算结束了。但在下一次重启<emphasis>之前</emphasis>，还有一些其它的事情需要关"
"注一下。"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:1347
msgid "Rerun lilo"
msgstr "重新运行 lilo"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1349
msgid ""
"If you are using <systemitem role=\"package\">lilo</systemitem> as your "
"bootloader (it is the default bootloader for some installations of "
"&oldreleasename;) it is strongly recommended that you rerun <command>lilo</"
"command> after the upgrade:"
msgstr ""
"如果您正在用 <systemitem role=\"package\">lilo</systemitem> 作为您的启动引导器"
"（这是某些 &oldreleasename; 安装的默认引导器），强烈建议您在升级后重新运行 "
"<command>lilo</command>："

# type: Content of: <chapter><section><section><screen>
#: en/upgrading.dbk:1353
#, no-wrap
msgid ""
"\n"
"# /sbin/lilo\n"
msgstr ""
"\n"
"# /sbin/lilo\n"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1357
msgid ""
"Notice this is needed even if you did not upgrade your system's kernel, as "
"<command>lilo</command>'s second stage will change due to the package upgrade."
msgstr ""
"注意，即使您不升级系统内核也需要这一步，这是由于包的升级 <command>lilo</"
"command>的 second stage 会改变。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1361
msgid ""
"Also, review the contents of your <filename>/etc/kernel-img.conf</filename> "
"and make sure that you have <literal>do_bootloader = Yes</literal> in it.  "
"That way the bootloader will always be rerun after a kernel upgrade."
msgstr ""
"还有，复查 <filename>/etc/kernel-img.conf</filename> 中的内容并确保其中有 "
"<literal>do_bootloader = Yes</literal> 这一行。这样，在内核升级后，启动管理器"
"总会重新运行一下。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1366
msgid ""
"If you encounter any issues when running <command>lilo</command>, review the "
"symbolic links in <filename>/</filename> to <filename>vmlinuz</filename> and "
"<filename>initrd</filename> and the contents of your <filename>/etc/lilo."
"conf</filename> for discrepancies."
msgstr ""
"如果您在运行 <command>lilo</command> 时遇到任何问题，请复查 <filename>/</"
"filename> 下至 <filename>vmlinuz</filename> 和 <filename>initrd</filename> 的"
"符号链接，以及 <filename>/etc/lilo.conf</filename> 中内容不一致的地方。"

# type: Content of: <chapter><section><section><para><footnote>
#: en/upgrading.dbk:1372
msgid ""
"If you forgot to rerun <command>lilo</command> before the reboot or the "
"system is accidentally rebooted before you could do this manually, your "
"system might fail to boot.  Instead of the lilo prompt, you will only see "
"<literal>LI</literal> when booting the system<footnote>"
msgstr ""
"如果您在重启前或是在您未手工重启系统就偶然重启前，忘记重新运行 <command>lilo</"
"command> 的话，您的系统可能会无法引导。当系统引导时您将只会看到 <literal>LI</"
"literal> 而不是 lilo 提示符<footnote>"

# type: Content of: <chapter><section><section><para><footnote><para>
#: en/upgrading.dbk:1375
msgid ""
"For more information on <command>lilo</command>'s boot error codes please see "
"<ulink url=\"http://tldp.org/HOWTO/Bootdisk-HOWTO/a1483.html\">The Linux "
"Bootdisk HOWTO</ulink>."
msgstr ""
"想知道更多有关 <command>lilo</command> 启动错误代码的信息，请参看<ulink url="
"\"http://tldp.org/HOWTO/Bootdisk-HOWTO/a1483.html\">The Linux Bootdisk HOWTO</"
"ulink>。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1378
msgid ""
"</footnote>.  See <xref linkend=\"recovery\"/> for information on how to "
"recover from this."
msgstr ""
"</footnote>。有关如果从此处恢复的信息请参看 <xref linkend=\"recovery\"/>。"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:1384
msgid "Upgrading mdadm"
msgstr "升级 mdadm"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1386
msgid ""
"mdadm now needs a configuration file to assemble MD arrays (<acronym>RAID</"
"acronym>) from the initial ramdisk and during the system initialisation "
"sequence.  Please make sure to read and act upon the instructions in "
"<filename>/usr/share/doc/mdadm/README.upgrading-2.5.3.gz</filename> after the "
"package has been upgraded <emphasis role=\"strong\">and before you reboot</"
"emphasis>.  The latest version of this file is available at <ulink url="
"\"http://svn.debian.org/wsvn/pkg-mdadm/mdadm/trunk/debian/README.upgrading-"
"2.5.3?op=file\"></ulink>; please consult it in case of problems."
msgstr ""
"mdadm 现在需要一个配置文件用来在引导 ramdisk 和系统安装期间整合 MD 阵列"
"（<acronym>RAID</acronym>）。请确保在包升级后<emphasis role=\"strong\">并在您"
"重启前</emphasis>仔细阅读并按 <filename>/usr/share/doc/mdadm/README.upgrading-"
"2.5.3.gz</filename> 中所说的去做。此文件的最新版本可在 <ulink url=\"http://"
"svn.debian.org/wsvn/pkg-mdadm/mdadm/trunk/debian/README.upgrading-2.5.3?"
"op=file\"></ulink> 获得；如有问题请参考它。"

# type: Content of: <chapter><section><title>
#: en/upgrading.dbk:1400
msgid "System boot hangs on <literal>Waiting for root file system</literal>"
msgstr "系统引导时在显示 <literal>Waiting for root file system</literal> 后挂起"

# type: Content of: <chapter><section><subtitle>
#: en/upgrading.dbk:1402
msgid ""
"Procedure to recover from <filename>/dev/hda</filename> became <filename>/dev/"
"sda</filename>"
msgstr ""
"从 <filename>/dev/hda</filename> 变成了 <filename>/dev/sda</filename> 的还原程"
"序"

# type: Content of: <chapter><section><para>
#: en/upgrading.dbk:1406
msgid ""
"Some users have reported that an upgrade could cause the kernel not finding "
"the system root partition after a system reboot."
msgstr "某些用户已经报告升级可能引起内核无法在重启后找到系统根分区。"

# type: Content of: <chapter><section><para>
#: en/upgrading.dbk:1411
msgid "In such case, the system boot will hang on the following message:"
msgstr "在那种情况下，系统引导会挂起并出现以下信息："

# type: Content of: <chapter><section><para><screen>
#: en/upgrading.dbk:1412
#, no-wrap
msgid "Waiting for root file system ..."
msgstr "Waiting for root file system ..."

# type: Content of: <chapter><section><para>
#: en/upgrading.dbk:1413
msgid "and after a few seconds a bare busybox prompt will show."
msgstr "且几秒钟后会只出现一个 busybox 提示符。"

# type: Content of: <chapter><section><para>
#: en/upgrading.dbk:1417
msgid ""
"This problem can occur when the upgrade of the kernel introduces the use of "
"the new generation of <acronym>IDE</acronym> drivers. The <acronym>IDE</"
"acronym> disk naming convention for the old drivers was <literal>hda</"
"literal>, <literal>hdb</literal>, <literal>hdc</literal>, <literal>hdd</"
"literal>. The new drivers will name the same disks respectively <literal>sda</"
"literal>, <literal>sdb</literal>, <literal>sdc</literal>, <literal>sdd</"
"literal>. The problem appears when the upgrade does not generate a new "
"<filename>/boot/grub/menu.lst</filename> file to take the new naming "
"convention into account. During the boot, Grub will pass a system root "
"partition to the kernel that the kernel doesn't find."
msgstr ""
"当内核升级使用新一代的 <acronym>IDE</acronym> 驱动程序时，就会出现这个问题。老"
"的 <acronym>IDE</acronym> 磁盘的命名规则是 <literal>hda</literal>, "
"<literal>hdb</literal>, <literal>hdc</literal>, <literal>hdd</literal>。新的规"
"则将分别命名为 <literal>sda</literal>, <literal>sdb</literal>, <literal>sdc</"
"literal>, <literal>sdd</literal>。当升级时未生成一个新的 <filename>/boot/grub/"
"menu.lst</filename> 文件来产生新的命名规则时，就会出现这个问题。引导时，Grub "
"会传递给内核一个无法找到的系统根分区。"

# type: Content of: <chapter><section><para>
#: en/upgrading.dbk:1432
msgid ""
"If you have encountered this problem after upgrading, jump to <xref linkend="
"\"how-to-recover\"/>. To avoid the problem before upgrading, read ahead."
msgstr ""
"如果您在升级后已经遇到此问题，转至 <xref linkend=\"how-to-recover\"/>。要在升"
"级前避免此问题，就提前看一下。"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:1438
msgid "How to avoid the problem before upgrading"
msgstr "如何在升级前避免此问题"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1441
msgid ""
"One can avoid this problem entirely by using an identifier for the root "
"filesystem that does not change from one boot to the next. There are two "
"possible methods for doing this - labelling the filesystem, or using the "
"filesystem's universal unique identifier (<acronym>UUID</acronym>). These "
"methods are supported in Debian since the 'etch' release."
msgstr ""
"通过给根文件系统使用一个不会在引导时改变的标识符，您可以完全避免这个问题。要做"
"到这点有两种可能的方案──给文件系统加标签，或是用文件系统的通用唯一标识符"
"（<acronym>UUID</acronym>）。Debian 从‘etch’发行版起就已经支持这些方法了。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1450
msgid ""
"The two approaches have advantages and disadvantages. The labelling approach "
"is more readable, but there may be problems if another filesystem on your "
"machine has the same label. The uuid approach is uglier, but having two "
"clashing uuids is highly unlikely."
msgstr ""
"两种方法各有优缺点。文件系统标签可读性好，但如果您的系统中有另一个同名的文件系"
"统时，就会带来问题。UUID 可读性较差，但极不可能出现两个互相冲突的 uuid。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1458
msgid ""
"For the examples below we assume the root filesystem is on <filename>/dev/"
"hda6</filename>. We also assume your system has a working udev installation "
"and ext2 or ext3 filesystems."
msgstr ""
"以下范例中，我们假设根文件系统位于 <filename>/dev/hda6</filename>，同时再假设"
"您的系统装有运行正常的 udev 和 ext2 或是 ext3 文件系统。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1464
msgid "To implement the labelling approach:"
msgstr "使用文件系统标签："

# type: Content of: <chapter><section><section><para><orderedlist><listitem><para>
#: en/upgrading.dbk:1468
msgid ""
"Label the filesystem (the name must be &lt; 16 characters)  by running the "
"command:"
msgstr "通过命令标记文件系统（名称必须 &lt; 16个字符）："

# type: Content of: <chapter><section><section><para><orderedlist><listitem><para><programlisting>
#: en/upgrading.dbk:1470
#, no-wrap
msgid "e2label /dev/hda6 rootfilesys"
msgstr "e2label /dev/hda6 rootfilesys"

# type: Content of: <chapter><section><section><para><orderedlist><listitem><para>
#: en/upgrading.dbk:1475
msgid "Edit <filename>/boot/grub/menu.lst</filename> and change the line:"
msgstr "编辑 <filename>/boot/grub/menu.lst</filename> 并更改以下这行："

# type: Content of: <chapter><section><section><para><orderedlist><listitem><para><programlisting>
#: en/upgrading.dbk:1476 en/upgrading.dbk:1540
#, no-wrap
msgid "# kopt=root=/dev/hda6 ro"
msgstr "# kopt=root=/dev/hda6 ro"

# type: Content of: <chapter><section><section><para><orderedlist><listitem><para>
#: en/upgrading.dbk:1477 en/upgrading.dbk:1501 en/upgrading.dbk:1542
#: en/upgrading.dbk:1567
msgid "to"
msgstr "为"

# type: Content of: <chapter><section><section><para><orderedlist><listitem><para><programlisting>
#: en/upgrading.dbk:1478
#, no-wrap
msgid "# kopt=root=LABEL=rootfilesys ro"
msgstr "# kopt=root=LABEL=rootfilesys ro"

# type: Content of: <chapter><section><section><para><orderedlist><listitem><para><note><para>
#: en/upgrading.dbk:1481 en/upgrading.dbk:1548
msgid ""
"Do not remove the <literal>#</literal> at the start of the line, it needs to "
"be there."
msgstr "不要删除行首的 <literal>#</literal>，那里需要的。"

# type: Content of: <chapter><section><section><para><orderedlist><listitem><para>
#: en/upgrading.dbk:1489 en/upgrading.dbk:1556
msgid ""
"Update the <literal>kernel</literal> lines in <filename>menu.lst</filename> "
"by running the command <command>update-grub</command>."
msgstr ""
"通过运行 <command>update-grub</command> 更新 <filename>menu.lst</filename> 中"
"的 <literal>kernel</literal> 行。"

# type: Content of: <chapter><section><section><para><orderedlist><listitem><para>
#: en/upgrading.dbk:1496 en/upgrading.dbk:1563
msgid ""
"Edit <filename>/etc/fstab</filename> and change the line that mounts the "
"<filename>/</filename> partition, eg.:"
msgstr ""
"编辑 <filename>/etc/fstab</filename> 并改变挂载 <filename>/</filename> 的分区"
"那行，如："

# type: Content of: <chapter><section><section><para><orderedlist><listitem><para><programlisting>
#: en/upgrading.dbk:1499 en/upgrading.dbk:1565
#, no-wrap
msgid "/dev/hda6     /     ext3  defaults,errors=remount-ro 0 1"
msgstr "/dev/hda6     /     ext3  defaults,errors=remount-ro 0 1"

# type: Content of: <chapter><section><section><para><orderedlist><listitem><para><programlisting>
#: en/upgrading.dbk:1503
#, no-wrap
msgid "LABEL=rootfilesys     /     ext3  defaults,errors=remount-ro 0 1"
msgstr "LABEL=rootfilesys     /     ext3  defaults,errors=remount-ro 0 1"

# type: Content of: <chapter><section><section><para><orderedlist><listitem><para>
#: en/upgrading.dbk:1505 en/upgrading.dbk:1571
msgid ""
"The change that matters here is the first column, you don't need to modify "
"the other columns of this line."
msgstr "在这里改变的是第一栏，您不必修改此行的其它栏目。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1513
msgid "To implement the uuid approach:"
msgstr "要使用 UUID 方法："

# type: Content of: <chapter><section><section><para><orderedlist><listitem><para>
#: en/upgrading.dbk:1517
msgid ""
"Find out the universal unique identifier of your filesystem by issuing: "
"<command>ls -l /dev/disk/by-uuid | grep hda6</command>"
msgstr ""
"通过 <command>ls -l /dev/disk/by-uuid | grep hda6</command> 找出您文件系统的通"
"用唯一标识符。"

# type: Content of: <chapter><section><section><para><orderedlist><listitem><para>
#: en/upgrading.dbk:1521
msgid "You should get a line similar to this one:"
msgstr "您应该得到类似于以下内容的一行："

# type: Content of: <chapter><section><section><para><orderedlist><listitem><para><screen>
#: en/upgrading.dbk:1522
#, no-wrap
msgid "lrwxrwxrwx 1 root root 24 2008-09-25 08:16 d0dfcc8a-417a-41e3-ad2e-9736317f2d8a -> ../../hda6"
msgstr "lrwxrwxrwx 1 root root 24 2008-09-25 08:16 d0dfcc8a-417a-41e3-ad2e-9736317f2d8a -> ../../hda6"

# type: Content of: <chapter><section><section><para><orderedlist><listitem><para>
#: en/upgrading.dbk:1524
msgid ""
"The <acronym>UUID</acronym> is the name of the symbolic link pointing to "
"<filename>/dev/hda6</filename> ie.: <literal>d0dfcc8a-417a-41e3-ad2e-"
"9736317f2d8a</literal>."
msgstr ""
"<acronym>UUID</acronym> 是指向 <filename>/dev/hda6</filename> 的符号链接的名"
"字，如 <literal>d0dfcc8a-417a-41e3-ad2e-9736317f2d8a</literal>。"

# type: Content of: <chapter><section><section><para><orderedlist><listitem><para><note><para>
#: en/upgrading.dbk:1529
msgid "Your filesystem <acronym>UUID</acronym> will be a different string."
msgstr "您文件系统的 <acronym>UUID</acronym> 可能是不同的字符串。"

# type: Content of: <chapter><section><section><para><orderedlist><listitem><para>
#: en/upgrading.dbk:1537
msgid "Edit <filename>/boot/grub/menu.lst</filename> and change the line"
msgstr "编辑 <filename>/boot/grub/menu.lst</filename> 并改变这行"

# type: Content of: <chapter><section><section><para><orderedlist><listitem><para><programlisting>
#: en/upgrading.dbk:1544
#, no-wrap
msgid "# kopt=root=UUID=d0dfcc8a-417a-41e3-ad2e-9736317f2d8 ro"
msgstr "# kopt=root=UUID=d0dfcc8a-417a-41e3-ad2e-9736317f2d8 ro"

# type: Content of: <chapter><section><section><para><orderedlist><listitem><para><programlisting>
#: en/upgrading.dbk:1569
#, no-wrap
msgid "UUID=d0dfcc8a-417a-41e3-ad2e-9736317f2d8  /  ext3  defaults,errors=remount-ro 0 1"
msgstr "UUID=d0dfcc8a-417a-41e3-ad2e-9736317f2d8  /  ext3  defaults,errors=remount-ro 0 1"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:1580
msgid "How to recover from the problem after the upgrade"
msgstr "如何在升级后解决此问题"

# type: Content of: <chapter><section><section><section><title>
#: en/upgrading.dbk:1583
msgid "Solution 1"
msgstr "方案一"

# type: Content of: <chapter><section><section><section><para>
#: en/upgrading.dbk:1585
msgid ""
"This is applicable when Grub shows you the menu interface for selecting the "
"entry you want to boot from. If such menu does not appear, try pressing "
"<keycap>Esc</keycap> key before the kernel boots in order to make it appear.  "
"If you can't get into this menu, try <xref linkend=\"solution2\"/> or <xref "
"linkend=\"solution3\"/>."
msgstr ""
"当 Grub 显示菜单界面让您选择您想启动的菜单项时，可以做这步操作。如果没出现那样"
"的菜单，尝试在内核引导显示它之前，按下 <keycap>Esc</keycap> 键。如果您还是无法"
"进入此菜单，尝试 <xref linkend=\"solution2\"/> 或是 <xref linkend=\"solution3"
"\"/>。"

# type: Content of: <chapter><section><section><section><orderedlist><listitem><para>
#: en/upgrading.dbk:1596
msgid ""
"In the Grub menu, highlight the entry you want to boot from. Press <keycap>e</"
"keycap> key to edit the options related to this entry. You will see something "
"like:"
msgstr ""
"在 Grub 菜单中，高亮您想启动的菜单项。按下 <keycap>e</keycap> 键来编辑有关此条"
"目的选项。您将会看到一些东西，类似于："

# type: Content of: <chapter><section><section><section><orderedlist><listitem><para><screen>
#: en/upgrading.dbk:1600
#, no-wrap
msgid ""
"root (hd0,0)\n"
"kernel /vmlinuz-2.6.26-1-686 root=/dev/hda6 ro\n"
"initrd /initrd.img-2.6.26-1-686"
msgstr ""
"root (hd0,0)\n"
"kernel /vmlinuz-2.6.26-1-686 root=/dev/hda6 ro\n"
"initrd /initrd.img-2.6.26-1-686"

# type: Content of: <chapter><section><section><section><orderedlist><listitem><para>
#: en/upgrading.dbk:1607
msgid "Highlight the line"
msgstr "高亮此行"

# type: Content of: <chapter><section><section><section><orderedlist><listitem><para><screen>
#: en/upgrading.dbk:1609
#, no-wrap
msgid "kernel /vmlinuz-2.6.26-1-686 root=/dev/hda6 ro"
msgstr "kernel /vmlinuz-2.6.26-1-686 root=/dev/hda6 ro"

# type: Content of: <chapter><section><section><section><orderedlist><listitem><para>
#: en/upgrading.dbk:1611
msgid ""
"press <keycap>e</keycap> key and replace <literal>hdX</literal> with "
"<literal>sd<replaceable>X</replaceable></literal> (<varname>X</varname> being "
"the letter <literal>a</literal>, <literal>b</literal>, <literal>c</literal> "
"or <literal>d</literal> depending of your system), In my example the line "
"becomes:"
msgstr ""
"按下 <keycap>e</keycap> 键并用 <literal>sd<replaceable>X</replaceable></"
"literal> 代替 <literal>hdX</literal>（<varname>X</varname> 可以是 <literal>a</"
"literal>, <literal>b</literal>, <literal>c</literal> 或 <literal>d</literal> "
"中的一个字母，这依赖于您的系统），在我的例子中这一行变为："

# type: Content of: <chapter><section><section><section><orderedlist><listitem><para><screen>
#: en/upgrading.dbk:1619
#, no-wrap
msgid "kernel /vmlinuz-2.6.26-1-686 root=/dev/sda6 ro"
msgstr "kernel /vmlinuz-2.6.26-1-686 root=/dev/sda6 ro"

# type: Content of: <chapter><section><section><section><orderedlist><listitem><para>
#: en/upgrading.dbk:1621
msgid ""
"Then press <keycap>Enter</keycap> to save the modification. If other lines "
"show <literal>hd<replaceable>X</replaceable></literal>, change these line "
"too. Don't modify the entry similar to <literal>root (hd0,0)</literal>.  Once "
"all modifications are done, press <keycap>b</keycap> key. And your system "
"should now boot as usual."
msgstr ""
"然后按下 <keycap>Enter</keycap> 来保存修改。如果还有其它带 "
"<literal>hd<replaceable>X</replaceable></literal> 字样的行，则一并修改。不要改"
"变类似于 <literal>root (hd0,0)</literal> 这样的条目。一旦做好所有的修改，按下 "
"<keycap>b</keycap> 键。然后您的系统现在应该能正常启动。"

# type: Content of: <chapter><section><section><section><orderedlist><listitem><para>
#: en/upgrading.dbk:1632
msgid ""
"Now that your system has booted, you need to fix this issue permanently.  "
"Jump to <xref linkend=\"avoid-problems-before-upgrading\"/> and apply one of "
"the two proposed procedures."
msgstr ""
"现在您的系统已经启动了，您需要永久修复这个问题。转至 <xref linkend=\"avoid-"
"problems-before-upgrading\"/> 并使用两个方法中的一个。"

# type: Content of: <chapter><section><section><section><title>
#: en/upgrading.dbk:1642
msgid "Solution 2"
msgstr "方案二"

# type: Content of: <chapter><section><section><section><para>
#: en/upgrading.dbk:1645
msgid ""
"Boot from a debian installation media (<acronym>CD</acronym>/<acronym>DVD</"
"acronym>) and when prompt, type <literal>rescue</literal> to launch the "
"rescue mode. Select your language, location, keyboard mapping, let it "
"configure the network no matter if it success or not. After a while, you "
"should be asked for selecting a partition you want to use as root file "
"system. The proposed choices will look something like:"
msgstr ""
"从一个 debian 安装介质（<acronym>CD</acronym>/<acronym>DVD</acronym>）启动，输"
"入 <literal>rescue</literal> 来启动急救模式。选择您的语言、地区、键盘，无论是"
"否成功都让它配置您的网络。过了一会儿，您应该被要求选择一个您想让它作为根文件系"
"统使用的分区。所推荐的选择看起来有点像是："

# type: Content of: <chapter><section><section><section><para><screen>
#: en/upgrading.dbk:1654
#, no-wrap
msgid ""
"/dev/ide/host0/bus0/target0/lun0/part1\n"
"/dev/ide/host0/bus0/target0/lun0/part2\n"
"/dev/ide/host0/bus0/target0/lun0/part5\n"
"/dev/ide/host0/bus0/target0/lun0/part6"
msgstr ""
"/dev/ide/host0/bus0/target0/lun0/part1\n"
"/dev/ide/host0/bus0/target0/lun0/part2\n"
"/dev/ide/host0/bus0/target0/lun0/part5\n"
"/dev/ide/host0/bus0/target0/lun0/part6"

# type: Content of: <chapter><section><section><section><para>
#: en/upgrading.dbk:1661
msgid ""
"If you know which partition is your root file system, choose the right one. "
"If you don't, just try with the first. If it complains about an invalid root "
"file system partition, try the next one, and so on. Trying one after the "
"other shouldn't arm your partitions and if you have only one system installed "
"on your disks, you should easily find the right root file system partition. "
"If you have many systems installed on your disks, it would be better to know "
"exactly which is the right partition."
msgstr ""
"如果您知道哪个分区是您的根文件系统，就选择正确的那个。如果您不知道，只好试一下"
"第一个。如果它报告说是无效的根文件系统分区，就试下一个，以此类推。一个接一个地"
"尝试不会损伤您的分区，而且如果您仅在磁盘上装有一个系统，您应该很容易就找出正确"
"的根文件系统分区。如果您在磁盘上装有多个系统，最好能准确地知道哪个是正确的分"
"区。"

# type: Content of: <chapter><section><section><section><para>
#: en/upgrading.dbk:1673
msgid ""
"Once you have choosen a partition, you will be proposed among several "
"actions.  Make the choice of executing a shell in the selected partition. If "
"it complains that it cannot do that then try with another partition."
msgstr ""
"一旦您已选中一个分区，建议您进行几个操作。在所选分区中选择一个 shell 环境执"
"行。如果无法进行选择，那就试另一个分区。"

# type: Content of: <chapter><section><section><section><para>
#: en/upgrading.dbk:1680
msgid ""
"Now you should have shell access as user root on your root file system "
"mounted on <filename>/</filename>. You need access to the <filename>/boot</"
"filename>, <filename>/sbin</filename> and <filename>/usr</filename> "
"directories content. If these directories need to be mounted from other "
"partitions, do it.  (see <filename>/etc/fstab</filename> if you have no idea "
"of which partition to mount)."
msgstr ""
"现在您应该拥有挂载于 <filename>/</filename> 的根文件系统 shell 环境的 root 用"
"户访问权。您需要访问 <filename>/boot</filename>、<filename>/sbin</filename> "
"和 <filename>/usr</filename> 目录中的内容。如果这些目录需要从其它分区挂载，那"
"就先挂载它们。（如果您不知道挂载哪个分区，请参考 <filename>/etc/fstab</"
"filename>）。"

# type: Content of: <chapter><section><section><section><para>
#: en/upgrading.dbk:1690
msgid ""
"Jump to <xref linkend=\"avoid-problems-before-upgrading\"/> and apply one of "
"the two proposed procedures to fix the problem parmanently. Then type "
"<literal>exit</literal> to leave the rescue shell and select <literal>reboot</"
"literal> for rebooting the system as usual. (Don't forget to remove the "
"bootable media)"
msgstr ""
"转至 <xref linkend=\"avoid-problems-before-upgrading\"/> 并使用两个方法中的一"
"个来永久修复这个问题。然后输入 <literal>exit</literal> 退出急救 shell 环境，并"
"选择 <literal>reboot</literal> 正常重启系统。（别忘了拿走可引导介质）"

# type: Content of: <chapter><section><section><section><title>
#: en/upgrading.dbk:1700
msgid "Solution 3"
msgstr "方案三"

# type: Content of: <chapter><section><section><section><orderedlist><listitem><para>
#: en/upgrading.dbk:1705
msgid ""
"Boot from your favorite LiveCD distribution (Debian Live, Knoppix, Ubuntu "
"Live and many other)."
msgstr ""
"从您最喜欢的 LiveCD 发行版（Debian Live, Knoppix, Ubuntu Live 以及更多其它发行"
"版）启动。"

# type: Content of: <chapter><section><section><section><orderedlist><listitem><para>
#: en/upgrading.dbk:1711
msgid ""
"Mount the partition where your <filename>/boot</filename> directory is. If "
"you don't know which one it is, use the output of the command <command>dmesg</"
"command> to find whether your disk is known as <literal>hda</literal>, "
"<literal>hdb</literal>, <literal>hdc</literal>, <literal>hdd</literal> or "
"<literal>sda</literal>, <literal>sdb</literal>, <literal>sdc</literal>, "
"<literal>sdd</literal>. Once you know which disk to work on, for example "
"<literal>sdb</literal>, issue the following command to see the partition "
"table of the disk and to find the right partition <command>fdisk -l /dev/sdb</"
"command>"
msgstr ""
"挂载 <filename>/boot</filename> 目录所在的分区。如果您不知道是哪个，利用 "
"<command>dmesg</command> 的输出来找出是否您的磁盘是 <literal>hda</literal>, "
"<literal>hdb</literal>, <literal>hdc</literal>, <literal>hdd</literal> 或是 "
"<literal>sda</literal>, <literal>sdb</literal>, <literal>sdc</literal>, "
"<literal>sdd</literal>。一旦您知道是哪个磁盘，例如是 <literal>sdb</literal>，"
"发出以下命令查看磁盘分区表并用命令 <command>fdisk -l /dev/sdb</command> 找出正"
"确的分区。"

# type: Content of: <chapter><section><section><section><orderedlist><listitem><para>
#: en/upgrading.dbk:1727
msgid ""
"Assuming that you have mounted the right partition under <filename>/mnt</"
"filename> and that this partition contains the <filename>/boot</filename> "
"directory and its content, edit the <filename>/mnt/boot/grub/menu.lst</"
"filename> file."
msgstr ""
"假设，您已经在 <filename>/mnt</filename> 下挂载了正确的分区，而且此分区含有 "
"<filename>/boot</filename> 目录及其内容，那就编辑 <filename>/mnt/boot/grub/"
"menu.lst</filename> 文件。"

# type: Content of: <chapter><section><section><section><orderedlist><listitem><para>
#: en/upgrading.dbk:1734
msgid "Find the section similar to:"
msgstr "找到类似于以下的这一段："

# type: Content of: <chapter><section><section><section><orderedlist><listitem><para><programlisting>
#: en/upgrading.dbk:1735
#, no-wrap
msgid ""
"## ## End Default Options ##\n"
"\n"
"title           Debian GNU/Linux, kernel 2.6.26-1-686\n"
"root            (hd0,0)\n"
"kernel          /vmlinuz-2.6.26-1-686 root=/dev/hda6 ro\n"
"initrd          /initrd.img-2.6.26-1-686\n"
"\n"
"title           Debian GNU/Linux, kernel 2.6.26-1-686 (single-user mode)\n"
"root            (hd0,0)\n"
"kernel          /vmlinuz-2.6.26-1-686 root=/dev/hda6 ro single\n"
"initrd          /initrd.img-2.6.26-1-686\n"
"\n"
"### END DEBIAN AUTOMAGIC KERNELS LIST"
msgstr ""
"## ## End Default Options ##\n"
"\n"
"title           Debian GNU/Linux, kernel 2.6.26-1-686\n"
"root            (hd0,0)\n"
"kernel          /vmlinuz-2.6.26-1-686 root=/dev/hda6 ro\n"
"initrd          /initrd.img-2.6.26-1-686\n"
"\n"
"title           Debian GNU/Linux, kernel 2.6.26-1-686 (single-user mode)\n"
"root            (hd0,0)\n"
"kernel          /vmlinuz-2.6.26-1-686 root=/dev/hda6 ro single\n"
"initrd          /initrd.img-2.6.26-1-686\n"
"\n"
"### END DEBIAN AUTOMAGIC KERNELS LIST"

# type: Content of: <chapter><section><section><section><orderedlist><listitem><para>
#: en/upgrading.dbk:1749
msgid ""
"and replace every <literal>hda</literal>, <literal>hdb</literal>, "
"<literal>hdc</literal>, <literal>hdd</literal> respectively with "
"<literal>sda</literal>, <literal>sdb</literal>, <literal>sdc</literal>, "
"<literal>sdd</literal>.  Don't modify the line similar to:"
msgstr ""
"并将 <literal>hda</literal>，<literal>hdb</literal>，<literal>hdc</literal>，"
"<literal>hdd</literal> 分别替换为 <literal>sda</literal>，<literal>sdb</"
"literal>，<literal>sdc</literal>，<literal>sdd</literal>。不要修改类似于这样的"
"行："

# type: Content of: <chapter><section><section><section><orderedlist><listitem><para><screen>
#: en/upgrading.dbk:1756
#, no-wrap
msgid "root            (hd0,0)"
msgstr "root            (hd0,0)"

# type: Content of: <chapter><section><section><section><orderedlist><listitem><para>
#: en/upgrading.dbk:1761
msgid ""
"Reboot the system, remove the LiveCD and your system should boot correctly."
msgstr "重启系统，弹出 LiveCD，您的系统应该能正确的启动了。"

# type: Content of: <chapter><section><section><section><orderedlist><listitem><para>
#: en/upgrading.dbk:1767
msgid ""
"When it has booted, apply one of the two proposed procedures under <xref "
"linkend=\"avoid-problems-before-upgrading\"/> to fix the problem permanently."
msgstr ""
"当系统引导时，使用 <xref linkend=\"avoid-problems-before-upgrading\"/> 中所建"
"议的两个处理过程中的一个来永久修复这个问题。"

# type: Content of: <chapter><section><title>
#: en/upgrading.dbk:1779
msgid "Preparing for the next release"
msgstr "为下个发行版做准备"

# type: Content of: <chapter><section><para>
#: en/upgrading.dbk:1781
msgid ""
"After the upgrade there are several things you can do to prepare for the next "
"release."
msgstr "升级完成后，您可以为下个发行版做点事。"

# type: Content of: <chapter><section><itemizedlist><listitem><para>
#: en/upgrading.dbk:1787
msgid ""
"If the new kernel image metapackage was pulled in as a dependency of the old "
"one, it will be marked as automatically installed, which should be corrected:"
msgstr ""
"如果新的内核镜像元数据包被当作旧镜像的依赖包而安装，那新镜像将被标记为自动安"
"装，这应该被改正："

# type: Content of: <chapter><section><itemizedlist><listitem><screen>
#: en/upgrading.dbk:1790
#, no-wrap
msgid ""
"\n"
"# aptitude unmarkauto $(dpkg-query -W 'linux-image-2.6-*' | cut -f1)\n"
msgstr ""
"\n"
"# aptitude unmarkauto $(dpkg-query -W 'linux-image-2.6-*' | cut -f1)\n"

# type: Content of: <chapter><section><itemizedlist><listitem><para>
#: en/upgrading.dbk:1796
msgid ""
"Remove obsolete and unused packages as described in <xref linkend=\"obsolete"
"\"/>.  You should review which configuration files they use and consider "
"purging the packages to remove their configuration files."
msgstr ""
"像 <xref linkend=\"obsolete\"/> 中描述的那样移除过时的和未使用的包。您应该核查"
"这些包所用的配置文件，并考虑完全删除这些包以移除它们的配置文件。"

# type: Content of: <chapter><section><title>
#: en/upgrading.dbk:1805
msgid "Deprecated packages"
msgstr "不赞成地包"

# type: Content of: <chapter><section><para>
#: en/upgrading.dbk:1807
msgid ""
"With the release of <literal>Lenny</literal> a bigger number of server "
"packages will be deprecated, thus updating to newer versions of those now "
"will save you from trouble when updating to <literal>Lenny</literal>."
msgstr ""
"随着 <literal>Lenny</literal> 版的发行，大量的服务包都将不赞成使用，因此当升级"
"至 <literal>Lenny</literal> 版时更新至这些包的新版本可以解决您的困扰。"

# type: Content of: <chapter><section><para>
#: en/upgrading.dbk:1812
msgid "This includes the following packages:"
msgstr "包含以下这些包："

# type: Content of: <chapter><section><itemizedlist><listitem><para>
#: en/upgrading.dbk:1817
msgid "apache (1.x), successor is apache2"
msgstr "apache (1.x)，由 apache2 替代"

# type: Content of: <chapter><section><itemizedlist><listitem><para>
#: en/upgrading.dbk:1822
msgid "bind8, successor is bind9"
msgstr "bind8，由 bind9 替代"

# type: Content of: <chapter><section><itemizedlist><listitem><para>
#: en/upgrading.dbk:1827
msgid "php4, successor is php5"
msgstr "php4，由 php5 替代"

# type: Content of: <chapter><section><itemizedlist><listitem><para>
#: en/upgrading.dbk:1832
msgid "postgresql-7.4, successor is postgresql-8.1"
msgstr "postgresql-7.4，由 postgresql-8.1 替代"

# type: Content of: <chapter><section><title>
#: en/upgrading.dbk:1839
msgid "Obsolete packages"
msgstr "过时的包"

# type: Content of: <chapter><section><para><footnote>
#: en/upgrading.dbk:1841
msgid ""
"Introducing several thousand new packages, &releasename; also retires and "
"omits more than two thousand old packages that were in &oldreleasename;.  It "
"provides no upgrade path for these obsolete packages.  While nothing prevents "
"you from continuing to use an obsolete package where desired, the Debian "
"project will usually discontinue security support for it a year after "
"&releasename;'s release<footnote>"
msgstr ""
"在带来几千个新软件包的同时，&releasename; 也清除了曾经存在于 &oldreleasename; "
"中超过两千个的旧软件包。&releasename; 不提供这些过时包的升级。当然，在您需要的"
"地方没什么可以阻止您继续使用这些过时的包，Debian 计划通常会在 &releasename; 发"
"行版后的一年间不断的提供安全更新<footnote>"

# type: Content of: <chapter><section><para><footnote><para>
#: en/upgrading.dbk:1845
msgid ""
"Or for as long as there is not another release in that time frame.  Typically "
"only two stable releases are supported at any given time."
msgstr ""
"否则只要在那段时间内没有另外的发行版释出。在任意给定时间内，一般仅提供两个 "
"stable 发行版的安全更新。"

# type: Content of: <chapter><section><para>
#: en/upgrading.dbk:1847
msgid ""
"</footnote>, and will not normally provide other support in the meantime.  "
"Replacing them with available alternatives, if any, is recommended."
msgstr "</footnote>，且通常不会同时提供其它支持。推荐用可用的替代品代替它们。"

# type: Content of: <chapter><section><para>
#: en/upgrading.dbk:1852
msgid ""
"There are many reasons why packages might have been removed from the "
"distribution: they are no longer maintained upstream; there is no longer a "
"Debian Developer interested in maintaining the packages; the functionality "
"they provide has been superseded by different software (or a new version); or "
"they are no longer considered suitable for &releasename; due to bugs in "
"them.  In the latter case, packages might still be present in the "
"<quote>unstable</quote> distribution."
msgstr ""
"为什么包会从发行版中移除？这有很多原因，如：它们不再被上游作者维护了；没有 "
"Debian 开发者对维护这个包感兴趣；这些包提供的功能被不同的软件（或新版本）替代"
"了；或者由于它们自身的问题，因而被认为不适用于 &releasename;。 最后一种情况"
"下，这些包有可能仍然位于 <quote>unstable</quote> 版之下。"

# type: Content of: <chapter><section><para>
#: en/upgrading.dbk:1860
msgid ""
"Detecting which packages in an updated system are <quote>obsolete</quote> is "
"easy since the package management front-ends will mark them as such.  If you "
"are using <command>aptitude</command>, you will see a listing of these "
"packages in the <quote>Obsolete and Locally Created Packages</quote> entry.  "
"<command>dselect</command> provides a similar section but the listing it "
"presents might differ.  Also, if you have used <command>aptitude</command> to "
"manually install packages in &oldreleasename; it will have kept track of "
"those packages you manually installed and will be able to mark as obsolete "
"those packages pulled in by dependencies alone which are no longer needed if "
"a package has been removed.  Also, <command>aptitude</command>, unlike "
"<command>deborphan</command> will not mark as obsolete packages that you "
"manually installed, as opposed to those that were automatically installed "
"through dependencies."
msgstr ""
"检测在已更新的系统中哪些包是<quote>过时</quote>的现在容易得很，因为包管理的前"
"台程序会标记它们的。如果您使用的是 <command>aptitude</command>，您将在 "
"<quote>Obsolete and Locally Created Packages</quote> 条目中看到这些包。"
"<command>dselect</command> 提供类似的条目，但它显示的列表有所不同。还有，如果"
"您曾经用 <command>aptitude</command> 手工在 &oldreleasename; 中安装过包，"
"aptitude 会保存那些您手工安装的记录。如果有某个包被移除并导致出现无依赖性，即"
"不再需要那些包，aptitude 会那些包标记为过时的包。还有 <command>aptitude</"
"command>，不同于 <command>deborphan</command>。<command>deborphan</command> 不"
"将您手工安装过的包，而非那些通过依赖性自动安装的软件包，标记为过时的包。"

# type: Content of: <chapter><section><para>
#: en/upgrading.dbk:1874
msgid ""
"There are additional tools you can use to find obsolete packages such as "
"<command>deborphan</command>, <command>debfoster</command> or <command>cruft</"
"command>.  <command>deborphan</command> is highly recommended, although it "
"will (in default mode) only report obsolete libraries: packages in the "
"<quote><literal>libs</literal></quote> or <quote><literal>oldlibs</literal></"
"quote> sections that are not used by any other packages.  Do not blindly "
"remove the packages these tools present, especially if you are using "
"aggressive non-default options that are prone to produce false positives.  It "
"is highly recommended that you manually review the packages suggested for "
"removal (i.e.  their contents, size and description) before you remove them."
msgstr ""
"您可以用其它的工具来找出过时的包，例如 <command>deborphan</command>，"
"<command>debfoster</command> 或 <command>cruft</command>。推荐使用 "
"<command>deborphan</command>，尽管它（默认情况下）只报告过时的库，即 "
"<quote><literal>libs</literal></quote> 或是 <quote><literal>oldlibs</"
"literal></quote> 部分中的未被其它包依赖的软件包。不要盲目的移除那些工具要用到"
"的包，尤其是当您正在使用激进的非默认的选项，它们容易引起严重错误。极度推荐在您"
"移除它们之前，手工核查那些建议移除的包（例如：它们的内容、大小以及描述信息）。"

# type: Content of: <chapter><section><para>
#: en/upgrading.dbk:1885
msgid ""
"The <ulink url=\"&url-bts;\">Debian Bug Tracking System</ulink> often "
"provides additional information on why the package was removed.  You should "
"review both the archived bug reports for the package itself and the archived "
"bug reports for the <ulink url=\"&url-bts;cgi-bin/pkgreport.cgi?pkg=ftp."
"debian.org&amp;archive=yes\">ftp.debian.org pseudo-package</ulink>."
msgstr ""
"<ulink url=\"&url-bts;\"> Debian 错误跟踪系统</ulink>通常会提供额外信息，这些"
"都是有关这个包为什么要被移除的信息。您应该既查看此包自身的归档错误报告，同时也"
"要看一下 <ulink url=\"&url-bts;cgi-bin/pkgreport.cgi?pkg=ftp.debian.org&amp;"
"archive=yes\">ftp.debian.org pseudo-package</ulink> 中的归档错误报告。"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:1893
msgid "Dummy packages"
msgstr "哑包"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1895
msgid ""
"Some packages from &oldreleasename; have been split into several packages in "
"&releasename;, often to improve system maintainability.  To ease the upgrade "
"path in such cases, &releasename; often provides <quote>dummy</quote> "
"packages: empty packages that have the same name as the old package in "
"&oldreleasename; with dependencies that cause the new packages to be "
"installed.  These <quote>dummy</quote> packages are considered obsolete "
"packages after the upgrade and can be safely removed."
msgstr ""
"来自 &oldreleasename; 的某些包在 &releasename; 中已经被分为好几个包，通常这是"
"为了改善系统的可维护性。在此情况下，为了能平滑升级，&releasename; 通常提供"
"<quote>哑</quote>包（即空包），它与 &oldreleasename; 中的旧包名称相同，但有依"
"赖性，促使它们安装新包。这些<quote>哑</quote>包在升级成功后就会被认为是过时的"
"包，且能够被安全地移除。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1903
msgid ""
"Most (but not all) dummy packages' descriptions indicate their purpose.  "
"Package descriptions for dummy packages are not uniform, however, so you "
"might also find <command>deborphan</command> with the <literal>--guess</"
"literal> options useful to detect them in your system.  Note that some dummy "
"packages are not intended to be removed after an upgrade but are, instead, "
"used to keep track of the current available version of a program over time."
msgstr ""
"绝大多数（并非所有）哑包的描述信息会显示它们的用途。但哑包的描述信息并不统一，"
"因此你可能会发现带上<literal> --guess </literal>选项的<command> deborphan </"
"command>命令对于找出您系统中的哑包是很有用的。注意，某些哑包在升级后是不打算被"
"系统移除的，相反它们被用于长期跟踪某程序的当前可用版本这样的目的。"

# type: Content of: <chapter><section><title>
#: en/upgrading.dbk:1915
msgid "Plans for the next Debian release"
msgstr "下个 Debian 发行版的计划"

# type: Content of: <chapter><section><section><title>
#: en/upgrading.dbk:1918
msgid "Drop of the ARM port, in favour of the ARM EABI port"
msgstr "抛弃 ARM，而改用 ARM EABI"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1921
msgid ""
"Debian lenny has two different and incompatible ARM ports: the old ABI port "
"(arm) and the new EABI port (armel).  Debian lenny is the last release with "
"support for the ARM port and future releases will only support the ARM EABI "
"or armel port.  It's therefore recommended to use armel for new installations "
"of lenny."
msgstr ""
"Debian lenny 发行版有两个不同的且不匹配的 ARM 版本：老的 ARM (arm) 和新的 "
"EABI (armel)。Debian lenny 是最后一个带有 ARM 支持的发行版，以后的发行版将仅支"
"持 ARM EABI (armel)。因此，全新安装 lenny 时建议使用 armel。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1930
msgid ""
"With the exception of Netwinder, installer images for supported ARM machines "
"are available for both arm and armel in lenny.  Netwinder support is only "
"available for arm and it will be dropped after lenny along with the arm port."
msgstr ""
"除 Netwinder 以外，lenny 下支持 ARM 机器的安装镜像，arm 和 armel 均可用。"
"Netwinder 支持只对 arm 可用，而且 lenny 以后的发行版将抛弃支持 arm 的"
"Netwinder。"

# type: Content of: <chapter><section><section><para>
#: en/upgrading.dbk:1937
msgid ""
"Please visit <ulink url=\"http://wiki.debian.org/ArmEabiPort\">this page</"
"ulink> to learn more about the ARM EABI (armel) port."
msgstr ""
"请浏览<ulink url=\"http://wiki.debian.org/ArmEabiPort\">此页</ulink>来了解更多"
"的有关 ARM EABI (armel) 的信息。 "
