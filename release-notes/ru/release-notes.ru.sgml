<!DOCTYPE debiandoc PUBLIC "-//DebianDoc//DTD DebianDoc//EN" [

  <!ENTITY % dynamicdata SYSTEM "../en/../dynamic.ent"> %dynamicdata;
  <!ENTITY % shareddata SYSTEM "../en/../release-notes.ent"> %shareddata;
  <!ENTITY docid "$Id: release-notes.ru.sgml,v 1.10 2007-08-12 15:26:16 jseidel Exp $">
]>
<debiandoc>
 <book>
  <titlepag>
   <title>
     Информация о выпуске &debian; &release; ("&releasename;") для 
     архитектуры &arch-title;
   </title>
   <author>
     <name>Josip Rodin, Bob Hilliard, Adam Di Carlo, Anne Bezemer, Rob 
     Bradford, Frans Pop (текущее издание) Andreas Barth (текущее издание), 
     Javier Fern&aacute;ndez-Sanguino Pe&ntilde;a (текущее издание), Steve 
     Langasek (текущее издание)</name><email></email>
   </author>
   <author>
     <name></name><email>debian-doc@lists.debian.org</email>
   </author>
   <version>
     &docid;

   </version>
  </titlepag>
  <toc detail="sect1">
 
 <chapt id="about">
  <heading>
    Введение
  </heading>
  <p>
    Основной целью информации о выпуске является информирование 
    пользователей об основных изменениях в этом выпуске дистрибутива 
    &debian;, о том, как безопасно обновиться с предыдущей версии и, 
    наконец, сообщить пользователям об известных потенциальных проблемах, с 
    которыми они могут столкнуться при обновлении или использовании выпуска 
    &releasename;.
  </p>
  <p>
    Заметим, что здесь невозможно перечислить все известные проблемы и 
    поэтому были выбраны только те, которые, как ожидается, могут возникнуть 
    у большинства людей, и которые оказывают наибольшее влияние в целом.
  </p>
  <p>
    Самая новая версия этого документа всегда доступна по адресу <url 
    id="&url-release-notes;">. Если версия, которую вы читаете, выпущена 
    больше месяца назад<footnote><p>Дата проставлена на первой странице 
    документа в формате PDF и в конце страницы оглавления онлайн версии в 
    формате HTML</p></footnote>, стоит загрузить более новую.
  </p>
  <p>
    Обратите внимание, что теперь поддерживается и описывается только 
    обновление с предыдущего выпуска Debian (то есть этот документ описывает 
    обновление с &oldreleasename;). Если вам требуется обновить систему с 
    более старого выпуска, обратитесь к ранним редакциям этого документа или 
    сначала выполните обновление до &oldreleasename;.
  </p>
  <sect id="bug_reports">
   <heading>
     Как сообщить об ошибке в этом документе
   </heading>
   <p>
     Мы пытались провести все возможные шаги обновления, описанные в этом 
     документе, а также попытались предвидеть все возможные проблемы, с 
     которыми могут столкнуться пользователи.
   </p>
   <p>
     Тем не менее, если вы думаете, что нашли ошибку в этом описании (есть 
     неправильная или отсутствующая информация), пожалуйста, отправьте 
     сообщение об ошибке в пакете <package>release-notes</package> в <url 
     id="&url-bts;" name="систему отслеживания ошибок">.
   </p>
  </sect>
  <sect id="upgrade_reports">
   <heading>
     Предоставление отчёта об обновлении
   </heading>
   <p>
     Мы рады любой информации о проведённом обновлении с &oldreleasename; до 
     &releasename; от пользователей. Если вы хотите поделиться своим опытом, 
     отправьте сообщение об ошибке в пакете <package>release-notes</package> 
     в <url id="&url-bts;" name="систему отслеживания ошибок"> описав 
     результаты. Пожалуйста, сжимайте все прикладываемые к сообщению файлы 
     (с помощью <prgn>gzip</prgn>).
   </p>
   <p>
     Пожалуйста включите в отправляемое сообщение следующую информацию:
    <list>
     <item>
      <p>
        Состояние базы данных пакетов до и после обновления: база данных 
        <prgn>dpkg</prgn> содержится в файле 
        <file>/var/lib/dpkg/status</file>, а 
        <prgn>aptitude</prgn>-информация о состоянии пакетов содержится в 
        файле <file>/var/lib/aptitude/pkgstates</file>. Перед обновлением 
        выполните резервное копирование согласно описанию <ref 
        id="data-backup">, помимо этого, вы можете найти резервные копии 
        данной информации в каталоге <file>/var/backups</file>.
      </p>
     </item>
     <item>
      <p>
        Журналы сеанса работы с помощью <prgn>script</prgn>, как это описано 
        в <ref id="record_session">.
      </p>
     </item>
     <item>
      <p>
        Файлы журналов <prgn>aptitude</prgn> из каталога 
        <file>/var/log/aptitude</file>.
      </p>
     </item>
    </list>
   </p>
   <p>
     Замечание: обязательно просмотрите и удалите всю личную и/или 
     конфиденциальную информацию из журналов перед тем как включать их в 
     сообщение об ошибке, так как эта информация будет доступна в публичной 
     базе данных.
   </p>
  </sect>
  <sect id="sources">
   <heading>
     Исходный текст этого документа
   </heading>
   <p>
     Этот документ создан с помощью пакета 
     <package>debiandoc-sgml</package>. Исходный текст документа доступен в 
     CVS <em>проекта документирования Debian</em>. Для доступа к отдельным 
     файлам и для просмотра изменений вы можете использовать <url 
     id="&url-cvs-release-notes;" name="веб интерфейс">. Подробней о доступе 
     к CVS описано на <url id="&url-ddp-cvs-info;" name="страницах CVS 
     проекта документирования Debian">.
   </p>
  </sect>
 </chapt>
 <chapt id="whats-new">
  <heading>
    Что нового в &debian; &release;
  </heading>
  <p>
    В этот выпуск добавлена официальная поддержка архитектуры AMD64, в 
    которую входят 64-битные процессоры Intel (EM64T) и AMD (AMD64). Для 
    предыдущего выпуска &debian; 3.1 ('sarge') была доступна неофициальная 
    версия переноса. <![ %amd64 [ Обновление с неофициальной версии возможно 
    с помощью этой информации о выпуске, но официально Debian оно не 
    поддерживается. ]]>
  </p>
  <p>
    Официальная поддержка архитектуры Motorola 680x0 ('m68k') прекращена, 
    так как перестала удовлетворять критериям, установленным менеджерами 
    выпуска Debian. Основными причинами являются производительность и 
    ограниченная поддержка со стороны разработчиков компонент, необходимых 
    для пересборки (toolchain). Однако, перенос m68k предполагается оставить 
    активным и он будет доступен для установки, даже если не войдёт в состав 
    официального стабильного выпуска.
  </p>
  <p>
    Cписок официально поддерживаемых архитектур для &debian; &releasename;:
  </p>
  <p>
   <list>
    <item>
     <p>
       Intel x86 ('i386')
     </p>
    </item>
    <item>
     <p>
       Alpha ('alpha')
     </p>
    </item>
    <item>
     <p>
       SPARC ('sparc')
     </p>
    </item>
    <item>
     <p>
       PowerPC ('powerpc')
     </p>
    </item>
    <item>
     <p>
       ARM ('arm')
     </p>
    </item>
    <item>
     <p>
       MIPS ('mips' (big-endian) и 'mipsel' (little-endian))
     </p>
    </item>
    <item>
     <p>
       Intel Itanium ('ia64')
     </p>
    </item>
    <item>
     <p>
       HP PA-RISC ('hppa')
     </p>
    </item>
    <item>
     <p>
       S/390 ('s390')
     </p>
    </item>
    <item>
     <p>
       AMD64 ('amd64')
     </p>
    </item>
   </list>
  </p>
  <p>
    Более подробную информацию о переносе на различные архитектуры и 
    сведения, относящиеся к конкретным переносам, вы можете получить на <url 
    id="&url-ports;" name="странице переносов Debian">.
  </p>
   <![ %secondrelease [

  <p>
    Это лишь второй официальный выпуск &debian; для архитектуры 
    &arch-title;. Мы считаем, что он проверен в достаточной мере, чтобы быть 
    выпущен. Однако, поскольку тестировался он всё же меньше, чем другие 
    выпуски на других архитектурах, вы можете обнаружить в нём 
    ошибки. Пожалуйста, сообщайте нам о любых проблемах через <url 
    id="&url-bts;" name="Систему отслеживания ошибок">, обязательно отметив 
    при этом, что ошибка наблюдается на платформе &architecture;.
  </p>
   ]]><![ %arm [

  <sect id="new-arch">
   <heading>
     Что нового для &arch-title;?
   </heading>
   <p>
     RiscPC (RPC) поддерживается не полностью и будет удалена после выпуска 
     etch. Хотя и ядро RiscPC пока включено в etch, программа установки не 
     поддерживает эту систему.
   </p>
   <p>
     Была добавлена поддержка платформы Intel IXP4xx. Программа установки 
     поддерживает Linksys NSLU2, маленькое и недорогое устройство, которое 
     предоставляет доступ к подключённому устройству через USB. Более полную 
     информацию о Debian на NSLU2 можно найти по адресу <url 
     id="http://www.cyrius.com/debian/nslu2/">.
   </p>
   <p>
     Также была добавлена поддержка платформы Intel I/O Processor (IOP). В 
     частности, &debian; &release; поддерживает устройства, основанные на 
     IOP 32x. Программой установки поддерживаются два устройства хранения 
     данных, подключённых к сети (NAS), основанные на чипе IOP: GLAN Tank от 
     IO-Data и Thecus N2100. Подробности по ссылке <url 
     id="http://www.cyrius.com/debian/iop/">.
   </p>
  </sect>
   ]]><![ %mips-mipsel [

  <sect id="new-arch">
   <heading>
     Что нового для &arch-title;?
   </heading>
    <![ %mipsel [

   <p>
     Поддержка DECstation не является полной и была плохо протестирована, и 
     будет полностью удалена после выхода этого выпуска. К этим устройствам 
     относятся ранее поддерживающиеся в Debian варианты r3k-kn02 и r4k-kn04.
   </p>
   <p>
     Установка на Cobalt машины с архитектурой MIPS (Qube 2700, RaQ1, Qube2, 
     RaQ2) теперь возможна без использования последовательной консоли. По 
     умолчанию, установка на Cobalt теперь выполняется через 
     SSH. Подробности смотрите по адресу <url 
     id="http://www.cyrius.com/debian/cobalt/">.
   </p>
    ]]><![ %mips [

   <p>
     Была добавлена поддержка платформы SGI IP32. К платформе IP32 относятся 
     машины SGI O2 с процессорами R5000, R5200 или RM7000. Установка 
     возможна через фрейм-буфер или последовательную консоль.
   </p>
    ]]>

   <p>
     В ядро и программу установки была добавлена поддержка платы Broadcom 
     SB1A &mdash; BCM91480B ("BigSur"), которая основана на четырёхядерном 
     чипе BCM1480. Эта плата поддерживается в режимах с прямым и обратным 
     порядком доступа к памяти.
   </p>
   <p>
     Была добавлена поддержка машины Qemu. Машина Qemu/MIPS эмулирует 
     классическую ISA PC машину с процессором MIPS 4Kc.
   </p>
  </sect>
   ]]><![ %powerpc [

  <sect id="new-arch">
   <heading>
     Что нового для &arch-title;?
   </heading>
   <p>
     В этом выпуске добавлена поддержка 64-битных архитектур PowerPC (IBM 
     pSeries, Apple G5 powermacs). Поддержка для субархитектуры Apple Apus 
     была удалена; субархитектура Apple Nubus также не поддерживается.
   </p>
   <p>
     Клавиатуры iBook и Powerbook в &arch-title; теперь полностью 
     поддерживаются (в X) и поэтому изменённые xmodmap больше не нужны (по 
     сравнению с <tt>&oldreleasename;</tt>).
   </p>
  </sect>
   ]]>

  <sect id="newdistro">
   <heading>
     Что нового в дистрибутиве?
   </heading>
   <p>
     Новый выпуск Debian опять содержит намного больше программ, чем 
     предшественник, &oldreleasename;. Дистрибутив включает в себя более 
     &packages-new; новых пакетов, всего их стало более 
     &packages-total;. Большая часть программ, входящих в дистрибутив, была 
     обновлена: более &packages-updated; пакетов (что составляет 
     &packages-update-percent;% дистрибутива &oldreleasename;). Также, по 
     различным причинам многие пакеты (более &packages-removed;, 
     &packages-removed-percent;% дистрибутива &oldreleasename;) были удалены 
     из дистрибутива. Эти пакеты не будут обновлены, в программах управления 
     пакетами они будут помечены как "устаревшие" (obsolete).
   </p>
   <p>
     В этом выпуске &debian; был осуществлён переход с XFree86 на X.Org 
     версии 7.1, что дало поддержку более широкого спектра аппаратного 
     обеспечения и лучшее автоопределение устройств. Теперь можно 
     использовать Compiz, один из первых compositing window managers для X 
     Window System, что позволяет воспользоваться преимуществами аппаратного 
     OpenGL-ускорения в поддерживающих его устройствах.
   </p>
   <p>
     &debian; снова распространяется с несколькими типами рабочих столов и 
     окружениями. Помимо прочих, теперь включены окружения рабочего стола 
     GNOME 2.14<footnote><p>С несколькими модулями из GNOME 
     2.16.</p></footnote>, KDE 3.5.5a и Xfce 4.4. Обновлены офисные 
     приложения: пакеты OpenOffice.org 2.0.4a и KOffice 1.6, а также GNUcash 
     2.0.5, GNUmeric 1.6.3 и Abiword 2.4.6.
   </p>
   <p>
     Обновлены другие приложения рабочего стола: Evolution 2.6.3 и Gaim 
     2.0. Пакет Mozilla также был обновлён, но его основные программы были 
     переименованы: <prgn>iceweasel</prgn> (версии 2.0.0.2) &mdash; это 
     веб-браузер <prgn>Firefox</prgn> без бренда и <prgn>icedove</prgn> 
     (версии 1.5) &mdash; это почтовый клиент <prgn>Thunderbird</prgn> без 
     бренда.
   </p>
   <p>
     В этом выпуске, среди прочего, было обновлено следующее программное 
     обеспечение:
   </p>
   <p>
    <list>
     <item>
      <p>
        библиотека GNU C, версия 2.3.6
      </p>
     </item>
     <item>
      <p>
        компилятором по умолчанию является GNU Compiler Collection 4.1
      </p>
     </item>
     <item>
      <p>
        интерпретаторы языков: Python 2.4, PHP 5.2
      </p>
     </item>
     <item>
      <p>
        серверное ПО:
      </p>
      <p>
       <list>
        <item>
         <p>
           почтовые серверы: Exim 4.63 (почтовый сервер по умолчанию при 
           установке "с нуля"), Postfix 2.3, Courier 0.53, Cyrus 2.2
         </p>
        </item>
        <item>
         <p>
           веб-серверы: Apache 2.2, fnord 1.10
         </p>
        </item>
        <item>
         <p>
           серверы баз данных: MySQL 5.0.32, PostgreSQL 8.1
         </p>
        </item>
        <item>
         <p>
           сервер OpenSSH, версия 4.3
         </p>
        </item>
        <item>
         <p>
           серверы имён: Bind 9.3, maradns 1.2
         </p>
        </item>
        <item>
         <p>
           сервер каталогов: OpenLDAP 2.3
         </p>
        </item>
       </list>
      </p>
     </item>
    </list>
   </p>
   <p>
     Официальный дистрибутив &debian; теперь занимает от 19 до 23 
     компакт-дисков (в зависимости от архитектуры) с собранными пакетами, 
     приблизительно столько же дисков занимают пакеты с исходными 
     кодами. Также доступна версия дистрибутива на DVD.
   </p>
   <sect1 id="pkgmgmt">
    <heading>
      Управление пакетами
    </heading>
    <p>
      Рекомендуемой программой управления пакетами из консоли является 
      <prgn>aptitude</prgn>. <prgn>aptitude</prgn> поддерживает большую 
      часть операций командной строки <prgn>apt-get</prgn> и гораздо лучше 
      разрешает зависимости. Если вы всё ещё пользуетесь 
      <prgn>dselect</prgn>, то вам нужно перейти на официальный интерфейс 
      управления пакетами <prgn>aptitude</prgn>.
    </p>
    <p>
      Для &releasename; в <prgn>aptitude</prgn> реализован более 
      интеллектуальный механизм разрешения конфликтов, который пытается 
      найти лучшее решение при обнаружении конфликта в зависимостях между 
      пакетами.
    </p>
    <p>
      <em>Защищённый APT</em> теперь входит в &releasename;. Это свойство 
      добавляет дополнительную безопасность в системы &debian; через 
      проверку цифровых подписей скачиваемых пакетов и стойкого 
      шифрования. Данный выпуск содержит программу <prgn>apt-key</prgn>, 
      которая позволяет добавлять новые ключи в связку ключей apt, по 
      умолчанию содержащую только действующий ключ подписания архива Debian, 
      предоставляемый пакетом <package>debian-archive-keyring</package>.
    </p>
    <p>
      По умолчанию <prgn>apt</prgn> будет выдавать предупреждение, если 
      пакеты скачиваются из не аутентифицированных источников. В будущих 
      выпусках возможно будет включена проверка всех пакетов перед их 
      загрузкой. Администраторам неофициальных источников apt предлагается 
      создать криптографический ключ и подписать им свои файлы Release, а 
      также предоставить безопасный способ распространения своих общих 
      ключей.
    </p>
    <p>
      Подробная информация дана на странице руководства по <manref 
      section="8" name="apt">, в главе <url 
      id="http://www.debian.org/doc/manuals/securing-debian-howto/ch7#s-deb-pack-sign" 
      name="Подписание пакетов в Debian"> <em>руководства по безопасности 
      Debian</em> и в <url id="http://wiki.debian.org/SecureApt" 
      name="вики">.
    </p>
    <p>
      В <prgn>apt</prgn> было добавлено ещё одно свойство: способность 
      скачивать только изменения в файлах <file>Packages</file>, 
      произошедших с последнего обновления. Подробности по адресу <ref 
      id="apt-pdiff">.
    </p>
   </sect1>
   <sect1 id="volatile">
    <heading>
      Сервис debian-volatile теперь предоставляется официально
    </heading>
    <p>
      Неофициальный сервис <em>debian-volatile</em>, появившийся в выпуске 
      &oldreleasename;, теперь стал официальным сервисом &debian;.
    </p>
    <p>
      Это означает, что теперь используется адрес 
      <tt>.debian.org</tt><footnote><p>Старый адрес <tt>.debian.net</tt> 
      также останется рабочим на некоторое время.</p></footnote>. Если вы 
      уже пользуетесь этим сервисом, исправьте настройку в файле 
      <file>/etc/apt/sources.list</file>.
    </p>
    <p>
      Сервис <em>debian-volatile</em> позволяет пользователям легко 
      обновлять те стабильные пакеты, которые содержат быстро устаревающую 
      информацию. В их число, например, входят антивирусные сигнатуры и 
      наборы шаблонов для спам-фильтров. Дополнительную информацию и список 
      сайтов-зеркал можно найти на <url id="&url-debian-volatile;" 
      name="странице архива">.
    </p>
   </sect1>
  </sect>
  <sect id="system-changes">
   <heading>
     Улучшения в системе
   </heading>
   <p>
     В дистрибутиве есть некоторые изменения, выгода от которых видна только 
     при установке новой системы &releasename;, и они не могут применится 
     автоматически при обновлении с &oldreleasename;. Данный раздел кратко 
     описывает большинство таких изменений.
   </p>
   <p>
    <taglist>
     <tag>
       Понижен приоритет основных пакетов разработчика
     </tag>
     <item>
      <p>
        Некоторые пакеты разработчика, которые имели приоритет 
        <em>стандартный</em> теперь имеют приоритет <em>необязательный</em>, 
        означающий, что они теперь не устанавливаются по умолчанию. Это 
        относится к стандартному компилятору C/C++, <package>gcc</package>, 
        а также к другому ПО (<package>dpkg-dev</package>, 
        <package>flex</package>, <package>make</package>) и заголовочным 
        файлам для разработки (<package>libc6-dev</package>, 
        <package>linux-kernel-headers</package>).
      </p>
      <p>
        Если вы хотите установить все эти пакеты в систему, самым простым 
        способом является установка пакета 
        <package>build-essential</package>, что повлечёт за собой установку 
        большинства из них.
      </p>
     </item>
     <tag>
       SELinux имеет стандартный приоритет, но по умолчанию не активирован
     </tag>
     <item>
      <p>
        Необходимым для поддержки SELinux пакетам был присвоен приоритет 
        <em>стандарт</em>. Это означает, что они будут установлены по 
        умолчанию в новых установках. В существующих системах вы можете 
        установить SELinux командой:
       <example>
# aptitude install selinux-basics
       </example>
      </p>
      <p>
        Заметим, что поддержка SELinux по умолчанию 
        <em>выключена</em>. Информацию по активации и настройке можно найти 
        на страницах <url id="&url-wiki-selinux;" name="Debian вики">.
      </p>
     </item>
     <tag>
       Новый супердемон inet по умолчанию
     </tag>
     <item>
      <p>
        Супердемоном inet по умолчанию в &releasename; является 
        <package>openbsd-inetd</package> вместо 
        <package>netkit-inetd</package>. Он не будет запущен, если нет 
        настроенных сервисов (по умолчанию не настроен ни один). Новая 
        версия по умолчанию будет установлена при обновлении автоматически.
      </p>
     </item>
     <tag>
       Изменён клон <prgn>vi</prgn> по умолчанию
     </tag>
     <item>
      <p>
        Устанавливаемый теперь по умолчанию клон <prgn>vi</prgn> является 
        компактной версией <prgn>vim</prgn> (<package>vim-tiny</package>) 
        вместо <package>nvi</package>.
      </p>
     </item>
     <tag>
       Изменения в свойствах по умолчанию для <tt>ext2</tt>/<tt>ext3</tt>
     </tag>
     <item>
      <p>
        Новые файловые системы ext2 и ext3 по умолчанию создаются со 
        свойствами <em>dir_index</em> и <em>resize_inode</em>. Первое 
        свойство ускоряет операции над каталогами с большим количеством 
        файлов, а второе делает возможным изменение раздела файловой системы 
        на лету (то есть без размонтирования).
      </p>
      <p>
        Пользователи, обновляющиеся с &oldreleasename;, могут установить 
        флаги <em>dir_index</em> вручную с помощью 
        <prgn>tune2fs</prgn><footnote><p>Флаг <em>filetype</em> скорее всего 
        уже установлен на большинстве файловых систем, кроме, возможно, 
        систем, установленных ранее &oldreleasename;.</p></footnote>; флаг 
        <em>reset_inode</em> не может быть добавлен в существующую файловую 
        систему. Для проверки, установлен ли этот флаг в файловой системе, 
        можно воспользоваться командой <tt>dumpe2fs -h</tt>.
      </p>
     </item>
     <tag>
       Кодировкой по умолчанию в &releasename; является UTF-8
     </tag>
     <item>
      <p>
        Кодировкой по умолчанию в новых установках &debian; является 
        UTF-8. Некоторые приложения также будут настроены на использование 
        UTF-8 по умолчанию.
      </p>
      <p>
        Пользователи, обновляющиеся с &releasename;, которые хотят перейти 
        на UTF-8, могут перенастроить своё окружение и локаль. Глобальные 
        настройки в системе можно изменить командой <tt>dpkg-reconfigure 
        locales</tt>; сначала выберите локаль UTF-8 для вашего языка и 
        страну, а затем установите это значение по умолчанию. Заметим, что 
        переход на UTF-8 означает, что вам, вероятно, также придётся 
        переконвертировать существующие файлы из старой кодировки в UTF-8.
      </p>
      <p>
        В пакете <package>utf8-migration-tool</package> содержится 
        инструмент, который может помочь с переходом, однако этот пакет 
        доступен только пока в нестабильном дистрибутиве, так как был не 
        готов для &releasename;. Перед использованием программы настоятельно 
        рекомендуется сделать резервную копию данных и конфигурационных 
        файлов.
      </p>
      <p>
        Заметим, что пока не все приложения корректно работают в окружении 
        UTF-8 (в основном проблемы с отображением данных).
      </p>
     </item>
    </taglist>
   </p>
   <p>
     Более подробную информацию смотрите на страницах <url 
     id="http://wiki.debian.org/Sarge2EtchUpgrade" name="Debian вики">, где 
     описана процедура обновления с &oldreleasename; до &releasename;.
   </p>
  </sect>
  <sect id="kernel-changes">
   <heading>
     Основные изменения в ядре
   </heading>
   <p>
     В &debian; &release; включено ядро версии &kernelversion; для всех 
     архитектур; выпуск пока почти <![ %defaulted-2.4 [ 
     <footnote><p>Некоторые отдельные пакеты могут больше не работать 
     правильно с ядром 2.4; смотрите <ref 
     id="incompatible-2.4">.</p></footnote> ]]> совместим с ядрами 2.4, но 
     Debian больше не предоставляет или поддерживает пакеты с ядрами 2.4.
   </p>
   <p>
     В самом ядре и в пакетировании ядра для Debian произошли большие 
     изменения. Некоторые из них усложнили процедуру обновления, и это может 
     привести к проблемам при перезагрузке системы после обновления до 
     &releasename;. В этом разделе кратко описаны наиболее важные изменения; 
     возможные проблемы и инструкции как обойти их даны позже в следующих 
     главах.
   </p>
    <![ %defaulted-2.4 [

   <p>
     Если вы используете ядро 2.4, внимательно прочитайте <ref 
     id="upgrade-to-2.6">.
   </p>
    ]]>

   <sect1 id="kernel-packaging">
    <heading>
      Изменения в пакетировании ядра
    </heading>
    <p>
     <taglist>
      <tag>
        Пакеты с ядрами переименованы
      </tag>
      <item>
       <p>
         Все пакеты с ядрами Linux были переименованы из <tt>kernel-*</tt> в 
         <tt>linux-*</tt> для большей ясности в именах. Это в будущем 
         облегчит включение не-Linux ядер в Debian.
       </p>
      </item>
       <![ %i386 [

      <tag>
        Вариант "386" заменён на "486"
      </tag>
      <item>
       <p>
         Так как в &oldreleasename; была прекращена поддержка субархитектуры 
         80386 для Intel x86, вариант ядра 386 больше не поддерживается и 
         был заменён новым вариантом 486.
       </p>
      </item>
       ]]><![ %amd64 [

      <tag>
        Одно общее ядро для &arch-title;
      </tag>
      <item>
       <p>
         В &oldreleasename; для каждого семейства процессоров этой 
         архитектуры были включены несколько вариантов ядер. Так как ядро 
         теперь само автоматически оптимизируется под процессор(ы) системы, 
         отдельные варианты ядер больше не нужны.
       </p>
      </item>
       ]]><![ %i386-amd64-ia64 [

      <tag>
        В стандартные ядра включена поддержка SMP
      </tag>
      <item>
       <p>
         Для многопроцессорных систем больше не нужны <tt>*-smp</tt> 
         варианты ядра Linux. Для &arch-title; в пакеты <tt>linux-image</tt> 
         без суффикса <tt>-smp</tt> включена поддержка однопроцессорных и 
         многопроцессорных систем. <![ %i386 [ (Есть одно исключение: 
         вариант 486 поддерживает только один процессор.) ]]>
       </p>
      </item>
       ]]><![ %mips [

      <tag>
        вариант ядра r5k-ip22 исключён
      </tag>
      <item>
       <p>
         Образ ядра для машин IP22 с процессором R5000 был исключён, так как 
         теперь образ r4k-ip22 поддерживает машины IP22 с процессором R4x000 
         или R5000.
       </p>
      </item>
       ]]>

     </taglist>
    </p>
    <p>
      Для исключённых пакетов, где это возможно, были добавлены пустые 
      переходные пакеты, которые зависят от новых пакетов.
    </p>
   </sect1>
   <sect1 id="kernel-initrd">
    <heading>
      Новые утилиты для генерации initrd
    </heading>
     <![ %no-initrd [

    <p>
      Для пакетов Debian с образами ядра для &arch-title; не требуется 
      initrd для загрузки системы. Это означает, что информация в этом 
      разделе к вам не относится, но всё равно оставлена для справки.
    </p>
     ]]>

    <p>
      <![ %uses-initrd [ Для загрузки системы пакетам Debian с образом ядра 
      для &arch-title; требуется initrd. ]]> Из-за изменений в ядре, 
      утилитой используемой для генерации initrds в &oldreleasename;, 
      <package>initrd-tools</package> больше пользоваться нельзя. Для её 
      замены были разработаны две утилиты: 
      <package>initramfs-tools</package> и 
      <package>yaird</package>. Принципы работы новых утилит очень разные; 
      краткий обзор есть в <url 
      id="http://wiki.debian.org/InitrdReplacementOptions" name="вики 
      Debian">. Для генерации initrd обе используют файловую систему 
      <em>initramfs</em>, которая представляет собой сжатый архив 
      <prgn>cpio</prgn>. Рекомендуемой и используемой по умолчанию утилитой 
      является <package>initramfs-tools</package>.
    </p>
     <![ %uses-initrd [

    <p>
      При обновлении до ядра из &releasename; по умолчанию происходит 
      установка <package>initramfs-tools</package>. <![ %defaulted-2.4 [ При 
      обновлении ядра Debian с 2.4 на 2.6, вы должны использовать 
      <package>initramfs-tools</package>. Использование 
      <package>yaird</package> приведёт к ошибке установки linux-image-2.6, 
      если машина работает на ядре из веток 2.2 или 2.4. ]]>
    </p>
    <p>
      Пакет <package>initrd-tools</package> всё ещё включён в &releasename;, 
      так как он требуется для обновления с &oldreleasename;. Он будет 
      исключён из следующего выпуска.
    </p>
     ]]>

   </sect1>
   <sect1 id="kernel-udev">
    <heading>
      Динамическое управление <file>/dev</file> и обнаружение оборудования
    </heading>
    <p>
      Ядра в &releasename; больше не поддерживают <tt>devfs</tt>.
    </p>
    <p>
      Заменой <tt>devfs</tt> стал <package>udev</package>, реализация devfs 
      в пользовательском пространстве.
    </p>
    <p>
      <package>udev</package> монтируется в каталог <file>/dev</file> и 
      создаёт в нём файлы устройств, которые поддерживаются ядром. Он также 
      динамически добавляет и удаляет устройства при загрузке и выгрузке 
      модулей, основываясь на событиях, генерируемых 
      ядром. <prgn>udev</prgn> более гибок чем <tt>devfs</tt> и 
      предоставляет сервисы, которые используются другими пакетами типа 
      <package>hal</package> (абстрактный аппаратный слой).
    </p>
    <p>
      Вместе с ядром, <package>udev</package> также заботится об обнаружении 
      устройств и загрузке модулей для найденных устройств. Из-за этого он 
      конфликтует с <package>hotplug</package>. В &oldreleasename;, также 
      можно было использовать <package>discover</package> для загрузки 
      модулей во время процесса включения машины, но в его новой версии из 
      &releasename; этой функции больше нет. <![ %not-s390 [ 
      <package>discover</package> всё ещё используется X.Org для определения 
      системной графической карты. ]]>
    </p>
     <![ %uses-initrd [

    <p>
      Если вы устанавливаете ядро Debian, то <package>udev</package> будет 
      установлен по умолчанию, так как от него зависит пакет 
      <package>initramfs-tools</package>.
    </p>
    <p>
      Вы можете избежать установки <package>udev</package>, скомпилировав 
      собственное не модульное ядро или использовав альтернативный генератор 
      initrd, например <package>yaird</package>. Однако, 
      <package>initramfs-tools</package> является рекомендуемым генератором 
      initrd.
    </p>
     ]]>

   </sect1>
  </sect>
 </chapt>
 <chapt id="installing">
  <heading>
    Система установки
  </heading>
  <p>
    Программа установки Debian является официальной системой установки 
    Debian. Она предлагает широкий выбор методов установки. Какие из них 
    будут доступны на вашей системе зависит от архитектуры.
  </p>
  <p>
    Образы программы установки для &releasename; и руководство по установке 
    можно найти на <url id="&url-installer;" name="веб-сайте Debian">.
  </p>
  <p>
    Руководство по установке также включено на первый CD/DVD из официального 
    набора Debian CD/DVD. Его можно найти в каталоге:
   <example>
/doc/install/manual/<var>ru</var>/index.html
        </example>
  </p>
  <p>
    Также следует ознакомиться с списком <url 
    id="&url-installer;index#errata" name="известных ошибок"> программы 
    установки.
  </p>
   <![ %alpha [

  <p>
    Программа установки может работать только на тех машинах alpha, которые 
    поддерживают консоль SRM. Убедитесь, что вы подключили ваш компьютер к 
    SRM до начала установки. Если ваш компьютер поддерживает только консоль 
    AlphaBIOS/ARC для установки &releasename; сначала устанавливается 
    (минимальная) система woody, затем она обновляется до &oldreleasename;, 
    а затем и до &releasename;. За более подробной информацией о различных 
    консолях обратитесь к <url id="http://www.debian.org/ports/alpha" 
    name="странице переноса Debian на alpha">.
  </p>
   ]]><![ %sparc [

  <sect id="sparc_fb">
   <heading>
     Проблемы с фрейм-буфером на &arch-title;
   </heading>
   <p>
     Из-за проблем с фрейм-буфером на некоторых системах, на архитектуре 
     &arch-title; его поддержка отключена по умолчанию для большинства 
     видеокарт. Из-за этого на машинах, где фрейм-буфер поддерживается, 
     текст на экране может выглядеть плохо. Если у вас возникли проблемы с 
     отображением в программе установки, попробуйте загрузить программу 
     установки с параметром <tt>framebuffer=true</tt>. Сообщите нам, если 
     фрейм-буфер по умолчанию не используется, но работает на вашем 
     компьютере.
   </p>
  </sect>
  <sect id="sparc_illegal_instruction">
   <heading>
     Проблемы с загрузкой на &arch-title;
   </heading>
   <p>
     Несколько пользователей сообщили, что не могут загрузиться с 
     установочного CD. После команды в PROM '<tt>boot cdrom</tt>', выводится 
     ошибка '<tt>Illegal Instruction</tt>'.
   </p>
   <p>
     Очевидное объяснение этой проблем в том, что машина была перезагружена 
     из Solaris. Обходное решение: выключить машину полностью, а затем сразу 
     загрузиться с установочного CD.
   </p>
   <p>
     Пользователи наблюдали эту проблему на различных системах (а именно, на 
     Enterprise 450, Blade 2000, Fire V240, Enterprise 250, Blade 100 и 
     Enterprise 220R было уже сообщено на время написания этого текста), 
     поэтому это, скорее всего, общая проблема. Сообщите нам, если на вашей 
     машине наблюдаются похожие симптомы.
   </p>
  </sect>
  <sect id="sparc_qlogic_firmware">
   <heading>
     Проблемы с загрузкой с qla2xxx на &arch-title;
   </heading>
   <p>
     Несколько пользователей сообщили, что система установки не смогла 
     распознать жёсткие диски на машинах, у которых жёсткие диски подключены 
     к SCSI-контроллеру QLogic fibre-channel. Это встречалось на серверах 
     Sun Fire 280R. Драйвер qla2xxx загружался, но не мог загрузить 
     микропрограмму, что делало его бесполезным.
   </p>
   <p>
     Объяснение этой проблемы в том, что микропрограмма контроллера QLogic 
     не является свободной, и была перемещена в отдельный несвободный пакет 
     (<url id="http://packages.debian.org/firmware- qlogic" 
     name="firmware-qlogic">), который не используется системой установки.
   </p>
   <p>
     К сожалению не существует простого решения; сначала нужно передать 
     образ микропрограммы системе установки, а позже сделать то же самое в 
     установленной системе. Чтобы программа установки смогла загрузить 
     микропрограмму, подключите машину к сети на время установки, скачайте 
     udeb пакет firmware-qlogic с помощью wget, установите его с помощью 
     udpkg, и затем перегрузите модуль qla2xxx. После завершения установки 
     смонтируйте новый корневой раздел, выполните в него chroot, получите 
     deb пакет firmware-qlogic, установите его с помощью dpkg, а затем 
     запустите update-initramfs, чтобы включить его в начальный образ 
     рам-диска, используемый ядром.
   </p>
   <p>
     Или же вы можете выполнить установку с старого установочного CD (где 
     несвободная микропрограмма ещё включена в программу установки) и затем 
     обновиться.
   </p>
  </sect>
  <sect id="solard-used-hd">
   <heading>
     Размер жёсткого диска определяется неправильно
   </heading>
   <p>
     Если ранее жёсткий диск использовался в Solaris, то программа разметки 
     может неправильно определять его размер. Создание таблицы разделов 
     заново не решает эту проблему. Единственное что помогает &mdash;  это 
     "обнуление" первых нескольких секторов диска:
    <example>
# dd if=/dev/zero of=/dev/hd<var>X</var> bs=512 count=2; sync
           </example>
   </p>
   <p>
     Заметим, что после этого все данные станут недоступными.
   </p>
  </sect>
   ]]>

  <sect id="inst-new">
   <heading>
     Что нового в системе установки?
   </heading>
   <p>
     Всё время с последнего официального выпуска &oldreleasename; велась 
     активная разработка программы установки Debian. В результате улучшилась 
     работа с аппаратным обеспечением и были добавлены новые захватывающие 
     возможности.
   </p>
   <p>
     В информации о выпуске мы опишем только главные изменения в программе 
     установки. Если вам нужен краткий обзор различий с &oldreleasename;, 
     обратитесь к анонсам выпуска &releasename; beta и RC-выпусков, 
     доступным из <url id="&url-installer-news;" name="старых новостей"> о 
     программе установки Debian.
   </p>
   <sect1 id="inst-changes">
    <heading>
      Главные изменения
    </heading>
    <p>
     <taglist>
      <tag>
        Нет перезагрузки во время установки
      </tag>
      <item>
       <p>
         Ранее, процесс установки происходил в два этапа: установка базовой 
         системы и делание её загрузочной, после чего происходила 
         перезагрузка и запускалась программа <prgn>base-config</prgn>, с 
         помощью которой выполнялась настройка пользователей, системы 
         управления пакетами и установка дополнительных пакетов (посредством 
         tasksel).
       </p>
       <p>
         В &releasename; второй этап был включён в саму программу установки 
         Debian. Это дало ряд преимуществ: улучшилась безопасность, после 
         перезагрузки в конце установки новой системы есть уже правильный 
         часовой пояс, если вы установили среду рабочего стола, то будет 
         сразу запущен графический интерфейс пользователя.
       </p>
      </item>
      <tag>
        В новых системах кодировкой по умолчанию является UTF-8
      </tag>
      <item>
       <p>
         Программа установки устанавливает системной кодировку UTF-8, то 
         есть системная кодировка теперь не зависит от выбранного языка 
         (типа ISO-8859-1, EUC-JP или KOI-8).
       </p>
      </item>
      <tag>
        Более гибкая разметка
      </tag>
      <item>
       <p>
         Теперь стало возможно настраивать файловые системы на томе LVM с 
         помощью направляющей разметки.
       </p>
       <p>
         Также, через программу установки можно настраивать шифрованные 
         файловые системы. Используя разметку вручную, вы можете выбирать 
         между <tt>dm-crypt</tt> и <tt>loop-aes</tt>, использовать ключевую 
         фразу или произвольный ключ, а также настраивать другие различные 
         параметры. При использовании направляющей разметки, программа 
         установки создаст шифрованный раздел LVM, который может содержать 
         любые файловые системы (кроме <file>/boot</file>) в логических 
         томах.
       </p>
      </item>
       <![ %g-i [

      <tag>
        Графический интерфейс пользователя
      </tag>
      <item>
        <![ %i386-amd64 [

       <p>
         Если вы предпочитаете графический интерфейс пользователя, запустите 
         программу установки командой <tt>installgui</tt>.
       </p>
        ]]><![ %powerpc [

       <p>
         Для &arch-title; есть отдельный образ графического 
         пользовательского интерфейса и только в качестве 
         эксперимента. Известно, что он работает почти на всех CHRP-системах 
         с графическими картами ATI, но был недостаточно протестирован на 
         &arch-title;, чтобы включить его на обычные установочные CD.
       </p>
       <p>
         Если вы хотите попробовать графический интерфейс программы 
         установки, поищите образ "gtk-miniiso".
       </p>
        ]]>

       <p>
         Функциональность графической программы установки практически 
         идентична обычной программе установки &mdash; отличается только 
         внешний вид. Есть одно исключение: в графическом интерфейсе не 
         поддерживается настройка шифрованных разделов с помощью 
         произвольных ключей.
       </p>
       <p>
         Основным преимуществом графического интерфейса пользователя 
         является поддержка большего количества языков по сравнению с 
         обычным пользовательским интерфейсом (newt). Информацию о 
         графическом установщике и самых важных различиях между графическим 
         и обычным установщиком можно найти в приложении к руководству по 
         установке.
       </p>
       <p>
         Замечание: графический интерфейс доступен не на всех архитектурах.
       </p>
      </item>
       ]]>

      <tag>
        Режим восстановления
      </tag>
      <item>
       <p>
         Программу установки также можно использовать для решения проблем с 
         системой, например, если она больше не загружается. Первые шаги 
         выглядят как процесс обычной установки, но программа установки не 
         будет запускать утилиту разметки. Вместо этого вам будет предложено 
         меню восстановления.
       </p>
       <p>
         Чтобы загрузиться в режиме восстановления, запустите программу 
         установки командой <tt>rescue</tt> или добавьте загрузочный 
         параметр <tt>rescue/enable=true</tt>.
       </p>
      </item>
      <tag>
        Использование sudo вместо учётной записи root
      </tag>
      <item>
       <p>
         Во время установки в режиме эксперта вы можете не настраивать 
         учётную запись root (она будет заблокирована), а вместо неё 
         настроить <prgn>sudo</prgn> так, чтобы первая учётная запись 
         пользователя могла использоваться для администрирования системы.
       </p>
      </item>
      <tag>
        Криптографическая проверка скачиваемых пакетов
      </tag>
      <item>
       <p>
         Пакеты, скачиваемые программой установки, теперь проверяются 
         криптографическими методами с помощью <prgn>apt</prgn>, что ещё 
         больше затрудняет компрометацию системы при установке по сети.
       </p>
      </item>
      <tag>
        Упрощённая настройка почты
      </tag>
      <item>
       <p>
         При установке "стандартной системы" программа установки настраивает 
         базовую конфигурацию почтового сервера системы, при которой 
         предполагается только локальная доставка электронной 
         почты. Почтовый сервер будет недоступен для других систем, 
         подключённых к той же сети. Если вам нужно настроить систему для 
         обработки не только локальной почты (для отправки или для приёма 
         писем), выполните перенастройку почтовой системы после установки.
       </p>
      </item>
      <tag>
        Выбор рабочего стола
      </tag>
      <item>
       <p>
         Система установки установит рабочий стол GNOME в качестве рабочего 
         стола по умолчанию, если об этом попросит пользователь.
       </p>
       <p>
         Однако, пользователи, желающие установить другое окружение рабочего 
         стола, могут легко это сделать добавив параметры загрузки: 
         <tt>tasks="standard, kde-desktop"</tt> для KDE и 
         <tt>tasks="standard, xfce-desktop"</tt> для Xfce. Заметим, что это 
         не сработает при установке с полного образа CD без использования 
         сервера-зеркала из сети в качестве дополнительного источника 
         пакетов. Установка возможна при использовании образа DVD или любого 
         другого метода установки.
       </p>
       <p>
         Для установки по умолчанию окружения рабочего стола KDE или Xfce 
         доступны отдельные CD-образы.
       </p>
      </item>
       <![ %not-s390 [

      <tag>
        Новые языки интерфейса
      </tag>
      <item>
       <p>
         Благодаря огромному труду переводчиков, установку Debian теперь 
         можно выполнять на 47 языках через текстовый пользовательский 
         интерфейс программы установки. Это на шесть языков больше чем было 
         в &oldreleasename;. Языки, добавленные в этом выпуске: белорусский, 
         эсперанто, эстонский, курдский, македонский, тагалог, вьетнамский и 
         волоф. В этом выпуске из-за недостаточной поддержки обновлений 
         перевода были убраны персидский и велш.
       </p>
        <![ %g-i [

       <p>
         При использовании графического интерфейса программы установки 
         дополнительно поддерживаются одиннадцать языков. Эти языки можно 
         выбрать только в графическом установщике, так как их наборы 
         символов нельзя отобразить в не графическом окружении. Новые языки: 
         бенгальский, джонка, гуарати, хинди, грузинский, кхмерский, 
         малаялам, непальский, пунжаби, тамильский и тайский.
       </p>
        ]]>

       <p>
         Если пользователь не хочет использовать какую-то определённую 
         локаль, то теперь он может выбрать <em>C</em> в качестве 
         предпочитаемой локали при выборе языка установки. Более подробная 
         информация о языках доступна в <url id="&url-d-i-i18n;" 
         name="списке языков d-i">.
       </p>
      </item>
      <tag>
        Упрощение выбора локализации и часового пояса
      </tag>
      <item>
       <p>
         Настройка языка, страны и часового пояса была упрощена для 
         уменьшения количества информации, запрашиваемой от 
         пользователя. Теперь программа установки на основе выбранного языка 
         определяет страну и часовой пояс для системы, или предлагает 
         ограниченный список, если не может этого сделать. Если требуется, 
         пользователь может самостоятельно выбрать желаемую комбинацию.
       </p>
      </item>
      <tag>
        Улучшение общей локализации системы
      </tag>
      <item>
       <p>
         Большинство задач интернационализации и локализации, которые ранее 
         выполнялись программой <package>localization-config</package>, 
         теперь включены в программу установки Debian или в конкретные 
         пакеты. Это означает, что при выборе языка будут автоматически 
         установлены пакеты (словари, документация, шрифты...), необходимые 
         для поддержки этого языка в стандартном окружении и на рабочем 
         столе. Некоторые настройки теперь не выполняются 
         автоматически. Сюда входят выбор размера бумаги и расширенная 
         настройка клавиатуры X Windows для работы сразу с несколькими 
         языками.
       </p>
       <p>
         Заметим, что пакеты поддержки языка будут установлены 
         автоматически, только если они доступны во время установки.
       </p>
      </item>
       ]]>

     </taglist>
    </p>
   </sect1>
   <sect1 id="inst-auto">
    <heading>
      Автоматизируемая установка
    </heading>
    <p>
      Множество изменений, упомянутых в предыдущем разделе, также затронули 
      и автоматическую установку согласно конфигурационному файлу 
      настройки. Это означает, что если у вас уже есть конфигурационные 
      файлы настройки, которые работали с программой установки 
      &oldreleasename;, то не ждите, что они будут работать с новой 
      программой установки без изменений.
    </p>
    <p>
      В <url id="&url-install-manual;" name="руководстве по установке"> 
      теперь есть отдельное приложение, в котором подробно описывается 
      использование автоматической настройки.
    </p>
    <p>
      В программу установки &releasename; добавлено несколько новых 
      потрясающих возможностей, которые позволяют легко автоматизировать 
      установки до мелочей. Также поддерживается усовершенствованная 
      разметка RAID, LVM и шифрованные LVM. Подробности смотрите в 
      документации.
    </p>
   </sect1>
  </sect>
  <sect id="popcon">
   <heading>
     Частота использования пакетов
   </heading>
   <p>
     Программа установки снова предлагает установить пакет 
     <package>popularity-contest</package>. Этот пакет не устанавливался по 
     умолчанию в &oldreleasename;, но устанавливался в более старых 
     выпусках.
   </p>
   <p>
     <package>popularity-contest</package> снабжает проект Debian ценной 
     информацией о том, какие пакеты дистрибутива действительно 
     используются. Эта информация не только влияет на то, в каком порядке 
     пакеты пакеты будут расположены на установочных компакт-дисках, но и 
     используется разработчиками Debian для принятия решения о 
     продолжении/прекращении поддержки пакетов, у которых больше нет 
     сопровождающих.
   </p>
   <p>
     Информация, собранная <package>popularity-contest</package>, 
     обрабатывается анонимно. Мы будем вам очень благодарны, если вы 
     установите этот пакет и примете участие в этом официальном опросе; этим 
     вы поможете улучшить Debian.
   </p>
  </sect>
 </chapt>
 <chapt id="upgrading">
  <heading>
    Обновление с предыдущих выпусков
  </heading>
  <sect id="backup">
   <heading>
     Подготовка к обновлению
   </heading>
   <p>
     Перед обновлением мы рекомендуем вам также прочитать информацию в <ref 
     id="information">. В этом разделе дано описание потенциальных проблем, 
     которые не имеют прямого отношения к процессу обновления, но всё же 
     важно знать об этом.
   </p>
   <sect1 id="data-backup">
    <heading>
      Создание резервной копии всех данных и настроек
    </heading>
    <p>
      Перед обновлением настоятельно рекомендуется сделать резервную копию 
      всей системы или, по крайней мере, всех данных и настроек, которые вы 
      не может позволить себе потерять. Инструменты для обновления и сам 
      процесс достаточно надёжны, но сбой аппаратного обеспечения в ходе 
      обновления может привести к серьёзному повреждению системы.
    </p>
    <p>
      В первую очередь необходимо сделать резервные копии содержимого 
      каталогов <file>/etc</file>, <file>/var/lib/dpkg</file>, 
      <file>/var/lib/aptitude/pkgstates</file> и результат работы команды 
      <tt>dpkg --get-selections "*"</tt> (кавычки необходимы).
    </p>
    <p>
      Обновление само по себе никак не затрагивает каталог 
      <file>/home</file>. Однако некоторые приложения (в частности, 
      некоторые приложения Mozilla, окружения рабочего стола GNOME и KDE) 
      при первом запуске новой версии перезаписывают существующие 
      пользовательские настройки новыми настройками по умолчанию. На всякий 
      случай стоит сделать резервную копию скрытых файлов и каталогов 
      ("точечных файлов") из домашних каталогов пользователей. Это поможет 
      вам в случае необходимости восстановить старые настройки. Не лишним 
      будет предупредить пользователей об этой проблеме.
    </p>
    <p>
      Установка любого пакета должна производиться с привилегиями 
      суперпользователя. Поэтому вы должны, либо войти в систему под именем 
      суперпользователя (root), либо использовать программы <prgn>su</prgn> 
      или <prgn>sudo</prgn>, чтобы получить необходимые права.
    </p>
    <p>
      Для обновления есть несколько предварительных условий; проверьте, что 
      они соблюдаются.
    </p>
   </sect1>
   <sect1>
    <heading>
      Предварительное информирование пользователей
    </heading>
    <p>
      Желательно заранее сообщить всем пользователям о любых планируемых 
      обновлениях, хотя пользователи, работающие в системе через 
      <prgn>ssh</prgn>, не должны испытать особых проблем в процессе 
      обновления и вполне могут продолжать работу.
    </p>
    <p>
      Если вы хотите принять дополнительные меры предосторожности, создайте 
      резервную копию каталога с файлами пользователей (<file>/home</file>) 
      или перед обновлением размонтируйте раздел, где он расположен.
    </p>
    <p>
      Вероятно при обновлении до &releasename; вам потребуется обновить 
      ядро, поэтому перезагрузка чаще всего нужна. Обычно, это делается 
      после завершения обновления.
    </p>
   </sect1>
   <sect1 id="recovery">
    <heading>
      Подготовка к откату
    </heading>
    <p>
      Так как ядро в &oldreleasename; и &releasename; сильно различается, а 
      именно: в драйверах, определении оборудования, именовании и порядке 
      файлов устройств, есть реальная опасность возникновения проблем после 
      перезагрузки в обновлённую систему. Большая часть возможных проблем 
      описана здесь и далее в следующих главах информации о выпуске.
    </p>
    <p>
      Поэтому имеет смысл проверить, что вы сможете откатиться назад, если 
      система не сможет загрузиться или, для систем, управляемых удалённо, 
      не заработает сеть.
    </p>
    <p>
      Если обновление производится удалённо через канал <prgn>ssh</prgn>, то 
      настоятельно рекомендуем вам предусмотреть подключение к серверу через 
      удалённый последовательный терминал. Может случиться так, что после 
      обновления ядра и перезагрузки, некоторые устройства будут 
      переименованы (это описывается в <ref id="device-reorder">) и вы 
      сможете исправить системные настройки через локальную консоль. Также, 
      если система случайно перезагрузится в середине процесса обновления, в 
      этом случае вам потребуется использовать локальную консоль для 
      восстановления.
    </p>
    <p>
      Очевидно, что сначала нужно попробовать загрузиться со старым 
      ядром. Однако, по различными причинам, описанным в разных частях этого 
      документа, это не обязательно сработает.
    </p>
    <p>
      Если загрузиться не удалось, вам может потребоваться альтернативный 
      способ загрузки системы для доступа к ней и восстановления. Для этого 
      можно воспользоваться специальным образом восстановления или Linux 
      лайв CD. После загрузки каким-то способом, вы сможете смонтировать 
      имеющуюся корневую файловую систему и выполнить в неё <tt>chroot</tt>, 
      чтобы найти и исправить ошибку.
    </p>
    <p>
      Также мы хотим порекомендовать вам воспользоваться <em>режимом 
      восстановления</em> программы установки Debian 
      &releasename;. Преимущество в использовании программы установки в том, 
      что вы можете выбрать из разных методов установки, тот который лучше 
      подходит в вашем случае. Подробная информация приведена в разделе 
      "Восстановление неработающей системы" главы 8 <url 
      id="&url-install-manual;" name="руководства по установке"> и в <url 
      id="http://wiki.debian.org/DebianInstaller/FAQ" name="FAQ по программе 
      установки Debian">.
    </p>
     <![ %uses-initrd [

    <sect2 id="recovery-initrd">
     <heading>
       Отладочная оболочка из initrd во время загрузки
     </heading>
     <p>
       <package>initramfs-tools</package> включает отладочную 
       оболочку<footnote><p>Эту возможность можно выключить, добавив 
       параметр <tt>panic=0</tt> к параметрам загрузки.</p></footnote> в 
       создаваемый initrd. Пример: если initrd не удастся смонтировать 
       корневую файловую систему, то вы попадёте в этy отладочную оболочку, 
       в которой доступны основные команды, которые помогут вам выяснить в 
       чём дело и, возможно, даже всё исправить.
     </p>
     <p>
       Что нужно проверить: наличие правильных файлов устройств в каталоге 
       <file>/dev</file>; какие модули загружены (<tt>cat 
       /proc/modules</tt>); проверить в выводе <prgn>dmesg</prgn> нет ли 
       ошибок при загрузке драйверов. Вывод <prgn>dmesg</prgn> также 
       покажет, какие файлы устройств были назначены каким дискам; 
       убедитесь, что результатом <tt>cat $ROOT</tt> является ожидаемое 
       устройство для корневой файловой системы.
     </p>
     <p>
       Если вы решили проблему, для выхода из отладочной оболочки наберите 
       <tt>exit</tt>, и процесс загрузки продолжится с место 
       останова. Естественно, вам нужно устранить причину проблемы и 
       регенерировать initrd для, того чтобы следующая загрузка стала 
       удачной.
     </p>
    </sect2>
     ]]>

   </sect1>
   <sect1 id="upgrade_preparations">
    <heading>
      Подготовка безопасного окружения для обновления
    </heading>
    <p>
      Обновление дистрибутива возможно как локально через виртуальную 
      текстовую консоль (или подключённого напрямую последовательного 
      терминала), так и удалённо через <prgn>ssh</prgn>.
    </p>
    <p>
      Чтобы ещё более повысить безопасность, мы предлагаем запускать 
      обновление в виртуальной консоли, созданной с помощью программы 
      <prgn>screen</prgn>, которая позволяет безопасно переподключаться и 
      таким образом обновление не будет прервано, даже если произойдёт обрыв 
      связи.
    </p>
    <p>
      <em>Внимание!</em> <em>Ни в коем случае</em> не обновляйте систему 
      через <prgn>telnet</prgn>, <prgn>rlogin</prgn>, <prgn>rsh</prgn> или 
      из графического сеанса под управлением <prgn>xdm</prgn>, 
      <prgn>gdm</prgn>, <prgn>kdm</prgn> и т.д., запущенного на обновляемой 
      системе. Это связано с тем, что все эти сервисы могут быть 
      перезапущены при обновлении, что может привести к 
      <em>недоступности</em> системы, обновлённой только наполовину.
    </p>
   </sect1>
   <sect1 id="glibc-kernel">
    <heading>
      Прекращение поддержки ядер версий 2.2
    </heading>
    <p>
      Если у вас работает ядро с версией меньшей 2.4.1, то перед тем как 
      обновлять <package>glibc</package>, вам нужно провести обновление до 
      ветки 2.4 (как минимум). Это лучше сделать до начала 
      обновления. Рекомендуется обновить ядро до версии 2.6.8, доступной в 
      &oldreleasename;, вместо обновления до ветки 2.4.
    </p>
   </sect1>
  </sect>
  <sect id="system-status">
   <heading>
     Проверка состояния системы
   </heading>
   <p>
     При описании процесса обновления в этой главе предполагалось, что 
     производится обновление с "чистого" &oldreleasename; без установленных 
     пакетов сторонних производителей. В частности, из-за перехода на X.Org 
     (<ref id="xorg">), возникают проблемы со сторонними пакетами, программы 
     которых установлены в <file>/usr/X11R6/bin/</file>. Для большей 
     надёжности проведения процесса обновления лучше удалить сторонние 
     пакеты из системы.
   </p>
   <p>
     Эта процедура также предполагает, что ваша система обновлена до 
     последнего выпуска &oldreleasename;. Если это не так или вы в этом не 
     уверены, следуйте инструкциям раздела <ref id="old-upgrade">.
   </p>
   <sect1>
    <heading>
      Проверка отложенных действий менеджера пакетов
    </heading>
    <p>
      Иногда, использование <prgn>apt-get</prgn> для установки пакетов 
      вместо <prgn>aptitude</prgn>, может привести к тому, что 
      <prgn>aptitude</prgn> считает пакет "неиспользуемым" и планирует его 
      удалить. В общем, система должна быть полностью обновлена и считаться 
      "чистой".
    </p>
    <p>
      Во-первых, вы должны проверить, не ожидается ли каких-нибудь действий 
      в менеджере пакетов <prgn>aptitude</prgn>. Если для пакета 
      запланировано удаление или обновление в менеджере пакетов, то это 
      может отрицательно сказаться на процедуре обновления. Заметим, что 
      исправление возможно, пока в вашем <file>sources.list</file> указаны 
      <em>&oldreleasename</em>;, а не <em>stable</em> или 
      <em>&releasename;</em>; смотрите <ref id="old-sources">.
    </p>
    <p>
      Для этого запустите <prgn>aptitude</prgn> в интерактивном режиме и 
      нажмите 'g' ("Начали"). Если после этого будет предложено что-то 
      сделать, вам нужно просмотреть, что именно и, или отменить эти 
      действия, или подтвердить их выполнение. Если никаких действий 
      совершить не предлагается, то будет показано сообщение "Ни одного 
      пакета не будет установлено, обновлено или удалено".
    </p>
   </sect1>
   <sect1>
    <heading>
      Отключение фиксации APT
    </heading>
    <p>
      Если вы настроили APT на установку некоторых пакетов из дистрибутива, 
      отличного от стабильного (например, тестируемого), вам, возможно, 
      придётся изменить конфигурацию APT (сохранённую в файле 
      <file>/etc/apt/preferences</file>), чтобы было возможно обновление 
      пакетов до версии в новом стабильном выпуске. Более подробную 
      информацию о фиксации пакетов в APT можно найти в <manref section="5" 
      name="apt_preferences">.
    </p>
   </sect1>
   <sect1 id="package_status">
    <heading>
      Проверка состояния пакетов
    </heading>
    <p>
      Независимо от способа обновления, рекомендуется сначала проверить 
      состояние всех пакетов и убедиться, что все пакеты могут быть 
      обновлены. Следующая команда покажет частично установленные 
      (Half-Installed) пакеты, пакеты, настройка которых не удалась 
      (Failed-Config), а также все пакеты в ошибочных состояниях.
     <example>
# dpkg --audit
          </example>
    </p>
    <p>
      Можно также проверить состояние всех пакетов системы с помощью 
      программ <prgn>dselect</prgn>, <prgn>aptitude</prgn> или таких команд, 
      как
     <example>
# dpkg -l | pager 
          </example>
      или
     <example>
# dpkg --get-selections "*" &gt; ~/curr-pkgs.txt
          </example>
    </p>
    <p>
      Перед обновлением желательно снять все фиксации с пакетов. Если один 
      из необходимых для обновления пакетов зафиксирован, обновление 
      завершится неудачей.
    </p>
    <p>
      Заметим, что <prgn>aptitude</prgn> использует отличный от 
      <prgn>apt-get</prgn> и <prgn>dselect</prgn>метод регистрации 
      зафиксированных пакетов. Определить, какие пакеты зафиксированы через 
      <prgn>aptitude</prgn>, можно с помощью
     <example>
# aptitude search "~ahold" | grep "^.h"
          </example>
    </p>
    <p>
      Если вы хотите проверить, какие пакеты зафиксированы через 
      <prgn>apt-get</prgn>, используйте
     <example>
# dpkg --get-selections | grep hold
          </example>
    </p>
    <p>
      Если вы изменяли и перекомпилировали пакет локально, но при этом не 
      переименовали его и не добавили "эпоху" к версии пакета, то его нужно 
      зафиксировать, чтобы предотвратить обновление.
    </p>
    <p>
      Состояние фиксации пакета ("hold") для <prgn>aptitude</prgn> может 
      быть изменено с помощью:
     <example>
# aptitude hold <var>имя_пакета</var>
          </example>
      Замените <tt>hold</tt> на <tt>unhold</tt>, чтобы сбросить состояние 
      "hold".
    </p>
    <p>
      Если вам нужно что-то изменить, то лучше сначала убедиться, что ваш 
      <file>sources.list</file> всё ещё ссылается на &oldreleasename;, как 
      объясняется в разделе <ref id="old-sources">.
    </p>
   </sect1>
   <sect1 id="backports">
    <heading>
      Неофициальные источники и адаптации (backports)
    </heading>
    <p>
      Если вы устанавливали некоторые пакеты не из репозиториев Debian, то 
      знайте, что при обновлении они могут быть удалены по причине 
      конфликтующих зависимостей. Если для установки пакетов вы добавляли 
      записи в файл <file>/etc/apt/sources.list</file>, проверьте, содержит 
      ли этот источник пакеты для &releasename; и соответственно исправьте 
      строку источника вместе со строками остальных источников пакетов 
      Debian.
    </p>
    <p>
      У некоторых пользователей могут быть <em>уже</em> установлены более 
      "новые" версии пакетов Debian, собранные для &oldreleasename;. Такие 
      пакеты, скорее всего, станут причиной проблем при обновлении, так как 
      они могут вызвать конфликты файлов<footnote><p>Обычно, система 
      управления пакетами Debian не позволяет пакету удалить или заменить 
      файл, принадлежащий другому пакету, за исключением случаев, когда явно 
      указано, что один пакет заменяет другой.</p></footnote>. В разделе 
      <ref id="trouble"> дана некоторая информация о том, что делать при 
      конфликте файлов, если они возникают.
    </p>
   </sect1>
  </sect>
  <sect id="handle-conflict">
   <heading>
     Снятие пометки с пакетов вручную
   </heading>
   <p>
     Чтобы не дать <prgn>aptitude</prgn> удалить некоторые пакеты, которые 
     были установлены для разрешения зависимостей, вам нужно вручную снять с 
     них пометку <em>авто</em>. К таким пакетам относятся OpenOffice и Vim 
     при установке на рабочую станцию:
    <example>
# aptitude unmarkauto openoffice.org vim  
</example>
   </p>
   <p>
     Также это касается образов ядра 2.6, если вы устанавливали их с помощью 
     ядерного метапакета:
    <example>
# aptitude unmarkauto $(dpkg-query -W 'kernel-image-2.6.*' | cut -f1)
</example>
   </p>
   <p>
     Примечание: чтобы посмотреть какие пакеты отмечены в aptitude как 
     <em>авто</em>, выполните:
    <example>
# aptitude search 'i~M &lt;имя пакета&gt;'
</example>
   </p>
  </sect>
  <sect id="upgrade-process">
   <heading>
     Подготовка источников APT
   </heading>
   <p>
     Перед началом процесса обновления вы должны настроить файл конфигурации 
     <package>apt</package> <file>/etc/apt/sources.list</file>.
   </p>
   <p>
     Пакет <package>apt</package> при запросе на установку установит самую 
     новую версию пакета из тех, которые можно найти в источниках, 
     соответствующих строкам <tt>deb</tt> этого файла. При равных версиях 
     приоритет будут иметь строки, находящиеся в файле выше (таким образом, 
     в случае использования нескольких зеркал обычно лучше первым указать 
     каталог на локальном жёстком диске, затем компакт-диск и, наконец, 
     зеркала HTTP/FTP).
   </p>
   <p>
     На выпуск Debian часто ссылаются по его кодовому имени (например, 
     "&oldreleasename;" или "&releasename;") или по его статусу (например, 
     "oldstable" ("старый стабильный"), "stable" ("стабильный"), "testing" 
     ("тестируемый"), "unstable" ("нестабильный")). Ссылки на выпуск по его 
     кодовому имени имеют то преимущество, что вы никогда неожиданно для 
     себя не начнёте пользоваться новым выпуском. Поэтому мы здесь так и 
     делаем. В этом случае, вам, конечно, придётся самим следить за новыми 
     выпусками. Если вы будете ссылаться на дистрибутив по его статусному 
     имени, то после выхода нового выпуска вы просто увидите большое 
     количество обновлённых пакетов.
   </p>
   <sect1 id="network">
    <heading>
      Как добавить Интернет-источник APT
    </heading>
    <p>
      Конфигурация по умолчанию позволяет произвести установку с главных 
      серверов Debian, но вы можете изменить файл 
      <file>/etc/apt/sources.list</file> и использовать другие 
      серверы-зеркала. Лучше использовать ближайший к вам (в смысле скорости 
      передачи данных) сервер-зеркало.
    </p>
    <p>
      Адреса HTTP- и FTP-зеркал Debian можно найти по адресу <url 
      id="&url-debian-mirrors;"> (см. раздел "Список зеркал 
      Debian"). HTTP-зеркала обычно быстрее, чем FTP.
    </p>
    <p>
      Допустим, к примеру, что ближайшим к вам зеркалом Debian является 
      <tt>&url-debian-mirror-eg;</tt>. Просматривая содержимое зеркала 
      веб-браузером или FTP-клиентом, можно заметить, что основные каталоги 
      организованы следующим образом:
     <example>
&url-debian-mirror-eg;/dists/&releasename;/main/binary-&architecture;/...
&url-debian-mirror-eg;/dists/&releasename;/contrib/binary-&architecture;/...
           </example>
    </p>
    <p>
      Чтобы использовать это зеркало в программе <prgn>apt</prgn>, добавьте 
      в файл <file>sources.list</file>:
     <example>
deb &url-debian-mirror-eg; &releasename; main contrib
           </example>
    </p>
    <p>
      Заметим, что `<tt>dists</tt>' добавляется автоматически, а параметры 
      после имени выпуска используются для дополнения сетевого пути до 
      реальных каталогов.
    </p>
    <p>
      После того, как вы добавили новый источник, отключите присутствовавшие 
      ранее в файле <file>sources.list</file> строки <tt>deb</tt>, поставив 
      в начале каждой строки решётку (<tt>#</tt>).
    </p>
   </sect1>
   <sect1 id="localmirror">
    <heading>
      Как добавить локальное зеркало APT
    </heading>
    <p>
      Вместо HTTP- и FTP-зеркал, можно использовать зеркало на локальном 
      диске (возможно, смонтированном по сети), изменив соответствующим 
      образом файл <file>/etc/apt/sources.list</file>.
    </p>
    <p>
      Например, если ваше зеркало пакетов находится в каталоге 
      <file>/var/ftp/debian/</file>, то его основные каталоги будут 
      называться:
     <example>
/var/ftp/debian/dists/&releasename;/main/binary-&architecture;/...
/var/ftp/debian/dists/&releasename;/contrib/binary-&architecture;/...
           </example>
    </p>
    <p>
      Чтобы программа <prgn>apt</prgn> могла использовать этот источник 
      пакетов, добавьте в файл <file>sources.list</file>:
     <example>
deb file:/var/ftp/debian &releasename; main contrib
           </example>
    </p>
    <p>
      Заметим, что `<tt>dists</tt>' добавляется автоматически, а параметры 
      после имени выпуска используются для дополнения сетевого пути до 
      реальных каталогов.
    </p>
    <p>
      После того, как вы добавили новый источник, отключите присутствовавшие 
      ранее в файле <file>sources.list</file> строки <tt>deb</tt>, поставив 
      в начале каждой строки решётку (<tt>#</tt>).
    </p>
   </sect1>
   <sect1 id="cdroms">
    <heading>
      Как добавить источник APT на компакт-диске или DVD
    </heading>
    <p>
      Если вы хотите использовать <em>только</em> компакт-диски, 
      закомментируйте все присутствующие в файле 
      <file>/etc/apt/sources.list</file> строки <tt>deb</tt>, поставив в 
      начале каждой строки знак диеза (<tt>#</tt>).
    </p>
    <p>
      Убедитесь в том, что в файле <file>/etc/fstab</file> есть строка, 
      позволяющая смонтировать компакт-диск в каталог <file>/cdrom</file> 
      (программа <prgn>apt-cdrom</prgn> требует монтирования именно в этом 
      каталоге). Например, если файлом устройства вашего привода чтения 
      компакт-дисков служит <file>/dev/hdc</file>, то файл 
      <file>/etc/fstab</file> должен содержать строку:
     <example>
/dev/hdc /cdrom auto defaults,noauto,ro 0 0
          </example>
    </p>
    <p>
      Обратите внимание на то, что между словами <tt>defaults,noauto,ro</tt> 
      в четвёртом поле строки <em>не должно быть пробелов</em>.
    </p>
    <p>
      Чтобы проверить, что строка fstab написана верно, вставьте 
      компакт-диск в привод и выполните команды
     <example>
# mount /cdrom    # эта команда примонтирует CD к точке монтирования
# ls -alF /cdrom  # эта команда должна показать корневой каталог CD-диска
# umount /cdrom   # эта команда размонтирует CD
          </example>
    </p>
    <p>
      Затем запустите команду
     <example>
# apt-cdrom add
          </example>
      для каждого компакт-диска Debian Binary, чтобы добавить все диски в 
      базу данных APT.
    </p>
   </sect1>
  </sect>
  <sect id="upgradingpackages">
   <heading>
     Обновление пакетов
   </heading>
   <p>
     Для обновления &debian; до нового выпуска рекомендуется использовать 
     программу управления пакетами <prgn>aptitude</prgn>. Этот инструмент 
     принимает более безопасные решения об установке пакетов, чем при 
     запуске непосредственно <prgn>apt-get</prgn>.
   </p>
   <p>
     Не забудьте смонтировать все необходимые разделы (в первую очередь, 
     корневой раздел и каталог <file>/usr</file>) для чтения и записи. Это 
     можно сделать командой
    <example>
# mount -o remount,rw /<var>точка_монтирования</var>
          </example>
   </p>
   <p>
     Затем надо проверить и перепроверить, что источники APT (в 
     <file>/etc/apt/sources.list</file>) ссылаются, либо на 
     "<tt>&releasename;</tt>", либо на "<tt>stable</tt>". Не должно быть 
     источников, указывающих на &oldreleasename;. Примечание: обратите 
     внимание, источники на CD-ROM часто ссылаются на дистрибутив 
     "<tt>unstable</tt>", хоть это и странно, но исправлять их <em>не 
     нужно</em>.
   </p>
   <sect1 id="record_session">
    <heading>
      Запись сессии
    </heading>
    <p>
      Настоятельно рекомендуем использовать программу 
      <prgn>/usr/bin/script</prgn> для записи ваших действий при 
      обновлении. В этом случае, при возникновении каких-либо проблем у вас 
      будет журнал произошедших событий, и если понадобится, вы сможете 
      включить эту информацию в отчёт об ошибке. Чтобы начать запись, 
      выполните команду
     <example>
# script -t 2>~/upgrade-&releasename;.time -a ~/upgrade-&releasename;.script
          </example>
      или похожую. Не размещайте файл с записью во временных каталогах, 
      таких как <file>/tmp</file> и <file>/var/tmp</file> (файлы в этих 
      каталогах могут быть удалены при обновлении или перезагрузке).
    </p>
    <p>
      Запись также поможет вам прочитать информацию, которая была 
      "промотана" за границу экрана. Просто переключитеcь на вторую консоль 
      (VT2, нажав <tt>Alt-F2</tt>) и, войдя в систему, запустите <tt>less -R 
      ~root/upgrade-&releasename;.script</tt> для просмотра файла.
    </p>
    <p>
      После завершения обновления, можно остановить <prgn>script</prgn>, 
      набрав <tt>exit</tt> в командной строке.
    </p>
    <p>
      Если параметром к <prgn>script</prgn> указать <em>-t</em>, то вы 
      сможете воспользоваться программой <prgn>scriptreplay</prgn> для 
      повтора всей сессии:
     <example>
# scriptreplay ~/upgrade-&releasename;.time ~/upgrade-&releasename;.script
          </example>
    </p>
   </sect1>
   <sect1 id="updating_lists">
    <heading>
      Обновление списка пакетов
    </heading>
    <p>
      Во-первых, нужно обновить список доступных пакетов нового выпуска. Это 
      делается командой:
    </p>
    <p>
     <example>
# aptitude update
	  </example>
    </p>
    <p>
      Запуск команды в первый раз для новых источников приведёт к выводу 
      нескольких предупреждений о доступности источников. Эти предупреждения 
      безобидны и больше не появятся при последующих запусках команды.
    </p>
   </sect1>
   <sect1>
    <heading>
      Проверка достаточности места для обновления
    </heading>
    <p>
      Перед обновлением всей системы, как описано в <ref 
      id="upgrading_other">, вы должны убедиться, что у вас достаточно места 
      на диске. Сначала все нужные для установки пакеты скачиваются из сети 
      и сохраняются в <file>/var/cache/apt/archives</file> (и на время 
      скачивания, в подкаталог <file>partial/</file>), поэтому вы должны 
      проверить место на разделе, который содержит <file>/var/</file>, так 
      как туда будут временно записываться загружаемые пакеты для 
      установки. После загрузки вам, вероятно, понадобится больше места в 
      других разделах файловой системы для установки обновляемых пакетов 
      (которые могут содержать больше данных) и новых пакетов, которые будут 
      установлены из-за обновлений. Если в системе не будет достаточного 
      места, то в конечном счёте это приведёт к неполному обновлению, что 
      позднее бывает сложно исправить.
    </p>
    <p>
      И <prgn>aptitude</prgn>, и <prgn>apt</prgn> отображают подробную 
      информацию о количестве требуемого места для установки. Перед 
      выполнением обновления вы можете увидеть размер необходимого места, 
      запустив:
    </p>
    <p>
     <example>
# aptitude -y -s -f --with-recommends dist-upgrade
[ ... ]
XXX пакетов обновлено, XXX установлено новых, XXX пакетов отмечено для удаления и XXX пакетов не обновлено.
Необходимо получить xx.xMБ/yyyMБ архивов. После распаковки будет использовано AAAMБ.
Будет выполнена загрузка/установка/удаление пакетов.
       </example>
      <footnote><p>Запуск этой команды в начале процесса обновления может 
      приводить к ошибке по причинам, описанным далее. В этом случае запуск 
      этой команды оценки дискового пространства вам нужно провести после 
      выполнения минимального обновления системы, описанного в <ref 
      id="minimal_upgrade"> и обновления ядра (<ref 
      id="upgrading_kernel">). </p></footnote>
    </p>
    <p>
      Если вам не хватает места для обновления &mdash; освободите место 
      заранее. Вы можете:
    </p>
    <p>
     <list>
      <item>
       <p>
         Удалить пакеты, которые были ранее загружены для установки (из 
         каталога <file>/var/cache/apt/archive</file>). При очистке кэша 
         пакетов с помощью команды <prgn>apt-get clean</prgn> или 
         <prgn>aptitude clean</prgn> будут удалены все ранее скачанные файлы 
         пакетов.
       </p>
      </item>
      <item>
       <p>
         Удалить старые пакеты, которые больше не используются. Если у вас 
         установлена программа <prgn>popularity-contest</prgn>, то с помощью 
         <prgn>popcon-largest-unused</prgn> можно получить список пакетов, 
         которые вы не используете в системе и которые занимают наибольшее 
         количество места. Также вы можете использовать 
         <prgn>deborphan</prgn> или <prgn>debfoster</prgn>, чтобы найти 
         устаревшие пакеты (смотрите <ref id="obsolete">). Ещё вы можете 
         запустить <prgn>aptitude</prgn> в интерактивном режиме и найти 
         устаревшие пакеты в меню "Устаревшие и пакеты, созданные локально".
       </p>
      </item>
      <item>
       <p>
         Удалить пакеты, которые занимают слишком много места и в которых 
         нет срочной необходимости (вы всегда можете переустановить их после 
         обновления). Список пакетов, которые занимают большую часть 
         дискового пространства, можно получить с помощью программы 
         <prgn>dpigs</prgn> (из пакета <prgn>debian-goodies</prgn>) или 
         <prgn>wajig</prgn> (запустив <prgn>wajig size</prgn>).
       </p>
      </item>
      <item>
       <p>
         Временно перенести на другую машину или удалить системные журналы 
         из <file>/var/log/</file>.
       </p>
      </item>
     </list>
    </p>
    <p>
      Заметим, что для безопасного удаления пакетов рекомендуется в 
      <file>sources.list</file> исправить источники обратно на 
      &oldreleasename;, как объясняется в разделе <ref id="old-sources">.
    </p>
   </sect1>
   <sect1 id="minimal_upgrade">
    <heading>
      Минимальное обновление системы
    </heading>
    <p>
      Так как определённые необходимые пакеты конфликтуют при обновлении 
      &oldreleasename; до &releasename;, непосредственный запуск 
      <tt>aptitude dist-upgrade</tt> часто приводит к удалению большого 
      числа пакетов, которые вы хотели бы сохранить. Поэтому мы рекомендуем 
      производить обновление в две стадии &mdash; сначала минимальное 
      обновление, чтобы разобраться с конфликтами, а затем полный 
      <tt>dist-upgrade</tt>.
    </p>
    <p>
      Сначала запустите:
     <example>
# aptitude upgrade
          </example>
    </p>
    <p>
      Это приведёт к обновлению только тех пакетов, которые можно обновить 
      без необходимости удаления или установки других пакетов.
    </p>
    <p>
      Затем минимальное обновление с помощью:
     <example>
# aptitude install initrd-tools
          </example>
    </p>
    <p>
      По этой команде автоматически обновится <package>libc6</package> и 
      <package>locales</package> и вытянутся библиотеки поддержки SE linux 
      (<package>libselinux1</package>). После этого будут перезапущены 
      некоторые работающие сервисы, включая <prgn>xdm</prgn>, 
      <prgn>gdm</prgn> и <prgn>kdm</prgn>, а следовательно, будут прерваны 
      локальные сеансы X11.
    </p>
    <p>
      Следующий шаг зависит от набора установленных пакетов. В данном 
      документе даны общие советы о том, какие методы должны быть 
      использованы, но если есть сомнения, то перед тем как продолжить, 
      рекомендуется проверить каждым методом предлагаемые к удалению пакеты.
    </p>
    <p>
      Некоторые общие пакеты, которые будут удалены: 
      <package>base-config</package>, <package>hotplug</package>, 
      <package>xlibs</package>, <package>netkit-inetd</package>, 
      <package>python2.3</package>, <package>xfree86-common</package> и 
      <package>xserver-common</package>. Полный список устаревших пакетов в 
      &releasename; смотрите <ref id="obsolete">.
    </p>
    <sect2 id="minimal_upgrade_desktop">
     <heading>
       Обновление настольной системы
     </heading>
     <p>
       Этот способ обновления проверен на системах sarge с установленной 
       задачей <tt>рабочий стол</tt>. Вероятно, это лучший метод для систем 
       с установленной задачей <tt>рабочий стол</tt> или установленными 
       пакетами <tt>gnome</tt> или <tt>kde</tt>.
     </p>
     <p>
       Вероятно, это <em>неправильный</em> метод, если у вас не установлены 
       пакеты <package>libfam0c102</package> и 
       <package>xlibmesa-glu</package>:
      <example>
# dpkg -l libfam0c102 | grep ^ii
# dpkg -l xlibmesa-glu | grep ^ii
          </example>
     </p>
     <p>
       Если у вас установлена полная настольная система, выполните:
      <example>
# aptitude install libfam0 xlibmesa-glu
	  </example>
     </p>
    </sect2>
    <sect2 id="minimal_upgrade_x_server">
     <heading>
       Обновление системы с несколькими установленными пакетами для X
     </heading>
     <p>
       Для систем с установленными только несколькими пакетами для X, не 
       полной с задачей<tt>рабочий стол</tt>, требуется другой метод. Этот 
       метод, в основном, применяется к системам с установленным пакетом 
       <package>xfree86-common</package>, включая некоторые серверные 
       системы, для которых с помощью <package>tasksel</package> были 
       установлены инструменты управления сервером с графическим 
       интерфейсом. Это, вероятно, корректный метод для систем с запущенными 
       X, но без установленной полностью задачи<tt>рабочий стол</tt>.
      <example>
# dpkg -l xfree86-common | grep ^ii
        </example>
     </p>
     <p>
       Во-первых, проверьте, что установлены пакеты 
       <package>libfam0c102</package> и <package>xlibmesa-glu</package>.
      <example>
# dpkg -l libfam0c102 | grep ^ii
# dpkg -l xlibmesa-glu | grep ^ii
          </example>
     </p>
     <p>
       Если у вас не установлен <package>libfam0c102</package> не включайте 
       <package>libfam0</package> в командную строку ниже. Если у вас не 
       установлен <package>xlibmesa-glu</package> не включайте его в 
       командную строку ниже. <footnote><p>Данная команда определит, нужно 
       ли устанавливать libfam0 и xlibmesa-glu и автоматически выберет что 
       нужно: <example># aptitude install x11-common \ $(dpkg-query 
       --showformat '${Package} ${Status}\n' -W libfam0c102 xlibmesa-glu \ | 
       grep 'ok installed$' | sed -e's/ .*//; s/c102//') </example> 
       </p></footnote>
      <example>
# aptitude install x11-common <var>libfam0</var> <var>xlibmesa-glu</var>
          </example>
     </p>
     <p>
       Заметим, что при установке <package>libfam0</package> также 
       устанавливается монитор слежения за состоянием файлов 
       (<package>fam</package>), а также RPC portmapper 
       (<package>portmap</package>), если их ещё нет в системе. Оба пакета 
       предоставляют новый сетевой сервис в системе, хотя их можно настроить 
       на работу через (внутреннее) сетевое устройство обратной петли.
     </p>
    </sect2>
    <sect2 id="minimal_upgrade_server">
     <heading>
       Обновление системы без установленных пакетов для X
     </heading>
     <p>
       Если в системе не установлены X, то для aptitude дополнительные 
       команды не нужны, и вы можете переходить к следующему шагу.
     </p>
    </sect2>
   </sect1>
   <sect1 id="upgrading_kernel">
    <heading>
      Обновление ядра
    </heading>
    <p>
      Версия <prgn>udev</prgn> из &releasename; не поддерживает ядра версий 
      менее 2.6.15 (в &oldreleasename; включены ядра версии 2.6.8), и 
      наоборот, версия <prgn>udev</prgn> из &oldreleasename; не заработает с 
      последними версиями ядер. Как следствие, ядро из предыдущего ядерного 
      пакета, вероятно, не загрузится после обновления. Также, установка 
      <prgn>udev</prgn> из &releasename; приводит к принудительному удалению 
      пакета <package>hotplug</package>, который используется ядрами Linux 
      ветки 2.4.
    </p>
    <p>
      В результате, предыдущий пакет с ядром, вероятно, больше не сможет 
      загрузить машину после обновления. Также, образуется промежуток 
      времени, в котором <package>udev</package> уже обновлён, а ядро ещё 
      нет. Если система будет перезагружена в этот момент, в середине 
      обновления, то она может больше не загрузиться, так как устройства 
      буду не найдены и драйверы не загрузятся. (Смотрите в <ref 
      id="upgrade_preparations"> рекомендации по подготовке к этому, если вы 
      производите обновление удалённо.)
    </p>
    <p>
      Если в системе установлена задача <tt>рабочий стол</tt> или другие 
      пакеты, которые могут привести к неприемлемо большому числу удаляемых 
      пакетов, рекомендуется обновлять ядро отдельно от всего остального.
    </p>
    <p>
      Для обновления ядра выполните:
     <example>
# aptitude install linux-image-2.6-<var>flavor</var>
          </example>
      Информация из <ref id="kernel-metapackage"> поможет вам определить 
      нужный вариант пакета с ядром для установки.
    </p>
    <p>
      В случае рабочей станции, к сожалению, невозможно гарантировать, что 
      пакет с ядром установит сразу после обновления 
      <package>udev</package>, поэтому этот промежуток времени 
      неопределённой длины когда система не имеет установленного ядра с 
      полной поддержкой автоопределения оборудования. Обратитесь к <ref 
      id="newkernel"> за информацией по настройке системы, которая не 
      зависит от автоопределения оборудования при загрузке.
    </p>
   </sect1>
   <sect1 id="upgrading_other">
    <heading>
      Обновление остальной системы
    </heading>
    <p>
      Теперь можно приступить собственно к обновлению. Выполните команду:
    </p>
    <p>
     <example>
# aptitude dist-upgrade
	  </example>
    </p>
    <p>
      Эта команда произведёт полное обновление системы, т.е. установку 
      последних доступных версий всех пакетов и разрешение всех изменившихся 
      между выпусками зависимостей. При необходимости будут установлены 
      новые пакеты (обычно это новые версии библиотек или переименованные 
      пакеты) и удалены все вызывающие конфликты устаревшие пакеты.
    </p>
    <p>
      При обновлении с набора компакт-дисков система несколько раз попросит 
      вас вставить в привод соответствующий диск. Возможно, вам придётся 
      вставлять один диск несколько раз. Это вызвано тем, что 
      взаимосвязанные пакеты могут находится на разных дисках.
    </p>
    <p>
      Новые версии уже установленных пакетов, которые нельзя обновить не 
      меняя состояние других пакетов, не будут установлены (программа 
      выведет сообщение, что пакет зафиксирован, "held back"). Разрешить 
      ситуацию можно, либо отметив такой пакет как подлежащий установке с 
      помощью <prgn>aptitude</prgn>, либо выполнив команду <tt>aptitude -f 
      install <var>пакет</var></tt>.
    </p>
   </sect1>
   <sect1 id="get_signatures">
    <heading>
      Получение подписей пакетов
    </heading>
    <p>
      После обновления с новой версией <prgn>apt</prgn> теперь вы можете 
      обновить информацию о пакетах, в которой теперь есть новый механизм 
      проверки подписей пакетов:
    </p>
    <p>
     <example>
# aptitude update
	  </example>
    </p>
    <p>
      При обновлении уже выполняется получение и активация ключей с 
      подписями для архивов пакетов Debian. Если у вас добавлены другие 
      (неофициальные) источники пакетов, то <prgn>apt</prgn> будет выдавать 
      предупреждение о невозможности проверки и требовать подтверждения, что 
      пакеты загружены из правильных источников и не были 
      подделаны. Подробней об этом смотрите в <ref id="pkgmgmt">.
    </p>
    <p>
      При использовании новой версии <prgn>apt</prgn>, вы заметите, что 
      скачиваются файлы различий (<tt>pdiff</tt>), а не полный список 
      пакетов. Подробней об этой возможности читайте в <ref id="apt-pdiff">.
    </p>
   </sect1>
   <sect1 id="trouble">
    <heading>
      Возможные проблемы во время обновления
    </heading>
    <p>
      Если работа с <prgn>aptitude</prgn>, <prgn>apt-get</prgn> или 
      <prgn>dpkg</prgn> завершается с ошибкой
     <example>
E: Dynamic MMap ran out of room
</example>
      то это значит, что размера кэша по умолчанию недостаточно. Проблему 
      можно решить, либо удалив ненужные записи в файле 
      <file>/etc/apt/sources.list</file>, либо увеличив размер 
      кэша. Увеличить размер кэша можно с помощью параметра 
      <tt>APT::Cache-Limit</tt> в файле 
      <file>/etc/apt/apt.conf</file>. Следующая команда увеличит кэш до 
      размера, достаточного для обновления:
     <example>
# echo 'APT::Cache-Limit "12500000";' >> /etc/apt/apt.conf
</example>
      Здесь предполагается, что эта переменная раньше не была указана в 
      файле.
    </p>
    <p>
      Иногда необходимо активизировать параметр 
      <tt>APT::Force-LoopBreak</tt> в APT, для того чтобы можно было 
      временно удалять пакеты первой необходимости при возникновении 
      циклической зависимости типа конфликт/требование предварительной 
      установки. Программа <prgn>aptitude</prgn> сообщит об этом и прекратит 
      обновление. Чтобы решить эту проблему, следует указать в командной 
      строке <prgn>aptitude</prgn> параметр <tt>-o 
      APT::Force-LoopBreak=1</tt>.
    </p>
    <p>
      Возможна ситуация, когда структура зависимостей в системе может быть 
      настолько нарушена, что потребуется ручное вмешательство. Обычно это 
      делается с помощью <prgn>aptitude</prgn> или
     <example>
# dpkg --remove <var>имя_пакета</var>
          </example>
      чтобы удалить "проблемные" пакеты или
     <example>
# aptitude -f install
# dpkg --configure --pending
          </example>
    </p>
    <p>
      В чрезвычайных случаях вам может потребоваться принудительная 
      переустановка командой типа
     <example>
# dpkg --install <var>/path/to/имя_пакета.deb</var>
          </example>
    </p>
    <p>
      При обновлении с "чистого" &oldreleasename; конфликтов файлов быть не 
      должно, но они вполне возможны, если у вас установлены неофициальные 
      адаптации (backports). При конфликте файлов появляются ошибки:
     <example>
Unpacking <var>&lt;package-foo&gt;</var> (from <var>&lt;package-foo-file&gt;</var>) ...
dpkg: error processing <var>&lt;package-foo&gt;</var> (--install):
 trying to overwrite `<var>&lt;some-file-name&gt;</var>',
 which is also in package <var>&lt;package-bar&gt;</var>
dpkg-deb: subprocess paste killed by signal (Broken pipe)
 Errors were encountered while processing:
 <var>&lt;package-foo&gt;</var>
          </example>
    </p>
    <p>
      Конфликт файлов можно попытаться разрешить принудительным удалением 
      пакета, указанного в <em>последней</em> строке сообщения об ошибке:
     <example>
# dpkg -r --force-depends <var>имя_пакета</var>
          </example>
    </p>
    <p>
      После исправления ошибок вы можете продолжить обновление, повторив 
      ранее описанные команды <tt>aptitude</tt>.
    </p>
    <p>
      Во время обновления система будет задавать вопросы о настройке или 
      перенастройке некоторых пакетов. Если вас спросят, нужно ли заменить 
      какой-то файл в каталоге <file>/etc/init.d</file> или 
      <file>/etc/terminfo</file>, или файл <file>/etc/manpath.config</file> 
      версией, предоставленной сопровождающим пакета, обычно следует 
      ответить`да', поскольку иначе будет нарушена целостность системы. Вы 
      всегда сможете вернуть старые настройки, потому что файлы конфигурации 
      будут сохранены с расширением <tt>.dpkg-old</tt>.
    </p>
    <p>
      Если вы не уверены в том, что нужно делать, запишите имя пакета или 
      файла и разберитесь с проблемой позднее. Информацию, выводившуюся на 
      экран во время обновления, вы сможете найти в файле транскрипта.
    </p>
   </sect1>
  </sect>
  <sect id="newkernel">
   <heading>
     Обновление ядра и сопутствующих пакетов
   </heading>
   <p>
     В этом разделе описано как обновить ядро и выявить потенциальные 
     проблемы, связанные с этим. Вы можете установить один из пакетов 
     <package>linux-image-*</package>, предоставленных Debian, или 
     скомпилировать ядро из исходников самостоятельно.
   </p>
    <![ %uses-initrd [

   <p>
     Заметим, что большая часть информации раздела основана на 
     предположении, что вы будете использовать одно из модульных ядер Debian 
     вместе с <package>initramfs-tools</package> и 
     <package>udev</package>. Если вы будете использовать своё собственное 
     ядро, которому не требуется initrd, или вы используете другой генератор 
     initrd, то некоторая информация может быть для вас не существенна.
   </p>
    ]]><![ %no-initrd [

   <p>
     Заметим, что этот раздел содержит много информации об использовании 
     <package>initramfs-tools</package> и <package>udev</package>. Однако, в 
     ядрах Debian для &architecture; не используется initrd для загрузки 
     системы, поэтому данная информация может быть для вас не 
     существенна. Но эта информация всё же включена в описание, так как вы 
     можете захотеть установить <package>udev</package> по другим причинам.
   </p>
    ]]>

   <p>
     Заметим также, что если <package>udev</package> <em>не установлен</em> 
     в системе, то для обнаружения устройств всё ещё возможно использовать 
     <package>hotplug</package>.
   </p>
    <![ %defaulted-2.4 [

   <p>
     Если вы используете ядро 2.4, внимательно прочитайте <ref 
     id="upgrade-to-2.6">.
   </p>
    ]]>

   <sect1 id="kernel-metapackage">
    <heading>
      Установка ядерного метапакета
    </heading>
    <p>
      При dist-upgrade с &oldreleasename; до &releasename; настоятельно 
      рекомендуется установить новый метапакет linux-image-2.6-*. Этот пакет 
      может быть установлен автоматически в процессе dist-upgrade. Вы можете 
      проверить это командой:
     <example>
# dpkg -l "linux-image*" | grep ^ii
          </example>
    </p>
    <p>
      Если в результате вы ничего не увидели, то вам нужно установить новый 
      пакет linux-image вручную. Чтобы увидеть список доступных метапакетов 
      linux-image-2.6, выполните:
     <example>
# apt-cache search linux-image-2.6- | grep -v transition
          </example>
    </p>
    <p>
      Если вы не знаете какой пакет выбрать, запустите <tt>uname -r</tt> и 
      поищите пакет с похожим именем. Например, если вы увидели 
      '2.4.27-3-686', то рекомендуется установить 
      <package>linux-image-2.6-686</package>. <![ %i386 [ (Заметим, что 
      варианта 386 больше не существует; если в данный момент вы пользуетесь 
      вариантом ядра 386, то вместо него должны установить вариант 486.) ]]> 
      Для выбора подходящего из возможных, вы можете воспользоваться 
      <prgn>apt-cache</prgn>, чтобы посмотреть подробное описание каждого 
      пакета. Например:
     <example>
# apt-cache show linux-image-2.6-686
          </example>
    </p>
    <p>
      Ядро нужно устанавливать с помощью <tt>aptitude install</tt>. Чтобы 
      воспользоваться преимуществами новой версии ядра, следует 
      перезагрузить систему при первой возможности.
    </p>
    <p>
      Если вы не боитесь трудностей, то можете скомпилировать ядро 
      самостоятельно из исходного кода. Установите пакет 
      <package>kernel-package</package> и прочитайте документацию в каталоге 
      <file>/usr/share/doc/kernel-package</file>.
    </p>
   </sect1>
   <sect1 id="upgrade-from-2.6">
    <heading>
      Обновление ядра версии 2.6
    </heading>
    <p>
      Если вы используете ядро ветки 2.6 из &oldreleasename;, то его 
      обновление будет выполнено автоматически только после полного 
      обновления пакетов системы (как описано в <ref 
      id="upgradingpackages">).
    </p>
    <p>
      Если возможно, то предпочтительно обновлять ядро отдельно от основного 
      <tt>dist-upgrade</tt>, чтобы уменьшить шансы получить временно 
      незагружаемую систему. Описание этого процесса смотрите в <ref 
      id="upgrading_kernel">. Заметим, что это нужно выполнять только после 
      процесса минимального обновления, описанного в <ref 
      id="minimal_upgrade">.
    </p>
    <p>
      Также это сработает, если вы используете ядро собственной сборки и 
      хотели бы перейти на ядро из &releasename;. Если ваша версия ядра не 
      поддерживается пакетом <prgn>udev</prgn>, то рекомендуется выполнять 
      обновление после минимального обновления. Если ваша версия 
      поддерживается <package>udev</package>, то вы можете ожидать 
      благополучного окончания полного обновления системы.
    </p>
   </sect1>
    <![ %defaulted-2.4 [

   <sect1 id="upgrade-from-2.4">
    <heading>
      Обновление с ядра версии 2.4
    </heading>
    <p>
      Если у вас установлено ядро 2.4 и для определения оборудования система 
      полагается на <package>hotplug</package>, то перед выполнением 
      обновления сначала вы должны обновить ядро до ветки 2.6 из 
      &oldreleasename;. Перед выполнением обновления убедитесь, что ядро 
      ветки 2.6 загружается на вашей системе, и всё оборудование 
      определяется правильно. При выполнении полного обновления пакет 
      <package>hotplug</package> заменяется другим 
      (<package>udev</package>). Если перед этим вы не выполните процедуру 
      обновления ядра, то система может не загрузиться. После выполнения 
      обновления ядра до ветки 2.6 из &oldreleasename;, вы можете выполнить 
      обновление ядра как это описано в <ref id="upgrade-from-2.6">.
    </p>
    <p>
      Если в вашей системе нет 
      <package>hotplug</package><footnote><p>Необходимые модули ядра могут 
      быть описаны явно в файле <file>/etc/modules</file>.</p></footnote>, 
      то в можете отложить обновление ядра и сделать это после обновления 
      всей системы по описанию в <ref id="upgrading_other">. После того как 
      система обновлена, вы можете сделать следующее (замените 
      <em>&lt;flavor&gt;</em> в имени пакета ядра на подходящее значение для 
      вашей системы):
     <example>
# aptitude install linux-image-2.6-&lt;flavor&gt;
        </example>
    </p>
   </sect1>
    ]]>

   <sect1 id="device-reorder">
    <heading>
      Переопределение нумерации устройств
    </heading>
    <p>
      В &releasename; встроен более мощный механизм обнаружения аппаратных 
      средств, чем в предыдущих выпусках. Однако это может приводить к 
      изменению порядка устройств обнаруженных в системе, что повлияет на 
      назначенные имена устройств. Например, если у вас есть две сетевые 
      карты, которые работают через разные драйверы, то устройства eth0 и 
      eth1 могут поменяться местами. Обратите внимание на то, что новый 
      механизм работает так, что если вы, например, поставите другую карту 
      ethernet в систему с &releasename;, то новой карте будет присвоено 
      новое имя интерфейса.
    </p>
    <p>
      Для сетевых устройств вы можете избежать этого переназначения с 
      помощью правил <package>udev</package>, определив устройства в файле 
      <file>/etc/udev/rules.d/z25_persistent-net.rules</file><footnote><p>Для 
      назначения постоянных имён сетевым интерфейсам правила генерируются 
      автоматически сценарием 
      <file>/etc/udev/rules.d/z45_persistent-net-generator.rules</file>. 
      Удалите эту символическую ссылку для выключения постоянного именования 
      сетевых устройств пакетом 
      <package>udev</package>.</p></footnote>. Также для решения можно 
      воспользоваться утилитой <prgn>ifrename</prgn>, привязав физические 
      устройства к определённым именам во время загрузки. Подробности 
      смотрите в <manref section="8" name="ifrename"> и <manref section="5" 
      name="iftab">. Оба варианта (<prgn>ifrename</prgn> и 
      <prgn>udev</prgn>) нельзя использовать одновременно.
    </p>
    <p>
      Для устройств хранения данных можно избежать переназначения с помощью 
      утилиты <package>initramfs-tools</package> и настройки загрузки 
      драйверов модулей в одном и том же порядке, в котором они загружены в 
      данный момент. Для этого определите порядок модулей устройств хранения 
      в системе с помощью команды <prgn>lsmod</prgn>. <prgn>lsmod</prgn> 
      выводит список модулей в обратном порядке, в котором они загружались, 
      то есть первые модули в списке были загружены последними. Заметим, что 
      это работает только для устройств, которые ядро нумерует стабильным 
      порядком (как устройства PCI).
    </p>
    <p>
      Однако на этот порядок также влияет удаление и перезагрузка модулей 
      после первоначальной загрузки. Также некоторые драйвера могут быть 
      включены в ядро статически, и их названия не появятся в результатах 
      <prgn>lsmod</prgn>. Вы можете определить имена таких драйверов и их 
      порядок загрузки, проанализировав файл <file>/var/log/kern.log</file> 
      или результат команды <prgn>dmesg</prgn>.
    </p>
    <p>
      Добавьте имена этих модулей в файл 
      <file>/etc/initramfs-tools/modules</file> в том порядке, в котором они 
      должны быть загружены во время запуска машины. Некоторые имена модулей 
      в &releasename; могут называться не так как в 
      &oldreleasename;. Например, sym53c8xx_2 теперь sym53c8xx.
    </p>
    <p>
      Затем вам нужно будет перегенерировать образ(ы) initramfs запустив 
      <tt>update-initramfs -u -k all</tt>.
    </p>
    <p>
      После загрузки ядра из &releasename; и <package>udev,</package> вы 
      можете перенастроить доступ к дискам системы через псевдонимы, которые 
      не зависят от порядка загрузки драйверов. Эти псевдонимы находятся в 
      подкаталогах <file>/dev/disk/</file>.
    </p>
   </sect1>
    <![ %ia64 [

   <sect1>
    <heading>
      Перенумерация последовательных устройств
    </heading>
    <p>
      Если у вас машина HP и вы используете последовательный порт консоли MP 
      (провод, помеченный как "console" на кабеле с 3-мя разъёмами), то 
      обновление ядра сломает доступ к консоли!
    </p>
    <p>
      При перезагрузке системы показывается сообщение "Loading initrd....", 
      после загрузка прерывается. Замечено, что это происходит на машинах со 
      старой микропрограммой, хотя проблема в несовместимости ядра (смотрите 
      <ref id="upgrade-to-2.6">).
    </p>
    <p>
      Перед обновлением, прочитайте далее этот раздел.
    </p>
    <p>
     <list>
      <item>
       <p>
         Имя устройства консоли будет изменено с <file>ttyS0</file> на 
         <file>ttyS1</file>, <file>ttyS2</file> или <file>ttyS3</file>, 
         поэтому
        <list>
         <item>
          <p>
            Отредактируйте <file>/etc/inittab</file>, добавив запись getty 
            для <file>/dev/ttyS1</file> (rx4640, rx5670, rx7620, rx8620, 
            Superdome), <file>/dev/ttyS2</file> (rx1600) или 
            <file>/dev/ttyS3</file> (rx2600).
          </p>
         </item>
         <item>
          <p>
            Отредактируйте <file>/etc/securetty</file> добавив 
            <file>ttyS1</file>, <file>ttyS2</file> или <file>ttyS3</file>.
          </p>
         </item>
         <item>
          <p>
            Оставьте имеющиеся записи <file>ttyS0</file> в 
            <file>/etc/inittab</file> и <file>/etc/securetty</file>, для 
            того, чтобы можно было загружать старые ядра.
          </p>
         </item>
        </list>
       </p>
      </item>
      <item>
       <p>
         Отредактируйте <file>/etc/elilo.conf</file>, удалив все параметры 
         "console=".
       </p>
      </item>
      <item>
       <p>
         Запустите <prgn>elilo</prgn>, чтобы применить к системному 
         загрузчику новую конфигурацию.
       </p>
      </item>
      <item>
       <p>
         Перезагрузитесь и с помощью EFI меню обслуживания загрузки выберите 
         правильные устройства для консольного вывода, ввода и 
         ошибок. Затем, чтобы изменения вступили в силу выполните "холодную" 
         перезагрузку.
       </p>
       <p>
         Для консоли MP осторожно выберите в пути устройство 
         "Acpi(HWP0002,700)/Pci(...)/Uart".
       </p>
      </item>
     </list>
    </p>
    <p>
      Более подробно об этих изменениях и выявлении неисправностей можно 
      прочитать в <url 
      id="http://lists.debian.org/debian-ia64/2005/01/msg00008.html">.
    </p>
   </sect1>
    ]]><![ %uses-initrd [

   <sect1 id="boot-timing">
    <heading>
      Проблемы с синхронизацией при загрузке
    </heading>
    <p>
      Если для запуска системы используется initrd, созданный 
      <package>initramfs-tools</package>, то в некоторых случаях создание 
      файлов устройств с помощью <package>udev</package> происходит слишком 
      поздно, после отработки сценариев загрузки, которые с ними работают.
    </p>
    <p>
      Обычно, признаком такого поведения является отказ загрузки системы 
      из-за невозможности смонтировать корневую файловую систему и переход в 
      отладочную оболочку. Но если проверить нужные устройства, то окажется, 
      что в <file>/dev</file> всё есть. Это наблюдалось, когда корневая 
      файловая система была расположена на диске USB или RAID, особенно при 
      использовании lilo.
    </p>
    <p>
      Эту проблему можно решить добавив параметр загрузки 
      <tt>rootdelay=<var>9</var></tt>. Значение задержки (в секундах) может 
      потребоваться изменить.
    </p>
   </sect1>
    ]]><![ %powerpc [

   <sect1 id="pcilynx-broken">
    <heading>
      FireWire-драйвер PCILynx не работает
    </heading>
    <p>
      Драйвер PCILynx на PowerPC настолько плохо работает, что может 
      привести к сбоям в системе. Мы рекомендуем пользователям, которым 
      нужен FireWire, купить одну из дешёвых OHCI1394-карт и внести драйвер 
      PCILynx в чёрный список.
    </p>
   </sect1>
    ]]>

  </sect>
  <sect id="nownownow">
   <heading>
     Перед перезагрузкой
   </heading>
   <p>
     Когда команда <tt>aptitude dist-upgrade</tt> закончила работу, 
     формально обновление завершено, но <em>перед</em> перезагрузкой следует 
     проделать ещё несколько действий.
   </p>
   <sect1 id="convert-devfs">
    <heading>
      Переход с devfs
    </heading>
    <p>
      Ядра Debian больше не содержат поддержку <tt>devfs</tt>, поэтому 
      пользователям <tt>devfs</tt> нужно вручную преобразовать их системы 
      перед обновлением до ядра из &releasename;.
    </p>
    <p>
      Если вы видите строку 'devfs' в файле <file>/proc/mounts</file>, то 
      почти наверняка используется <tt>devfs</tt>. Имена в стиле 
      <tt>devfs</tt> во всех конфигурационных файлах нужно заменить на 
      соответствующие имена в стиле <package>udev</package>. Имена в стиле 
      <tt>devfs</tt> обычно есть в файлах <file>/etc/fstab</file>, 
      <file>/etc/lilo.conf</file>, <file>/boot/grub/menu.lst</file> и 
      <file>/etc/inittab</file>.
    </p>
    <p>
      Подробности о возможных проблемах есть в отчёте об ошибке <url 
      id="http://bugs.debian.org/341152" name="#341152">.
    </p>
   </sect1>
    <![ %sparc [

   <sect1 id="missingdrivers">
    <heading>
      Возможное отсутствие драйверов в initrd
    </heading>
    <p>
      Ядра из &releasename; пока не содержат полную поддержку sysfs для 
      родной sparc sbus. <package>initramfs-tools</package> полагается на 
      то, что драйверы дисковых контроллеров будут в initrd. Если драйвер не 
      включён в initrd, то система может не загрузиться.
    </p>
    <p>
      Если в системе для доступа к жёстким дискам используется модуль 
      <tt>esp</tt> или <tt>qlogicpti</tt>,то вам нужно включить этот модуль 
      в <file>/etc/initramfs-tools/modules</file> и сгенерировать initrd 
      перед тем как перезагружать систему. Для регенерации initrd 
      используйте команду:
     <example>
# update-initramfs -u -k all
          </example>
    </p>
   </sect1>
    ]]><![ %hppa [

   <sect1 id="missingdrivers">
    <heading>
      Возможное отсутствие драйверов в initrd
    </heading>
    <p>
      Ядра из &releasename; пока не содержат полную поддержку sysfs для 
      родной HP sbus. <package>initramfs-tools</package> полагается на то, 
      что драйверы дисковых контроллеров будут в initrd. Если драйвер не 
      включён в initrd, то система может не загрузиться.
    </p>
    <p>
      Если в системе для доступа к жёстким дискам используется модуль 
      <tt>lasi700</tt>, <tt>53c700</tt> или <tt>zalon7xx</tt>,то вам нужно 
      включить этот модуль в <file>/etc/initramfs-tools/modules</file> и 
      сгенерировать initrd перед тем как перезагружать систему. Для 
      регенерации initrd используйте команду:
     <example>
# update-initramfs -u -k all
          </example>
    </p>
   </sect1>
    ]]><![ %i386-amd64 [

   <sect1 id="rerunlilo">
    <heading>
      Перезапуск lilo
    </heading>
    <p>
      Если в качестве системного загрузчика используется 
      <package>lilo</package> (загрузчик по умолчанию некоторых установок 
      &oldreleasename;), то настоятельно рекомендуется перезапустить 
      <prgn>lilo</prgn> после обновления:
     <example>
# /sbin/lilo
          </example>
    </p>
    <p>
      Заметим, что это нужно сделать даже если вы не обновляли ядро системы, 
      так как вторая стадия <prgn>lilo</prgn> могла быть изменена при 
      обновления пакета.
    </p>
    <p>
      Также, пересмотрите содержимое файла <file>/etc/kernel-img.conf</file> 
      и убедитесь, что в нём есть строчка <em>do_bootloader = Yes</em>. Это 
      включит перезапуск системного загрузчика каждый раз после обновления 
      ядра.
    </p>
    <p>
      Если возникли какие-то проблемы при запуске <prgn>lilo</prgn>, 
      проверьте символические ссылки на <file>vmlinuz</file> и 
      <file>initrd</file> в <file>/</file>, а также содержимое файла 
      <file>/etc/lilo.conf</file> на соответствие с ними.
    </p>
    <p>
      Если вы забудете перезапустить <prgn>lilo</prgn> перед перезагрузкой 
      или система случайно перезагрузится до того как вы смогли 
      перезапустить <prgn>lilo</prgn> вручную, система может больше не 
      загрузиться. При запуске системы вместо приглашения lilo вы увидите 
      только <em>LI</em><footnote><p>Подробней о кодах ошибок 
      <prgn>lilo</prgn> смотрите в <url 
      id="http://tldp.org/HOWTO/Bootdisk-HOWTO/a1483.html" name="The Linux 
      Bootdisk HOWTO">.</p></footnote>. Для восстановления работоспособности 
      обратитесь к <ref id="recovery">.
    </p>
   </sect1>
    ]]><![ %s390 [

   <sect1 id="s390-config">
    <heading>
      Настройка оборудования S/390
    </heading>
    <p>
      Не всё оборудование S/390 может быть настроено автоматически. Для ядер 
      из &releasename; для правильной настройки устройств используется 
      <package>sysconfig-hardware</package>. К сожалению, документация для 
      этой утилиты и файлов конфигурации пока недоступна. Файлы конфигурации 
      для <package>sysconfig-hardware</package> можно найти в каталоге 
      <file>/etc/sysconfig/</file>.
    </p>
    <p>
      Если в системе работает ядро ветки2.4, то получения правильной 
      конфигурации может быть особенно сложным. Если вам нужна помощь 
      обратитесь в <url id="http://lists.debian.org/debian-s390" 
      name="список рассылки Debian по S/390">.
    </p>
    <p>
      Во-первых, установите утилиту регенерируйте initramfs initrd, так как 
      утилита предоставляет несколько сценариев, которые должны быть 
      включены в initrd:
     <example>
# aptitude install sysconfig-hardware
# update-initramfs -u -k all
	  </example>
    </p>
    <sect2 id="s390-dasd">
     <heading>
       Настройка дисков
     </heading>
     <p>
       Данная процедура выполняется через изменение файла 
       <file>/etc/zipl.conf</file>. Утилита sysconfig может использовать 
       путь к устройству для включения корневого устройства, которое 
       означает, что этот путь нужно передать в качестве загрузочных 
       параметров ядру. Для обычного dasd, путь состоит из:
      <example>
&lt;шина&gt;-&lt;устройство&gt;
	  </example>
       Для параметра <tt>root</tt> в путь должен быть добавлен 
       раздел. Например, если ваш dasda это <tt>0.0.0122</tt>, то вместо 
       <file>root=/dev/dasda1</file> вы должны включить следующие 
       <tt>параметры</tt> строки в <tt>/etc/zipl.conf</tt>:
      <example>
root=/dev/disks/by-path/ccw-0.0.0122-part1
	  </example>
       Или же вы можете использовать параметр <tt>enable</tt>, чтобы указать 
       устройство, которое должно быть включено; в этом случае раздел:
      <example>
root=/dev/dasda1 enable=ccw-0.0.0122
	  </example>
       Используемые пути могут различаться для разных устройств. Например, 
       для дисков на адаптере zFCP fiberchannel, путь состоит из шины, 
       устройства, драйвера, wwpn и lun. Параметры для RAID1 будут выглядеть 
       так (в одну строку):
      <example>
root=/dev/md0 enable=ccw-0.0.2900-zfcp-0x21000020371c93a5:0
enable=ccw-0.0.2900-zfcp-0x21000020371d8f94:0
	  </example>
     </p>
     <p>
       Другие устройства dasd (dasds не нужно создавать в корневой файловой 
       системе) активируются через конфигурационные файлы в 
       <file>/etc/sysconfig/hardware/</file>. Для обычного dasd нужно просто 
       создать файл с путём устройства в его имени:
      <example>
# cd /etc/sysconfig/hardware
# touch config-ccw-0.0.0122
	  </example>
       Для дисков на адаптере zFCP fiberchannel отдельные устройства 
       перечисляются внутри файла. Для примера выше, создайте файл 
       <file>config-ccw-0.0.2900</file> содержащий (второе устройство не 
       показано для читаемости):
      <example>
ZFCP_DEVICES=(0x21000020371c93a5:0x0000000000000000 0x2100...:0x...)
	  </example>
     </p>
    </sect2>
    <sect2 id="s390-other">
     <heading>
       Настройка сетевых устройств
     </heading>
     <p>
       Сетевые устройства активируются через конфигурационные файлы в 
       <file>/etc/sysconfig/hardware/</file>. Для сетевого устройства ctc с 
       протоколом канала чтения <tt>0.0.0a00</tt> и каналом записи 
       <tt>0.0.0a01</tt> и используя протокол S/390, создайте файл 
       <file>config-ccw-0.0.0a00</file> содержащий:
      <example>
CCWGROUP_CHANS=(0.0.0a00 0.0.0a01)
CTC_PROTOCOL=0
	  </example>
       Для сетевого устройства qeth с включённым режимом layer2, в файл 
       <file>config-ccw-0.0.0600</file> нужно записать:
      <example>
CCWGROUP_CHANS=(0.0.0600 0.0.0601 0.0.0602)
QETH_OPTIONS=(layer2)
	  </example>
     </p>
     <p>
       Поддерживаемые параметры для ctc: <tt>CTC_PROTOCOL</tt> и 
       <tt>CTC_BUFFER</tt>; для qeth: <tt>QETH_PORTNAME</tt>, 
       <tt>QETH_PORTNO</tt> и <tt>QETH_OPTIONS</tt>.
     </p>
     <p>
       Так как сетевые устройства на S/390 не имеют стабильного MAC адреса, 
       невозможно использовать постоянное именование устройств с помощью 
       <package>udev</package>. Вместо этого, вы можете добавить параметр 
       <tt>INTERFACE_NAME</tt> в конфигурационный файл для переименования 
       интерфейса.
     </p>
    </sect2>
   </sect1>
    ]]>

   <sect1 id="mdadm">
    <heading>
      Обновление mdadm
    </heading>
    <p>
      Для mdadm теперь нужен конфигурационный файл для составления MD 
      массивов (RAID) с первоначального ramdisk и во время процесса 
      инициализации системы. Прочитайте и выполните инструкции из 
      <file>/usr/share/doc/mdadm/README.upgrading-2.5.3.gz</file> после 
      обновления пакета <strong>и до перезагрузки</strong>. Последняя версия 
      этого файла доступна по адресу <url 
      id="http://svn.debian.org/wsvn/pkg-mdadm/mdadm/trunk/debian/README.upgrading-2.5.3?op=file">; 
      обратитесь к ней, если возникнут проблемы.
    </p>
   </sect1>
    <![ %sparc [

   <sect1 id="networkdrivers">
    <heading>
      Конфликт драйверов tulip и dmfe
    </heading>
    <p>
      На некоторых Netra (например, на Netra X1) udev загружает одновременно 
      драйверы tulip и dmfe, так как в обоих заявлена поддержка одинаковых 
      PCI ID (<url id="http://bugs.debian.org/334104" 
      name="#334104">). Драйвер tulip работает на Netra. Если это случилось, 
      вы должны поместить в чёрный список драйвер dmfe и перезагрузиться, 
      и/или удалить оба dmfe и tulip (modprobe -r), а затем выполнить 
      modprobe tulip.
    </p>
   </sect1>
  </sect>
   ]]>

  <sect id="for_next">
   <heading>
     Подготовка к следующему выпуску
   </heading>
   <p>
     После обновления можно сделать несколько вещей для подготовки к 
     следующему выпуску.
   </p>
   <p>
    <list>
     <item>
      <p>
        Если используется <prgn>grub</prgn>, отредактируйте файл 
        <file>/etc/kernel-img.conf</file> и измените нахождение программы 
        <prgn>update-grub</prgn> с <file>/sbin/update-grub</file> на 
        <file>/usr/sbin/update-grub</file>.
      </p>
     </item>
     <item>
      <p>
        Если новый метапакет образа ядра был стянут по зависимости от 
        старого, то он будет помечен как установленный автоматически, что 
        должно быть исправлено:
       <example>
# aptitude unmarkauto $(dpkg-query -W 'linux-image-2.6-*' | cut -f1)
</example>
      </p>
     </item>
     <item>
      <p>
        Удалите метапакеты &oldreleasename; для ядра, запустив:
       <example>
# aptitude purge kernel-image-2.6-&lt;flavor&gt;
</example>
      </p>
     </item>
     <item>
      <p>
        Перенесите все настройки из <file>/etc/network/options</file> в 
        <file>/etc/sysctl.conf</file>. Подробности читайте в 
        <file>/usr/share/doc/netbase/README.Debian</file>.
      </p>
     </item>
     <item>
      <p>
        Удалите устаревшие и неиспользуемые пакеты как это описано в <ref 
        id="obsolete">. Проверьте, какие конфигурационные файлы они 
        использовали и подумайте над удалением пакетов вместе с их 
        конфигурационными файлами.
      </p>
     </item>
    </list>
   </p>
  </sect>
  <sect id="deprecated">
   <heading>
     Исключаемые пакеты
   </heading>
   <p>
     Начиная с выпуска <tt>Lenny</tt>, большое число серверных пакетовбудет 
     исключено, так как переход на новые версии теперь можно выполнить без 
     проблем при переходе на <tt>Lenny</tt>.
   </p>
   <p>
     Это относится к следующим пакетам:
   </p>
   <p>
    <list>
     <item>
      <p>
        apache (1.x) на apache2
      </p>
     </item>
     <item>
      <p>
        bind8 на bind9
      </p>
     </item>
     <item>
      <p>
        php4 на php5
      </p>
     </item>
     <item>
      <p>
        postgresql-7.4 на postgresql-8.1
      </p>
     </item>
     <item>
      <p>
        exim 3 на exim4
      </p>
     </item>
    </list>
   </p>
  </sect>
  <sect id="obsolete">
   <heading>
     Устаревшие пакеты
   </heading>
   <p>
     Вместе с появлением девяти тысяч новых пакетов, более двух тысяч 
     пакетов из состава &oldreleasename; с появлением &releasename; 
     устаревают. Устаревшие пакеты не включены в &releasename; и не будут 
     больше обновляться. Ничто не мешает вам продолжить пользоваться этими 
     пакетами, но приблизительно через год <footnote><p>Или при появлении 
     нового выпуска Debian. Обычно поддержку получают одновременно не более 
     двух стабильных выпусков.</p></footnote> после выхода &releasename; 
     команда безопасности прекратит выпускать для них исправления. Мы 
     рекомендуем перейти на использование альтернативных пакетов, если есть 
     такая возможность.
   </p>
   <p>
     Пакет может быть удалён из дистрибутива по многим причинам: разработка 
     программы прекращена, пакет не интересен никому из разработчиков 
     Debian, программа вытеснена другой, более функциональной программой или 
     версией программы, пакет содержит ошибки, из-за которых пока не может 
     быть включён в &releasename;. В последнем случае пакет может быть 
     доступен в нестабильном ("unstable") дистрибутиве.
   </p>
   <p>
     Определить, какие пакеты в обновлённой системе устарели очень легко, 
     так как программы управления помечают их как "устаревшие". Если вы 
     используете <prgn>aptitude</prgn>, то полный список этих пакетов 
     находится в разделе "Устаревшие и локально созданные пакеты". В 
     программе <prgn>dselect</prgn> есть аналогичный раздел, но список 
     пакетов в нём может несколько отличаться. Также, если в 
     &oldreleasename; вы использовали <prgn>aptitude</prgn> для установки 
     пакетов вручную, то <prgn>aptitude</prgn> помнит об этих пакетах, и 
     сможет пометить как устаревшие те пакеты, которые были установлены 
     только для удовлетворения зависимостей и которые больше не нужны, если 
     пакет, который от них зависел, был удалён. В отличие от 
     <prgn>deborphan</prgn>, <prgn>aptitude</prgn> не помечает устаревшими 
     пакеты, которые вы установили вручную, в отличие от тех, которые были 
     установлены автоматически для удовлетворения зависимостей.
   </p>
   <p>
     Существуют и другие инструменты для определения неиспользуемых 
     пакетов. В их число входят <prgn>deborphan</prgn>, 
     <prgn>debfoster</prgn> и <prgn>cruft</prgn>. Советуем использовать 
     <prgn>deborphan</prgn>, хотя по умолчанию он ищет только ненужные 
     библиотеки (пакеты в секциях "libs" и "oldlibs", от которых не зависит 
     ни один другой пакет). Не удаляйте подряд все пакеты, найденные такими 
     инструментами (в особенности, если при запуске вы указали опции, 
     отличные от опций по умолчанию), чтобы не удалить что-нибудь 
     нужное. Настоятельно рекомендуем перед удалением внимательно 
     просмотреть список предложенных пакетов (прочесть описание, посмотреть 
     входящие файлы).
   </p>
   <p>
     В <url id="&url-bts;" name="системе отслеживания ошибок Debian"> 
     зачастую содержится дополнительная информация о причинах удаления 
     пакета. Просмотрите архив сообщений об ошибках интересующего вас 
     пакета, а также архивированные ошибки для <url 
     id="&url-bts;cgi-bin/pkgreport.cgi?pkg=ftp.debian.org#38:archive=yes" 
     name="псевдо-пакета ftp.debian.org">.
   </p>
   <sect1 id="dummy">
    <heading>
      Пакеты-пустышки
    </heading>
    <p>
      Многие пакеты из &oldreleasename; в &releasename; были поделены на 
      несколько разных пакетов, чаще всего чтобы облегчить поддержку 
      системы. Для простоты обновления в состав &releasename; нередко входит 
      "пакет-пустышка" (пустой пакет с именем старого пакета из 
      &oldreleasename;). Такой пакет при установке устанавливает новые 
      пакеты, от которых зависит. Сразу же после установки "пустышки" 
      становятся неиспользуемыми и их можно спокойно удалять.
    </p>
    <p>
      В описании большинства (но не всех) пакетов-пустышек ясно указано их 
      предназначение. К сожалению, никаких правил для описания пустышек нет, 
      поэтому для их обнаружения вам может пригодиться 
      <prgn>deborphan</prgn> с опцией <tt>--guess</tt>. Некоторые пустышки 
      удалять после обновления не нужно, так как они впоследствии 
      используются для определения установленной версии программы.
    </p>
   </sect1>
  </sect>
 </chapt>
 <chapt id="information">
  <heading>
    Что надо знать о &releasename;
  </heading>
  <sect id="problems">
   <heading>
     Возможные проблемы
   </heading>
   <p>
     Иногда перемены к лучшему приводят к побочным эффектам, которых нельзя 
     избежать без появления ошибок где-нибудь ещё. Здесь мы опишем проблемы, 
     которые уже известны. Прочитайте также список известных ошибок, 
     соответствующую документацию на пакеты, отчёты об ошибках и другую 
     информацию, указанную в <ref id="morereading">.
   </p>
   <sect1 id="udev">
    <heading>
      Проблемы с устройствами из-за udev
    </heading>
    <p>
      Хотя <package>udev</package> и был хорошо оттестирован, у вас могут 
      возникнуть вопросы, связанные работой некоторых устройств. Чаще всего 
      ошибки вызваны изменением владельца или разрешений 
      файла-устройства. Некоторые устройства по умолчанию не могут быть 
      созданы (например, <file>/dev/video</file> и <file>/dev/radio</file>).
    </p>
    <p>
      Все эти проблемы можно решить настройкой 
      <package>udev</package>. Более подробная информация - в <manref 
      section="8" name="udev"> и <file>/etc/udev</file>.
    </p>
   </sect1>
    <![ %defaulted-2.4 [

   <sect1 id="incompatible-2.4">
    <heading>
      Некоторые приложения могут больше не работать с ядром ветки 2.4
    </heading>
    <p>
      Некоторые приложения из &releasename; могут больше не работать с ядром 
      ветки 2.4, например, из-за того, что им требуется поддержка 
      <tt>epoll()</tt>, которая недоступна в ядрах ветки 2.4. Такие 
      приложения могут не работать совсем или не работать, пока система не 
      будет перезапущена с ядром ветки 2.6.
    </p>
    <p>
      Примером такого приложения является HTTP-прокси 
      <package>squid</package>.
    </p>
   </sect1>
    ]]>

   <sect1 id="window-scaling">
    <heading>
      Некоторые сайты в сети недоступны по TCP
    </heading>
    <p>
      Начиная с версии 2.6.17, Linux использует изменение окна TCP, 
      описанное в RFC 1323, в агрессивной манере. Некоторые серверы не 
      удовлетворяют RFC и объявляют неверные размеры своих окон. Подробней 
      смотрите ошибки <url id="http://bugs.debian.org/381262" 
      name="#381262">, <url id="http://bugs.debian.org/395066" 
      name="#395066">, <url id="http://bugs.debian.org/401435" 
      name="#401435">.
    </p>
    <p>
      Чтобы обойти эту проблему, обычно применяют два способа: или уменьшают 
      максимально возможные значения окна TCP до самого маленького значения 
      (предпочтительный способ), или выключают изменение окна TCP совсем ( 
      не рекомендуется). Примеры команд можно найти на <url 
      id="http://www.debian.org/devel/debian-installer/errata" 
      name="странице известных недоработок debian-installer">.
    </p>
   </sect1>
    <![ %i386 [

   <sect1 id="poweroff">
    <heading>
      Больше не работает автоматическое отключение питания
    </heading>
    <p>
      На некоторых старых системах команда <tt>shutdown -h</tt> может больше 
      не выключать питание системы (но останавливает её). В этих случаях 
      нужно использовать apm. Добавление <tt>acpi=off apm=power_off</tt> в 
      командную строку ядра, например в конфигурационные файлы 
      <package>grub</package> или <package>lilo</package> должно решить 
      проблему. Подробней смотрите ошибку <url 
      id="http://bugs.debian.org/390547" name="#390547">.
    </p>
   </sect1>
    ]]>

   <sect1 id="apt-pdiff">
    <heading>
      Медленно обновляются пакетные индексные файлы APT
    </heading>
    <p>
      По умолчанию в версии <prgn>apt</prgn> из &releasename; используется 
      новый способ обновления пакетных индексных файлов APT (при запуске 
      <tt>aptitude update</tt>), при котором скачиваются файлы изменений 
      (вместо полного индексного файла пакетов), называемые 
      <tt>pdiff</tt>. Данная новая возможность должна использовать меньшую 
      ширину канала и работать быстрее на большинстве систем. К сожалению, 
      есть и обратный эффект: обновление замедляется на системах с быстрым 
      подключением к сети (или есть близко расположенное сервер-зеркало), 
      для которых обновление выполняется редко, так как для этих систем 
      слияние файлов изменений занимает больше времени, чем загрузка полного 
      индекса пакетов. Эту возможность можно отключить, добавив 
      <tt>Acquire::Pdiffs "false";</tt> в конфигурационный файл 
      <file>/etc/apt/apt.conf</file>.
    </p>
    <p>
      Это изменение, в основном, предназначено для пользователей 
      <em>нестабильной</em> и <em>тестируемой</em> веток &debian; в 
      следствие постоянного изменения этих архивов. Пользователи 
      &releasename; заметят эту возможность только при обновлении состояния 
      пакетов из архива безопасности.
    </p>
   </sect1>
    <![ %i386 [

   <sect1 id="hp-acpi">
    <heading>
      В ядре из &releasename; на некоторых ноутбуках HP выключена поддержка 
      ACPI
    </heading>
    <p>
      Определённые модели ноутбуков HP имеют ACPI BIOS, несовместимый с 
      ядром Linux 2.6.18 из &releasename;, который не позволяет увеличивать 
      скорость вентиляторов, что приводит к нежелательному перегреву. Также, 
      вентиляторы могут не включиться после состояния приостанова. Поэтому 
      если ядро обнаруживает определённые версии ACPI BIOS, то поддержка 
      ACPI выключается. Модели, на которых это точно происходит: HP nx6125, 
      nx6120, nx6325, nc6120 и nc6000.
    </p>
    <p>
      Пользователи, которым нужна поддержка ACPI в системе, могут установить 
      ядро Linux 2.6.19 или более новое. Подробности можно найти в ошибках 
      Debian <url id="http://bugs.debian.org/404143" name="#404143"> и <url 
      id="http://bugs.debian.org/400488" name="#400488">, а также в ошибках 
      ядра Linux<url id="http://bugzilla.kernel.org/show_bug.cgi?id=5534" 
      name="#5534"> и <url 
      id="http://bugzilla.kernel.org/show_bug.cgi?id=7122" name="#7122">.
    </p>
   </sect1>
    ]]>

   <sect1 id="asynchronous-network-start">
    <heading>
      Асинхронная инициализация сети может приводить к непредсказуемому 
      поведению
    </heading>
    <p>
      В системах, использующих <package>udev</package> для загрузки 
      драйверов для сетевых интерфейсов, из-за асинхронной природы 
      <package>udev</package> может случиться так, что сетевой драйвер не 
      будет загружен до запуска <prgn>/etc/init.d/networking</prgn> при 
      загрузке системы. Хотя включение <tt>allow-hotplug</tt> в 
      <file>/etc/network/interfaces</file> (в дополнении к <tt>auto</tt>) 
      обеспечит, что сетевой интерфейс будет включён сразу как станет 
      доступным, но не гарантируется, что это завершится перед началом 
      старта сетевых сервисов, некоторые из которых могут повести себя 
      неправильно при отсутствии сетевого интерфейса.
    </p>
   </sect1>
    <![ %not-s390 [

   <sect1 id="wpa">
    <heading>
      Проблема при использовании WPA-безопасности в беспроводных сетях
    </heading>
    <p>
      В &oldreleasename;, пакет <package>wpasupplicant</package> 
      устанавливался как системный сервис и настраивался через 
      <file>/etc/default/wpasupplicant</file> и 
      <file>/etc/wpasupplicant.conf</file> (настраивался пользователем).
    </p>
    <p>
      В &releasename;, сценарий <file>/etc/init.d/wpasupplicant</file> был 
      удалён, а пакет Debian теперь интегрирован с 
      <file>/etc/network/interfaces</file>, как и другие пакеты типа 
      <package>wireless-tools</package>. Это означает, что 
      <package>wpasupplicant</package> больше не предоставляет системный 
      сервис явно.
    </p>
    <p>
      Информацию по настройке wpasupplicant можно найти в 
      <file>/usr/share/doc/wpasupplicant/README.modes.gz</file>, там же 
      можно найти несколько примеров для 
      <file>/etc/network/interfaces</file>. Обновляемую информацию об 
      использовании пакета <package>wpasupplicant</package> в Debian можно 
      найти в <url id="http://wiki.debian.org/WPA" name="Debian вики">.
    </p>
   </sect1>
    ]]>

   <sect1 id="partitionenc">
    <heading>
      Проблемы с не-ASCII символами в именах файлов
    </heading>
    <p>
      При использовании смонтированных файловых систем vfat, ntfs или 
      iso9660, в которых содержатся файлы в именах которых есть не-ASCII 
      символы, возникает ошибка, если монтирование производилось без 
      параметра utf8. Это может проявляться сообщениями вида: 'Invalid or 
      incomplete multibyte or wide character'. Возможным решение является 
      использование <tt>defaults,utf8</tt> в качестве параметров 
      монтирования файловых систем vfat, ntfs и iso9660, если они содержат 
      имена файлов с не-ASCII символами.
    </p>
    <p>
      Заметим, что ядро Linux поддерживает только регистрозависимую 
      обработку имён файлов в vfat при использовании параметра 
      <tt>utf8</tt>.
    </p>
   </sect1>
    <![ %amd64 [

   <sect1 id="nvidia-iommu">
    <heading>
      Повреждение данных в оборудовании IOMMU на чипсетах Nvidia
    </heading>
    <p>
      Проблема была обнаружена в системах &arch-title; с чипсетами Nvidia и 
      имеющими более 3Гб оперативной памяти. Она заключается в спонтанных 
      повреждениях данных при использовании оборудования IOMMU. Эта проблема 
      всё ещё исследуется разработчиками ядра Linux и и производителями 
      оборудования, и официального исправления пока не выпущено. До тех пор, 
      пока решение не найдено, для защиты целостности своих данных, 
      пользователям таких систем предлагается вручную выключить 
      использование оборудования IOMMU перед загрузкой, добавив 
      <tt>iommu=soft</tt> в загрузочные параметры ядра.
    </p>
    <p>
      Подробности об этой проблеме доступны в Debian ошибке <url 
      id="http://bugs.debian.org/404148" name="#404148"> и ошибке Linux 
      Kernel <url id="http://bugzilla.kernel.org/show_bug.cgi?id=7768" 
      name="#7768">.
    </p>
   </sect1>
    ]]>

   <sect1 id="no-sound">
    <heading>
      Перестал работать звук
    </heading>
    <p>
      В редких случаях после обновления может перестать работать звук. Если 
      это случилось, проверьте alsa: запустите alsaconf с правами 
      суперпользователя, добавьте своего пользователя в группу 
      <tt>audio</tt>, с помощью alsamixer убедитесь, что выставлен 
      приемлемый уровень громкости и звук не выключен, убедитесь, что 
      сервисы arts и esound остановлены, проверьте, что модули OSS не 
      загружены, проверьте, что колонки включены, проверьте, что команда 
      <tt>cat </tt>dev/urandom > /dev/dsp/ работает с правами 
      суперпользователя.
    </p>
   </sect1>
  </sect>
   <![ %defaulted-2.4 [

  <sect id="upgrade-to-2.6">
   <heading>
     Обновление ядра до версии 2.6
   </heading>
   <p>
     Ядра серии 2.6 сильно отличаются от ядер серии 2.4. Модули ядра были 
     переименованы, многие драйверы были частично (а иногда и полностью) 
     переписаны. Поэтому к обновлению с предыдущих ядер до 2.6 не следует 
     относиться легкомысленно. В этом разделе вы узнаете о некоторых 
     проблемах, с которыми вы, возможно, столкнётесь.
   </p>
   <p>
     Если вы планируете скомпилировать собственное ядро, то перед 
     перезагрузкой с ядром 2.6 убедитесь, что пакет 
     <package>module-init-tools</package> установлен. Этот пакет заменяет 
     <package>modutils</package> для ядер серии 2.6. При установке любого из 
     пакетов <package>linux-image</package>, пакет 
     <package>module-init-tools</package> будет установлен автоматически по 
     зависимости.
   </p>
   <p>
     Если вы используете <em>LVM</em>, то до перезагрузки вам также надо 
     будет установить пакет <package>lvm2</package>, так как ядро 2.6 само 
     по себе не поддерживает LVM1. Для доступа к разделам LVM1 применяется 
     модуль совместимости dm-mod из пакета <package>lvm2</package>. Пакет 
     <package>lvm10</package> можно не удалять, сценарии начальной загрузки 
     определят используемое ядра и загрузят подходящую версию.
   </p>
   <p>
     Если у вас есть записи в файле <file>/etc/modules</file> (список 
     модулей, загружаемых при старте системы), обратите внимание на то, что 
     имена некоторых модулей изменились. В этом случае файл надо 
     соответствующим образом исправить.
   </p>
    <![ %i386 [

   <p>
     Для некоторых дисковых контроллеров SATA имена устройств и разделов 
     могут измениться с <file>/dev/hdX</file> на <file>/dev/sdX</file>. Если 
     это случится, придётся внести соответствующие изменения в файл 
     <file>/etc/fstab</file> и конфигурацию загрузчика ОС. При неверной 
     настройке компьютер может перестать загружаться<footnote><p>Ядро 
     загрузится, но ему не удастся смонтировать корневую файловую систему и 
     процесс прервётся с ошибкой <em>waiting for root filesystem</em>, а 
     затем <em>unable to mount /dev/hdX ..not found</em>. Чтобы решить эту 
     проблему вы можете воспользоваться оболочкой из <prgn>initramfs</prgn> 
     после того, как узнаете новые имена, назначенные устройствам по 
     сообщениям загрузки ядра или посмотрев содержание 
     <file>/dev/disk/</file>.</p></footnote>.
   </p>
    ]]><![ %ia64 [

   <p>
     Системы HP Itanium, имеющие старую микропрограмму, несовместимы с ядром 
     2.6 из &releasename;. Это означает, что перед обновлением ядра вы 
     должны установить самую новую версию микропрограммы. Это рекомендуется 
     сделать перед обновлением системы так как, если у вас уже работает ядро 
     2.6, то при обновлении остальной системы автоматически будет получена 
     последняя версия ядра (смотрите <ref id="upgrading_other">). В 
     результате получится незагружаемая система.
   </p>
    ]]>

   <p>
     После установки ядра 2.6, но перед его первой загрузкой убедитесь, что 
     в случае неудачи у вас есть метод восстановления. Во-первых, проверьте, 
     что в настройках системного загрузчика есть пункты и для нового, и для 
     старого работающего ядра 2.4. Приготовьте "спасательную" дискету или 
     компакт-диск на тот случай, если вдруг не удастся загрузить старое ядро 
     при помощи загрузчика.
   </p>
    <![ %not-s390 [

   <sect1 id="2.6-keyboard">
    <heading>
      Настройка клавиатуры
    </heading>
    <p>
      Одно из самых значительных изменений в серии ядер 2.6 это коренная 
      переработка интерфейсов устройств ввода. Теперь для ядра все 
      клавиатуры выглядят как стандартная клавиатура PC. Другими словами, 
      если у вас клавиатура другого типа (например, USB-MAC или производства 
      Sun), то после загрузки ядра 2.6 она, скорее всего, откажется 
      работать.
    </p>
    <p>
      Если у вас есть возможность зайти на ваш компьютер по SSH, вы сможете 
      исправить ситуацию, запустив <tt>dpkg-reconfigure console-data</tt> и 
      выбрав клавиатуру "pc" из полного списка клавиатур.
    </p>
    <p>
      Если эта проблема проявляется при работе с клавиатурой консоли, то, 
      скорее всего, также придётся изменить настройки клавиатуры и для X 
      Window System. Это можно сделать, либо запуском <tt>dpkg-reconfigure 
      xserver-xorg</tt>, либо непосредственно исправив файл 
      <file>/etc/X11/xorg.conf</file> вручную. Не забудьте прочесть 
      документацию, о которой упомянуто в <ref id="nownownow">.
    </p>
     <![ %i386 [

    <p>
      На архитектуре &arch-title; появление этой проблемы маловероятно, так 
      как все клавиатуры PS/2 и большая часть клавиатур USB и раньше 
      опознавались как "стандартная клавиатура PC".
    </p>
     ]]><![ %not-i386 [

    <p>
      Если ваша клавиатура подключена по USB, то она может быть настроена 
      либо как "стандартная PC", либо как "клавиатура USB-MAC". В первом 
      случае проблема вас не затронет.
    </p>
     ]]>

   </sect1>
   <sect1 id="2.6-mouse">
    <heading>
      Настройка мыши
    </heading>
    <p>
      Из-за тех же изменений в работе устройств ввода, возможно, придётся 
      перенастроить X Window System и пакет <package>gpm</package>. Если 
      после перехода на ядро серии 2.6 ваша мышь перестала работать, то это, 
      скорее всего, потому, что имя файла-устройства мыши изменилось. Если 
      поддержка мыши была реализована в виде модуля - то имя этого модуля 
      тоже могло измениться.
    </p>
     <![ %sparc [

    <p>
      Если сейчас ваша X Window System настроена на использование 
      <file>/dev/sunmouse</file>, то после установки нового ядра имя 
      файла-устройства надо будет изменить на <file>/dev/psaux</file>.
    </p>
     ]]>

   </sect1>
   <sect1 id="2.6-sound">
    <heading>
      Настройка звука
    </heading>
    <p>
      В ядрах серии 2.6 драйверы звуковых устройств ALSA предпочтительнее 
      драйверов OSS. Драйверы ALSA звуковых устройств поставляются по 
      умолчанию в виде модулей. Чтобы звук заработал, нужно загрузить 
      подходящие модули ALSA. Обычно это происходит автоматически, если у 
      вас установлен пакет <package>alsa-base</package>, 
      <package>hotplug</package>, или <package>discover</package>. Пакет 
      <package>alsa-base</package> также отключит автоматическую загрузку 
      OSS модулей (через blacklist) в пакетах <package>hotplug</package> и 
      <package>discover</package>. Если в файл <file>/etc/modules</file> у 
      вас включены модули OSS, то нужно их удалить.
    </p>
   </sect1>
    ]]>

  </sect>
   ]]>

  <sect id="xorg">
   <heading>
     Переход с XFree86 на X.Org
   </heading>
   <p>
     Переход на X.Org привносит некоторые структурные изменения. В случае, 
     если установлены все пакеты из Debian и также включённые в 
     &releasename;, то обновление должно пройти без проблем. Опыт, однако, 
     показывает, что нужно сделать несколько изменений, так как известно, 
     что без них могут возникнуть проблемы во время обновления.
   </p>
   <p>
     Наиболее важным изменением является то, что каталог 
     <file>/usr/X11R6/bin</file> больше не существует и остаётся только в 
     виде символической ссылки на <file>/usr/bin</file>. Это значит, что 
     этот каталог будет пуст в момент установки новых пакетов. Новые пакеты 
     конфликтуют с большинством пакетов, которые используют 
     <file>/usr/X11R6/bin</file>, но в некоторых случаях может понадобиться 
     ручное вмешательство. Не запускайте обновление в X-сессии.
   </p>
   <p>
     В случае, если обновление прервалось во время установки X.Org, 
     убедитесь, не осталось ли файлов в <file>/usr/X11R6/bin</file>. Вы 
     можете использовать <tt>dpkg -S</tt>, чтобы выяснить, какому пакету 
     Debian принадлежит оставшийся файл (если таковые имеются), и удалить 
     эти пакеты с помощью <tt>dpkg --remove</tt>. Запомните какие пакеты 
     удаляете, для того чтобы позже можно было установить пакеты, заменяющие 
     их. Перед тем как продолжить обновление, нужно удалить все файлы в 
     каталоге <file>/usr/X11R6/bin</file>.
   </p>
   <p>
     Подробности и другие проблемы можно найти на <url 
     id="http://wiki.debian.org/Xorg69To7">.
   </p>
   <p>
     Если у вас возникли проблемы с X.Org после перезапуска, стоит 
     попробовать также перезапустить сервер шрифтов <tt>/etc/init.d/xfs 
     restart</tt>. Это случается из-за того, что в файле 
     <file>/etc/X11/fs/xfs.options</file> содержится строка 
     no-restart-on-upgrade, а пути к шрифтам изменились.
   </p>
  </sect>
  <sect id="xorg-8bit">
   <heading>
     Во многих приложениях нет поддержки 8-битного отображения цветов
   </heading>
   <p>
     После обновления X.Org и библиотек, X-терминалы, поддерживающие только 
     8-ный цвет, работать не будут. Это происходит из-за векторной 
     графической библиотеки Cairo 2D (<package>libcairo2</package>), которая 
     не поддерживает 8-ный псевдо-цвет. Эта библиотека используется рабочими 
     столами GNOME и Xfce, а также многими приложениями для рабочих столов, 
     собранных с инструментарием Gtk2+, например <package>abiword</package>.
   </p>
   <p>
     Известно, что такое происходит с некоторыми машинами Sun и 
     X-терминаласи Tektronix, NCD, IBM и SGI, а также некоторыми другими 
     удалёнными оконными системами X. Если возможно, вам нужно настроить в 
     этих терминалах использование 16-ного цвета.
   </p>
   <p>
     Подробности доступны в сообщениях об ошибках Freedesktop <url 
     id="https://bugs.freedesktop.org/show_bug.cgi?id=4945" name="bug 
     #4945">.
   </p>
  </sect>
  <sect id="exim">
   <heading>
     Переход с exim на exim4
   </heading>
   <p>
     Одним из устаревших пакетов к выпуску &releasename; стал агент 
     пересылки почты (MTA) <package>exim</package>, который был заменён 
     полностью новым пакетом <package>exim4</package>.
   </p>
   <p>
     Программа <prgn>exim</prgn> (версии 3.xx) не поддерживалась 
     разработчиком несколько лет, и поэтому в Debian также была прекращена 
     поддержка этой версии. Если вы всё ещё используете <prgn>exim</prgn> 
     3.xx, обновите установленный <package>exim</package> до 
     <package>exim4</package> вручную. Так как <package>exim4</package> уже 
     был в &oldreleasename;, вы можете выполнить обновление в системе 
     &oldreleasename; перед тем как обновляться до &releasename;, или после 
     обновления до &releasename;, как хотите. Помните, что старый пакет 
     <package>exim</package> обновлён не будет и для него не будет 
     обеспечиваться поддержка безопасности после того, как поддержка 
     &oldreleasename; будет прекращена.
   </p>
   <p>
     Заметим, что в зависимости от вашей настройки 
     <package>debconf</package>, вам могут быть не заданы вопросы во время 
     установки <package>exim4</package>. Если вопросы не задавались, по 
     умолчанию система будет настроена на 'локальную доставку'. Для 
     перенастройки используйте команду <tt>dpkg-reconfigure 
     exim4-config</tt>.
   </p>
   <p>
     Пакеты <package>exim4</package> в Debian очень хорошо 
     документированы. Домашняя страница пакетов в Debian Wiki <url 
     id="http://wiki.debian.org/PkgExim4">, файл README можно найти на 
     странице <url 
     id="http://pkg-exim4.alioth.debian.org/README/README.Debian.html">, а 
     также внутри пакетов.
   </p>
   <p>
     В файле README есть глава Packaging, в которой описаны различия 
     пакетов, которые мы предлагаем, также есть глава об обновлении с 
     <prgn>Exim</prgn> 3, которая поможет вам выполнить переход.
   </p>
  </sect>
  <sect id="apache2">
   <heading>
     Обновление apache2
   </heading>
   <p>
     Apache был обновлён до новой версии 2.2. Хотя это не должно ничего 
     сломать в большинстве случаев, есть несколько возможных проблем, с 
     которыми лучше ознакомиться.
   </p>
   <p>
     На странице <url id="http://httpd.apache.org/docs/2.2/upgrading.html"> 
     описаны изменения, сделанные разработчиком. Прочитайте эту страницу и 
     особенно обратите внимание на:
    <list>
     <item>
      <p>
        нужно перекомпилировать все модули
      </p>
     </item>
     <item>
      <p>
        были пересортированы и переименованы модули авторизации
      </p>
     </item>
     <item>
      <p>
        были переименованы некоторые параметры конфигурации
      </p>
     </item>
    </list>
   </p>
   <p>
     Из изменений сделанных Debian следует отметить, что строка SSL больше 
     не определена, так как ssl теперь поддерживается в пакете по умолчанию.
   </p>
   <p>
     Если вы используете экспериментальный ITK MPM (из пакета 
     <package>apache2-mpm-itk</package>), то по умолчанию модуль cgi не 
     будет включён по умолчанию. Чтобы его правильно включить, вам нужно 
     вручную выключить <tt>mod_cgid</tt> и включить <tt>mod_cgi</tt>:
    <example>
# cd /etc/apache2/mods-enabled
# rm cgid.conf cgid.load
# ln -s ../mods-available/cgi.load .
# /etc/init.d/apache2 force-reload
        </example>
   </p>
  </sect>
  <sect id="zope">
   <heading>
     Обновление Zope и Plone
   </heading>
   <p>
     Был обновлён Zope и все связанные с ним пакеты. Также многие продукты 
     были удалены (из-за устаревания или из-за несовместимости с новыми 
     версиями Zope, CMF или Plone).
   </p>
   <p>
     К сожалению, нет лёгкого и гарантирующего способа обновления сложного 
     сервера <prgn>zope</prgn> или <prgn>plone</prgn>. Хотя и Plone включает 
     инструмент перехода, опыт показал, что автоматическая миграция может 
     легко завершится неудачно.
   </p>
   <p>
     По этой причине, пользователям рекомендуется устанавливать свои системы 
     так, чтобы они могли продолжать работать со старой установкой 
     &oldreleasename; Zope/Plone одновременно с новыми версиями 
     &releasename; на время тестирования результата миграции.
   </p>
   <p>
     Самый лёгкий и безопасный способ сделать это &mdash; скопировать свою 
     систему &oldreleasename; на другой жёсткий диск или раздел, а затем 
     обновить только одну из двух копий. После этого вы можете использовать 
     <prgn>chroot</prgn> для запуска версии из &oldreleasename; параллельно 
     с версией из &releasename;.
   </p>
   <p>
     Нельзя установить старую и новую версию Zope/Plone вместе на системе 
     &releasename;, в частности, из-за того, что старые пакеты зависят от 
     <package>python2.3</package>, который не может быть установлен вместе с 
     <package>python2.4</package>.
   </p>
  </sect>
  <sect id="tar">
   <heading>
     Раскрытие шаблонов (подстановка) в GNU tar
   </heading>
   <p>
     В предыдущих версиях GNU <prgn>tar</prgn> предполагалось использование 
     подстановки в стиле оболочек командной строки при извлечении файлов из 
     архива. Например, по команде:
    <example>
tar xf foo.tar '*.c'
        </example>
     извлекутся все файлы, чьи имена заканчиваются на '.c'. Такое поведение 
     не было описано и не совместимо с традиционными реализациями 
     <prgn>tar</prgn>. Поэтому, начиная с версии 1.15.91, GNU 
     <prgn>tar</prgn> больше не использует подстановку по 
     умолчанию. Например, вызов предыдущей команды будет рассмотрен как 
     запрос на извлечение из архива файла с именем '*.c'.
   </p>
   <p>
     Подробней смотрите в <file>/usr/share/doc/tar/NEWS.gz</file>.
   </p>
  </sect>
  <sect id="nis">
   <heading>
     NIS и Network Manager
   </heading>
   <p>
     Версия <prgn>ypbind</prgn>, включённая в <package>nis</package> для 
     &releasename;, содержит поддержку Network Manager. Эта поддержка 
     заставляет <prgn>ypbind</prgn> выключать функциональность клиента NIS, 
     если Network Manager сообщает, что компьютер отключён от сети. Когда 
     Network Manager не используется, он сообщает, что компьютер отключён, 
     поэтому пользователи NIS с системным клиентом NIS должны проверить, что 
     поддержка Network Manager выключена на этих системах.
   </p>
   <p>
     Для этого можно удалить пакет <package>network-manager</package>, или 
     отредактировать <file>/etc/default/nis</file>, добавив 
     <tt>-no-dbus</tt> в <tt>YPBINDARGS</tt>.
   </p>
   <p>
     Использование <tt>-no-dbus</tt> добавляется по умолчанию при новой 
     установке Debian, но не при обновлении с предыдущих выпусков.
   </p>
  </sect>
  <sect id="php-globals">
   <heading>
     Запрещены небезопасные конфигурации php
   </heading>
   <p>
     Многие годы было известно, что включение настройки 
     <tt>register_globals</tt> в PHP ненадёжно и опасно, и в пакете она была 
     отключена по умолчанию. Теперь эту настройку вообще не рекомендуется 
     использовать на системах Debian, как слишком опасную. То же самое 
     касается недостатков для <tt>safe_mode</tt> и <tt>open_basedir</tt>, 
     которым также некоторое время не уделялось должного внимания.
   </p>
   <p>
     Начиная с этого выпуска, команда обеспечения безопасности в Debian не 
     предоставляет поддержку безопасности тем настройкам PHP, которые 
     заранее считаются небезопасными. Самое главное: проблемы, возникшие 
     из-за включённого <tt>register_globals</tt>, больше не рассматриваются.
   </p>
   <p>
     Если вы используете старые приложения, которым требуется 
     <tt>register_globals</tt>, включайте его только для соответствующего 
     пути, например, через конфигурационный файл Apache. Подробности описаны 
     в файле <file>README.Debian.security</file> из каталога с документацией 
     PHP (<file>/usr/share/doc/php4</file>, 
     <file>/usr/share/doc/php5</file>).
   </p>
  </sect>
  <sect id="mozilla-security">
   <heading>
     Безопасность в продуктах Mozilla
   </heading>
   <p>
     Программы Mozilla <package>firefox</package> и 
     <package>thunderbird</package> (версии без бренда в Debian называются 
     <package>iceweasel</package> и <package>icedove</package>, 
     соответственно), являются важными инструментами для многих 
     пользователей. К сожалению, политика безопасности разработчиков Mozilla 
     принуждает пользователей обновляться до новой версии, которую выпустил 
     разработчик, что противоречит политике Debian не делать больших 
     функциональных изменений при обновлениях безопасности. Мы не можем 
     ничего предсказать, но во время жизни &releasename; команда 
     безопасности Debian может подойти к такому моменту, когда поддержка 
     продуктов Mozilla станет невозможной, и ей придётся объявить о 
     прекращении обеспечения безопасности продуктов Mozilla. Вы должны 
     принять это во внимание при развёртывании Mozilla и рассмотреть 
     альтернативы, имеющиеся в Debian, если отсутствие поддержки в области 
     безопасности создаст проблему для вас.
   </p>
  </sect>
  <sect id="kde-desktop-changes">
   <heading>
     Рабочий стол KDE
   </heading>
   <p>
     В версии KDE, доступной в &releasename;, была изменена обработка 
     носителей: вместо <file>device:/</file> используется 
     <file>media:/</file>. В некоторых пользовательских конфигурационных 
     файлах могут храниться ссылки <file>device:/</file>, которые нужно 
     преобразовать. Особенно это видно по файлу 
     <file>~/.kde/share/apps/konqsidebartng/virtual_folders/services</file>, 
     который содержит такую ссылку и может быть безопасно удалён, так как не 
     создаётся при настройке у нового пользователя.
   </p>
   <p>
     Многое изменилось в окружении рабочего стола KDE в версии из 
     &releasename; по сравнению с версией из &oldreleasename;. Более 
     подробную информацию вы можете найти в <url 
     id="http://www.kde.org/announcements/announce-3.5.php" name="информации 
     о выпуске KDE 3.5">.
   </p>
  </sect>
  <sect id="gnome-desktop-changes">
   <heading>
     Поддержка и изменения рабочего стола GNOME
   </heading>
   <p>
     Если в &oldreleasename; вы использовали рабочий стол GNOME, то вы не 
     получите некоторых новых изменений, предоставленных конфигурацией по 
     умолчанию в Debian &releasename;. В некоторых крайне редких случаях 
     рабочий стол GNOME может неправильно обработать ваши старые настройки и 
     может неправильно функционировать.
   </p>
   <p>
     Если вам не очень жалко своих настроек рабочего стола GNOME, то может 
     быть лучше переименовать домашний пользовательский каталог 
     <file>.gconf</file> (например в <file>.gconf.old</file>) для того, 
     чтобы он пересоздался с настройками по умолчанию для &releasename; при 
     запуске новой сессии.
   </p>
   <p>
     В выпуске &releasename; Debian больше нет пакетов устаревшей версии 1 
     выпуска GNOME, хотя некоторые пакеты остались, чтобы обеспечить 
     поддержку другим пакетам Debian, которые ещё не были адаптированы к 
     версии GNOME 2. Пакеты для GTK1.2 полностью поддерживаются.
   </p>
   <p>
     Многое изменилось в окружении рабочего стола GNOME в версии из 
     &releasename; по сравнению с версией из &oldreleasename;. Более 
     подробную информацию вы можете найти в <url 
     id="http://www.gnome.org/start/2.14/notes/en/" name="информации о 
     выпуске GNOME 2.14">.
   </p>
  </sect>
  <sect id="default-editor">
   <heading>
     Редактор по умолчанию
   </heading>
   <p>
     Если в качестве редактора по умолчанию использовался <prgn>vim</prgn>, 
     то при обновлении он может быть изменён на <prgn>nano</prgn>.
   </p>
   <p>
     Если администраторы хотят изменить редактор по умолчанию для всех 
     пользователей, то для этого нужно использовать команду обновления 
     альтернатив системы:
    <example>
# update-alternatives --config editor
          </example>
   </p>
   <p>
     Пользователи могут изменить редактор по умолчанию определив переменную 
     окружения <em>EDITOR</em>, вставив следующие строки в свои файлы 
     профилей:
    <example>
EDITOR=vi
export EDITOR
alias editor=$EDITOR
          </example>
   </p>
  </sect>
  <sect id="motd">
   <heading>
     Сообщение дня
   </heading>
   <p>
     Файл <file>/etc/motd</file> теперь является символической ссылкой на 
     <file>/var/run/motd</file>, который создаётся с помощью 
     <prgn>/etc/init.d/bootmisc.sh</prgn> из шаблона, 
     <prgn>/etc/motd.tail</prgn>, при каждой перезагрузке. Это означает, что 
     изменения, сделанные в <file>/etc/motd</file> будут потеряны. Изменения 
     в файле <file>/etc/motd.tail</file> не применяются автоматически к 
     <file>/etc/motd</file>, это происходит только при перезагрузке.
   </p>
   <p>
     Также, переменная EDITMOTD в файле <file>/etc/default/rcS</file> больше 
     не работает. Если вы хотите выключить обновление motd или готовить 
     сообщение дня самостоятельно, то просто измените символическую ссылку 
     <file>/etc/motd</file> на другой файл вместо 
     <file>/etc/motd.static</file> и изменяйте его как хотите.
   </p>
  </sect>
  <sect id="no-unicode">
   <heading>
     Нет поддержки unicode в emacs21* по умолчанию
   </heading>
   <p>
     Emacs21 и emacs21-nox не настроены по умолчанию на поддержку 
     использования Unicode. Подробней об этом и как это обойти, смотрите 
     <url id="http://bugs.debian.org/419490" name="ошибку #419490">.
   </p>
  </sect>
 </chapt>
 <chapt id="moreinfo">
  <heading>
    Дополнительная информация о &debian;
  </heading>
  <sect id="morereading">
   <heading>
     Что ещё можно прочитать
   </heading>
   <p>
     Помимо этой информации о выпуске и руководства по установке, существует 
     документация по &debian;, разрабатываемая проектом документации Debian 
     (DDP), целью которого является создание высококачественной документации 
     для пользователей и разработчиков Debian. В состав этой документации 
     входят руководство по Debian, руководство нового сопровождающего 
     Debian, FAQ по Debian и многое другое. Полную информацию о доступных 
     документах можно посмотреть на <url id="&url-ddp;" name=" веб-сайте 
     DDP">.
   </p>
   <p>
     Документация по конкретным пакетам устанавливается в каталог 
     <file>/usr/share/doc/<var>пакет</var></file>. Там может находиться 
     информация об авторских правах, специфичная для Debian информация и 
     документация от авторов исходной программы.
   </p>
  </sect>
  <sect id="gethelp">
   <heading>
     Если нужна помощь
   </heading>
   <p>
     Пользователи Debian могут воспользоваться помощью, советами и 
     поддержкой из разных источников, но к ним следует прибегать, только не 
     удалось найти ответа на вопрос в документации. Этот раздел содержит 
     краткое описание дополнительных источников помощи для новых 
     пользователей.
   </p>
   <sect1 id="lists">
    <heading>
      Списки рассылки
    </heading>
    <p>
      Основной интерес для пользователей Debian представляют англоязычный 
      список рассылки debian-user и списки debian-user-<var>язык</var> или 
      debian-<var>язык</var> для других языков. Для русского языка это 
      список debian-russian. Информацию о списках рассылки и о том, как на 
      них подписаться смотрите по адресу <url 
      id="&url-debian-list-archives;">. Пожалуйста, перед тем, как отправить 
      вопрос в список рассылки, поищите ответ на него в архивах. Просим 
      также придерживаться общепринятых норм почтового этикета.
    </p>
   </sect1>
   <sect1 id="irc">
    <heading>
      IRC
    </heading>
    <p>
      Для поддержки пользователей Debian есть IRC-канал, расположенный в 
      сети OFTC IRC. Чтобы войти на канал, соединитесь с сервером 
      &debian-irc-server; с помощью своего любимого IRC-клиента и 
      присоединитесь к каналу #debian. Для русскоязычных пользователей 
      существует канал #debian-russian в той же сети.
    </p>
    <p>
      Просим вас следовать правилам поведения на канале и уважать других 
      пользователей. Правила поведения на канале описаны в <url 
      id="http://wiki.debian.org/DebianIRC" name="вики Debian">.
    </p>
    <p>
      Более подробную информацию об OFTC можно получить на <url 
      id="&url-irc-host;" name="её веб-сайте">.
    </p>
   </sect1>
  </sect>
  <sect id="bugs">
   <heading>
     Как сообщить об ошибке
   </heading>
   <p>
     Мы приложили немало усилий, чтобы сделать Debian GNU/Linux операционной 
     системой высокого качества, однако это не означает, что поставляемые 
     нами пакеты не содержат абсолютно никаких ошибок. Мы предоставляем 
     нашим пользователям полную информацию обо всех обнаруженных ошибках в 
     нашей системе отслеживания ошибок (Bug Tracking System, BTS), 
     расположенной по адресу <url id="&url-bts;" 
     name="bugs.debian.org">. Такой подход согласуется с концепцией открытой 
     разработки Debian.
   </p>
   <p>
     Если вы обнаружите ошибку в дистрибутиве или каком-то из его пакетов, 
     пожалуйста, сообщите о ней, чтобы в следующем выпуске она была 
     исправлена. Чтобы сообщить об ошибке, требуется работающий адрес 
     электронной почты. Это необходимо для того, чтобы мы могли отслеживать 
     ошибки, а разработчики связываться с отправителями отчётов об ошибках, 
     если им понадобится дополнительная информация.
   </p>
   <p>
     Отправить сообщение об ошибке можно с помощью программы 
     <package>reportbug</package> или вручную по электронной почте. Более 
     подробную информацию о системе отслеживания ошибок и о том, как её 
     использовать, можно найти в каталоге <file>/usr/share/doc/debian</file> 
     после установки пакета <package>doc-debian</package> или на сайте <url 
     id="&url-bts;" name="системы отслеживания ошибок">.
   </p>
  </sect>
  <sect id="contributing">
   <heading>
     Как помочь Debian
   </heading>
   <p>
     Чтобы помочь Debian, не нужно быть большим специалистом. Помогая 
     пользователям в решении их проблем в <url 
     id="&url-debian-list-archives;" name="списках рассылки"> вы уже 
     помогаете сообществу. Выявление (или, что ещё лучше, решение) проблем, 
     связанных с разработкой дистрибутива, участие в работе <url 
     id="&url-debian-list-archives;" name="списков для разработчиков">, 
     также очень важно. Чтобы помочь поддерживать высокое качество Debian, 
     <url id="&url-bts;" name="отправляйте сообщения об ошибках"> и 
     помогайте разработчикам отслеживать и исправлять их. Если вы хорошо 
     владеете языком, то можете помочь в написании <url id="&url-ddp;" 
     name="документации"> или <url id="&url-debian-i18n;" name="переводе"> 
     существующей документации на родной язык.
   </p>
   <p>
     Если вы можете уделить Debian немного времени, можно взяться за 
     сопровождение какой-нибудь свободной программы в Debian. В частности, 
     полезной была бы поддержка пакетов, которые кто-то особенно хотел бы 
     видеть в Debian. Подробную информацию можно найти на странице <url 
     id="&url-wnpp;" name="требующих доработки и планируемых пакетов">. Если 
     вам интересна какая-то специфическая группа пользователей, возможно, вы 
     захотите участвовать в одном из дочерних проектов Debian. Среди них 
     перенос Debian на другие архитектуры, проекты <url id="&url-debian-jr;" 
     name="Debian для детей"> и <url id="&url-debian-med;" name="Debian в 
     медицине">.
   </p>
   <p>
     В любом случае, если вы участвуете в работе сообщества Свободного ПО в 
     качестве пользователя, программиста, писателя или переводчика, вы уже 
     помогаете Свободному программному обеспечению. Такое участие приносит 
     удовольствие и радость, даёт возможность познакомиться с новыми людьми.
   </p>
  </sect>
 </chapt>
 <appendix id="old-stuff">
  <heading>
    Управление системой &oldreleasename;
  </heading>
  <p>
    В этом приложении содержится информация о том, как установить или 
    обновить пакеты &oldreleasename; перед обновлением до &releasename;. В 
    некоторых случаях это может понадобиться.
  </p>
  <sect id="old-upgrade">
   <heading>
     Обновление системы &oldreleasename;
   </heading>
   <p>
     В основном это обновление ничем не отличается от всех предыдущих 
     обновлений &oldreleasename;, которые вы делали. Единственное отличие 
     состоит в том, что сначала надо убедиться, что ваши списки пакетов всё 
     ещё содержат пакеты &oldreleasename;, как описано в разделе <ref 
     id="old-sources">.
   </p>
   <p>
     Если вы обновляете систему с сервера-зеркала Debian, то автоматически 
     будет выполнено обновление до последнего выпуска &oldreleasename;.
   </p>
  </sect>
  <sect id="old-sources">
   <heading>
     Проверка списка источников APT
   </heading>
   <p>
     Если одна или несколько записей в вашем 
     <file>/etc/apt/sources.list</file> ссылаются на стабильный дистрибутив 
     ('stable'), то вы уже "используете" &releasename;. Если вы уже 
     запустили <tt>apt-get update</tt>, то ещё не поздно всё отменить, 
     просто выполнив инструкцию, приведённую ниже.
   </p>
   <p>
     Если вы успели установить пакеты из &releasename;, то особого смысла в 
     установке пакетов из &oldreleasename; уже нет. В этом случае вам 
     следует решить &mdash; довести до конца обновление или нет. Вернуться к 
     использованию старых версий пакетов возможно, но эта процедура выходит 
     за рамки данного документа.
   </p>
   <p>
     Откройте файл <file>/etc/apt/sources.list</file> с помощью любого 
     текстового редактора (потребуются привилегии суперпользователя). Во 
     всех строках, начинающихся с <tt>deb http:</tt> или с <tt>deb ftp:</tt> 
     замените "<tt>stable</tt>" на "<tt>&oldreleasename;</tt>".
   </p>
   <p>
     Если вы нашли строки, начинающиеся с <tt>deb file:</tt>, то вам 
     придётся самим проверить, какие пакеты хранятся в указанном каталоге 
     &mdash; &oldreleasename; или &releasename;.
   </p>
   <p>
     <strong>Внимание!</strong> Не исправляйте строки, начинающиеся с 
     <tt>deb cdrom:</tt>!. Если вы исправите такую строку, то вам придётся 
     снова запускать <prgn>apt-cdrom</prgn>. Не беспокойтесь, если источник 
     "cdrom" ссылается на нестабильный ("<tt>unstable</tt>") 
     дистрибутив. Как это ни странно, так и должно быть.
   </p>
   <p>
     Если вы внесли какие-нибудь изменения, сохраните файл и выполните 
     команду
    <example>
# apt-get update
          </example>
     для обновления списка пакетов.
   </p>
  </sect>
 </appendix>
</book>
</debiandoc>
