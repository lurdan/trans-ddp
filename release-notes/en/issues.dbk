<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
  "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % shareddata   SYSTEM "../release-notes.ent" > %shareddata;
]>

<chapter id="ch-information" lang="en">
<title>Issues to be aware of for &releasename;</title>
<programlisting condition="fixme">
TODO: XEN support in lenny
</programlisting>

<section id="problems">
<title>Potential problems</title>
<para> 
Sometimes, changes introduced in a new release have side-effects
we cannot reasonably avoid, or they expose
bugs somewhere else. This section documents issues we are aware of.  Please also
read the errata, the relevant packages' documentation, bug reports and other
information mentioned in <xref linkend="morereading"/>.
</para>
<section id="udev" condition="fixme">
<title>Problems with devices related to udev</title>
<para>
Although <systemitem role="package">udev</systemitem> has been tested
extensively, you may experience minor problems with some devices that will need
to be fixed.  The most common problems are changed permission and/or ownership
of a device.  In some cases a device may not be created by default (e.g.
<filename>/dev/video</filename> and <filename>/dev/radio</filename>).
</para>
<para>
<systemitem role="package">udev</systemitem> provides configuration mechanisms
to deal with these issues.  See <citerefentry>
<refentrytitle>udev</refentrytitle> <manvolnum>8</manvolnum> </citerefentry>
and <filename>/etc/udev</filename> for further information.
</para>
</section>

<section id="ide-pata-transition">
<title>Migration of disk drivers from IDE to PATA subsystem</title>
<para>
 The new Linux kernel version provides different drivers for some PATA (IDE)
 controllers.  The names of some hard disk, CD-ROM, and tape devices may
 change.
</para>
<para>
 It is now recommended to identify disk devices in configuration files by
 label or UUID (unique identifier) rather than by device name, which will
 work with both old and new kernel versions.  Upon upgrading to the
 &releasename; version of the Debian kernel packages, the <systemitem
 role="package">linux-base</systemitem> package will offer to do this
 conversion for you in the config files for most of the filesystem-related
 packages on the system, including the various bootloaders included in
 Debian.  If you choose not to update the system configuration
 automatically, or if you are not using the Debian kernel packages, you must
 update device IDs yourself before the next system reboot to ensure the
 system remains bootable.
</para>
</section>

<section id="mdadm-metadata">
<title>mdadm metadata format change requires recent Grub</title>
<para>
The following only applies to users who want to let the <systemitem
role="package">grub-pc</systemitem> bootloader load the kernel directly off
a <acronym>RAID</acronym> device created with <systemitem
role="package">mdadm</systemitem> 3.x and default values, or when the metadata
version is explicitly set using <literal>-e</literal>. Specifically, this
includes all arrays created during or after the installation of Debian
&releasename;. Arrays created with older mdadm versions, and
<acronym>RAID</acronym>s created with the command-line option <literal>-e
0.9</literal> are not affected.
</para>
<para>
Versions of <systemitem role="package">grub-pc</systemitem> older than
1.98+20100720-1 will not be able to boot directly off
a <acronym>RAID</acronym> with the 1.x metadata formats (the new default is
1.2). To ensure a bootable system, please make sure to use <systemitem
role="package">grub-pc</systemitem>
1.98+20100720-1 or later, which is provided by Debian &releasename;. An
unbootable system may be rescued with <ulink
url="http://www.supergrubdisk.org/super-grub2-disk/">Super Grub2 Disk</ulink>
or <ulink url="http://grml.org">grml</ulink>.
</para>
</section>

<section id="pam_userdb">
<title>pam_userdb.so breakage with newer libdb</title>
<para>
Some Berkeley Database version 7 files created with libdb3 cannot be read by
newer libdb versions (see bug <ulink url="&url-bts;521860">#521860</ulink>).
As a workaround, the files can be recreated with <command>db4.8_load</command>,
from the <systemitem role="package">db4.8-util</systemitem> package.
</para>
</section>

<section id="window-scaling" condition="fixme">
<title>Certain network sites cannot be reached by TCP</title>
<para>
Since 2.6.17, Linux aggressively uses TCP window scaling which is
specified in RFC 1323.  Some servers have a broken behavior, and
announce wrong window sizes for themselves.  For more details, please
see the bug
reports <ulink url="&url-bts;381262">#381262</ulink>, <ulink url="&url-bts;395066">#395066</ulink>, <ulink url="&url-bts;401435">#401435</ulink>.
</para>
<para>
There are usually two workarounds to these problems: either revert the maximum
allowed TCP window sizes to a smaller value (preferable) or turn off TCP window
scaling altogether (deprecated).  See the example commands in the <ulink
url="&url-installer-errata;">debian-installer
errata page</ulink>.
</para>
</section>

<section id="poweroff" condition="fixme">
<title>Automatic poweroff stops working</title>
<para>
On some older systems, <literal>shutdown -h</literal> may not power off the
system anymore (but just stop it).  This happens because
<acronym>APM</acronym> needs to be used
there.  Adding <literal>acpi=off apm=power_off</literal> to the kernel's
command line, e.g. in <systemitem role="package">grub</systemitem> or
<systemitem role="package">lilo</systemitem> configuration files should fix
this issue.  Please see bug <ulink
url="&url-bts;390547">#390547</ulink> for additional information.
</para>
</section>

<section id="hp-acpi" condition="fixme">
<title>ACPI support disabled for some HP laptop models in &releasename; kernel</title>
<programlisting condition="fixme">
TODO: This section can be removed, right?
</programlisting>
<para>
Certain models of HP laptops have an ACPI BIOS that is incompatible with the
Linux &kernelversion; kernel shipped in &releasename;, which would prevent the fans from spinning
up leading to unnecessary heat stress.  Also, fans might not work after the
system is suspended.  The kernel therefore disables ACPI support internally
when it detects certain ACPI BIOS versions.  Models known to be affected by
this change include the HP nx6125, nx6120, nx6325, nc6120 and nc6000 models.
</para>
<para>
Users who require ACPI support on these systems may install a Linux 2.6.19 or
later kernel.  Please see Debian bug <ulink
url="&url-bts;404143">#404143</ulink> and <ulink
url="&url-bts;400488">#400488</ulink>, and Linux Kernel's bugs
<ulink url="http://bugzilla.kernel.org/show_bug.cgi?id=5534">#5534</ulink> and
<ulink url="http://bugzilla.kernel.org/show_bug.cgi?id=7122">#7122</ulink> for
additional information.
</para>
</section>

<section id="asynchronous-network-start" condition="fixme">
<title>Asynchronous network initialization may cause unpredictable behavior</title>
<para>
On systems which use <systemitem role="package">udev</systemitem> to load
drivers for network interfaces, it is possible due to the asynchronous nature
of <systemitem role="package">udev</systemitem> that the network driver will
not be loaded before <command>/etc/init.d/networking</command> runs on system
boot.  Although including <literal>allow-hotplug</literal> to
<filename>/etc/network/interfaces</filename> (in addition to
<literal>auto</literal>) will ensure that the network interface is enabled once
it becomes available, there is no guarantee that this will finish before the
boot sequence begins to start network services, some of which may not behave
correctly in the absence of the network interface.
</para>
</section>

<section id="wpa" condition="fixme">
<title>Trouble when using <acronym>WPA</acronym> secured wireless networks</title>
<indexterm><primary>WPA</primary></indexterm>
<para>
In &oldreleasename;, the <systemitem role="package">wpasupplicant</systemitem> package was
set up as a system service, configured via
<filename>/etc/default/wpasupplicant</filename> and a user-provided
<filename>/etc/wpasupplicant.conf</filename>.
</para>
<para>
In &releasename;, <filename>/etc/init.d/wpasupplicant</filename> has been dropped and
the Debian package now integrates with
<filename>/etc/network/interfaces</filename>, similar to other packages such as
<systemitem role="package">wireless-tools</systemitem>.  This means <systemitem
role="package">wpasupplicant</systemitem> no longer provides a system service
directly.
</para>
<para>
For information on configuring wpasupplicant please refer to
<filename>/usr/share/doc/wpasupplicant/README.modes.gz</filename>, which gives
examples for <filename>/etc/network/interfaces</filename> files.  Updated
information about the usage of the <systemitem
role="package">wpasupplicant</systemitem> package in Debian can be found in the
<ulink url="&url-wiki;WPA">Debian Wiki</ulink>.
</para>
</section>

<section id="partitionenc" condition="fixme">
<title>Problems with non-ASCII characters in filenames</title>
<para>
Mounting vfat, ntfs or iso9660 file systems with files that include non-ASCII
characters in their filenames will give failures when one tries to use the
filenames unless mounting is done with the utf8 option.  An indication might be
the following failure: <quote>Invalid or incomplete multibyte or wide character</quote>.  A
possible solution is to use <literal>defaults,utf8</literal> as mount options
for vfat, ntfs and iso9660 file systems when they contain filenames with
non-ASCII characters.
</para>
<para>
Note that the Linux kernel does not support case-insensitive filename handling
for vfat when the <literal>utf8</literal> option is used.
</para>
</section>

<section id="no-sound" condition="fixme">
<title>Sound stops working</title>
<para>
In rare cases, sound might stop working after the upgrade.  If this happens,
go through the <acronym>ALSA</acronym> checklist:
<itemizedlist>
<listitem>
<para>
run <command>alsaconf</command> as <literal>root</literal> user,
</para>
</listitem>
<listitem>
<para>
add your user to the <literal>audio</literal> group,
</para>
</listitem>
<listitem>
<para>
make sure the sound channel levels are up and unmuted (using
<command>alsamixer</command>),
</para>
</listitem>
<listitem>
<para>
make sure <command>arts</command> and <command>esound</command> are not running,
</para>
</listitem>
<listitem>
<para>
make sure no <acronym>OSS</acronym> modules are loaded,
</para>
</listitem>
<listitem>
<para>
make sure the speakers are actually switched on, and
</para>
</listitem>
<listitem>
<para>
check whether the command
<programlisting>cat /dev/urandom &gt; /dev/audio</programlisting>
or the command <programlisting>speaker-test</programlisting>
works for <literal>root</literal>.
</para>
</listitem>
</itemizedlist>
</para>
</section>

<section arch="s390" condition="fixme">
  <title>Potential Filesystem Corruption on upgrade</title>
  <para>
    Starting with Kernel 2.6.25, Linux on the s390 architecture
    running under z/VM hypervisor uses a new CCW for DASD access that
    triggers an error in z/VM leading to I/O errors and finally file
    system inconsistency.
  </para>
  <para>
    This error could be confirmed running z/VM 5.3 with RSU
    (Recommended Service Update) 5304 and was fixed by IBM in RSU 5305
    (service level 802).
  </para>
  <para>
    In the <ulink
    url="http://www-01.ibm.com/support/docview.wss?uid=isg1VM64417">IBM
    problem report</ulink> a z/OS guest is mentioned, nevertheless
    this problem also affects linux guests.
  </para>
</section>

<section id="shell-diversions">
  <title>Potential issues with diversions of /bin/sh</title>
  <para>
    If you have previously added a local diversion for <literal>/bin/sh</literal>,
    or modified the <literal>/bin/sh</literal> symlink to point to somewhere
    other than <literal>/bin/bash</literal>, then you may encounter problems
    when upgrading the <systemitem role="package">dash</systemitem> or
    <systemitem role="package">bash</systemitem> packages.
    Note that this includes changes made by allowing other packages (for example
    <systemitem role="package">mksh</systemitem>) to become the default system
    shell by taking over <literal>/bin/sh</literal>.
  </para>
  <para>
    If you encounter any such issues, please remove the local diversion and
    ensure that the symlinks for both <literal>/bin/sh</literal> and its
    manual page point to the files provided by the <systemitem
    role="package">bash</systemitem> package and then
    <command>dpkg-reconfigure --force dash</command>.
  </para>
  <programlisting>
    dpkg-divert --remove /bin/sh
    dpkg-divert --remove /usr/share/man/man1/sh.1.gz
    
    ln -sf bash /bin/sh
    ln -sf bash.1.gz /usr/share/man/man1/sh.1.gz
  </programlisting>
</section>

<section>
  <!-- bug#568126 -->
  <title>Change in kernel policy regarding resource conflicts</title>
  <para>
    The default setting for the acpi_enforce_resources parameter in the Linux
    kernel has changed to be <quote><literal>strict</literal></quote> by
    default.  This can lead some legacy sensor drivers to be denied access to
    the sensors' hardware.  One workaround is to append
    <quote><literal>acpi_enforce_resources=lax</literal></quote> to the kernel
    command line.
  </para>
</section>

</section>

<section id="apache2" condition="fixme">
  <title>Upgrading apache2</title>
  <para>
    The apache2 default configuration has changed in some ways that
    may require manual changes to your configuration. The most
    important changes are:
  </para>

  <para>
    <literal>NameVirtualHost *</literal> has been changed to
    <literal>NameVirtualHost *:80</literal>. If you have added more
    name based virtual hosts, you need to change
    <literal>&lt;VirtualHost *&gt;</literal> to
    <literal>&lt;VirtualHost *:80&gt;</literal> for each of them.
  </para>

  <para>
    The Apache User and Group and the PidFile path are now configured
    in <filename>/etc/apache2/envvars</filename>. If you have changed
    these settings from their default values, you need to change that
    file.  This also means that starting apache2 with <command>apache2
    -k start</command> is no longer possible, you have to use
    <command>/etc/init.d/apache2</command> or
    <command>apache2ctl</command>.
  </para>

  <para>
    The suexec helper program needed for mod_suexec is now shipped in
    a separate package, <systemitem
    role="package">apache2-suexec</systemitem>, which is not installed
    by default.
  </para>

  <para>
    More module specific configuration has been moved from
    <filename>/etc/apache2/apache2.conf</filename> to
    <filename>/etc/apache2/mods-available/*.conf</filename>.
  </para>

  <para>
    For more detailed information, see
    <filename>/usr/share/doc/apache2.2-common/NEWS.Debian.gz</filename>
    and
    <filename>/usr/share/doc/apache2.2-common/README.Debian.gz</filename>.
  </para>
</section>

<section id="nis" condition="fixme">
<title><acronym>NIS</acronym> and Network Manager</title>
<indexterm><primary>NIS</primary></indexterm>
<indexterm><primary>Network Manager</primary></indexterm>
<para>
The version of <command>ypbind</command> included with <systemitem
role="package">nis</systemitem> for &releasename; contains support for Network Manager.
This support causes <command>ypbind</command> to disable <acronym>NIS</acronym> client
functionality when Network Manager reports that the computer is disconnected
from the network.  Since Network Manager will usually report that the computer
is disconnected when it is not in use, <acronym>NIS</acronym> users with <acronym>NIS</acronym> client systems should
ensure that Network Manager support is disabled on those systems.
</para>
<para>
This can be done by either uninstalling the <systemitem
role="package">network-manager</systemitem> package, or editing
<filename>/etc/default/nis</filename> to add <literal>-no-dbus</literal> to
<literal>YPBINDARGS</literal>.
</para>
<para>
The use of <literal>-no-dbus</literal> is the default for new installs of
Debian, but was not the default in previous releases.
</para>
</section>

<section id="ldap-gnutls">
  <title><acronym>LDAP</acronym> support</title>
  <indexterm><primary>LDAP</primary></indexterm>
  <para>
    A feature in the cryptography libraries used in the
    <acronym>LDAP</acronym> libraries causes programs that use
    <acronym>LDAP</acronym> and attempt to change their effective
    privileges to fail when connecting to an <acronym>LDAP</acronym>
    server using <acronym>TLS</acronym> or <acronym>SSL</acronym>.
    This can cause problems for suid programs on systems using
    <systemitem role="package">libnss-ldap</systemitem> like
    <command>sudo</command>, <command>su</command> or
    <command>schroot</command> and for suid programs that perform LDAP
    searches like <systemitem role ="package">sudo-ldap</systemitem>.
  </para>
  <para>
    It is recommended to replace the
    <systemitem role="package">libnss-ldap</systemitem> package with
    <systemitem role="package">libnss-ldapd</systemitem>, a newer library
    which uses separate daemon (<command>nslcd</command>) for all
    <acronym>LDAP</acronym> lookups. The replacement for
    <systemitem role="package">libpam-ldap</systemitem> is
    <systemitem role="package">libpam-ldapd</systemitem>.
  </para>
  <para>
    Note that <systemitem role="package">libnss-ldapd</systemitem> recommends
    the NSS caching daemon (<systemitem role="package">nscd</systemitem>)
    which you should evaluate for suitability in your environment before
    installing.
    As an alternative to <systemitem role="package">nscd</systemitem> you
    can consider <systemitem role="package">unscd</systemitem>.
  </para>
  <para>
    Further information is available in bugs
    <ulink url="&url-bts;566351">#566351</ulink> and
    <ulink url="&url-bts;545414">#545414</ulink>.
  </para>
</section>


<section id="sieve-port-number">
<title><literal>sieve</literal> service moving to its IANA-allocated port</title>
<para>
The IANA port allocated for ManageSieve is 4190/tcp, and the old port used
by <command>timsieved</command> and other managesieve software in many
distributions (2000/tcp) is allocated for Cisco SCCP usage, according to <ulink
url="http://www.iana.org/assignments/port-numbers">the IANA registry</ulink>.
</para>
<para>
Starting with the version 4.38 of the Debian <systemitem
role="package">netbase</systemitem> package, the <literal>sieve</literal>
service will be moved from port 2000 to port 4190 in the
<filename>/etc/services</filename> file.
</para>
<para>
Any installs which used the <literal>sieve</literal> service name instead of a
numeric port number will switch to the new port number as soon as the services
are restarted or reloaded, and in some cases, immediately after
<filename>/etc/services</filename> is updated.
</para>
<para>
This will affect Cyrus IMAP. This may also affect other sieve-enabled
software such as DoveCot.
</para>
<para>
In order to avoid downtime problems, mail cluster administrators using
Debian are urged to verify their Cyrus (and probably also DoveCot) installs,
and take measures to avoid services moving from port 2000/tcp to port
4190/tcp by surprise in either servers or clients.
</para>
<para>
It is worth noting that:
<itemizedlist>
<listitem>
<para>
<filename>/etc/services</filename> will only be automatically updated if you
never made any modifications to it.  Otherwise, you will be presented with a
prompt by dpkg asking you about the changes.
</para>
</listitem>
<listitem>
<para>
You can edit <filename>/etc/services</filename> and change the
<literal>sieve</literal> port back to 2000 if you want (this is not
recommended, though).
</para>
</listitem>
<listitem>
<para>
You can edit <filename>/etc/cyrus.conf</filename> and any other relevant
configuration files for your mail/webmail cluster (e.g. on the sieve web
frontends) ahead of time to force them all to a static port number.
</para>
</listitem>
<listitem>
<para>
You can configure cyrus master to listen on both ports (2000 and 4190)
at the same time, and thus avoid the problem entirely.  This also allows for
a much more smooth migration from port 2000 to port 4190.
</para>
</listitem>
</itemizedlist>
</para>
</section>


<section id="kde-desktop-changes">
<title>KDE desktop</title>
<para>
&Releasename; is the first Debian release to ship with the full support
for the next generation KDE that is based on Qt 4.
Most official KDE applications are at version 4.4.5 with the exception
of <systemitem role="package">kdepim</systemitem> that is at version 4.4.7. You
can read the <ulink url="http://www.kde.org/announcements/">announcements from
the KDE Project</ulink> to learn more about the changes.
</para>

<section id="kde-upgrading-from-kde3"> <!-- FIXME: title not yet final -->
<title>Upgrading from KDE 3</title>

<para>
KDE 3 Desktop Environment is no longer supported in Debian &release;.
It will be automatically replaced by the new 4.4 series on upgrade.
As this is a major change, users should take some precautions in order
to ensure as smooth of an upgrade process as possible.
</para>

<note>
<para>
As KDE metapackages have been renamed, <command>apt-get autoremove</command>
or <systemitem role="package">aptitude</systemitem>
might mistakenly want to remove some important KDE packages during/after
upgrade. Therefore, it is recommended to mark all KDE metapackages
as manually installed before proceeding.
The following command might prove to be useful for this purpose:
</para>
<screen># aptitude unmarkauto '~R^kde$' '~R^kde-full$'</screen>

</note>

<important>
<para>
It is discouraged to upgrade while there is an active KDE 3 session
on the system. Otherwise, the process might render the running session
dysfunctional with the possibility of data loss.
</para>
</important>

<para>
Upon the first login on the upgraded system, existing users will
be prompted with the Debian-KDE guided migration procedure called
<systemitem role="package">kaboom</systemitem>
which will assist in the process of migrating the user's personal data
and optionally backing up old KDE configuration.
For more information, visit
<ulink url="http://pkg-kde.alioth.debian.org/kaboom.html">the Kaboom homepage</ulink>.
</para>

<para>
While KDE 3 based desktop environment is no longer supported,
users can still install and use some individual KDE 3 applications
since the core libraries and binaries of KDE 3
(<systemitem role="package">kdelibs</systemitem>) and Qt 3 are
still available in Debian &release;. However, please note that these
applications might not be well integrated with the new environment.
What's more, neither KDE 3 nor Qt 3 will be supported in any form in the next
Debian release so if you are using them, you are strongly advised to port your
software to the new platform.
</para>
</section>

<section id="kde-metapackages">
<title>New KDE metapackages</title>
<para>
As noted earlier, Debian &release; introduces a new set
of KDE related metapackages:

<!-- Note to translators, do not translate '(KDE) Plasma Desktop' or 'KDE Plasma Netbook' -->
<itemizedlist>
<listitem>
<para>
You are strongly advised to install the
<systemitem role="package">kde-standard</systemitem>
package for normal desktop usage.
<systemitem role="package">kde-standard</systemitem>
will pull in the
<ulink url="http://www.kde.org/workspaces/plasmadesktop/">KDE Plasma Desktop</ulink>
by default, and a selected set of commonly used applications.
</para>
</listitem>
<listitem>
<para>
If you want a minimal desktop you can install the
<systemitem role="package">kde-plasma-desktop</systemitem>
package and manually pick the applications you need. This is a rough
equivalent of the <systemitem role="package">kde-minimal</systemitem>
package as shipped in Debian &oldrelease;.
</para>
</listitem>
<listitem>
<para>
For small form factor devices, there is an alternative environment
called
<ulink url="http://www.kde.org/workspaces/plasmanetbook/">KDE Plasma Netbook</ulink>
that can be installed with the
<systemitem role="package">kde-plasma-netbook</systemitem> package.
Plasma Netbook and Plasma Desktop can live in the same system
and the default can be configured in System Settings (replacement of the
former KControl).
</para>
</listitem>
<listitem>
<para>
If you want a full set of official KDE applications, you have the possibility
to install the <systemitem role="package">kde-full</systemitem> package.
It will install KDE Plasma Desktop by default.
</para>
</listitem>
</itemizedlist>
</para>
</section>

</section>

<section id="gnome-desktop-changes">
<title>GNOME desktop changes and support</title>
<para>
There have been many changes in the GNOME desktop environment from the version
shipped in &oldreleasename; to the version in &releasename;, you can find more information in the
<ulink url="http://library.gnome.org/misc/release-notes/2.30/">GNOME 2.30 Release
Notes</ulink>.  Specific issues are listed below.
</para>

<section>
<title>GDM 2.20 and 2.30</title>
<para>
The GNOME Display Manager (GDM), is kept at version 2.20 for systems upgraded
from &oldreleasename;.  This version will still be maintained for the squeeze
cycle but it is the last release to do so.  Newly installed systems will get
GDM 2.30 instead, provided by the <systemitem role="package">gdm3</systemitem>
package.  Because of incompatibilities between both versions, this upgrade is
not automatic, but it is recommended to install <systemitem
role="package">gdm3</systemitem> after the upgrade to &releasename;.  This
should be done from the console, or with only one open GNOME session.  Note
that settings from GDM 2.20 will <emphasis role="strong">not</emphasis> be
migrated.  For a standard desktop system, however, simply installing
<systemitem role="package">gdm3</systemitem> should be enough.
</para>
</section>

<section>
<title>Device and other administrative permissions</title>
<para>
Specific permissions on devices are
granted automatically to the user currently logged on physically to the
system: video and audio devices, network roaming, power management,
device mounting. The cdrom, floppy, audio, video, plugdev and powerdev
groups are no longer useful. See the <systemitem
role="package">consolekit</systemitem> documentation for more information.
</para>
<para>
Most graphical programs requiring root permissions now rely on <ulink
url="http://www.freedesktop.org/wiki/Software/PolicyKit">PolicyKit</ulink> to
do so, instead of <systemitem role="package">gksu</systemitem>. The recommended
way to give a user administrative rights is to add it to the
<literal>sudo</literal> group.
</para>
</section>

<section>
  <title>network-manager and ifupdown interaction</title>
  <para>
    Upon upgrading the <systemitem role="package">network-manager</systemitem>
    package, interfaces configured in
    <filename>/etc/network/interfaces</filename> to use
    <acronym>DHCP</acronym> with no other options will be disabled in that
    file, and handled by NetworkManager instead.  Therefore the
    <command>ifup</command> and <command>ifdown</command> commands will not
    work.  These interfaces can be managed using the NetworkManager frontends
    instead, see <ulink
    url="http://live.gnome.org/NetworkManager/SystemSettings">the
    NetworkManager documentation</ulink>.
  </para>
  <para>
    Conversely, any interfaces configured in
    <filename>/etc/network/interfaces</filename> with more options will be
    ignored by NetworkManager.  This applies in particular to wireless
    interfaces used during the installation of Debian (see bug <ulink
    url="&url-bts;606268">#606268</ulink>).
  </para>
</section>

</section>

<section id="graphics">
  <title>Graphics stack changes</title>
  <para>
    There have been a number of changes to the X stack in Debian &release;.
    This section lists the most important and user-visible.
  </para>

  <section>
    <title>Obsolete Xorg drivers</title>
    <para>
      The <literal>cyrix</literal>, <literal>imstt</literal>,
      <literal>sunbw2</literal> and <literal>vga</literal> Xorg video drivers
      are no longer provided.  Users should switch to a generic such as
      <literal>vesa</literal> or <literal>fbdev</literal> instead.
    </para>
    <para>
      The old <literal>via</literal> driver was no longer maintained, and has
      been replaced by the <literal>openchrome</literal> driver, which will be
      used automatically after the upgrade.
    </para>
    <para>
      The <literal>nv</literal> and <literal>radeonhd</literal> drivers are
      still present in this release, but are deprecated.  Users should
      consider the <literal>nouveau</literal> and <literal>radeon</literal>
      drivers instead, respectively.
    </para>
    <para>
      The <literal>calcomp</literal>, <literal>citron</literal>,
      <literal>digitaledge</literal>, <literal>dmc</literal>,
      <literal>dynapro</literal>, <literal>elo2300</literal>,
      <literal>fpit</literal>, <literal>hyperpen</literal>,
      <literal>jamstudio</literal>, <literal>magellan</literal>,
      <literal>microtouch</literal>, <literal>mutouch</literal>,
      <literal>palmax</literal>, <literal>spaceorb</literal>,
      <literal>summa</literal>, <literal>tek4957</literal> and
      <literal>ur98</literal> X input drivers have been discontinued and are
      not included in this release.  Users of these devices might want to
      switch to a suitable kernel driver and the evdev X driver.  For many
      serial devices, the <command>inputattach</command> utility allows
      attaching them to a Linux input device which can be recognized by the
      <literal>evdev</literal> X driver.
    </para>
  </section>

  <section>
    <title>Kernel mode setting</title>
    <para>
      Kernel drivers for Intel (starting from i830), ATI/AMD (from the
      original Radeon to the Radeon HD 5xxx <quote>Evergreen</quote> series)
      and for NVIDIA graphics chipsets now support native mode setting.
    </para>
    <para arch="i386;amd64">
      Support for old-style userspace mode setting is discontinued in the
      <literal>intel</literal> X driver, which requires a recent kernel.
      Users of custom kernels should make sure that their configuration
      includes <literal>CONFIG_DRM_I915_KMS=y</literal>.
    </para>
  </section>

  <section>
    <title>Input device hotplug</title>
    <para>
      The Xorg X server included in Debian &release; provides improved support
      for hotplugging of input devices (mice, keyboards, tablets, …).  The old
      <systemitem role="package">xserver-xorg-input-kbd</systemitem> and
      <systemitem role="package">xserver-xorg-input-mouse</systemitem>
      packages are replaced by <systemitem
      role="package">xserver-xorg-input-evdev</systemitem>, which requires a
      kernel with the <literal>CONFIG_INPUT_EVDEV</literal> option enabled.
      Additionally, some of the keycodes produced by this driver differ from
      those traditionally associated with the same keys.  Users of programs
      like <command>xmodmap</command> and <command>xbindkeys</command> will
      need to adjust their configurations for the new keycodes.
    </para>
  </section>

  <section>
    <title>X server <quote>zapping</quote></title>
    <para>
      Traditionally, the
      <keycombo><keycap>Ctrl</keycap><keycap>Alt</keycap><keycap>Backspace</keycap></keycombo>
      combination would kill the X server.  This combination is no longer
      active by default, but can be re-enabled by reconfiguring the
      <systemitem role="package">keyboard-configuration</systemitem> package
      (system-wide), or using your desktop environment's keyboard preferences
      application.
    </para>
  </section>

</section>

</chapter>
