
<sect><heading>Japanese language / used in Japan</heading>


<P>
This section is the text written by
Tomohiro KUBOTA <email>kubota@debian.or.jp</email>.
</P>

<P>
Japanese is the only official language used in Japan.
People in Okinawa islands and Ainu ethnic group in Hokkaido region
have each language, though they are used among few number
of people and they don't have own letters.
</P>

<P>
Japan is the only region where Japanese language is widely used.
</P>


<sect1><heading>Characters used in Japanese</heading>

<P>
There are three kinds of characters used in Japan,
Hiragana, Katakana, and Kanji.
Arabic numerical characters (same as European languages) are 
widely used in Japanese, though we have Kanji numerical characters.
Though Latin alphabets are not a part of Japanese characters,
they are widely used for proper nouns for companies and so on.
</P>

<P>
Hiragana and Katakana are phonogram derived from Kanji.
Hiragana and Katakana characters have one-to-one correspondence
each other like upper and lower case of Latin alphabets.
However, <tt>toupper()</tt> and <tt>tolower()</tt> should not 
convert Hiragana and Katakana each other.
Hiragana contains about 100 characters and of course Katakana does.
(FYI: about 50 regular characters, 5 characters with voiced 
consonant symbol, 5 characters with semi-voiced consonant symbol,
and 9 small characters.)
</P>

<P>
Kanji is ideogram imported from China roughly about 1 - 2 thousands
years ago.
Nobody knows the whole number of Kanji and almost all of adult Japanese
people know several thousands of Kanji characters.
Though the origin of Kanji is Chinese character, shapes are
changed from original ancient Chinese Kanji.
Almost all Kanji have several ways to read, according to the
word the Kanji is contained.
</P>


<sect1><heading>Character Sets</heading>

<P>
JIS (Japan Industrial Standards) is an organization responsible
for character sets and codesets used in Japan.
The major character sets in Japan are:
<list>
 <item>JIS X 0201 Roman characters (Almost same to ASCII but 0x5c 
       is Yen mark instead of backslash and 0x7e is upper bar instead of tilde)
 <item>JIS X 0201 Katakana (about 60 KATAKANA characters),
 <item>JIS X 0208 1st and 2nd levels (about 7000 characters including symbols,
       numeric characters, Latin, Cyrillic and Greek alphabets, 
       Japanese HIRAGANA, KATAKANA, and KANJI),
 <item>JIS X 0212 (about 6000 characters including KANJI, which are not 
       included in JIS X 0208), and
 <item>JIS X 0208 3rd and 4th levels (not released yet, now in discussion).
</list>
</P>

<P>
JIS X 0201 Roman is the Japanese version of ISO 646.
Though JIS X 0201 is included in SHIFT-JIS codeset (explained later) and
widely used for Windows/Macintosh (their standard
codesets includes this), usage of this is not encouraged in UNIX.
</P>

<P>
JIS X 0212 is not widely used, probably because it cannot be 
included in SHIFT-JIS, the standard codeset for Japanese version
of Windows and Macintosh.  And more, this character set may
be obsoleted in the near future because JIS X 0208 3rd and 4th 
level partially has the same characters to JIS X 0212.
However, all characters in JIS X 0212 is included in Unicode.
</P>

<P>
JIS X 0208 is the main standard for Japanese characters. 
Strictly speaking, there are two versions of 1978 and 1983.
Main differences between these two are related to simplification
of Kanji characters.  Almost softwares don't have to care about
the difference between these two.
JIS X 0208 are separated into two levels, 1st and 2nd.  
Old 8bit computers rarely implemented 2nd level.
</P>

<P>
Usage of numeric characters and Latin alphabets in JIS X 0208 is 
not encouraged because these characters are included in ASCII.
</P>

<P>
All of these character sets are included in ISO 2022 (except for
the 3rd and 4th level of JIS X 0208, of course.  However, this will
be easily included in ISO 2022 when it is released).
</P>

<P>
All of these character sets (except for the 3rd and 4th level of
JIS 0208) are included in UCS-2.  The 3rd and 4th level of JIS X
0208 will not be able to be included in UCS-2.
I don't know what will occur to Unicode if this new character set 
is released and JIS X 0212 is obsoleted.
</P>

<P>
There are no standard on correspondence between 
special characters contained in JIS X 0208 and Unicode.
</P>


<sect1><heading>Codesets</heading>

<P>
There are three popular codesets widely used in Japan.
<list>
 <item>ISO-2022-JP (aka JIS code or JUNET code)
    <list>
     <item>stateful
     <item>subset of 7bit version of ISO-2022, where ASCII, 
           JIS X 0201-1976 Roman, JIS X 0208-1978 (1st and 2nd level), 
           and JIS X 0208-1983 (1st and 2nd level) are supported.
     <item>7bit, which means the most significant bit (MSB) of each
           byte is zero.
     <item>used for e-mail and net-news and preferred for HTML.
     <item>same to the cord determined in RFC 1468.
    </list>
 <item>EUC-JP (Japanese version of Extended UNIX Code)
    <list>
     <item>stateless
     <item>an implementation of EUC where G0, G1, and G2 are
           ASCII, JIS X 0208 (1st and 2nd level), and JIS X 0201 Katakana,
           respectively.  G3 is sometimes designated to JIS X 0212.
     <item>8bit
     <item>preferred code for UNIX. For example, almost all Japanese 
           message catalogs for gettext is written in EUC-JP.
     <item>Japanese code is mapped in 0xa0 - 0xff.  This is important
           for programmer because one doesn't need to care there are
           fake '\' or '/' (which can be treated in a special way in
           various context) in the Japanese code.
    </list>
 <item>SHIFT-JIS (aka Microsoft Kanji Code)
    <list>
     <item>stateless
     <item>NOT subset of ISO-2022
     <item>8bit
     <item>JIS X 0201 Roman, JIS X 0201 Katakana, and JIS X 0208 1st and 2nd 
           levels can be expressed, but JIS X 0212 cannot.
     <item>The standard codeset for Windows/Macintosh.  This makes
           SHIFT-JIS the most popular code in Japan.  Though MS 
           is thinking about transition to UNICODE, it is suspicious
           that it can be done successfully.
    </list>
</list>
</P>

<P>
ISO-2022-JP is a subset of 7bit version of ISO 2022, where only G0 
is used and G0 is assumed to be invoked into GL.
</P>

<P>
A line (between 'newline' control code) is determined to start
from ASCII status and to end by ASCII status.
</P>

<P>
EUC-JP is a version of EUC, where 
G0 is ASCII, G1 is JIS X 0208, G2 is JIS X 0201 Katakana.
G3 is sometimes JIS X 0212.
</P>

<P>
UNICODE is not popular in Japan at all, probably because
transition from these codes into Unicode is a bit difficult.
However MS Windows uses Unicode in a limited field, for example,
internal code for file names.
</P>


<sect1><heading>How These Codesets Are Used --- Information for Programmers</heading>

<P>
Since EUC-JP is widely used for UNIX,
EUC-JP should be supported. Exceptions are shown below.
Of course direct implementation of knowledge on EUC-JP is not
encouraged.  If you can implement without the knowledge by use
of <tt>wchar_t</tt> and so on, you should do so.
<list>
 <item>the body of mail and news messages must be written in ISO-2022-JP.
 <item>De-facto standard of ICQ is SHIFT-JIS.
 <item>WWW browser must recognize all codesets.
 <item>Softwares which communicate with Windows/Macintosh should use
       SHIFT-JIS.
 <item>SHIFT-JIS is widely used for BBS.  (BBS is a service like Compuserve).
 <item>File names for Joliet-format CD-ROM used for Windows is written 
       in Unicode.
</list>
</P>

<P>
I don't know whether a transition into UTF-8 (or other Unicode-related
codesets) occurs or not.
</P>



<sect1><heading>Columns</heading>

<P>
In consoles which are able to display Japanese characters
(kon, kterm, krxvt), characters in JIS X 0201 occupy 1 column
and characters in JIS X 0208 and JIS X 0212 occupy 2 columns.
</P>



<sect1><heading>Writing Direction and Combined Characters</heading>

<P>
Japanese language can be written in vertical direction.  A line goes
downward and the row of lies goes from right to left.  This direction
is the traditional style.  For example, most Japanese books, magazines
and newspapers except for in the field of natural science are written
in vertical direction.  Thus a word processor is strongly recommended
to support this direction.
</P>

<P>
Japanese language can also written in the same direction to Latin
languages.  Japanese books and magazines on science and technology
are written in this direction.  It is enough for almost usual softwares
to support this direction only.
</P>

<P>
A few Japanese characters have to have different fonts for vertical
direction.  They are reasonable characters --- parentheses and 
'long syllable' symbol whose shape is like dash in English or
mathematical 'minus' sign.  Symbols equivalent to
period and comma also have different style for horizontal and vertical
direction.
</P>

<P>
In Japan, Arabic numerical characters are widely used, like European 
languages, though we have Kanji numerical characters.  Latin characters
can also appear in Japanese texts.  If a row of 1 - 3 (or 4) characters of 
Arabic and Latin appear in Japanese vertical text, these characters
can be crowded into one column.  If more characters appear (large numbers
or long words), the paper is rotated 90 degree in anticlockwise and
the characters are written in European way.  This is not so strong
custom.  Arabic and Latin characters can always be written in both
normal and rotated way in vertical text.
<footnote>
I HAVE TO SHOW EXAMPLE IN GRAPHICS.
</footnote>
</P>

<P>
Word processors should have a faculty to write text in vertical direction.
</P>

<P>
A version of Japanized TeX can use vertical direction.  This can also
treat a page containing both vertical and horizontal texts.
</P>


<sect1><heading>Layout of Characters</heading>

<P>
In Japanese language, words are not separated by space and
a line can be broken anywhere, with a few exceptions, unlike
European languages.  Thus hyphenation is not needed for Japanese.
</P>

<P>
Characters like open parentheses cannot come to the end
of a line. Characters like close parentheses and sorts of
sentence-separating marks such as period and comma cannot
come to the top of a line.  
</P>

<P>
In European languages, a break of line is equivalent to a space.
In Japanese language, a break of line should be neglected.
</P>




<sect1><heading>LANG variable</heading>

<P>
Different value of <tt>LANG</tt> used for different codesets.
</P>

<P>
Following values are used for EUC-JP.
<list>
  <item><tt>LANG=ja_JP.ujis</tt> (major for Linux)
  <item><tt>LANG=ja_JP.eucJP</tt> (major for *BSD)
  <item><tt>LANG=ja_JP</tt> (because EUC-JP is the de-facto standard for UNIX)
  <item><tt>LANG=ja</tt> (because EUC-JP is the de-facto standard for UNIX)
</list>
</P>

<P>
<tt>LANG=ja_JP.jis</tt> is used for ISO-2022-JP (aka JIS code or JUNET code).
</P>

<P>
<tt>LANG=ja_JP.sjis</tt> is used for SHIFT-JIS (aka Microsoft Kanji Code).
</P>



<sect1><heading>Input from Keyboard</heading>

<P>
Since Japanese characters cannot be inputed directly from a keyboard,
a software is needed to convert ASCII characters into Japanese.
Wnn and Canna are popular free software for Japanese language.
These adopt server/client model and implement their own protocols.
Kinput2 which connects these protocols and XIM is available on X Window
System.
</P>

<P>
Since almost Hiraganas and Katakanas represents a pair of a vowel 
and a consonant with one character, we can input one Hiragana or
one Katakana with two Latin alphabets.  A few Hiraganas and Katakanas
need one or three alphabets.
</P>

<P>
Kanji is obtained by converting from Hiragana. 
There are many Japanese words which are expressed by two or more Kanjis
and almost recent converting softwares can convert such words at a time.
(Old softwares can convert one Kanji at a time.)
Software with good grammar/context analyzer and large dictionary 
can convert longer phrases or even a whole sentence at a time.
However, we usually have to select one Kanji or word from
candidates the software shows, because Japanese language has
many homophones.  For example, 61 Kanjis whose readings are 'KAN'
and 6 words whose readings are 'KOUKOU' are registered in 
dictionary of <tt>canna</tt>.
(Today, 2 Oct 1999, I saw a TV advertisement film of Japanese word processor
which says the software can correctly convert an input into
'a cafe which opened today', not 'a cafe which rotated today'.
Though Japanese word 'KAITEN' means both 'open (a shop)' and 'rotate',
the software knows it is more usual for a cafe to open than to rotate.)
</P>

<P>
The conversion from Hiragana to Kanji needs a large dictionary which
contains the Kanji spelling and readings of Japanese major words and
conjugation or inflection.  Thus proprietary softwares tend to
efficiently convert.  They usually have dictionaries larger than 
few megabytes. Some of these recent proprietary softwares
even analyze the topic or meaning of the inputed Hiragana sentence 
and choose the most appropriate homophone, though they often choose 
wrong ones.
</P>

<P>
Nowadays several proprietary conversion softwares such as ATOK, WNN,
and VJE for Linux are sold in Japan.
</P>

<P>
Since it is complex and hard work to input Japanese characters,
we don't want to input Y (for YES) or N (for NO) in Japanese.
We prefer learning such basic English words to inputing Japanese
words by invoking conversion software, inputing Latin alphabetic
expression of Japanese, converting it into Hiragana, converting
it into Kanji, choosing the correct Kanji, determining the correct
Kanji, and ending the conversion software each time we need to
input yes or no or similar words.
</P>


<sect1><heading>More Detailed Discussions</heading>

<sect2><heading>Width of Characters</heading>

<P>
Different from European languages, Japanese characters should 
written in a fixed width.  Exceptions arises when two symbols 
such as parentheses, periods and commas continue.  Kerning
should be done for such cases if the software is a word processor.
A text editor need not.
</P>

<sect2><heading>9.2. Ruby</heading>

<P>
<strong>Ruby</strong> is a small (usually 1/2 in length and 1/4 in 
area or a bit smaller) 
characters written above (in horizontal direction) or at right side
(in vertical direction) of the main text.  This is usually used to show 
a reading of difficult Kanji.  
</P>

<P>
Japanized TeX can use ruby by using an extra macro.  Word processors should
have Ruby faculty.
</P>


<sect2><heading>Upper And Lower Cases</heading>

<P>
Japanese character does not have upper and lower case although
there two sets of phonograms, Hiragana and Katakana.
</P>

<P>
Thus tolower() and toupper() should not exchange Hiragana and Katakana.
</P>

<P>
Hiragana is used for usual text.  Katakana is used mainly for
express foreign or imported words, for example, KONPYU-TA
for computer, MAIKUROSOFUTO for Microsoft, and AINSYUTAIN for Einstein.
</P>


<sect2><heading>Sorting</heading>

<P>
Phonograms (Hiragana and Katakana) have sorting order.
The order is same to defined in JIS X 0208, with a few exceptions.
</P>

<P>
Ideograms (Kanji) sorting is difficult.  They should be sorted
by its reading but almost all kanji have a few readings according
to the context.  So if you want to sort Japanese text, you will need
a dictionary of whole Japanese Kanji words.  And more, a few
Japanese words written in Kanji have different readings with
exactly same Kanjis, this can occur especially for names of person.
So it is usual that addressbook databases have two 'name' columns,
one for Kanji expression and the other for Hiragana.
</P>

<P>
I know no softwares which can sort Japanese words in perfect way,
including free and proprietary softwares.
</P>


<sect2><heading>9.5. Ro-ma ji (Alphabetic expression of Japanese)</heading>

<P>
We have a phonetic alphabetic expression of Japanese, Ro-ma ji.
It has almost one-to-one correspondence to Japanese phonogram.
It can be used to display Japanese text on Linux console and
so on.  Since Japanese have many homophones this expression
can be crabbed.
</P>

<P>
There are several variants of Ro-ma ji.  
</P>

<P>
The first distinguishing point is on handling of long syllable.
For example, long syllable of 'E' is expressed in:
<list>
 <item>'E' with caret,
 <item>'E' with upper bar,
 <item>only 'E' in which long syllable mark is ignored,
 <item>'EE',
 <item>and so on.
</list>
</P>

<P>
The second distinguishing point is some special pairs 
of vowel and consonant.
For example, Hiragana character for combination of 'T' and 'I' is 
pronounced like 'CHI'.
<list>
 <item>TI or CHI, as described above,
 <item>TU or TSU,
 <item>SI or SHI,
 <item>HU or FU,
 <item>WO or O,
 <item>TYA or CHA, and
 <item>N or M.
</list>
</P>

