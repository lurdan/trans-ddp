<!doctype debiandoc system>

<debiandoc>

 <book>

  <titlepag>

   <title>Debian New Maintainers' Guide</title>

   <author>Josip Rodin <email/jrodin@jagor.srce.hr/
   </author>

   <author> 翻訳: 八田真行 <email/mhatta@debian.or.jp/
   </author>

   <version>version 0.99, 1999 12月 28日</version>

   <copyright>
   <copyrightsummary>Copyright &copy; 1998, 1999 Josip Rodin.</copyrightsummary>

   <p>この文書は GNU 一般公有使用許諾書 バージョン 2 以降が
   規定する条件の下で配布されます。
   
   <p>この文書は以下の二つの文書を参考として書かれました。

   <p>Debian パッケージの作り方(Debmake マニュアル)、
   Copyright &copy; 1997 Jaldhar Vyas <email/jaldhar@debian.org/

   <p>新米メンテナのための Debian パッケージング Howto、
   Copyright &copy; 1997 Will Lowe <email/lowe@debian.org/
  </copyright>

  </titlepag>

  <toc sect>

  <chapt id="start">まずは始めよう

  <p>この文書では、Debian GNU/Linux 用パッケージを作るには
  どうしたらよいか、一般的な Debian ユーザ(と開発者予備軍)を対象に
  解説しようと思います。
  小難しい専門用語はできるだけ避けて、実用的な例を多く用いて説明していく
  つもりです。ことわざにもあるように、<em>百聞は一見にしかず</em>
  ですからね！

  <p>Debian が Linux ディストリビューションの最高峰と呼ばれる
  までになった理由のひとつがそのパッケージ管理システムです。
  すでに膨大な数のソフトウェアが Debian 形式になっていますが、
  まだパッケージ化されていないソフトウェアをインストールしなければ
  ならないこともあるでしょう。
  あるいは、どうやったら自分でパッケージが作れるんだろう、とか
  それはとても難しいことなんじゃないか、などと考えたことがあるかも
  しれません。まあ、もしあなたが本当に駆け出しの Linux ユーザならば
  困難な仕事でしょうが、でもそうだったら今ごろこんな文書
  読んでませんて :-)

  パッケージ作成には、 Unix のプログラミングについて多少の知識が
  必要です。がしかし、神様みたいに精通している必要は全くありません。

  <p>この文書の最新版は常に以下の場所からネットワーク経由で入手できます。
  <url name="http://www.debian.org/doc/maint-guide" id="http://www.debian.org/doc/maint-guide">
  また、 「maint-guide」パッケージにも含まれています。

  <sect id="needprogs">開発に必要なプログラム

  <p>何かを始める前に、開発作業に必要となる以下に挙げるような
  パッケージがきちんとインストールされていることを
  まず確かめておかなければいけません。
  リストには「essential」または「required」なパッケージが
  含まれていないことに注意してください。
    - これらのパッケージは既にインストールされていることを前提に
  しています。

  <p>この文書は 2.1 「slink」ディストリビューションが Debian の
  公式安定版リリースで、2.2 「potato」が開発中だった期間に書かれました。
  そのため、ここで名を挙げたパッケージはほとんどが
  「potato」に収録されているものとなっています。

  <p>以下のパッケージは普通に Debian 2.1 をインストールしたならば
  すでに(それらが依存する他のパッケージといっしょに)システムに
  入っているはずです。
  しかし、念のために「dpkg -s &lt;パッケージ名&gt;」で確認して
  おきましょう。

  <list>
  <item><em>binutils</em> - これらのプログラムは、プログラムの
  「素」となるオブジェクトファイルをアセンブル、あるいは
  リンクするために使われます。
  (「info binutils」とすればマニュアルが読めます)

  <item><em>cpp</em> - C プリプロセッサ
  (詳しくは<manref name="cpp" section="1">を参照)

  <item><em>cpio</em> - これは tar や zip と同じアーカイバと呼ばれる種の
  プログラムです(詳しくは <manref name="cpio" section="1">を参照)。

  <item><em>dpkg-dev</em> - このパッケージには Debian ソースパッケージ
  を展開、構築、アップロードするのに必要なツール群が含まれています。
  (詳しくは <manref name="dpkg-source" section="1">を参照)。

  <item><em>file</em> - この便利なプログラムを使うとそのファイルがどういう形式
  のものか判定することができます(詳しくは<manref name="file" section="1">を
  参照)。

  <item><em>gcc</em> - GNU C コンパイラ。ほとんどの Linux プログラムは
  C 言語で書かれていますが、もしあなたのプログラムがその他の
  プログラミング言語、例えば C++、Fortran、Pascal などで書かれて
  いるならば、それぞれ g++、g77、gpc などをインストールしましょう
  (詳しくは <manref name="gcc" section="1">、
  <manref name="g++" section="1">、<manref name="g77" section="1">、
  <manref name="gpc" section="1">)を参照)。

  <item><em>libc6-dev</em> - gcc が、オブジェクトファイルを生成してリンク
  するのに必要な C ライブラリとヘッダファイルはこのパッケージに
  入っています。未だに libc5 の使用を推奨、あるいは現に使っている
  プログラムもありますが、ぜひ新バージョンの libc6 を
  使うようにしてください。(「info libc」でマニュアルが読めます)

  <item><em>make</em> - ふつう、プログラムはいくつかの手順を踏んで
  生成されます。同じコマンドを何度も何度も繰り返し入力する代わりに、
  make プログラムを使えば「Makefile」を書くことにより手続きを
  自動化することができます。
  また、ある種のプログラムは imake や xmkmf といった Makefile を
  一揃いのマクロ関数から生成するプログラムを使いますし、より新しい
  プログラムの多くは autoconf や automake といったプログラムを利用して
  configure スクリプトと Makefile をプログラムの生成に使っています
  ので、これらも必要になるかもしれません(詳しくは「info make」、
  <manref name="imake" section="1">、
  <manref name="xmkmf" section="1">、
  <manref name="autoconf" section="1">、
  <manref name="automake" section="1">を参照)

  <item><em>patch</em> - このとても有用なユーティリティは
  オリジナルとの差異が列挙されたファイル(diff プログラムによって生成)を
  読み込んでオリジナルのファイルに適用し、パッチ済バージョンを作成します。
  (詳しくは <manref name="patch" section="1"> を参照)。

  <item><em>perl5</em> - Perl は今日の Un*x システムにおいてもっとも
  使われているインタープリタ型スクリプト言語のひとつで、その強力さは
  しばしば「Unix のスイス軍用チェーンソー」と形容されるほどです
  (詳しくは <manref name="perl" section="1">を参照)
  </list>

  <p>以下はおそらくディストリビューションの「 devel 」セクションから
  自分でインストールする必要のあるものです。

  <list>
  <item><em>dh-make</em> と <em>debhelper</em> - dh-make はあとで説明する
  パッケージのひな型を用意するのに必要となります。dh_make は 
  ひな型を作る過程で debhelper ツールのいくつかを使います。これらを
  使わなくてもパッケージ作成は可能ですが、
  初めてパッケージを作る方には利用を<em>強く</em> お勧めします。
  パッケージを作るのも、以後パッケージを管理するのもずっと簡単になるからです。
  (詳しくは <manref name="dh_make" section="1">、
  <manref name="debhelper" section="1">、/usr/share/debhelper/README を参照)

  <item><em>devscripts</em> - このパッケージは
  メンテナにとって便利であると思われるいくつかの有用で優れたスクリプト
  を含んでいますが、これらもまたパッケージ作成に当たって必要というわけでは
  ありません(詳しくは /usr/share/doc/devscripts/README.gz 参照)

  <item><em>fakeroot</em> - このユーティリティを使うと、
  パッケージ作成の諸段階のいくつかにおいて必要となる root 権限を
  エミュレートすることができます(詳しくは <manref name="fakeroot" section="1">
  を参照)。

  <item><em>lintian</em> - これは Debian パッケージチェッカで、
  あなたが構築したパッケージを調べて、その中にありがちなミスが
  見つかったらそれを指摘し、その問題について説明してくれます
  (詳しくは <manref name="lintian" section="1">、
  /usr/share/doc/lintian/lintian.html/index.html を参照)。
  </list>

  <p>さて、以下の<em>とても重要</em>なパッケージは
  ディストリビューションの doc セクションに収録されています。

  <list>
  <item><em>debian-policy</em> - Debian ポリシーマニュアル。
  アーカイブの構造と内容、OS の設計に関する
  いくつかの問題、あるいは「ファイルシステム体系基準
  (Filesystem Hierarchy Standard)についてなどいろいろ載っていますが、
  今回重要になってくるのはディストリビューションに含まれるために
  それぞれのパッケージが満たすべき必要条件の説明です
  (詳しくは /usr/share/doc/debian-policy/policy.html/index.html を参照)。

  <item><em>developers-reference</em> - 開発者リファレンス。
  例えばアーカイブの構造、パッケージ名の変更方法、
  パッケージの選び方、メンテナを降りるにはどうしたらよいか、
  どうやって NMU をするか、バグとのつき合い方、
  いつどこにアップロードすればよいかなどなど、特に技術的な事柄以外の
  パッケージ化についてのありとあらゆる情報がここにあります。
  (詳しくは /usr/share/doc/developers-reference/developers-reference.html/index.html を参照)

  <item><em>packaging-manual</em> - パッケージングマニュアル。
  Debian の バイナリ/ソースパッケージを作る上での技術的側面を解説しています。
  (詳しくは /usr/share/packaging-manual/packaging.html/index.html を参照)
  </list>

  <p>これらに加え、あなたのパッケージに電子的に<em>署名</em>するために
  暗号化ソフトウェア PGP (pgp-* パッケージ群)または
  GPG (gnupg パッケージ)が必要です。
  これは、もしあなたがご自分のパッケージを他の人に配布したい場合
  (あなたのパッケージを Debian ディストリビューションに含める
  ということは、つまりそういうことなのですが)特に重要になってきます。
  しかし、アメリカ合衆国のへんちくりんな輸出規制法のせいで、単にこれを
  近くの Debian FTP サイトからダウンロードするというわけにはいきません。
  このため、 Debian はこれらのパッケージを物理的にアメリカ合衆国内に
  ないサイトである non-US.debian.org(ftp://non-us.debian.org/debian-non-US/)
  を通して提供しています。あなたの FTP サイトには README.non-us という
  ファイルがあるはずで、それを見ればどうすればサイトのより近いミラーを
  探せるかが分かります。

  <p>上記の簡単な説明は、それぞれのパッケージが何をするのか紹介
  するだけのものです。先に進む前にどうかそれぞれのプログラムに
  付属の文書を徹底的に熟読し、標準的な使い方だけでも理解しておいて
  ください。きついと思われるかも知れませんが、あとになればきっと
  <em>読んでてよかったなあ</em>と思うことでしょう。

  注意: <em>debmake</em>は dh-make と似た働きをするいくつかの
  プログラムを含むパッケージですが、それ特有の使い方は
  この文書の<strong>範囲外</strong>です。詳しくは<url name="Debmake マニュアル"
  id="http://www.debian.org/~jaldhar/">を参照してください。

  <sect id="otherinfo">その他知っておくべきこと

  <p>これから作ろうとするのは２種類のパッケージで、それぞれ
  ソースパッケージ、バイナリパッケージと呼ばれています。
  ソースパッケージはコンパイルしてプログラムになるソースコードが
  含まれます。バイナリパッケージにはでき上がったプログラムそのものです。
  紛らわしい言葉ですが、「プログラムのソース」と
  「プログラムのソースパッケージ」を混同しないようにしましょう！
  もし用語についてもっと知りたければ他のマニュアル類を参照してください。
  
  <p>Debian では、「メンテナ(maintainer)」と言う用語はパッケージを
  作る人を示し、「上流作者(upstream author)」とはプログラムを
  作った人を指します。そして「上流メンテナ(upstream maintainer)」
  というのは Debian の外部で現在プログラムそのものを管理している人の
  ことです。
  たいていの場合、作者と上流メンテナは同一人物ですが、メンテナすらも
  同じという場合もあり得ます。
  もしあなたが何かのプログラムを書いて、それを Debian に入れたいと
  考えたならば、ぜひあなたのアプリケーションを自分でパッケージ化して
  メンテナになってください。

  <p>もしディストリビューションの次のリリースにあなたのプログラムを
  含めたい(そのプログラムが有用なら、ぜひ！)ならば、パッケージを
  構築したあとに(あるいはしている最中でも構いませんが)
  正式な Debian メンテナになる必要があります。その手続きは
  開発者リファレンスで説明されていますので、そちらを参照してください。

  <chapt id="first">はじめの一歩

  <p><url name="Developer's Corner" id="http://www.debian.org/devel/">
  や<url name="開発者のコーナー" id="http://www.debian.or.jp/devel/">
  にある文書には、パッケージ化を始める上でどこからどうやって
  手をつけたらよいのかについてあまり書いてありません。この文書ではどんな
  細かい(最初見た時はほとんど無関係に思えるような)手順も余さず説明し、
  あなたが最初のパッケージを作るお手伝いをします。
  ともかく一つ作ってしまえば、あとは次のリリース、そして他のパッケージへ
  と経験を積んでいけばよいのです。

  <sect id="choose">パッケージ化するプログラムの選定

  <p>パッケージにしたいプログラムについてはすでに各自お考えがあると
  思いますが、未経験者なら以下をチェックしてみてください。

  <list>
  <item>そのパッケージがすでにディストリビューションに収録されていないか
  どうか確かめてください。もしあなたが「安定版」を使っているのなら、
  たぶん<url name="パッケージ検索ページ" id="http://www.debian.org/distrib/packages.html">か、<url name="Debian JP パッケージ" id="http://www.debian.or.jp/Packages.html">に行って調べるのが最上の策です。
  もしあなたが<strong>現在の</strong>「開発版」ディストリビューションを使って
  いるのなら、以下のコマンドを使って調べてみてください。
  <example>
  dpkg -s プログラム名
  dpkg -l '*プログラム名*'
  </example>

  <item><url name="WNPP page" id="http://www.debian.org/doc/prospective-packages.html">、あるいは 
  <url id="http://www.debian.or.jp/prospective-packages.html" name="作業を必要
  としているパッケージ">、あるいは debian-devel メーリングリストで
  誰か他の人が同じプログラムのパッケージを作っていないかどうか
  確かめてください。もし誰か作っていたら、現在のメンテナに連絡を
  とってご自分の要望を伝えてください。それで満足したならば、まだ誰も
  手をつけていない他の面白いプログラムを探して再チャレンジです。</item>

  <item>プログラムはライセンスを<strong>与えられていなければなりません</strong>
  それが
  <url name="Debian Free Software Guideline" id="http://www.debian.org/social_contract.html#guidelines">  (邦訳は<url name="Debian フリーソフトウェアガイドライン" id="http://www.jp.debian.org/social_contract#guidelines">)で示されているようなフリーの
  ものであれば言うことなしです。
  もしガイドラインにそぐわない点があっても、Debian の「contrib」や
  「non-free」セクションに入れることは可能です。
  もしどのセクションに入れればよいか良く分からなければ、
  <email/debian-devel@list.debian.org/ で聞いてみてください。
  </item>
  
  <item>プログラムは setuid root で動くものであっては<strong>なりません
  </strong>。
  一番良いのは、setuid とか setgid とかの使用を要求しない
  プログラムです。</item>

  <item>デーモンや何か */sbin に行くようなものは手始めとしてはよろしくない。
  </item>

  <item>プログラムはバイナリ実行形式になるものがよいでしょう。ライブラリ
  は今はやめといたほうがいいですよ。
  </item>

  <item>ちゃんとした説明書きのあること。あるいは少なくとも誰にとっても
  理解可能なプログラムであること。</item>

  <item>プログラムの作者に連絡をとってパッケージ化の承諾をもらいましょう。
  何かプログラムそのものに起因する問題が発生した際に、作者にいろいろ聞けると
  いうことは重要なので、由来のはっきりしないソフトウェアの断片をパッケージ化
  するのはやめておきましょう。
  </item>

  <item>そして最後に、といってもこれが重要なのですが、
  ちゃんと動くかどうか確かめましょう。そして何回か試してみましょう。
  </item>
  </list>

  <p>もちろんこれらのことは安全策というだけのことです。筆者としては、
  何も知らないままにパッケージ化したある種の setuid デーモンのせいで
  怒り狂ったユーザからあなたに向けて抗議殺到というような事態を
  回避したいのです。
  パッケージ化についてもっと経験を積めば、こうしたパッケージも
  作れるようになるでしょう。しかし、どんなに老練な開発者だって
  何か分からないことがあれば debian-devel メーリングリストで質問するの
  です。そこには喜んで手助けしてくれる人々がいます。

  <p>もっと詳しい話は、開発者リファレンスに載っていますので
     そちらを参照してください。

  <sect id="getsrc">プログラムを手にいれて、試してみる

  <p>さて、最初にすべきことは、オリジナルのソースを探してダウンロード
  することです。ここでは作者のホームページからすでにソースファイルを入手した
  として話を進めます。
  Linux のソースはふつう tar/gzip 形式で提供されています。
  拡張子は .tar.gz で、普通はプログラム名-バージョンという
  サブディレクトリを含んでいます。そこにすべてのソースが入っているわけです。
  もしあなたのプログラムのソースが他の種類のアーカイブで提供されていたら
  (例えばファイル名が <TT>.Z</TT>とか<TT>.zip</TT>でおわっていたら)、
  適当なツールで展開しましょう。どうやって展開したらよいのか
  良く分からなかったら debian-mentors ML で聞いてみましょう
  (ヒント: 「file アーカイブファイル名.拡張子」を実行してみましょう)

  <p>さて本稿では、「gentoo」というプログラムを例にとって説明しようと
  思います。これは X11 上で動く GTK+ を使用したファイルマネージャです。
  ちなみにこのプログラムはすでにパッケージ化されており、また、
  この文書が最初に書かれた時点から比べると大幅に改変が加えられていることに
  注意してください。

  <p> 自分のホームディレクトリ以下に 'debian'、'deb'、または何か適当だと
  思われる名前 (今回の場合には例えば &tilde;/gentoo/ で良いでしょう) の
  サブディレクトリを作りましょう。
  ダウンロードしたアーカイブをここにコピーし、
  ( tar -xzf gentoo-0.9.12.tar.gz を実行して) 展開してください。
  この時エラーが (一見「無関係」に思えるようなものでさえ) 起きなかったか
  どうか、確認しておいてください。
  もしエラーが起きたら、それは他の人々のシステム上で展開する際にもおそらく
  エラーが起きるということです。そしてそこで使われている展開用のツールは
  この異常を無視する場合も、無視できない場合もあり得ます。

  <p>さあ、「gentoo-0.9.12」という別のサブディレクトリができました。
  展開したディレクトリに移って、提供されているドキュメントを
  <strong>徹底的に</strong>読みましょう。
  通常は README*、INSTALL*、*.lsm、*.html などといった名前のファイルが
  存在します。
  それらの文書の中に、どうやったら正しくコンパイルできるのか、
  どうインストールすればよいのかといった情報が見つかるはずです。
  (たぶん /usr/local/bin にインストールするものとして説明されていますが、
  そうしてはいけません。これについては <ref id="destdir"> を
  参照してください)

  <p>プログラムによって構築の手順は代わりますが、最近のプログラムだと
  「configure」スクリプトが付属していることがあります。
  このスクリプトはソースをあなたのシステムに応じて設定し、あなたの
  システムにおいてコンパイルできるかどうか確かめます。
   設定したあと(「./configure」と実行)、プログラムは普通
   「make」でコンパイルされます。「make check」でプログラムに含まれている
   自己診断テストを実行できるものもあります。
   目的のディレクトリへのインストールは一般に「make install」によって
   実行されます。

   <p>さあ、試しにプログラムをコンパイルし、実行してみましょう。
   インストール中や実行中に他の何かを壊してしまうことが無いかどうか、
   またちゃんと動作するかどうか、などを確認してください。

   <p>それから、'make uninstall' を実行するとインストールされたファイルを
   すべて削除できる場合が多いです。また 'make clean' (もっと効果的なのは
    'make distclean') を実行するとコンパイル用のディレクトリを
   きれいにしてくれます。

  <sect id="namever">「dh_make」を実行する前にやっておくべきこと

  <p>パッケージ化の作業は完全にクリーンな (オリジナルのままの)
  ソースディレクトリ、簡単に言えば新しく展開したソースから始めるべきです。

  <p>パッケージをきちんと作るためには、(もしまだそうなっていなければ) 
  プログラム名がすべて小文字になるよう、オリジナルの名前から
  変更しておかなければいけません。
  またソースディレクトリ名を &lt;パッケージ名&gt;-&lt;バージョン&gt; に
  変更しておきましょう。
  
  <p>もしプログラムの名前が一語以上で構成されていたら、
  一つの語につなげるか省略形にしましょう。
  例えば、「John's little editor for X」というソフトウェアならば
   johnledx とか jle4x というようにしましょう。あまり長すぎない程度、
  せいぜい 20 文字くらいまでの長さで、適当に決めて下されば結構です。

  <p>プログラムの正確なバージョンもチェックしましょう
  (パッケージのバージョンに含めるために)。
   もしそのソフトウェアが「バージョン X.Y.Z」という形式で番号付けされて
   おらず、ある種の日付で区別されている場合には、バージョン番号として
    "0.0." にその日付を続けたものを使ってもいいでしょう
    (先頭に "0.0." を付けておくのは、upstream の開発者が
     1.0 のような素敵なバージョンをリリースすると決めた場合に備えての
     ことです。) つまり、もしリリースの、あるいはスナップショットの
   日付が 1998 年の 12 月 19 日だったら、0.0.19981219 としておけば
   結構です。
   およそバージョン番号に使えそうな情報がまったくないと言う場合、
   上流メンテナに連絡をとって彼らが何か他のリビジョン管理手段を
   使っているかどうか聞いてみましょう。

  <sect id="dh_make">「dh_make」の実行

  <p>現在プログラムのソースディレクトリにいることを確認し、以下を
  実行してください。

  <p><example>
  dh_make -e your.maintainer@address -f gentoo-0.9.12.tar.gz
  </example>
   
  <p>もちろん、"your.maintainer@address" の部分は changelog の
  エントリーやその他のファイルに記載するための、あなたの e-mail
  アドレスに置き換えてくさい。またファイル名はオリジナルソース
  アーカイブの名前に置き換えてください。
  詳細は <manref name="dh_make" section="1"> を参照してください。

  <p>画面にはいろいろ表示されて、あなたが作ろうとしているパッケージ
  がどういう種類のものか聞いてきます。gentoo は 単一バイナリパッケージ - 
  すなわちパッケージに含まれるバイナリが一つだけで、一つの .deb ファイル
  のみが作成される - ですので最初の選択肢を選び、「s」キーを押しましょう。
  その後、画面に表示される情報をよく読んで、&lt;enter&gt; を押して
  確認してください。
  初めてパッケージを作るというときには、マルチバイナリパッケージや
  ライブラリに手を出さない方が無難です。この話は前にもしましたね。
  実際には作業自体はそれほど大変ではありません。ただし、ちょっとだけ
  より多くの知識が必要になります。そのため、ここではそれについて説明
  はしません。

  <p>dh_make の実行は <strong>ただ一度だけ</strong> です。注意して
  ください。既に「デビアン化」された同じディレクトリで再び実行すると、
  正しく動作しないでしょう。これはつまり、将来新しい版やパッケージの
  改訂版をリリースする時には別の方法を使うことになる、ということです。
  後で説明する <ref id="update"> の部分をしっかり読んでください。

  <chapt id="modify">ソースコードの変更

  <p>ふつう、プログラムは自分自身を /usr/local 以下のディレクトリに
  インストールするようになっています。しかし、Debian システムにおいては、
  /usr/local 以下はシステム管理者(とユーザ)の個人的利用のために
  予約されているので、Debian パッケージはこのディレクトリを使っては
  いけないことになっています。
  このため、Makefile に始まるプログラムを生成するための仕組を調べなければ
  いけません。Makefile というのは <manref name="make" section="1"> が
  このプログラムを自動生成するために利用するスクリプトです。
  Makefile について詳しくは、<ref id="rules">を参照してください。

  <p>修正の具体的なやり方について<em>何から何まで</em>説明するにはとても
  紙面が足りませんが、よくあるパターンとしては大体以下のようなものでしょう。

  <sect id="destdir">サブディレクトリへのインストール

  <p>ほとんどのプログラムは自分自身をシステムの既存のディレクトリ構造に
  インストールするための仕組を備えており、これによってインストールされた
  バイナリがユーザの $PATH に含まれるようになり、また附属文書やマニュアル
  ページをシステムに共通の場所で見ることがでるようになります。
  パッケージ化するプログラムがこの作業をきちんと実行できることを
  確認しなければいけません。さらに、Debian パッケージを作成するためには、
  プログラムを通常 debian/ ディレクトリの下に作成される
  一時的なサブディレクトリにインストールし、ここからメンテナーツールに
  よってちゃんとした .deb パッケージを生成できるようにする必要があります。
  この一時的なサブディレクトリには通常 <tt>debian/tmp</tt> という名前が
  付けられています。このディレクトリ以下にあるファイルは、パッケージを
  インストールした際にすべてユーザのシステムへとインストールされます。
  唯一の違いは dpkg がファイルをルートディレクトリからインストールする
  ということだけです。

  <p>基本的に、パッケージを作成するためにはプログラムを debian/tmp に
  インストールすることが必要ですが、一方パッケージをインストールした後は
  ルートディレクトリ以下に置かれるため、その状態で正しく動作できるように
  しなければなりません。GNU autoconf を使用するプログラムの場合は、
  dh_make がこの作業を行なうコマンドを自動的に設定してくれるため、
  このセクションを飛ばしてしまってもいいくらい非常に簡単な作業です。
  しかし、その他のプログラムについては、おそらく自分で Makefile を調べて
  編集する必要があるでしょう。

  <p>以下は gentoo の Makefile 中の関連する部分です。

  <p><example>
  # Where to put binary on 'make install'?
  BIN     = /usr/local/bin
  # Where to put icons on 'make install'? Note: if you change this,
  # gentoo will not find the icons as it starts up. You're going to
  # have to alter gentoo's icon path (in the config window, "Paths"
  # tab) to get it work.
  ICONS   = /usr/local/lib/gentoo/
  </example>

  <p>まず始めに、以下のような新しい行を２行挿入しましょう。

  <p><example>
  # Edited for Debian GNU/Linux.
  DESTDIR =
  </example>
  これはパッケージ構築の過程で必要になります(後の <ref id="rules"> 
  の項で説明します)。

  <p>次に、 Makefile で最終的に生成されたバイナリがインストールされる
  場所が指定されているところを探し、こんな風に変えます。
  <p><example>
  # Where to put binary on 'make install'?
  BIN     = $(DESTDIR)/usr/X11R6/bin
  </example>

  <p>しかしなぜこのディレクトリなんでしょう。他の所じゃだめでしょうか？
  だめです。
  というのも Debian ではどこにプログラムをインストールするかいくつかの
  ルールが決められているからです。これは Linux ファイルシステム階層基準
  (/usr/share/doc/debian-policy/fhs)で指定されています。
  Gentoo は X11 用のプログラムですので、/usr/local/bin ではなく 
  /usr/X11R6/bin にインストールしなければなりません。
   man ページは(大抵のプログラムには付属していますが、無い場合も
  あります。今回は無いのであとでひとつ書くことにします) /usr/local/man/man1 
  ではなく /usr/share/man/man1 にインストールしなければなりません。

  <p>さて次はちょっと厄介な問題です。例えばあなたが次の行を以下のように
  変更したとします。

  <p><example>
  ICONS   = $(DESTDIR)/usr/share/gentoo/
  </example>
  さて、ポリシーに合わせたのは良いのですが、今度は C のソースそのものを
  いじってアイコンを参照しているところすべてを修正しなければなりません。
  でもどこを、そして何を探せばよいのでしょうか？修正すべき個所を探すには
  ( .c と .h という拡張子のファイルを含むすべてのディレクトリで)
  こんな風に実行すればよろしい。
  <p><example>
  grep -n usr/local/lib *.[ch]
  </example>
  
   Grep は usr/local/lib という文字列を探して、見つかったファイル名と
   それが何行めであるかを教えてくれるでしょう。そうしたらそれらのファイルを
   編集して usr/local/lib という部分を usr/share に置き換えてやれば
   良いのです。それでおしまい。usr/local/lib をあなたの指定した場所に
   置き換えるだけです。
   他の部分をいじってぐちゃぐちゃにしないよう気をつけましょう。
   もしあなたが C プログラミングについてあまりご存知ないならば :-)

  <p>終ったら、インストールターゲットを探しましょう(「install:」
  で始まる行を探してみてください)。Makefile の先頭で
  直接定義されているものを除いて、ディレクトリへの参照を
  すべて変更してください。
  gentoo のもともとのインストールターゲットはこんな感じでした。

  <p><example>
  # ----------------------------------------- Installation

  # You're going to have to be root to do this!
  install:        gentoo
                  install ./gentoo $(BIN)
                  install icons $(ICONS)
                  install gentoorc-example $(HOME)/.gentoorc
  </example>

  <p>修正後はこんな風になります。
  <example>
  # ----------------------------------------- Installation

  # You're going to have to be root to do this!
  install:        gentoo-target
                  install -d $(BIN) $(ICONS) $(DESTDIR)/etc
                  install ./gentoo $(BIN)
                  install -m644 icons/* $(ICONS)
                  install -m644 gentoorc-example $(DESTDIR)/etc/gentoorc
                  install -d $(DESTDIR)/usr/share/doc/gentoo/html
                  cp -a docs/* $(DESTDIR)/usr/share/doc/gentoo/html
  </example>

  <p>鋭い人なら私が「install:」の行の「gentoo」を「gentoo-target」に変えた
  のに気づくでしょう。 こういうのをバグフィックスというのですな。:-)

  <p>今のような、特に Debian パッケージだけに関係しない変更はすべて
  上流メンテナに報告し、プログラムの次のリビジョンに反映してもらうように
  しましょう。注意すべきことは debian/* 以下のファイルを送る必要は無いと
  いうことです。そうではなくて、それ以外のパッチを送りましょう。
  そして、それらの修正を送る前に、Debian や Linux (あるいは Unix でさえも!)
  だけに通用するものでなく、できるだけ広範囲に通用するよう心がけることで、
  upstream の開発者にとっての負担を軽減するように努めましょう。

  <sect id="difflibs">使用ライブラリの違い

  <p>よくある問題としてもう一つ、ライブラリの問題があります。
  ライブラリはしばしばプラットフォームごとに異なります。
  例えば、 Makefile は Debian 上には、あるいはもしかしたら Linux 上
  でさえ存在しないライブラリへの参照を含んでいるかもしれません。
  その場合、その個所を探して、Debian 上に存在する、互換のライブラリを
  指すように変更してやらなければなりません。
  一番良いのはそういう行をコメントにしておくことです。
  そうしておけば、他の人が違うプラットフォーム上でコンパイルしようとして
  何か問題が起こったときに、解決のヒントになるかも知れませんから。

  <p>そんなわけで、もしあなたのプログラムの Makefile に
  以下のような部分があったら(そしてうまくコンパイルできなかったら)、

  <p><example>
  LIBS = -lcurses -lなんとか -lかんとか
  </example>

  <p>こういう風に変えましょう。今度はきっと大丈夫です

  <p><example>
  LIBS = -lncurses -lなんとか -lかんとか
  #LIBS = -lcurses -lなんとか -lかんとか
  </example>

  <chapt id="dreq"> debian/ ディレクトリ以下に無くてはならないファイル

  <p>プログラムのメインディレクトリ (「gentoo-0.9.12」) の中に、
  「debian」という名前の新しいディレクトリが作られています。
  このディレクトリ内には様々なファイルが納められていますが、
  パッケージの動作をカスタマイズするために、これらのファイルを
  これから編集していきます。
  最も重要なファイルは「control」、「chagelog」、「copyright」、
  そして「rules」であり、これらのファイルはすべてのパッケージが
  必ず用意しなければならないものです。

  <sect id="control">「control」ファイル

  <p>このファイルには dpkg と dselect がパッケージを管理するために
  利用する様々な情報が納められています。
  以下は dh_make が作ってくれる control ファイルのひな型です。

  <p><example>
  1  Source: gentoo
  2  Section: unknown
  3  Priority: optional
  4  Maintainer: Josip Rodin &lt;jrodin@jagor.srce.hr&gt;
  5  Standards-Version: 3.0.1
  6
  7  Package: gentoo
  8  Architecture: any
  9  Depends: ${shlibs:Depends}
  10 Description: &lt;insert up to 60 chars description&gt;
  11  &lt;insert long description, indented with spaces&gt;
  </example>
  (行番号は筆者が書き加えました)

  <p>1-5 行目はソースパッケージの管理情報です。1行目はソースパッケージの
  名前です。

  <p>2 行目はディストリビューションにおいてこのパッケージが所属する
  セクションです。
  既に御存知かもしれませんが、Debian はいくつかのセクションに
  分割されています。セクションには main (ザ・フリーソフトウェア)、
  non-free (本当に自由であるとはいえないソフトウェア)、そして
  contrib (それ自身は自由なソフトウェアであるけれども、non-free な
  ソフトウェアが無ければ使えないもの) があります。
  これらの下には、どんなパッケージが含まれているのか簡単に説明する
  ような名前の付いた、論理的なサブセクションがさらにいくつか
  存在しています。
  つまり、管理者専用のプログラムのために「admin」、基本的なツールの
  ために「base」、プログラマーのためのツールとして「devel」、文書の
  「doc」、ライブラリの「libs」、電子メールを読み書きするための
  リーダやデーモンのための「mail」、ネットワーク関係のアプリケーション
  やデーモンの「net」、X11 用のプログラムのための「x11」など、そして
  さらに多くのものが用意されています。

  <p>ここでは x11 に変更しておきましょう。

  <p>3行目はこのパッケージがユーザにとってどれくらい重要なものかを
  定義します。
  セクション (Section) と優先度 (Priority) は、実際には dselect が
  パッケージをソートするときとデフォルトを選ぶときにしか
  使われません。そしてこれらのフィールドは
  (ありがちなことですが) 我々の FTP メンテナによって上書きされます。
  これらのフィールドに何を設定すべきかについては、ポリシーマニュアル
  の説明を読んでください。

  <p>この gentoo は通常の優先度を持つパッケージなので、
  ここでは optional のままにしておきましょう。

  <p>4 行目はメンテナの名前と電子メールアドレスです。

  <p>5 行目はこのパッケージが準拠している Debian ポリシー基準の
  バージョン (インストールされている debian-policy パッケージの
  2 つのメジャーバージョン) です。

  <p>もしパッケージを生成するために標準的でないコンパイラ、または
  その他のツールが必要なら、ここ (5 行目と 6 行目(空行) の間) に
  「Build-Depends」行を追加して、必要なパッケージをそこに記載して
  おくべきです。これについての詳細は、パッケージングマニュアル
  (8.7 節) および「build-essential」パッケージの附属文書を参照して
  ください。

<!--
  <p>7-11 行目はバイナリパッケージの管理情報です。
-->

  <p>7 行目はバイナリパッケージの名前です。

  <p>8 行目にはバイナリパッケージをコンパイル可能な CPU アーキテクチャ
  を記述します。
  ここを「any」のままにしておけば、
  <manref name="dpkg-gencontrol" section="1">が、このパッケージを
  コンパイルしたマシンに合わせて適当に埋めてくれます。
  (パッケージのポーティングについては、開発者レファレンスを参照して
  ください。)
  あなたのパッケージが特定のアーキテクチャに依存しないのであれば
  (例えば、shell または Perl のスクリプトであるとか、あるいは
  文書のパッケージである場合) ここを「all」に変更し、パッケージの
  生成に「binary-arch」ではなく「binary-indep」を使う方法について
  の説明をあとで <ref id="rules"> の項で読んでおいてください。

  <p>9 行目は Debian パッケージ管理システムの最も強力な機能のひとつ
  を示しています。
  それぞれのパッケージは様々な形で相互に関係情報を持つことができます。
  パッケージ間の関係には、Depends: すなわち「依存」の他に、Recommends:、
  Suggests:、Pre-depends:、Conflicts:、Provides:、Replaces: などが
  あります。

  <p>dpkg、dselect、APT (そしてそのフロントエンド) などの
  パッケージ管理ツールは、通常これらの関係を処理する場合に、
  同じ動作をします。
  そうでない場合には、それについて説明していきます。
  (<manref name="dpkg" section="8">、
   <manref name="dselect" section="8">、
   <manref name="apt" section="8">、
   <manref name="console-apt" section="8">、
   <manref name="gnome-apt" section="8">
  を参照してください。)

  <p>以下にこれらの依存関係が通常もつ意味を説明します。

  <p><list>
  <item>Depends: 「依存」
  <p>パッケージはここで指定したパッケージをインストールしない限り
  インストールされません。
  あなたのプログラムが特定のパッケージに依存していて、そのパッケージが
  存在しない限り全く動作しない (または非常に重大な問題が発生する) 
  場合には、これを使いましょう。</item>

  <item>Recommends: 「推奨」
  <p>dselect はここで指定されたパッケージがインストールされていない限り
  あなたのパッケージをインストールしません。
  dpkg と APT の場合には、無視してインストールすることが可能です。
  厳密に言えばあなたのプログラムの動作に必須ではないけれど、
  一緒に使うことがほぼ前提となっているようなパッケージは
  ここで指定しましょう。</item>

  <item>Suggests: 「提案」
  <p>dselect はあなたのプログラムをインストールする際に、
  ここで指定したパッケージをインストールするかどうかユーザに質問します。
  dpkg と APT はこの指定を無視します。
  必要というわけではないが、あなたのプログラムと一緒に使うと
  便利というパッケージについては、ここで指定しておきましょう。</item>

  <item>Pre-Depends: 「先行依存」
  <p>これは Depends: よりも強い関係を示します。
  ここで指定されたパッケージがあらかじめインストールされ、かつ
  <em>適切に設定されて</em>いない限り、あなたのプログラムは
  インストールされません。
  これを使う前に、まずは debian-devel メーリングリストで
  相談しましょう。できれば使わないようにしましょう。
  早い話が、「最初は絶対使っちゃいけません。」 :-)</item>

  <item>Conflicts: 「競合」
  <p>ここで指定されたすべてのパッケージが削除されない限り、
  あなたのプログラムはインストールされません。特定のパッケージが
  存在しているとあなたのプログラムが動作しない (または非常に重大な
  問題が起きる) 場合には、これを使います。</item>

  <item>Provides: 「提供」
  <p>ほぼ同じ機能を持つパッケージが複数あって、選択の余地があるような
  場合のために仮想パッケージ名というものが定義されています。
  仮想パッケージ名の一覧は
  /usr/doc/debian-policy/virtual-package-names-list.text.gz にあります。
  もしあなたのプログラムが仮想パッケージ名を提供するの
  ならばここで指定してください。</item>

  <item>Replaces: 「置換」
  <p>あなたのプログラムが他のプログラムを置き換える場合に指定してください。
  <manref name="dpkg" section="8"> と <manref name="dselect" section="8">
  はあなたのプログラムをインストールする前に指定されたパッケージを
  削除します。</item>
  </list>

  <p>これらのフィールドは書き方が決まっています。指定したいパッケージ名
  をコンマで区切って並べてください。もしいくつか選択肢があるの
  であれば、それらのパッケージ名を縦棒 <tt>|</tt> (パイプ記号)で区切って
  並べてください。
  あるバージョンより上でなければダメ、などというようにパッケージの
  バージョン番号によって制限を加えることも可能です。
  これを指定したい場合にはそれぞれのパッケージ名の後で丸カッコ(パーレン)
  を開き、関係式、その後でバージョン番号を指定してください。使用できる関係式は
  <tt>&lt;&lt;</tt>、<tt>&lt;=</tt>、<tt>=</tt>、<tt>&gt;=</tt>、
  <tt>&gt;&gt;</tt>で、それぞれ「指定されたもの以前のバージョンのみ」、
  「指定されたもの以前か指定のバージョン」、「指定のバージョンのみ」
  「指定されたもの以降か指定のバージョン」、
  「指定されたもの以降のバージョンのみ」を認めることを示します。
  
  <p>読者にご紹介したい機能の最後が $(shlibs:Depends) です。これは
  dh_shlibdeps (後述) によって、あなたのプログラムが使う共有ライブラリすべての
  名前、例えば libc6 とか xlib6g などで自動的に置き換えられます。
  ですから、今ここで使用するライブラリ名を、あなた自身で指定する必要は
  ないのです。
  以上の説明から、今回は 9 行目をそのままにしておいてよいとお分かりでしょう。
  なぜなら gentoo は他のどのパッケージにも依存していないからです。

  <p>10 行目として追加したのは gentoo が「提案」するパッケージの一覧です。
  今回は gentoo を X11 用ウィンドウマネージャのメニューに登録する必要が
  あるので、 menu だけを「提案」することにします。また、実際にメニューに
  登録するには、debian/menu というファイルも設定する必要がありますが、
  詳しくは <manref name="menufile" section="5">や
  <manref name="update-menus" section="1">を参照してください。

  <p>11 行目はこのパッケージに関する簡潔な説明です。多くの人々は
  一行半角 80 文字の幅のスクリーンでこれを見ますから、半角 50 文字以上には
  ならないようにしましょう。今回は
  「A fully GUI configurable GTK+ file manager」としました。

  <p>12 行目はこのパッケージに関する長い説明文です。ここでは一つの段落で
  パッケージについてより詳しく説明するようにしてください。
  各行一列目は空白でなければならず、空白行を入れてはいけません。
  . (半角ピリオド)を２列目に書くとその行が空行であることを示せます。
  また、また、説明文の後に空白行があってはいけません。

  <p>以下が修正後の control ファイルです。

  <p><example>
  1  Source: gentoo
  2  Section: x11
  3  Priority: optional
  4  Maintainer: Josip Rodin &lt;jrodin@jagor.srce.hr&gt;
  5  Standards-Version: 2.4.1.2
  6
  7  Package: gentoo
  8  Architecture: any
  9  Depends: ${shlibs:Depends}
  10 Suggests: menu (>= 1.5)
  11 Description: A fully GUI configurable GTK+ file manager
  12 gentoo is a file manager for Linux written from scratch in pure C. It
  13 uses the GTK+ toolkit for all of its interface needs. gentoo provides
  14 100% GUI configurability; no need to edit config files by hand and re-
  15 start the program. gentoo supports identifying the type of various
  16 files (using extension, regular expressions, or the 'file' command),
  17 and can display files of different types with different colors and icons.
  18 .
  19 gentoo borrows some of its look and feel from the classic Amiga file
  20 manager "Directory OPUS" (written by Jonathan Potter).
  </example>

  <sect id="copyright">「copyright」ファイル

  <p>このファイルにはパッケージの著作権に関する情報が含まれます。デフォルト
  では dh_make は以下のようなひな型を作成します。

  <p><example>
  1  This package was debianized by Josip Rodin jrodin@jagor.srce.hr on
  2  Wed, 11 Nov 1998 21:02:14 +0100.
  3
  4  It was downloaded from &lt;fill in ftp site&gt;
  5
  6  Upstream Author(s): &lt;put author(s) name and email here&gt;
  7
  8  Copyright:
  9
  10 &lt;Must follow here&gt;
  </example>

  <p>ここでファイルに追加すべき重要なことは、あなたがこのソフトウェアを
  入手した場所と、実際の著作権表示です。もしプログラムのライセンスが GNU、
  BSD、あるいは Artistic など良く知られたフリーソフトウェアのライセンス
  であれば、全文をここに引用する必要はありません。どの Debian システムにも
  /usr/doc/copyright が存在しますので、このディレクトリ内の適当なファイルを
  示すだけでよいでしょう。gentoo は GNU 一般使用許諾の元で配布
  されていますから、こんな風に変更しましょう。

  <p><example>
  1  This package was debianized by Josip Rodin jrodin@jagor.srce.hr on
  2  Wed, 11 Nov 1998 21:02:14 +0100.
  3
  4  It was downloaded from http://www.obsession.se/gentoo/
  5
  6  Upstream Author(s): Emil Brink &lt;emil@obsession.se&gt;
  7
  8  Copyright (c) Obsession Development, 1998.
  9
  10 gentoo is released under the GNU GPL license as free, open source soft-
  11 ware. Hopefully it will seem useful to someone. NO WARRANTY.
  12
  13 On Debian GNU/Linux systems, the complete text of the GNU General
  14 Public License can be found in /usr/doc/copyright/GPL'.
  </example>

  <sect id="changelog">「changelog」ファイル

  <p>パッケージを維持管理していくにつれて、プログラムの振る舞い
  も変わるでしょうし、新機能が追加されたり、バグが修正されたりする
  こともあるでしょう。あなたのパッケージをダウンロードした人々は、
  このファイルを見ることでどこがどう変わったのか知ることができます。
  デフォルトで dh_make が生成する changelog はこんな感じです。

  <p><example>
  1  gentoo (0.9.12-1) unstable; urgency=low
  2
  3   * Initial Release.
  4
  5  -- Josip Rodin &lt;jrodin@jagor.srce.hr&gt; Wed, 11 Nov 1998 21:02:14 +0100
  6
  7  Local variables:
  8  mode: debian-changelog
  9  add-log-mailing-address: "jrodin@jagor.srce.hr"
  10 End:
  </example>

  <p>1 行目はパッケージ名、バージョン、ディストリビューション、
  そして緊急性です。ディストリビューションは unstable か experimental 
  でなければならず、緊急性は 「low」より高いものを指定してはいけません :-)
  
  <p>3-5 行目はログエントリで、ここにこのリビジョンのパッケージで行われた
  変更を記述します(上流プログラムそのものの変更点ではありません - 
  そういう情報は作者によって、プログラム自身の changelog ファイル
  に記載されているはずですから)。
  新しい行はアスタリスク(「*」)で始まる
  行のすぐ上に挿入します。この操作は dch を使っても、emacs (7-10 行目は
  Emacs エディタ用のモード情報です)を使っても、あるいは単に
  普通のテキストエディタを使って手でやっても構いません。
  最終的にこんな風になればよいわけです。

  <p><example>
  1  gentoo (0.9.12-1) unstable; urgency=low
  2
  3   * Initial Release.
  4   * This is my first Debian package.
  5
  6  -- Josip Rodin &lt;jrodin@jagor.srce.hr&gt; Wed, 11 Nov 1998 21:02:14 +0100
  7
  8  Local variables:
  9  mode: debian-changelog
  10  add-log-mailing-address: "jrodin@jagor.srce.hr"
  11 End:
  </example>

  <p>パッケージの新バージョンをリリースする際には、バージョン番号を
  増やさなければなりません。「dch -n &lt;コメント&gt;」とすれば良いでしょう。
  emacs かその他のテキストエディタで直接書き込んでも構いません。
  ヒント: この形式で日時を入力する簡単な方法。
  <manref name="822-date" section="1"> プログラムを使いましょう。
  新バージョンについての情報は changelog ファイルの先頭に追加されます。
  作業後 changelog はこんな風になります。

  <p><example>
  1  gentoo (0.9.12-2) unstable; urgency=low
  2
  3   * Comments about the second revision
  4
  5  -- Josip Rodin &lt;jrodin@jagor.srce.hr&gt; Wed, 11 Nov 1998 22:15:39 +0100
  6
  7  gentoo (0.9.12-1) unstable; urgency=low
  8
  9   * Initial Release.
  10  * This is my first Debian package.
  11
  12 -- Josip Rodin &lt;jrodin@jagor.srce.hr&gt; Wed, 11 Nov 1998 21:02:14 +0100
  13
  14 Local variables:
  15 mode: debian-changelog
  16 add-log-mailing-address: "jrodin@jagor.srce.hr"
  17 End:
  </example>

  <sect id="rules">「rules」ファイル

  <p>さて、「debian」ディレクトリに戻って rules というファイルを
  覗いてみましょう。
  <manref name="dpkg-buildpackage" section="1"> が実際にパッケージを
  作成するのに使うのがこのファイルです。
  このファイルは「make -f」で実行されますので、実際のところもう一つ
   Makefile があるようなものですが、上流ソースに含まれるものとは別物です。

  <p>「rules」ファイルは他の Makefile と同じく、ソースからどうやって
  プログラムを構築するかを定義したいくつかのルールから構成されています。
  ルールはいくつかのターゲットで構成されます。ターゲットはファイル名、
  あるいは実行されるべき動作の名前(例えば「build:」や「install:」)
  で構成されます。
  実行したいルールは、コマンドライン引数として指定します
  (例えば「rules build」や「rules install」というように)。ターゲット名の
  後には、依存要素を指定することができます。依存要素というのは
  ルールが依存するプログラムやファイルのことです。
  その後で数多くのコマンドを記述します(各行を &lt;タブ&gt;で始めてください！)
  最後に空行があると、そこで一つのルールが終り、次のルールが
  始まります。ハッシュ(「#」)で始まる行は行の終りまでコメントと
  見なされます。ルールは他のルールからも、あるいはコマンドラインからも
  呼び出せます(例えば「debian/rules clean」というように)。

  <p>以上を読んでもわけが分からないかもしれませんが、dh_make が
  デフォルトとして作成する
  「rules」ファイルを実際に読んでみると理解できるのではないかと思います。

  <p><example>
  1  #!/usr/bin/make -f
  2  # Made with the aid of dh_make, by Craig Small
  3  # Sample debian/rules that uses debhelper. GNU copyright 1997 by Joey Hess.
  4  # Some lines taken from debmake, by Cristoph Lameter.
  5
  6  # Uncomment this to turn on verbose mode.
  7  #export DH_VERBOSE=1
  8
  9  build: build-stamp
  10 build-stamp:
  11	dh_testdir
  12
  13	
  14	# Add here commands to compile the package.
  15	$(MAKE)
  16
  17	touch build-stamp
  17
  18 clean:
  19	dh_testdir
  20	dh_testroot
  21	rm -f build-stamp install-stamp
  22
  23	# Add here commands to clean up after the build process.
  24	-$(MAKE) clean
  25
  26	dh_clean
  27
  28 install: install-stamp
  29 install-stamp: build-stamp
  30	dh_testdir
  31	dh_testroot
  32	dh_clean -k
  33	dh_installdirs
  34
  35	# Add here commands to install the package into debian/tmp.
  36	$(MAKE) install DESTDIR=`pwd`/debian/tmp
  37
  38	touch install-stamp
  39
  40 # Build architecture-independent files here.
  41 binary-indep: build install
  42 # We have nothing to do by default.
  43
  44 # Build architecture-dependent files here.
  45 binary-arch: build install
  46 #	dh_testversion
  47	dh_testdir
  48	dh_testroot
  49	dh_installdocs
  50	dh_installexamples
  51	dh_installmenu
  52 #	dh_installemacsen
  53 #	dh_installinit
  54	dh_installcron
  55	dh_installmanpages
  56 #	dh_undocumented
  57	dh_installchangelogs
  58	dh_strip
  59	dh_compress
  60	dh_fixperms
  61	dh_suidregister
  62	dh_installdeb
  63	dh_shlibdeps
  64	dh_gencontrol
  65 #	dh_makeshlibs
  66	dh_md5sums
  67	dh_builddeb
  68
  69 source diff:
  70	@echo >&2 'source and diff are obsolete - use dpkg-source -b'; false
  71
  72 binary: binary-indep binary-arch
  73 .PHONY: build clean binary-indep binary-arch binary
  </example>

  <p>１行目は、シェルや Perl スクリプトでおなじみの表現でしょう。
  これは、このファイルが make によって処理されることを示しています。
  空行は無視されます。「#(ハッシュ)」で始まる行はコメントとして扱われ、
  やはり無視されます。
  15行目ではプログラムをコンパイルするためにアプリケーション自身の Makefile 
  を実行します。

  <p>最初は完璧にうまくいくはずがありません。工程の途中でエラーが起きて
  止まってしまうこともあるでしょう。18-26 行目ではその前の失敗した過程で出た
  必要のないゴミをすべて削除しています。

  <p>インストールのプロセス自体は 28行目から始まります。33行目で、必要な
  ディレクトリはすべて 「debian」ディレクトリ内に作られます。
  36 行目では gentoo の Makefile に記述されたインストールターゲット
  が実行されます - そしてすべては  debian/tmp ディレクトリに
  インストールされるというわけ - これが genntoo の Makefile の中で 
  $(DESTDIR) をルートインストールディレクトリとして指定した理由です。

  <p>コメントにもあるように、40-42 行目は アーキテクチャに依存する
  ファイルを構築するのに使われます。

  <p>45-67 行目では debhelper パッケージに収録されたいくつかの小さな
  ユーティリティを実行して、あなたのパッケージを Debian ポリシーに適合する
  ようにします。
  
  <p>これらのユーティリティは dh_ で始まる名前で、それぞれ以下のような
  仕事をします。

  <list>
  <item><manref name="dh_testdir" section="1"> はあなたがソースディレクトリ
  にいるかどうか確認します(ここでは /usr/local/gentoo/gentoo-0.9.12/)。
  <item><manref name="dh_testroot" section="1"> はあなたがルート権限を
  持っているかどうか確認します。
  <item><manref name="dh_installdirs" section="1"> は「dirs」ファイルで指定
  されたディレクトリを作成します[今回は使いません]。
  <item><manref name="dh_installdocs" section="1"> は文書を 
  debian/tmp/usr/doc/gentoo ディレクトリにコピーします。
  <item><manref name="dh_installmenu" section="1"> は menu ファイルを
  debian/tmp/usr/lib/menu/gentoo にコピーします。
  <item><manref name="dh_installmanpages" section="1"> は man ページを
  コピーし適切にリンクを張ります。
  <item><manref name="dh_installchangelogs" section="1"> は changelogs
  を debian/tmp/usr/doc/gentoo ディレクトリにコピーします。
  <item><manref name="dh_installinit" section="1"> は init.d スクリプト
  をコピーします[今回は使いません]。
  <item><manref name="dh_installcron" section="1"> は crontab スクリプト 
  を debian/tmp/etc/cron.*にコピーします[今回は使いません]。
  <item><manref name="dh_installexamples" section="1"> はプログラムに付属の
  サンプルファイルを debian/tmp/usr/doc/gentoo/examples にコピーします
  [今回は使いません]。
  <item><manref name="dh_strip" section="1"> はデバッグ用ヘッダを実行形式
  から取り除き、バイナリを小さくします。
  <item><manref name="dh_compress" section="1"> は 4 KB より大きい
   man ページと文書を gzip で圧縮します。
  <item><manref name="dh_fixperms" section="1"> は debian/tmp ディレクトリ内の
  ファイルやディレクトリのパーミッションをチェックし正しくないものは
  修正します。
  <item><manref name="dh_suidregister" section="1"> は 
  <manref name="suidregister" section="8"> を使って setuid された実行形式の
  ファイルを登録するのに必要なファイルを用意します[今回は使いません]。
  <item><manref name="dh_installdeb" section="1"> はパッケージに関連する
  ファイルを debian/tmp ディレクトリ以下にコピーします。
  <item><manref name="dh_shlibdeps" section="1"> は実行形式が依存する
  共有ライブラリを判定します。
  <item><manref name="dh_gencontrol" section="1"> は control ファイルを
  生成しインストールします。
  <item><manref name="dh_makeshlibs" section="1"> は共有ライブラリの
  依存ファイルを生成します[今回は使いません]。
  <item><manref name="dh_md5sums" section="1"> は MD5 チェックサムを
  計算します。そして最後に、
  <item><manref name="dh_builddeb" section="1"> がパッケージを
  構築します。
  </list>

  <p>これらすべての dh_* スクリプトはそれぞれ man ページを
  持っていますので、詳しくはそちらを参照してください。ここでは取り上げなかった
  他の dh_* スクリプトに関しては、必要であれば debhelper の説明書
  を読むようにしてください。

  <p>69-73 行目は rules ファイルが使うマクロで、これが何を意味しているのか
  知らなくても大丈夫です。

  <p>dh_make が作る rules は単なる例以上のものでは無いことを
  忘れないでください。簡単なパッケージならうまくいくでしょうが、もっと
   複雑なものを相手にするときは、あなたの目的に会わせて
   適当に書き加えるなり消すなりしましょう。
   特に binary-arch ターゲットですが、必要の無い機能を呼んでいる行は
   どんどんコメントにしてしまってください。今の場合、50行目、54 行目、61 行目
   は gentoo には必要無いので、コメントにしてしまいましょう。
   あなたが変えてはいけないのはたった一つ、rules 内の各項目の
   ターゲット名だけです。すべてのツールがこれらの名前でターゲットを参照する
   ので、この通りの名前でなければなりません。
  
  <p>さて、今回必要な修正は一点だけ、57行目に「FIXES」というのを
  追加しました。gentoo の changelog(変更点記録)ファイルの名前が FIXES 
  だからです。
  dh_* に指定できる他のオプションについては、dh_* プログラムの 
   man ページを参照してください。

  <chapt id="dother">Other files under debian/

  <p>You will see that there exist several other files in the debian/
  subdirectory, most of them with the `.ex' suffix, meaning that they are
  examples. If you wish or need to use any of those features, examine them
  and the related documentation (hint: the Policy Manual), rename them to
  remove the `.ex' suffix, and modify them and the rules file if neccessary. 
  Some of those files, those commonly used ones, are explained in the
  following sections.

  <sect id="readdeb">README.debian

  <p>パッケージに関して何か特別にユーザに知らせる必要がある情報や、
  オリジナルのソフトウェアとあなたの Debian 化されたバージョンとの
  相違点はここに記述します。以下はデフォルトで dh_make が生成するものです。

  <example>
  gentoo for DEBIAN
  ----------------------

  Comments regarding the Package

  Josip Rodin &lt;jrodin@jagor.srce.hr&gt;, Wed, 11 Nov 1998 21:02:14 +0100
  </example>

  <p>今回は特に何も書き込む必要はありませんので削除してしまいましょう。


  <sect id="conffiles">conffiles

  <p>ソフトウェアに関して最もうんざりさせられることの一つが、
  アップグレードするのに大変な量の時間と労力を要するということです。
  それも、あなたがそれまでに加えた設定の変更をすべて反映させるという
  ためだけに。Debian はこの問題を、設定ファイルを記録しておいて、パッケージを
  アップグレードする際に古い設定をそのまま使いたいかどうか聞いてくるように
  することで解決しました。この機能を使うには、パッケージのプログラムが使う
  それぞれの設定ファイル(たいていは /etc にあります)のフルパス名を
  一行に一つずつ、この conffiles というファイルに書き込んでおいて
  ください。gentoo は /etc/gentoorc という設定ファイルを一つ持っています。
  これをファイルに書き込みましょう。

  <sect id="dirs">dirs

  <p>このファイルは我々のパッケージが作るべきディレクトリを指定します。
  デフォルトでは、こんな風になっています:
  <p><example>
  1 usr/bin
  2 usr/sbin
  </example>

  <p>一番最初のスラッシュが含まれない事に注意してください。ここでは
  こんな風に変えましょう。:
  <p><example>
  1 usr/X11R6/bin
  2 usr/X11R6/man/man1
  </example>
  
  とはいえ、以上のディレクトリは X11R6 パッケージがインストールされていれば
  どのシステムでもすでに作られているはずなので、本当は必要ありません。

  <sect id="manpage">manpage.1.ex

  <p>*.ex で終るファイルは、どうやってパッケージにその種のサポートを加えるか
  という例です。これらの機能を使うには、ファイルを適宜編集して拡張子.ex を
  削除してください。

  <p>プログラムは man ページを持つべきです。
  もし持っていなかったら、このひな型を利用して自分で適当に書きましょう。
  <manref name="man" section="7"> の man ページには、
  どうやって man ページを書くか簡単な説明があります。
  このファイルをプログラムの名前に変えて、拡張子をそれが属すべき
  マニュアル分類にしたがって付けましょう。以下が簡略なリストです。

  <p><example>
  セクション |     説明     |     メモ
     1     ユーザコマンド         実行可能なコマンドやスクリプト
     2     システムコール         カーネルの提供する機能
     3     ライブラリコール       システムライブラリに含まれる機能
     4     特別ファイル           たいていは /dev 内にあるもの
     5     ファイルの書式         例えば /etc/passwd の書式
     6     ゲーム                 またはその他のどうでもいいプログラム
     7     マクロパッケージ       man マクロのようなもの
     8     システム管理           実行するのに root 権限が必要なものなど
     9     カーネルルーチン       非標準的コールや内部仕様
  </example>
  
  <p>そんなわけで gentoo のman ページは gentoo.1, あるいは gentoo.1x 
  と呼ばれることになります。1x というのは、gentoo が X11 用のプログラム
  だからです。元のソースには gentoo.1 という man ページは含まれていません
  でしたので、筆者がサンプルを元に書きました。

  <sect id="menu">menu.ex

  <p>X Window のユーザは普通ウィンドウマネージャを使っています。ウィンドウ
  マネージャにはたいてい設定可能なメニューの機能があって、そこから
  プログラムを実行できるようになっています。
  もしユーザが Debian menu パッケージをインストールしていた
  ならば、システムにあるすべてのプログラム用のメニューのセットが
  作成され、menu 対応のウィンドウマネージャが利用できるようになります。
  Debian ポリシーでは必要とまではされていない機能ですが、あればユーザは
  喜ぶでしょう。このファイルを編集することで、gentoo をメニューに
  追加することができます。以下が dh_make が作るデフォルトです：
  
  <p><example>
  ?package(gentoo):needs=X11|text|vc|wm section=Apps/see-menu-manual\
    title="gentoo" command="/usr/bin/gentoo"
  </example>

  <p>最初のフィールドはプログラムがどういう種類のインターフェースを
  必要とするのか指定します(例えばテキスト、X11 など)。次は
  プログラムが属すべきセクションを指定します。このセクションとはメニューや
  サブメニューのエントリで表示されるもので、現在のセクション一覧は 
  /usr/doc/menu/html/ch2.html#s2.2 に書いてあります。第 3 のフィールドは
  プログラムの名称です。第 4 のフィールドはそのプログラムのアイコンの定義で、
  もしアイコンがなかったら空白のままにしておきましょう。
  第 5 のフィールドはメニューに実際に表示されるタイトルです。
  第 6 のフィールドはプログラムを実行するコマンドです。

  <p>さて、今はこんな風に menu エントリを変えましょう。
  <p><example>
  ?package(gentoo):needs=X11 section=Apps/Misc\
    title="gentoo" command="/usr/X11R6/bin/gentoo"
  </example>

  <sect id="watch">watch.ex

  <p>このファイルは、<manref name="uscan" section="1">と
  <manref name="uupdate" section="1">プログラム (devscripts パッケージに収録)
  用のものです。これらのプログラムを使うと、あなたがオリジナルの
  ソースを入手したサイトの更新などを監視することができます。詳しくは
   man ページを読んでください。gentoo はこの機能を使えませんので
  このファイルは削除します。

  <p>これでようやくパッケージを構築する準備が整いました…

  <chapt id="build">パッケージの構築

  <p>gentoo のメインディレクトリ(/usr/local/src/gentoo/gentoo-0.9.12/)
  に入って以下を実行してください:
  <p><example>
  dpkg-buildpackage
  </example>

  <p>途中でPGPの秘密鍵を2回入力する必要がありますが、それを除けばこの
  プログラムにすべてお任せで大丈夫です。一連の作業が終わった後、
  /usr/local/gentoo ディレクトリには新しいファイルが4つ作成されます。

  <p><list>
  <item><em>gentoo_0.9.12-1_i386.deb</em>
  <p>は作成されたバイナリパッケージそのものです。他のパッケージと
  同じく、dpkgやdselectを使ってインストールしたり削除したりできます。

  <item><em>gentoo_0.9.12-1_i386.changes</em>
  <p>パッケージの保守管理を続けていくと、プログラムの動作が変更
  されたり新機能が追加されたりすることがありますが、
  パッケージをダウンロードした人はこのファイルを見れば、何が変わったのか
  一目で分かります。これは現在のリビジョンのパッケージへの変更点が
  記載されているファイル、今の場合 gentoo-0.9.12/debian/changelog を元に
  生成されるもので、パッケージ内のファイルの一覧も記入されます。数字の羅列は
  各ファイルのMD5チェックサムで、パッケージをダウンロードした人は
  <manref name="md5sum" section="1">を使って整合性をテストすることが
  できます。もし数字が一致しない場合には、ファイルが壊れているか、
  あるいは何者かによって改ざんされていると分かるわけです。
  このファイルは PGP で署名されているので、
  パッケージの利用者はこのファイルが本当にあなた自身が作成したものがどうか
  ちゃんと判断できます。

  <item><em>gentoo_0.9.12.orig.tar.gz</em>
  <p>元のソースコードをまとめてアーカイブにしたもので、誰か他の人がソースから
  パッケージを再構築したいという場合使ってもらうことができます。また、
  現在 Debian パッケージ管理システムを使っていないが、そのプログラムだけは
  ソースをダウンロードしコンパイルして使いたいという場合にも役に立ちます。

  <item><em>gentoo_0.9.12-1.dsc</em>
  <p>これはソースコードの内容の概要です。このファイルは
  gentoo-0.9.12/debian/control ファイルから生成され、ソースが
  <manref name="dpkg-source" section="1">で展開される際に必要になります。
  このファイルは PGP で署名されているので、本当にあなた自身が作成したものか
  判別できます。
  </list>

  <sect id="doc-base">ex.doc-base

  <p>If your package has HTML or any other documentation (except manual
  pages and info docs), you should use the `doc-base' file to register it,
  so the user can find it with e.g. <manref name="dhelp" section="1"> or
  <manref name="dwww" section="1">.

  <p>This is how gentoo's doc-base file looks like:

  <p><example>
  Document: gentoo
  Title: Gentoo Manual
  Author: Emil Brink
  Abstract: This manual describes what Gentoo is, and how it can be used.
  Section: Apps/Tools

  Format: HTML
  Index: /usr/share/doc/gentoo/html/index.html
  Files: /usr/share/doc/gentoo/html/*.html
  </example>

  <p>For information on the file format, see <manref name="install-docs" section="8">
  and the doc-base manual, in /usr/doc/doc-base/doc-base.html/index.html.

  <sect id="maintscripts">postinst、preinst、postrm、prerm

  <p>これらのファイルはメンテナスクリプトと呼ばれるもので、できれば
  今は使用を避けた方が良いでしょう。というのも、これらを使うと話が非常に
  ややこしくなってしまうからです。詳しくはパッケージングマニュアルを
  参照してください。

  <chapt id="final">Final steps

  <sect id="build">Building the package

  <p>Enter the program's main directory and then issue this command:

  <p><example>
  dpkg-buildpackage -rfakeroot
  </example>

  <p>This will do everything for you, you'll just have to enter your
  PGP secret key, twice. After it's done, you will see four new files
  in the directory above (~/debian/):

  <p><list>
  <item><em>gentoo_0.9.12-1_i386.deb</em>
  <p>This is the completed binary package. You can use dpkg or dselect to
  install and remove this just like any other package.

  <item><em>gentoo_0.9.12.orig.tar.gz</em>
  <p>This is the original source code gathered up so that if someone else
  wants to recreate your package from scratch they can. Or if they aren't
  using the Debian packaging system, but need to manually download the
  source and compile.

  <item><em>gentoo_0.9.12-1.dsc</em>
  <p>This is a summary of the contents of the source code. The file is
  generated from the gentoo-0.9.12/debian/control file, and is used when
  unpacking the source with <manref name="dpkg-source" section="1">. This
  file is PGP signed, so that people can be sure that it's really yours.

  <item><em>gentoo_0.9.12-1.diff.gz</em>
  <p>This compressed file contains each and every addition you made to the
  original source code, in the form known as "unified diff". It is made
  and used by <manref name="dpkg-source" section="1">.

  <item><em>gentoo_0.9.12-1_i386.changes</em>
  <p>This file describes all the changes made in the current package
  revision, and it is used by the Debian FTP archive maintenance programs
  to install the binary and source packages in it. It is partly generated
  from the gentoo-0.9.12/debian/changelog file and the .dsc file.

  <p>As you keep working on the package, behavior will change and new
  features will be added. People downloading your package can look at this
  file and quickly see what has changed. The long strings of numbers are MD5
  checksums for the files mentioned. Person downloading your files can test
  them with <manref name="md5sum" section="1"> and if the numbers don't
  match, they'll know the file is corrupt or has been hacked. This file is
  PGP signed, so that people can be even more sure that it's really yours. 
  </list>

  <p>With a large package, you may not want to rebuild from scratch every
  time while you tune a detail in debian/rules. For testing purposes, you
  can make a .deb file without rebuilding the upstream sources like this:

  <p><example>
  fakeroot debian/rules binary
  </example>

  <p>Just make sure that your `install' rule does *not* have `install-stamp'
  child (that's the default nowadays), to make sure `dh_clean -k` is run
  each time. And once you are finished with cleanups, remember to rebuild
  following the right procedure, to be able to upload correctly.

  <sect id="checkit">できたパッケージの誤りを調べる

  <p><manref name="lintian" section="1">をあなたの .changes ファイルに
  かけてみましょう。このプログラムはパッケージ化におけるよくある間違いを
  チェックしてくれます。実行するコマンドは:
  
  <p><example>
  lintian -i gentoo_0.9.12-1_i386.changes
  </example>
  
  <p>もしエラー(E: で始まる行)が表示されたなら、説明(N: の行)を読んで
  誤りを訂正し、dpkg-buildpackage を使って再構築してください。
  W: で始める行は単なる警告ですので、もし大丈夫だという確信があれば
  無視してしまっても結構です(しかし修正するに越したことはありません)。


<p>自分でパッケージをインストールして試してみましょう。自分の環境以外の
   マシンにもインストールしてみて、エラーが発生しないか注意深く観察して
   みてください。

  <p>プログラムの新版を元にしたバージョンを構築する際、 以下を実行して
  ください。

  <list>
  <item>旧バージョンからアップグレードする(Debian ディストリビューションの
  旧版に納められているバージョンからのアップグレードもやってみてください)
  <item>またダウングレードする。
  <item>新パッケージとしてインストールする(前のバージョンがインストール
  されていない状態からインストール)
  <item>削除して、またインストールして、さらに完全削除してみる。
  </list>

  <sect id="intend">アップロードする前に

  <p>さて、ここまででひとまずパッケージはでき上がりましたが、
  まだやることが一つ残っています。もし新しいパッケージをアップロード
  のであれば、アップロードの前に「Intent to package パッケージ名」
  という題の電子メールを <email/debian-devel@lists.debian.org/ に送ってください
  (メーリングリストへの加入の方法は<ref id="whereishelp">を参照)。
  このメールには、

  <list>
  <item>debian/copyright の内容
  <item>あなたの PGP 公開鍵
  <item>「dpkg -I あなたのバイナリパッケージ」の出力結果
  <item>「dpkg --contents あなたのバイナリパッケージ」の出力結果
  </list>  

  <p>を記載してください。こうすることで、debian-devel のメンバーが
  あなたのパッケージの著作権や、依存関係、Description などの最低限の
  チェックを簡単に行うことができます。

  <sect id="upload">パッケージをアップロードする

  <p>徹底的に新パッケージをテストして、debian-devel にお伺いもたてた
  ところで、これらのファイルを
  <manref name="dupload" section="1">を使って master.debian.or.jp に
  アップロードしましょう。
  まず dupload の設定ファイルを変更しましょう。最初にデフォルトを /etc から
  ホームディレクトリにコピーしてください：
    
  <p><example>
  cp /etc/dupload.conf ~/.dupload.conf
  </example>

<p>そしてファイル(~/.dupload.conf)を編集しましょう。
  もとのファイルに、以下を追加すればよいでしょう
  (これは訳者の設定なので適当に変えてください):
  <example>
  $cfg{"master-jp"} = {
        fqdn => "master.debian.or.jp",
        fullname=> "Masayuki Hatta",    
        incoming => "/pub/Incoming/private",
        mailto => "debian-devel-changes\@debian.or.jp",
        visibleuser=> "masayuki-h",
        visiblename => "geocities.co.jp",
	};
  </example>

  <p>プロバイダに接続し、もう一度あなたが /usr/local/src/gentoo 
  ディレクトリにいるかどうか確認し、このコマンドを実行してください:
  
  <p><example>
  dupload --to master-jp gentoo_0.9.12-1_i386.changes
  </example>

  <p>Dupload はパッケージをアップロードし、アップロードについての
  簡単な報告を<email/debian-devel-changes@debian.or.jp/に送信します。
  master.debian.or.jp に FTP でアクセスするには、ユーザ名 anonymous
  (デフォルト)、パスワードとしてあなたの正式なメールアドレスを送信しなければ
  なりませんが、システムの設定がまずいとあなたのローカルのログイン名
  とホスト名がパスワードとして送信されてしまい、接続できないという
  事態が生じます。こういう場合には、/usr/bin/dupload 中の

  <p><example>
  my $passwd = "$user\@$myhost"; # ...
  </example>
  
  <p>という部分を、
  
  <p><example>
  my $passwd = "masayuki-h\@geocities.co.jp";     # ...
  #my $passwd = "$user\@$myhost"; # ...  
  </example>

  <p>のように修正してください(もちろんご自分のメールアドレスに直してください)。
  なおメールを送るには smail などメール配送プログラムの設定が必要になります。
  ダイアルアップ接続の方は注意が必要です。

  <sect id="update">Updating the package

  <p>Let's say that a bug report was filed against your package, #54321,
  and it describes a problem that you can solve. To create a new Debian
  revision of the package, you need to:

  <list>
  <item>Correct the problem in the package source, of course.

  <item>Add a new revision in the Debian changelog file, with
  `dch -i`, and include a short description of the bug and the solution,
  followed by this: "Closes: #54321". That way, the bug report will be
  automagically closed by the archive maintenance software the moment your
  package gets accepted in the Debian archive.

  <item>Repeat what you did in <ref id="build">, <ref id="checkit">,
  and <ref id="upload">. The difference is that this time, original source
  archive won't be included, as it hasn't been changed and it already
  exists in the Debian archive.
  </list>

  <p>Now let's consider a different, a wee bit more complicated situation
  - a new upstream version was released, and of course you want it packaged.
  You need to do the following:

  <list>
  <item>Download the new sources and put the tarball (e.g. named
  `gentoo-0.9.13.tar.gz') in the directory above the old source tree
  (e.g. ~/debian/).

  <item>Enter the old source directory, and run:

  <example>
  uupdate -u gentoo-0.9.13.tar.gz
  </example>

  Of course, replace this filename with the name of your program's source
  archive. <manref name="uupdate" section="1"> will properly rename that
  tarball, try to apply all the changes from your previous .diff.gz file,
  and update the new debian/changelog file.

  <item>Change directory to `../gentoo-0.9.13', the new package source tree,
  and repeat what you did in <ref id="build">, <ref id="checkit">, and
  <ref id="upload">.
  </list>

  <p>Note that if you set up `debian/watch' file as described in
  <ref id="watch">, you can run <manref name="uscan" section="1"> to
  automagically look for revised sources, download them, and run uupdate.

  <sect id="helpme">相談するには

  <p>公共の場で質問する前に、まずはマニュアルを読みましょう。
  ここでいうマニュアルには、例えば /usr/doc/dpkg、/usr/doc/debian、
  /usr/doc/debhelper といったディレクトリに含まれる文書、この文書で
  言及されたプログラムに関する man/info ページなどが含まれます。
  バグレポートが舞い込んだ(そうホンモノのバグレポートです！)とき、
  それはあなたが<url name="Debian バグ追跡システム" id="http://www.debian.or.jp/Bugs/">をさまよってそこにある文書を読む時が来たということです。

  <p>日本では、Debian JP Project が主催する Debian JP 開発者メーリングリスト
  <email/debian-devel@debian.or.jp/に参加して質問してみるのが良い
  でしょう。このリストに加入するにはメール本文に「subscribe あなたのお名前
  (ローマ字で)」を書いて<email/debian-devel-ctl@debian.or.jp/ 
  に送り、あとは管理サーバの指示にしたがってください。
  Debian JP Project では他にもいくつかのメーリングリストを用意しています。
  詳しくは 
  <url name="メーリングリスト" id="http://www.debian.or.jp/MailingList.html">
  を参照してください。

  <p>万事うまく行ったとしても、神様にお祈りを忘れずに。
  なんでかって？考えても見てください、ほんの数時間の内に(あるいは数日かかるかも
  知れませんが)世界中のユーザがあなたのパッケージを使うようになるのです。
  そしてもしあなたがとんでもないヘマをしでかしていたら、きっと数知れぬ
  怒れる Debian ユーザからメール爆撃を食らうはめになるでしょう…
  まあ冗談ですけど :-)

  <p>楽に構えて、バグ報告に対応する準備をしましょう。それに、Debian ポリシー
  に完全に沿うようにするまでにはまだまだやるべきことがいっぱい残っています。
  (もう一度言いますが、<em>ちゃんとした文書</em>を読んで勉強しましょう)。
  好運を祈ります！
 </book>

</debiandoc>
